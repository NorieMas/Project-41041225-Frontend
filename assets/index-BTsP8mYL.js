(function(){const R=document.createElement("link").relList;if(R&&R.supports&&R.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))p(C);new MutationObserver(C=>{for(const x of C)if(x.type==="childList")for(const Z of x.addedNodes)Z.tagName==="LINK"&&Z.rel==="modulepreload"&&p(Z)}).observe(document,{childList:!0,subtree:!0});function r(C){const x={};return C.integrity&&(x.integrity=C.integrity),C.referrerPolicy&&(x.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?x.credentials="include":C.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function p(C){if(C.ep)return;C.ep=!0;const x=r(C);fetch(C.href,x)}})();var J$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uh(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var j_={exports:{}},Kd={},K_={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q$;function Cm(){if(q$)return It;q$=1;var m=Symbol.for("react.element"),R=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),Z=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Y=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ge=Symbol.iterator;function q(H){return H===null||typeof H!="object"?null:(H=ge&&H[ge]||H["@@iterator"],typeof H=="function"?H:null)}var Ie={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,Se={};function le(H,_e,it){this.props=H,this.context=_e,this.refs=Se,this.updater=it||Ie}le.prototype.isReactComponent={},le.prototype.setState=function(H,_e){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,_e,"setState")},le.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function pe(){}pe.prototype=le.prototype;function ke(H,_e,it){this.props=H,this.context=_e,this.refs=Se,this.updater=it||Ie}var Ne=ke.prototype=new pe;Ne.constructor=ke,ie(Ne,le.prototype),Ne.isPureReactComponent=!0;var ot=Array.isArray,ft=Object.prototype.hasOwnProperty,bt={current:null},at={key:!0,ref:!0,__self:!0,__source:!0};function Oe(H,_e,it){var Ye,rt={},Xe=null,mt=null;if(_e!=null)for(Ye in _e.ref!==void 0&&(mt=_e.ref),_e.key!==void 0&&(Xe=""+_e.key),_e)ft.call(_e,Ye)&&!at.hasOwnProperty(Ye)&&(rt[Ye]=_e[Ye]);var Re=arguments.length-2;if(Re===1)rt.children=it;else if(1<Re){for(var _t=Array(Re),ds=0;ds<Re;ds++)_t[ds]=arguments[ds+2];rt.children=_t}if(H&&H.defaultProps)for(Ye in Re=H.defaultProps,Re)rt[Ye]===void 0&&(rt[Ye]=Re[Ye]);return{$$typeof:m,type:H,key:Xe,ref:mt,props:rt,_owner:bt.current}}function pt(H,_e){return{$$typeof:m,type:H.type,key:_e,ref:H.ref,props:H.props,_owner:H._owner}}function Bt(H){return typeof H=="object"&&H!==null&&H.$$typeof===m}function Ls(H){var _e={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(it){return _e[it]})}var fs=/\/+/g;function os(H,_e){return typeof H=="object"&&H!==null&&H.key!=null?Ls(""+H.key):_e.toString(36)}function nt(H,_e,it,Ye,rt){var Xe=typeof H;(Xe==="undefined"||Xe==="boolean")&&(H=null);var mt=!1;if(H===null)mt=!0;else switch(Xe){case"string":case"number":mt=!0;break;case"object":switch(H.$$typeof){case m:case R:mt=!0}}if(mt)return mt=H,rt=rt(mt),H=Ye===""?"."+os(mt,0):Ye,ot(rt)?(it="",H!=null&&(it=H.replace(fs,"$&/")+"/"),nt(rt,_e,it,"",function(ds){return ds})):rt!=null&&(Bt(rt)&&(rt=pt(rt,it+(!rt.key||mt&&mt.key===rt.key?"":(""+rt.key).replace(fs,"$&/")+"/")+H)),_e.push(rt)),1;if(mt=0,Ye=Ye===""?".":Ye+":",ot(H))for(var Re=0;Re<H.length;Re++){Xe=H[Re];var _t=Ye+os(Xe,Re);mt+=nt(Xe,_e,it,_t,rt)}else if(_t=q(H),typeof _t=="function")for(H=_t.call(H),Re=0;!(Xe=H.next()).done;)Xe=Xe.value,_t=Ye+os(Xe,Re++),mt+=nt(Xe,_e,it,_t,rt);else if(Xe==="object")throw _e=String(H),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return mt}function St(H,_e,it){if(H==null)return H;var Ye=[],rt=0;return nt(H,Ye,"","",function(Xe){return _e.call(it,Xe,rt++)}),Ye}function Ft(H){if(H._status===-1){var _e=H._result;_e=_e(),_e.then(function(it){(H._status===0||H._status===-1)&&(H._status=1,H._result=it)},function(it){(H._status===0||H._status===-1)&&(H._status=2,H._result=it)}),H._status===-1&&(H._status=0,H._result=_e)}if(H._status===1)return H._result.default;throw H._result}var Lt={current:null},ee={transition:null},Je={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:ee,ReactCurrentOwner:bt};function W(){throw Error("act(...) is not supported in production builds of React.")}return It.Children={map:St,forEach:function(H,_e,it){St(H,function(){_e.apply(this,arguments)},it)},count:function(H){var _e=0;return St(H,function(){_e++}),_e},toArray:function(H){return St(H,function(_e){return _e})||[]},only:function(H){if(!Bt(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},It.Component=le,It.Fragment=r,It.Profiler=C,It.PureComponent=ke,It.StrictMode=p,It.Suspense=V,It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Je,It.act=W,It.cloneElement=function(H,_e,it){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ye=ie({},H.props),rt=H.key,Xe=H.ref,mt=H._owner;if(_e!=null){if(_e.ref!==void 0&&(Xe=_e.ref,mt=bt.current),_e.key!==void 0&&(rt=""+_e.key),H.type&&H.type.defaultProps)var Re=H.type.defaultProps;for(_t in _e)ft.call(_e,_t)&&!at.hasOwnProperty(_t)&&(Ye[_t]=_e[_t]===void 0&&Re!==void 0?Re[_t]:_e[_t])}var _t=arguments.length-2;if(_t===1)Ye.children=it;else if(1<_t){Re=Array(_t);for(var ds=0;ds<_t;ds++)Re[ds]=arguments[ds+2];Ye.children=Re}return{$$typeof:m,type:H.type,key:rt,ref:Xe,props:Ye,_owner:mt}},It.createContext=function(H){return H={$$typeof:Z,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:x,_context:H},H.Consumer=H},It.createElement=Oe,It.createFactory=function(H){var _e=Oe.bind(null,H);return _e.type=H,_e},It.createRef=function(){return{current:null}},It.forwardRef=function(H){return{$$typeof:j,render:H}},It.isValidElement=Bt,It.lazy=function(H){return{$$typeof:de,_payload:{_status:-1,_result:H},_init:Ft}},It.memo=function(H,_e){return{$$typeof:Y,type:H,compare:_e===void 0?null:_e}},It.startTransition=function(H){var _e=ee.transition;ee.transition={};try{H()}finally{ee.transition=_e}},It.unstable_act=W,It.useCallback=function(H,_e){return Lt.current.useCallback(H,_e)},It.useContext=function(H){return Lt.current.useContext(H)},It.useDebugValue=function(){},It.useDeferredValue=function(H){return Lt.current.useDeferredValue(H)},It.useEffect=function(H,_e){return Lt.current.useEffect(H,_e)},It.useId=function(){return Lt.current.useId()},It.useImperativeHandle=function(H,_e,it){return Lt.current.useImperativeHandle(H,_e,it)},It.useInsertionEffect=function(H,_e){return Lt.current.useInsertionEffect(H,_e)},It.useLayoutEffect=function(H,_e){return Lt.current.useLayoutEffect(H,_e)},It.useMemo=function(H,_e){return Lt.current.useMemo(H,_e)},It.useReducer=function(H,_e,it){return Lt.current.useReducer(H,_e,it)},It.useRef=function(H){return Lt.current.useRef(H)},It.useState=function(H){return Lt.current.useState(H)},It.useSyncExternalStore=function(H,_e,it){return Lt.current.useSyncExternalStore(H,_e,it)},It.useTransition=function(){return Lt.current.useTransition()},It.version="18.3.1",It}var Q$;function rg(){return Q$||(Q$=1,K_.exports=Cm()),K_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z$;function ym(){if(Z$)return Kd;Z$=1;var m=rg(),R=Symbol.for("react.element"),r=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,C=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function Z(j,V,Y){var de,ge={},q=null,Ie=null;Y!==void 0&&(q=""+Y),V.key!==void 0&&(q=""+V.key),V.ref!==void 0&&(Ie=V.ref);for(de in V)p.call(V,de)&&!x.hasOwnProperty(de)&&(ge[de]=V[de]);if(j&&j.defaultProps)for(de in V=j.defaultProps,V)ge[de]===void 0&&(ge[de]=V[de]);return{$$typeof:R,type:j,key:q,ref:Ie,props:ge,_owner:C.current}}return Kd.Fragment=r,Kd.jsx=Z,Kd.jsxs=Z,Kd}var ef;function vm(){return ef||(ef=1,j_.exports=ym()),j_.exports}var Ge=vm(),Fp={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Lm=Fp.exports,tf;function km(){return tf||(tf=1,function(m,R){(function(r,p){m.exports=p()})(Lm,function(){const r=new Map,p={set(T,a,g){r.has(T)||r.set(T,new Map);const S=r.get(T);S.has(a)||S.size===0?S.set(a,g):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(S.keys())[0]}.`)},get:(T,a)=>r.has(T)&&r.get(T).get(a)||null,remove(T,a){if(!r.has(T))return;const g=r.get(T);g.delete(a),g.size===0&&r.delete(T)}},C="transitionend",x=T=>(T&&window.CSS&&window.CSS.escape&&(T=T.replace(/#([^\s"#']+)/g,(a,g)=>`#${CSS.escape(g)}`)),T),Z=T=>{T.dispatchEvent(new Event(C))},j=T=>!(!T||typeof T!="object")&&(T.jquery!==void 0&&(T=T[0]),T.nodeType!==void 0),V=T=>j(T)?T.jquery?T[0]:T:typeof T=="string"&&T.length>0?document.querySelector(x(T)):null,Y=T=>{if(!j(T)||T.getClientRects().length===0)return!1;const a=getComputedStyle(T).getPropertyValue("visibility")==="visible",g=T.closest("details:not([open])");if(!g)return a;if(g!==T){const S=T.closest("summary");if(S&&S.parentNode!==g||S===null)return!1}return a},de=T=>!T||T.nodeType!==Node.ELEMENT_NODE||!!T.classList.contains("disabled")||(T.disabled!==void 0?T.disabled:T.hasAttribute("disabled")&&T.getAttribute("disabled")!=="false"),ge=T=>{if(!document.documentElement.attachShadow)return null;if(typeof T.getRootNode=="function"){const a=T.getRootNode();return a instanceof ShadowRoot?a:null}return T instanceof ShadowRoot?T:T.parentNode?ge(T.parentNode):null},q=()=>{},Ie=T=>{T.offsetHeight},ie=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Se=[],le=()=>document.documentElement.dir==="rtl",pe=T=>{var a;a=()=>{const g=ie();if(g){const S=T.NAME,M=g.fn[S];g.fn[S]=T.jQueryInterface,g.fn[S].Constructor=T,g.fn[S].noConflict=()=>(g.fn[S]=M,T.jQueryInterface)}},document.readyState==="loading"?(Se.length||document.addEventListener("DOMContentLoaded",()=>{for(const g of Se)g()}),Se.push(a)):a()},ke=(T,a=[],g=T)=>typeof T=="function"?T(...a):g,Ne=(T,a,g=!0)=>{if(!g)return void ke(T);const S=(Q=>{if(!Q)return 0;let{transitionDuration:oe,transitionDelay:be}=window.getComputedStyle(Q);const Be=Number.parseFloat(oe),Fe=Number.parseFloat(be);return Be||Fe?(oe=oe.split(",")[0],be=be.split(",")[0],1e3*(Number.parseFloat(oe)+Number.parseFloat(be))):0})(a)+5;let M=!1;const U=({target:Q})=>{Q===a&&(M=!0,a.removeEventListener(C,U),ke(T))};a.addEventListener(C,U),setTimeout(()=>{M||Z(a)},S)},ot=(T,a,g,S)=>{const M=T.length;let U=T.indexOf(a);return U===-1?!g&&S?T[M-1]:T[0]:(U+=g?1:-1,S&&(U=(U+M)%M),T[Math.max(0,Math.min(U,M-1))])},ft=/[^.]*(?=\..*)\.|.*/,bt=/\..*/,at=/::\d+$/,Oe={};let pt=1;const Bt={mouseenter:"mouseover",mouseleave:"mouseout"},Ls=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function fs(T,a){return a&&`${a}::${pt++}`||T.uidEvent||pt++}function os(T){const a=fs(T);return T.uidEvent=a,Oe[a]=Oe[a]||{},Oe[a]}function nt(T,a,g=null){return Object.values(T).find(S=>S.callable===a&&S.delegationSelector===g)}function St(T,a,g){const S=typeof a=="string",M=S?g:a||g;let U=Je(T);return Ls.has(U)||(U=T),[S,M,U]}function Ft(T,a,g,S,M){if(typeof a!="string"||!T)return;let[U,Q,oe]=St(a,g,S);a in Bt&&(Q=(Pe=>function(qe){if(!qe.relatedTarget||qe.relatedTarget!==qe.delegateTarget&&!qe.delegateTarget.contains(qe.relatedTarget))return Pe.call(this,qe)})(Q));const be=os(T),Be=be[oe]||(be[oe]={}),Fe=nt(Be,Q,U?g:null);if(Fe)return void(Fe.oneOff=Fe.oneOff&&M);const Ae=fs(Q,a.replace(ft,"")),Qe=U?function(ze,Pe,qe){return function lt(Ht){const Gt=ze.querySelectorAll(Pe);for(let{target:ht}=Ht;ht&&ht!==this;ht=ht.parentNode)for(const Et of Gt)if(Et===ht)return H(Ht,{delegateTarget:ht}),lt.oneOff&&W.off(ze,Ht.type,Pe,qe),qe.apply(ht,[Ht])}}(T,g,Q):function(ze,Pe){return function qe(lt){return H(lt,{delegateTarget:ze}),qe.oneOff&&W.off(ze,lt.type,Pe),Pe.apply(ze,[lt])}}(T,Q);Qe.delegationSelector=U?g:null,Qe.callable=Q,Qe.oneOff=M,Qe.uidEvent=Ae,Be[Ae]=Qe,T.addEventListener(oe,Qe,U)}function Lt(T,a,g,S,M){const U=nt(a[g],S,M);U&&(T.removeEventListener(g,U,!!M),delete a[g][U.uidEvent])}function ee(T,a,g,S){const M=a[g]||{};for(const[U,Q]of Object.entries(M))U.includes(S)&&Lt(T,a,g,Q.callable,Q.delegationSelector)}function Je(T){return T=T.replace(bt,""),Bt[T]||T}const W={on(T,a,g,S){Ft(T,a,g,S,!1)},one(T,a,g,S){Ft(T,a,g,S,!0)},off(T,a,g,S){if(typeof a!="string"||!T)return;const[M,U,Q]=St(a,g,S),oe=Q!==a,be=os(T),Be=be[Q]||{},Fe=a.startsWith(".");if(U===void 0){if(Fe)for(const Ae of Object.keys(be))ee(T,be,Ae,a.slice(1));for(const[Ae,Qe]of Object.entries(Be)){const ze=Ae.replace(at,"");oe&&!a.includes(ze)||Lt(T,be,Q,Qe.callable,Qe.delegationSelector)}}else{if(!Object.keys(Be).length)return;Lt(T,be,Q,U,M?g:null)}},trigger(T,a,g){if(typeof a!="string"||!T)return null;const S=ie();let M=null,U=!0,Q=!0,oe=!1;a!==Je(a)&&S&&(M=S.Event(a,g),S(T).trigger(M),U=!M.isPropagationStopped(),Q=!M.isImmediatePropagationStopped(),oe=M.isDefaultPrevented());const be=H(new Event(a,{bubbles:U,cancelable:!0}),g);return oe&&be.preventDefault(),Q&&T.dispatchEvent(be),be.defaultPrevented&&M&&M.preventDefault(),be}};function H(T,a={}){for(const[g,S]of Object.entries(a))try{T[g]=S}catch{Object.defineProperty(T,g,{configurable:!0,get:()=>S})}return T}function _e(T){if(T==="true")return!0;if(T==="false")return!1;if(T===Number(T).toString())return Number(T);if(T===""||T==="null")return null;if(typeof T!="string")return T;try{return JSON.parse(decodeURIComponent(T))}catch{return T}}function it(T){return T.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}const Ye={setDataAttribute(T,a,g){T.setAttribute(`data-bs-${it(a)}`,g)},removeDataAttribute(T,a){T.removeAttribute(`data-bs-${it(a)}`)},getDataAttributes(T){if(!T)return{};const a={},g=Object.keys(T.dataset).filter(S=>S.startsWith("bs")&&!S.startsWith("bsConfig"));for(const S of g){let M=S.replace(/^bs/,"");M=M.charAt(0).toLowerCase()+M.slice(1,M.length),a[M]=_e(T.dataset[S])}return a},getDataAttribute:(T,a)=>_e(T.getAttribute(`data-bs-${it(a)}`))};class rt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(a){return a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a}_mergeConfigObj(a,g){const S=j(g)?Ye.getDataAttribute(g,"config"):{};return{...this.constructor.Default,...typeof S=="object"?S:{},...j(g)?Ye.getDataAttributes(g):{},...typeof a=="object"?a:{}}}_typeCheckConfig(a,g=this.constructor.DefaultType){for(const[M,U]of Object.entries(g)){const Q=a[M],oe=j(Q)?"element":(S=Q)==null?`${S}`:Object.prototype.toString.call(S).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(U).test(oe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${M}" provided type "${oe}" but expected type "${U}".`)}var S}}class Xe extends rt{constructor(a,g){super(),(a=V(a))&&(this._element=a,this._config=this._getConfig(g),p.set(this._element,this.constructor.DATA_KEY,this))}dispose(){p.remove(this._element,this.constructor.DATA_KEY),W.off(this._element,this.constructor.EVENT_KEY);for(const a of Object.getOwnPropertyNames(this))this[a]=null}_queueCallback(a,g,S=!0){Ne(a,g,S)}_getConfig(a){return a=this._mergeConfigObj(a,this._element),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}static getInstance(a){return p.get(V(a),this.DATA_KEY)}static getOrCreateInstance(a,g={}){return this.getInstance(a)||new this(a,typeof g=="object"?g:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(a){return`${a}${this.EVENT_KEY}`}}const mt=T=>{let a=T.getAttribute("data-bs-target");if(!a||a==="#"){let g=T.getAttribute("href");if(!g||!g.includes("#")&&!g.startsWith("."))return null;g.includes("#")&&!g.startsWith("#")&&(g=`#${g.split("#")[1]}`),a=g&&g!=="#"?g.trim():null}return a?a.split(",").map(g=>x(g)).join(","):null},Re={find:(T,a=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(a,T)),findOne:(T,a=document.documentElement)=>Element.prototype.querySelector.call(a,T),children:(T,a)=>[].concat(...T.children).filter(g=>g.matches(a)),parents(T,a){const g=[];let S=T.parentNode.closest(a);for(;S;)g.push(S),S=S.parentNode.closest(a);return g},prev(T,a){let g=T.previousElementSibling;for(;g;){if(g.matches(a))return[g];g=g.previousElementSibling}return[]},next(T,a){let g=T.nextElementSibling;for(;g;){if(g.matches(a))return[g];g=g.nextElementSibling}return[]},focusableChildren(T){const a=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(g=>`${g}:not([tabindex^="-"])`).join(",");return this.find(a,T).filter(g=>!de(g)&&Y(g))},getSelectorFromElement(T){const a=mt(T);return a&&Re.findOne(a)?a:null},getElementFromSelector(T){const a=mt(T);return a?Re.findOne(a):null},getMultipleElementsFromSelector(T){const a=mt(T);return a?Re.find(a):[]}},_t=(T,a="hide")=>{const g=`click.dismiss${T.EVENT_KEY}`,S=T.NAME;W.on(document,g,`[data-bs-dismiss="${S}"]`,function(M){if(["A","AREA"].includes(this.tagName)&&M.preventDefault(),de(this))return;const U=Re.getElementFromSelector(this)||this.closest(`.${S}`);T.getOrCreateInstance(U)[a]()})},ds=".bs.alert",lo=`close${ds}`,xo=`closed${ds}`;class an extends Xe{static get NAME(){return"alert"}close(){if(W.trigger(this._element,lo).defaultPrevented)return;this._element.classList.remove("show");const a=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,a)}_destroyElement(){this._element.remove(),W.trigger(this._element,xo),this.dispose()}static jQueryInterface(a){return this.each(function(){const g=an.getOrCreateInstance(this);if(typeof a=="string"){if(g[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);g[a](this)}})}}_t(an,"close"),pe(an);const Mi='[data-bs-toggle="button"]';class ks extends Xe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(a){return this.each(function(){const g=ks.getOrCreateInstance(this);a==="toggle"&&g[a]()})}}W.on(document,"click.bs.button.data-api",Mi,T=>{T.preventDefault();const a=T.target.closest(Mi);ks.getOrCreateInstance(a).toggle()}),pe(ks);const ps=".bs.swipe",li=`touchstart${ps}`,ui=`touchmove${ps}`,Di=`touchend${ps}`,Ue=`pointerdown${ps}`,Tt=`pointerup${ps}`,Ot={endCallback:null,leftCallback:null,rightCallback:null},ci={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class As extends rt{constructor(a,g){super(),this._element=a,a&&As.isSupported()&&(this._config=this._getConfig(g),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ot}static get DefaultType(){return ci}static get NAME(){return"swipe"}dispose(){W.off(this._element,ps)}_start(a){this._supportPointerEvents?this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX):this._deltaX=a.touches[0].clientX}_end(a){this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX-this._deltaX),this._handleSwipe(),ke(this._config.endCallback)}_move(a){this._deltaX=a.touches&&a.touches.length>1?0:a.touches[0].clientX-this._deltaX}_handleSwipe(){const a=Math.abs(this._deltaX);if(a<=40)return;const g=a/this._deltaX;this._deltaX=0,g&&ke(g>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(W.on(this._element,Ue,a=>this._start(a)),W.on(this._element,Tt,a=>this._end(a)),this._element.classList.add("pointer-event")):(W.on(this._element,li,a=>this._start(a)),W.on(this._element,ui,a=>this._move(a)),W.on(this._element,Di,a=>this._end(a)))}_eventIsPointerPenTouch(a){return this._supportPointerEvents&&(a.pointerType==="pen"||a.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const k=".bs.carousel",Yn=".data-api",ts="next",Rt="prev",ms="left",K="right",ye=`slide${k}`,f=`slid${k}`,b=`keydown${k}`,D=`mouseenter${k}`,B=`mouseleave${k}`,$e=`dragstart${k}`,kt=`load${k}${Yn}`,Fs=`click${k}${Yn}`,Pn="carousel",ai="active",js=".active",$=".carousel-item",O=js+$,L={ArrowLeft:K,ArrowRight:ms},G={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ue={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Le extends Xe{constructor(a,g){super(a,g),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Pn&&this.cycle()}static get Default(){return G}static get DefaultType(){return ue}static get NAME(){return"carousel"}next(){this._slide(ts)}nextWhenVisible(){!document.hidden&&Y(this._element)&&this.next()}prev(){this._slide(Rt)}pause(){this._isSliding&&Z(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?W.one(this._element,f,()=>this.cycle()):this.cycle())}to(a){const g=this._getItems();if(a>g.length-1||a<0)return;if(this._isSliding)return void W.one(this._element,f,()=>this.to(a));const S=this._getItemIndex(this._getActive());if(S===a)return;const M=a>S?ts:Rt;this._slide(M,g[a])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(a){return a.defaultInterval=a.interval,a}_addEventListeners(){this._config.keyboard&&W.on(this._element,b,a=>this._keydown(a)),this._config.pause==="hover"&&(W.on(this._element,D,()=>this.pause()),W.on(this._element,B,()=>this._maybeEnableCycle())),this._config.touch&&As.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const g of Re.find(".carousel-item img",this._element))W.on(g,$e,S=>S.preventDefault());const a={leftCallback:()=>this._slide(this._directionToOrder(ms)),rightCallback:()=>this._slide(this._directionToOrder(K)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new As(this._element,a)}_keydown(a){if(/input|textarea/i.test(a.target.tagName))return;const g=L[a.key];g&&(a.preventDefault(),this._slide(this._directionToOrder(g)))}_getItemIndex(a){return this._getItems().indexOf(a)}_setActiveIndicatorElement(a){if(!this._indicatorsElement)return;const g=Re.findOne(js,this._indicatorsElement);g.classList.remove(ai),g.removeAttribute("aria-current");const S=Re.findOne(`[data-bs-slide-to="${a}"]`,this._indicatorsElement);S&&(S.classList.add(ai),S.setAttribute("aria-current","true"))}_updateInterval(){const a=this._activeElement||this._getActive();if(!a)return;const g=Number.parseInt(a.getAttribute("data-bs-interval"),10);this._config.interval=g||this._config.defaultInterval}_slide(a,g=null){if(this._isSliding)return;const S=this._getActive(),M=a===ts,U=g||ot(this._getItems(),S,M,this._config.wrap);if(U===S)return;const Q=this._getItemIndex(U),oe=Ae=>W.trigger(this._element,Ae,{relatedTarget:U,direction:this._orderToDirection(a),from:this._getItemIndex(S),to:Q});if(oe(ye).defaultPrevented||!S||!U)return;const be=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Q),this._activeElement=U;const Be=M?"carousel-item-start":"carousel-item-end",Fe=M?"carousel-item-next":"carousel-item-prev";U.classList.add(Fe),Ie(U),S.classList.add(Be),U.classList.add(Be),this._queueCallback(()=>{U.classList.remove(Be,Fe),U.classList.add(ai),S.classList.remove(ai,Fe,Be),this._isSliding=!1,oe(f)},S,this._isAnimated()),be&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Re.findOne(O,this._element)}_getItems(){return Re.find($,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(a){return le()?a===ms?Rt:ts:a===ms?ts:Rt}_orderToDirection(a){return le()?a===Rt?ms:K:a===Rt?K:ms}static jQueryInterface(a){return this.each(function(){const g=Le.getOrCreateInstance(this,a);if(typeof a!="number"){if(typeof a=="string"){if(g[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);g[a]()}}else g.to(a)})}}W.on(document,Fs,"[data-bs-slide], [data-bs-slide-to]",function(T){const a=Re.getElementFromSelector(this);if(!a||!a.classList.contains(Pn))return;T.preventDefault();const g=Le.getOrCreateInstance(a),S=this.getAttribute("data-bs-slide-to");return S?(g.to(S),void g._maybeEnableCycle()):Ye.getDataAttribute(this,"slide")==="next"?(g.next(),void g._maybeEnableCycle()):(g.prev(),void g._maybeEnableCycle())}),W.on(window,kt,()=>{const T=Re.find('[data-bs-ride="carousel"]');for(const a of T)Le.getOrCreateInstance(a)}),pe(Le);const Ke=".bs.collapse",hn=`show${Ke}`,jn=`shown${Ke}`,br=`hide${Ke}`,Kn=`hidden${Ke}`,Yl=`click${Ke}.data-api`,Pi="show",hi="collapse",uo="collapsing",Zu=`:scope .${hi} .${hi}`,ec='[data-bs-toggle="collapse"]',ch={parent:null,toggle:!0},sl={parent:"(null|element)",toggle:"boolean"};class xn extends Xe{constructor(a,g){super(a,g),this._isTransitioning=!1,this._triggerArray=[];const S=Re.find(ec);for(const M of S){const U=Re.getSelectorFromElement(M),Q=Re.find(U).filter(oe=>oe===this._element);U!==null&&Q.length&&this._triggerArray.push(M)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ch}static get DefaultType(){return sl}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let a=[];if(this._config.parent&&(a=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(M=>M!==this._element).map(M=>xn.getOrCreateInstance(M,{toggle:!1}))),a.length&&a[0]._isTransitioning||W.trigger(this._element,hn).defaultPrevented)return;for(const M of a)M.hide();const g=this._getDimension();this._element.classList.remove(hi),this._element.classList.add(uo),this._element.style[g]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const S=`scroll${g[0].toUpperCase()+g.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(uo),this._element.classList.add(hi,Pi),this._element.style[g]="",W.trigger(this._element,jn)},this._element,!0),this._element.style[g]=`${this._element[S]}px`}hide(){if(this._isTransitioning||!this._isShown()||W.trigger(this._element,br).defaultPrevented)return;const a=this._getDimension();this._element.style[a]=`${this._element.getBoundingClientRect()[a]}px`,Ie(this._element),this._element.classList.add(uo),this._element.classList.remove(hi,Pi);for(const g of this._triggerArray){const S=Re.getElementFromSelector(g);S&&!this._isShown(S)&&this._addAriaAndCollapsedClass([g],!1)}this._isTransitioning=!0,this._element.style[a]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(uo),this._element.classList.add(hi),W.trigger(this._element,Kn)},this._element,!0)}_isShown(a=this._element){return a.classList.contains(Pi)}_configAfterMerge(a){return a.toggle=!!a.toggle,a.parent=V(a.parent),a}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const a=this._getFirstLevelChildren(ec);for(const g of a){const S=Re.getElementFromSelector(g);S&&this._addAriaAndCollapsedClass([g],this._isShown(S))}}_getFirstLevelChildren(a){const g=Re.find(Zu,this._config.parent);return Re.find(a,this._config.parent).filter(S=>!g.includes(S))}_addAriaAndCollapsedClass(a,g){if(a.length)for(const S of a)S.classList.toggle("collapsed",!g),S.setAttribute("aria-expanded",g)}static jQueryInterface(a){const g={};return typeof a=="string"&&/show|hide/.test(a)&&(g.toggle=!1),this.each(function(){const S=xn.getOrCreateInstance(this,g);if(typeof a=="string"){if(S[a]===void 0)throw new TypeError(`No method named "${a}"`);S[a]()}})}}W.on(document,Yl,ec,function(T){(T.target.tagName==="A"||T.delegateTarget&&T.delegateTarget.tagName==="A")&&T.preventDefault();for(const a of Re.getMultipleElementsFromSelector(this))xn.getOrCreateInstance(a,{toggle:!1}).toggle()}),pe(xn);var ws="top",dn="bottom",Ks="right",Ns="left",nl="auto",xi=[ws,dn,Ks,Ns],co="start",ao="end",tc="clippingParents",ss="viewport",ho="popper",Sr="reference",Or=xi.reduce(function(T,a){return T.concat([a+"-"+co,a+"-"+ao])},[]),Bi=[].concat(xi,[nl]).reduce(function(T,a){return T.concat([a,a+"-"+co,a+"-"+ao])},[]),ta="beforeRead",Bo="read",po="afterRead",Sn="beforeMain",sa="main",Bn="afterMain",na="beforeWrite",_o="write",Ms="afterWrite",go=[ta,Bo,po,Sn,sa,Bn,na,_o,Ms];function pn(T){return T?(T.nodeName||"").toLowerCase():null}function jt(T){if(T==null)return window;if(T.toString()!=="[object Window]"){var a=T.ownerDocument;return a&&a.defaultView||window}return T}function Us(T){return T instanceof jt(T).Element||T instanceof Element}function Fn(T){return T instanceof jt(T).HTMLElement||T instanceof HTMLElement}function jl(T){return typeof ShadowRoot<"u"&&(T instanceof jt(T).ShadowRoot||T instanceof ShadowRoot)}const Fo={name:"applyStyles",enabled:!0,phase:"write",fn:function(T){var a=T.state;Object.keys(a.elements).forEach(function(g){var S=a.styles[g]||{},M=a.attributes[g]||{},U=a.elements[g];Fn(U)&&pn(U)&&(Object.assign(U.style,S),Object.keys(M).forEach(function(Q){var oe=M[Q];oe===!1?U.removeAttribute(Q):U.setAttribute(Q,oe===!0?"":oe)}))})},effect:function(T){var a=T.state,g={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,g.popper),a.styles=g,a.elements.arrow&&Object.assign(a.elements.arrow.style,g.arrow),function(){Object.keys(a.elements).forEach(function(S){var M=a.elements[S],U=a.attributes[S]||{},Q=Object.keys(a.styles.hasOwnProperty(S)?a.styles[S]:g[S]).reduce(function(oe,be){return oe[be]="",oe},{});Fn(M)&&pn(M)&&(Object.assign(M.style,Q),Object.keys(U).forEach(function(oe){M.removeAttribute(oe)}))})}},requires:["computeStyles"]};function Un(T){return T.split("-")[0]}var Fi=Math.max,Ui=Math.min,Hi=Math.round;function il(){var T=navigator.userAgentData;return T!=null&&T.brands&&Array.isArray(T.brands)?T.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function Ct(){return!/^((?!chrome|android).)*safari/i.test(il())}function Uo(T,a,g){a===void 0&&(a=!1),g===void 0&&(g=!1);var S=T.getBoundingClientRect(),M=1,U=1;a&&Fn(T)&&(M=T.offsetWidth>0&&Hi(S.width)/T.offsetWidth||1,U=T.offsetHeight>0&&Hi(S.height)/T.offsetHeight||1);var Q=(Us(T)?jt(T):window).visualViewport,oe=!Ct()&&g,be=(S.left+(oe&&Q?Q.offsetLeft:0))/M,Be=(S.top+(oe&&Q?Q.offsetTop:0))/U,Fe=S.width/M,Ae=S.height/U;return{width:Fe,height:Ae,top:Be,right:be+Fe,bottom:Be+Ae,left:be,x:be,y:Be}}function Kl(T){var a=Uo(T),g=T.offsetWidth,S=T.offsetHeight;return Math.abs(a.width-g)<=1&&(g=a.width),Math.abs(a.height-S)<=1&&(S=a.height),{x:T.offsetLeft,y:T.offsetTop,width:g,height:S}}function Rr(T,a){var g=a.getRootNode&&a.getRootNode();if(T.contains(a))return!0;if(g&&jl(g)){var S=a;do{if(S&&T.isSameNode(S))return!0;S=S.parentNode||S.host}while(S)}return!1}function di(T){return jt(T).getComputedStyle(T)}function Cr(T){return["table","td","th"].indexOf(pn(T))>=0}function Gi(T){return((Us(T)?T.ownerDocument:T.document)||window.document).documentElement}function Ho(T){return pn(T)==="html"?T:T.assignedSlot||T.parentNode||(jl(T)?T.host:null)||Gi(T)}function Go(T){return Fn(T)&&di(T).position!=="fixed"?T.offsetParent:null}function On(T){for(var a=jt(T),g=Go(T);g&&Cr(g)&&di(g).position==="static";)g=Go(g);return g&&(pn(g)==="html"||pn(g)==="body"&&di(g).position==="static")?a:g||function(S){var M=/firefox/i.test(il());if(/Trident/i.test(il())&&Fn(S)&&di(S).position==="fixed")return null;var U=Ho(S);for(jl(U)&&(U=U.host);Fn(U)&&["html","body"].indexOf(pn(U))<0;){var Q=di(U);if(Q.transform!=="none"||Q.perspective!=="none"||Q.contain==="paint"||["transform","perspective"].indexOf(Q.willChange)!==-1||M&&Q.willChange==="filter"||M&&Q.filter&&Q.filter!=="none")return U;U=U.parentNode}return null}(T)||a}function Jn(T){return["top","bottom"].indexOf(T)>=0?"x":"y"}function Hn(T,a,g){return Fi(T,Ui(a,g))}function $o(T){return Object.assign({},{top:0,right:0,bottom:0,left:0},T)}function pi(T,a){return a.reduce(function(g,S){return g[S]=T,g},{})}const qn={name:"arrow",enabled:!0,phase:"main",fn:function(T){var a,g=T.state,S=T.name,M=T.options,U=g.elements.arrow,Q=g.modifiersData.popperOffsets,oe=Un(g.placement),be=Jn(oe),Be=[Ns,Ks].indexOf(oe)>=0?"height":"width";if(U&&Q){var Fe=function(Mt,Dt){return $o(typeof(Mt=typeof Mt=="function"?Mt(Object.assign({},Dt.rects,{placement:Dt.placement})):Mt)!="number"?Mt:pi(Mt,xi))}(M.padding,g),Ae=Kl(U),Qe=be==="y"?ws:Ns,ze=be==="y"?dn:Ks,Pe=g.rects.reference[Be]+g.rects.reference[be]-Q[be]-g.rects.popper[Be],qe=Q[be]-g.rects.reference[be],lt=On(U),Ht=lt?be==="y"?lt.clientHeight||0:lt.clientWidth||0:0,Gt=Pe/2-qe/2,ht=Fe[Qe],Et=Ht-Ae[Be]-Fe[ze],ct=Ht/2-Ae[Be]/2+Gt,dt=Hn(ht,ct,Et),gt=be;g.modifiersData[S]=((a={})[gt]=dt,a.centerOffset=dt-ct,a)}},effect:function(T){var a=T.state,g=T.options.element,S=g===void 0?"[data-popper-arrow]":g;S!=null&&(typeof S!="string"||(S=a.elements.popper.querySelector(S)))&&Rr(a.elements.popper,S)&&(a.elements.arrow=S)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yr(T){return T.split("-")[1]}var sc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vo(T){var a,g=T.popper,S=T.popperRect,M=T.placement,U=T.variation,Q=T.offsets,oe=T.position,be=T.gpuAcceleration,Be=T.adaptive,Fe=T.roundOffsets,Ae=T.isFixed,Qe=Q.x,ze=Qe===void 0?0:Qe,Pe=Q.y,qe=Pe===void 0?0:Pe,lt=typeof Fe=="function"?Fe({x:ze,y:qe}):{x:ze,y:qe};ze=lt.x,qe=lt.y;var Ht=Q.hasOwnProperty("x"),Gt=Q.hasOwnProperty("y"),ht=Ns,Et=ws,ct=window;if(Be){var dt=On(g),gt="clientHeight",Mt="clientWidth";dt===jt(g)&&di(dt=Gi(g)).position!=="static"&&oe==="absolute"&&(gt="scrollHeight",Mt="scrollWidth"),(M===ws||(M===Ns||M===Ks)&&U===ao)&&(Et=dn,qe-=(Ae&&dt===ct&&ct.visualViewport?ct.visualViewport.height:dt[gt])-S.height,qe*=be?1:-1),M!==Ns&&(M!==ws&&M!==dn||U!==ao)||(ht=Ks,ze-=(Ae&&dt===ct&&ct.visualViewport?ct.visualViewport.width:dt[Mt])-S.width,ze*=be?1:-1)}var Dt,Jt=Object.assign({position:oe},Be&&sc),Gs=Fe===!0?function(vn,Ds){var Ps=vn.x,Ln=vn.y,Qt=Ds.devicePixelRatio||1;return{x:Hi(Ps*Qt)/Qt||0,y:Hi(Ln*Qt)/Qt||0}}({x:ze,y:qe},jt(g)):{x:ze,y:qe};return ze=Gs.x,qe=Gs.y,be?Object.assign({},Jt,((Dt={})[Et]=Gt?"0":"",Dt[ht]=Ht?"0":"",Dt.transform=(ct.devicePixelRatio||1)<=1?"translate("+ze+"px, "+qe+"px)":"translate3d("+ze+"px, "+qe+"px, 0)",Dt)):Object.assign({},Jt,((a={})[Et]=Gt?qe+"px":"",a[ht]=Ht?ze+"px":"",a.transform="",a))}const nc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(T){var a=T.state,g=T.options,S=g.gpuAcceleration,M=S===void 0||S,U=g.adaptive,Q=U===void 0||U,oe=g.roundOffsets,be=oe===void 0||oe,Be={placement:Un(a.placement),variation:yr(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:M,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,Vo(Object.assign({},Be,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:Q,roundOffsets:be})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,Vo(Object.assign({},Be,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:be})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}};var ol={passive:!0};const Qn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(T){var a=T.state,g=T.instance,S=T.options,M=S.scroll,U=M===void 0||M,Q=S.resize,oe=Q===void 0||Q,be=jt(a.elements.popper),Be=[].concat(a.scrollParents.reference,a.scrollParents.popper);return U&&Be.forEach(function(Fe){Fe.addEventListener("scroll",g.update,ol)}),oe&&be.addEventListener("resize",g.update,ol),function(){U&&Be.forEach(function(Fe){Fe.removeEventListener("scroll",g.update,ol)}),oe&&be.removeEventListener("resize",g.update,ol)}},data:{}};var ia={left:"right",right:"left",bottom:"top",top:"bottom"};function Wo(T){return T.replace(/left|right|bottom|top/g,function(a){return ia[a]})}var Js={start:"end",end:"start"};function vr(T){return T.replace(/start|end/g,function(a){return Js[a]})}function fo(T){var a=jt(T);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function Lr(T){return Uo(Gi(T)).left+fo(T).scrollLeft}function ic(T){var a=di(T),g=a.overflow,S=a.overflowX,M=a.overflowY;return/auto|scroll|overlay|hidden/.test(g+M+S)}function oa(T){return["html","body","#document"].indexOf(pn(T))>=0?T.ownerDocument.body:Fn(T)&&ic(T)?T:oa(Ho(T))}function Xo(T,a){var g;a===void 0&&(a=[]);var S=oa(T),M=S===((g=T.ownerDocument)==null?void 0:g.body),U=jt(S),Q=M?[U].concat(U.visualViewport||[],ic(S)?S:[]):S,oe=a.concat(Q);return M?oe:oe.concat(Xo(Ho(Q)))}function kr(T){return Object.assign({},T,{left:T.x,top:T.y,right:T.x+T.width,bottom:T.y+T.height})}function rl(T,a,g){return a===ss?kr(function(S,M){var U=jt(S),Q=Gi(S),oe=U.visualViewport,be=Q.clientWidth,Be=Q.clientHeight,Fe=0,Ae=0;if(oe){be=oe.width,Be=oe.height;var Qe=Ct();(Qe||!Qe&&M==="fixed")&&(Fe=oe.offsetLeft,Ae=oe.offsetTop)}return{width:be,height:Be,x:Fe+Lr(S),y:Ae}}(T,g)):Us(a)?function(S,M){var U=Uo(S,!1,M==="fixed");return U.top=U.top+S.clientTop,U.left=U.left+S.clientLeft,U.bottom=U.top+S.clientHeight,U.right=U.left+S.clientWidth,U.width=S.clientWidth,U.height=S.clientHeight,U.x=U.left,U.y=U.top,U}(a,g):kr(function(S){var M,U=Gi(S),Q=fo(S),oe=(M=S.ownerDocument)==null?void 0:M.body,be=Fi(U.scrollWidth,U.clientWidth,oe?oe.scrollWidth:0,oe?oe.clientWidth:0),Be=Fi(U.scrollHeight,U.clientHeight,oe?oe.scrollHeight:0,oe?oe.clientHeight:0),Fe=-Q.scrollLeft+Lr(S),Ae=-Q.scrollTop;return di(oe||U).direction==="rtl"&&(Fe+=Fi(U.clientWidth,oe?oe.clientWidth:0)-be),{width:be,height:Be,x:Fe,y:Ae}}(Gi(T)))}function _i(T){var a,g=T.reference,S=T.element,M=T.placement,U=M?Un(M):null,Q=M?yr(M):null,oe=g.x+g.width/2-S.width/2,be=g.y+g.height/2-S.height/2;switch(U){case ws:a={x:oe,y:g.y-S.height};break;case dn:a={x:oe,y:g.y+g.height};break;case Ks:a={x:g.x+g.width,y:be};break;case Ns:a={x:g.x-S.width,y:be};break;default:a={x:g.x,y:g.y}}var Be=U?Jn(U):null;if(Be!=null){var Fe=Be==="y"?"height":"width";switch(Q){case co:a[Be]=a[Be]-(g[Fe]/2-S[Fe]/2);break;case ao:a[Be]=a[Be]+(g[Fe]/2-S[Fe]/2)}}return a}function Hs(T,a){a===void 0&&(a={});var g=a,S=g.placement,M=S===void 0?T.placement:S,U=g.strategy,Q=U===void 0?T.strategy:U,oe=g.boundary,be=oe===void 0?tc:oe,Be=g.rootBoundary,Fe=Be===void 0?ss:Be,Ae=g.elementContext,Qe=Ae===void 0?ho:Ae,ze=g.altBoundary,Pe=ze!==void 0&&ze,qe=g.padding,lt=qe===void 0?0:qe,Ht=$o(typeof lt!="number"?lt:pi(lt,xi)),Gt=Qe===ho?Sr:ho,ht=T.rects.popper,Et=T.elements[Pe?Gt:Qe],ct=function(Ds,Ps,Ln,Qt){var kn=Ps==="clippingParents"?function(yt){var Xt=Xo(Ho(yt)),Vs=["absolute","fixed"].indexOf(di(yt).position)>=0&&Fn(yt)?On(yt):yt;return Us(Vs)?Xt.filter(function(Zt){return Us(Zt)&&Rr(Zt,Vs)&&pn(Zt)!=="body"}):[]}(Ds):[].concat(Ps),Os=[].concat(kn,[Ln]),Ji=Os[0],Ts=Os.reduce(function(yt,Xt){var Vs=rl(Ds,Xt,Qt);return yt.top=Fi(Vs.top,yt.top),yt.right=Ui(Vs.right,yt.right),yt.bottom=Ui(Vs.bottom,yt.bottom),yt.left=Fi(Vs.left,yt.left),yt},rl(Ds,Ji,Qt));return Ts.width=Ts.right-Ts.left,Ts.height=Ts.bottom-Ts.top,Ts.x=Ts.left,Ts.y=Ts.top,Ts}(Us(Et)?Et:Et.contextElement||Gi(T.elements.popper),be,Fe,Q),dt=Uo(T.elements.reference),gt=_i({reference:dt,element:ht,placement:M}),Mt=kr(Object.assign({},ht,gt)),Dt=Qe===ho?Mt:dt,Jt={top:ct.top-Dt.top+Ht.top,bottom:Dt.bottom-ct.bottom+Ht.bottom,left:ct.left-Dt.left+Ht.left,right:Dt.right-ct.right+Ht.right},Gs=T.modifiersData.offset;if(Qe===ho&&Gs){var vn=Gs[M];Object.keys(Jt).forEach(function(Ds){var Ps=[Ks,dn].indexOf(Ds)>=0?1:-1,Ln=[ws,dn].indexOf(Ds)>=0?"y":"x";Jt[Ds]+=vn[Ln]*Ps})}return Jt}function Jl(T,a){a===void 0&&(a={});var g=a,S=g.placement,M=g.boundary,U=g.rootBoundary,Q=g.padding,oe=g.flipVariations,be=g.allowedAutoPlacements,Be=be===void 0?Bi:be,Fe=yr(S),Ae=Fe?oe?Or:Or.filter(function(Pe){return yr(Pe)===Fe}):xi,Qe=Ae.filter(function(Pe){return Be.indexOf(Pe)>=0});Qe.length===0&&(Qe=Ae);var ze=Qe.reduce(function(Pe,qe){return Pe[qe]=Hs(T,{placement:qe,boundary:M,rootBoundary:U,padding:Q})[Un(qe)],Pe},{});return Object.keys(ze).sort(function(Pe,qe){return ze[Pe]-ze[qe]})}const ll={name:"flip",enabled:!0,phase:"main",fn:function(T){var a=T.state,g=T.options,S=T.name;if(!a.modifiersData[S]._skip){for(var M=g.mainAxis,U=M===void 0||M,Q=g.altAxis,oe=Q===void 0||Q,be=g.fallbackPlacements,Be=g.padding,Fe=g.boundary,Ae=g.rootBoundary,Qe=g.altBoundary,ze=g.flipVariations,Pe=ze===void 0||ze,qe=g.allowedAutoPlacements,lt=a.options.placement,Ht=Un(lt),Gt=be||(Ht!==lt&&Pe?function(yt){if(Un(yt)===nl)return[];var Xt=Wo(yt);return[vr(yt),Xt,vr(Xt)]}(lt):[Wo(lt)]),ht=[lt].concat(Gt).reduce(function(yt,Xt){return yt.concat(Un(Xt)===nl?Jl(a,{placement:Xt,boundary:Fe,rootBoundary:Ae,padding:Be,flipVariations:Pe,allowedAutoPlacements:qe}):Xt)},[]),Et=a.rects.reference,ct=a.rects.popper,dt=new Map,gt=!0,Mt=ht[0],Dt=0;Dt<ht.length;Dt++){var Jt=ht[Dt],Gs=Un(Jt),vn=yr(Jt)===co,Ds=[ws,dn].indexOf(Gs)>=0,Ps=Ds?"width":"height",Ln=Hs(a,{placement:Jt,boundary:Fe,rootBoundary:Ae,altBoundary:Qe,padding:Be}),Qt=Ds?vn?Ks:Ns:vn?dn:ws;Et[Ps]>ct[Ps]&&(Qt=Wo(Qt));var kn=Wo(Qt),Os=[];if(U&&Os.push(Ln[Gs]<=0),oe&&Os.push(Ln[Qt]<=0,Ln[kn]<=0),Os.every(function(yt){return yt})){Mt=Jt,gt=!1;break}dt.set(Jt,Os)}if(gt)for(var Ji=function(yt){var Xt=ht.find(function(Vs){var Zt=dt.get(Vs);if(Zt)return Zt.slice(0,yt).every(function(ni){return ni})});if(Xt)return Mt=Xt,"break"},Ts=Pe?3:1;Ts>0&&Ji(Ts)!=="break";Ts--);a.placement!==Mt&&(a.modifiersData[S]._skip=!0,a.placement=Mt,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function oc(T,a,g){return g===void 0&&(g={x:0,y:0}),{top:T.top-a.height-g.y,right:T.right-a.width+g.x,bottom:T.bottom-a.height+g.y,left:T.left-a.width-g.x}}function ul(T){return[ws,Ks,dn,Ns].some(function(a){return T[a]>=0})}const cl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(T){var a=T.state,g=T.name,S=a.rects.reference,M=a.rects.popper,U=a.modifiersData.preventOverflow,Q=Hs(a,{elementContext:"reference"}),oe=Hs(a,{altBoundary:!0}),be=oc(Q,S),Be=oc(oe,M,U),Fe=ul(be),Ae=ul(Be);a.modifiersData[g]={referenceClippingOffsets:be,popperEscapeOffsets:Be,isReferenceHidden:Fe,hasPopperEscaped:Ae},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":Fe,"data-popper-escaped":Ae})}},rc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(T){var a=T.state,g=T.options,S=T.name,M=g.offset,U=M===void 0?[0,0]:M,Q=Bi.reduce(function(Fe,Ae){return Fe[Ae]=function(Qe,ze,Pe){var qe=Un(Qe),lt=[Ns,ws].indexOf(qe)>=0?-1:1,Ht=typeof Pe=="function"?Pe(Object.assign({},ze,{placement:Qe})):Pe,Gt=Ht[0],ht=Ht[1];return Gt=Gt||0,ht=(ht||0)*lt,[Ns,Ks].indexOf(qe)>=0?{x:ht,y:Gt}:{x:Gt,y:ht}}(Ae,a.rects,U),Fe},{}),oe=Q[a.placement],be=oe.x,Be=oe.y;a.modifiersData.popperOffsets!=null&&(a.modifiersData.popperOffsets.x+=be,a.modifiersData.popperOffsets.y+=Be),a.modifiersData[S]=Q}},tn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(T){var a=T.state,g=T.name;a.modifiersData[g]=_i({reference:a.rects.reference,element:a.rects.popper,placement:a.placement})},data:{}},zo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(T){var a=T.state,g=T.options,S=T.name,M=g.mainAxis,U=M===void 0||M,Q=g.altAxis,oe=Q!==void 0&&Q,be=g.boundary,Be=g.rootBoundary,Fe=g.altBoundary,Ae=g.padding,Qe=g.tether,ze=Qe===void 0||Qe,Pe=g.tetherOffset,qe=Pe===void 0?0:Pe,lt=Hs(a,{boundary:be,rootBoundary:Be,padding:Ae,altBoundary:Fe}),Ht=Un(a.placement),Gt=yr(a.placement),ht=!Gt,Et=Jn(Ht),ct=Et==="x"?"y":"x",dt=a.modifiersData.popperOffsets,gt=a.rects.reference,Mt=a.rects.popper,Dt=typeof qe=="function"?qe(Object.assign({},a.rects,{placement:a.placement})):qe,Jt=typeof Dt=="number"?{mainAxis:Dt,altAxis:Dt}:Object.assign({mainAxis:0,altAxis:0},Dt),Gs=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,vn={x:0,y:0};if(dt){if(U){var Ds,Ps=Et==="y"?ws:Ns,Ln=Et==="y"?dn:Ks,Qt=Et==="y"?"height":"width",kn=dt[Et],Os=kn+lt[Ps],Ji=kn-lt[Ln],Ts=ze?-Mt[Qt]/2:0,yt=Gt===co?gt[Qt]:Mt[Qt],Xt=Gt===co?-Mt[Qt]:-gt[Qt],Vs=a.elements.arrow,Zt=ze&&Vs?Kl(Vs):{width:0,height:0},ni=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},fu=ni[Ps],xr=ni[Ln],An=Hn(0,gt[Qt],Zt[Qt]),qi=ht?gt[Qt]/2-Ts-An-fu-Jt.mainAxis:yt-An-fu-Jt.mainAxis,mu=ht?-gt[Qt]/2+Ts+An+xr+Jt.mainAxis:Xt+An+xr+Jt.mainAxis,Ol=a.elements.arrow&&On(a.elements.arrow),Si=Ol?Et==="y"?Ol.clientTop||0:Ol.clientLeft||0:0,Oi=(Ds=Gs==null?void 0:Gs[Et])!=null?Ds:0,Rl=kn+mu-Oi,Tu=Hn(ze?Ui(Os,kn+qi-Oi-Si):Os,kn,ze?Fi(Ji,Rl):Ji);dt[Et]=Tu,vn[Et]=Tu-kn}if(oe){var Br,Dc=Et==="x"?ws:Ns,Cl=Et==="x"?dn:Ks,en=dt[ct],Ro=ct==="y"?"height":"width",Fr=en+lt[Dc],Co=en-lt[Cl],yl=[ws,Ns].indexOf(Ht)!==-1,Qi=(Br=Gs==null?void 0:Gs[ct])!=null?Br:0,Pc=yl?Fr:en-gt[Ro]-Mt[Ro]-Qi+Jt.altAxis,Eu=yl?en+gt[Ro]+Mt[Ro]-Qi-Jt.altAxis:Co,es=ze&&yl?function(vl,Iu,Ur){var Hr=Hn(vl,Iu,Ur);return Hr>Ur?Ur:Hr}(Pc,en,Eu):Hn(ze?Pc:Fr,en,ze?Eu:Co);dt[ct]=es,vn[ct]=es-en}a.modifiersData[S]=vn}},requiresIfExists:["offset"]};function lc(T,a,g){g===void 0&&(g=!1);var S,M,U=Fn(a),Q=Fn(a)&&function(Ae){var Qe=Ae.getBoundingClientRect(),ze=Hi(Qe.width)/Ae.offsetWidth||1,Pe=Hi(Qe.height)/Ae.offsetHeight||1;return ze!==1||Pe!==1}(a),oe=Gi(a),be=Uo(T,Q,g),Be={scrollLeft:0,scrollTop:0},Fe={x:0,y:0};return(U||!U&&!g)&&((pn(a)!=="body"||ic(oe))&&(Be=(S=a)!==jt(S)&&Fn(S)?{scrollLeft:(M=S).scrollLeft,scrollTop:M.scrollTop}:fo(S)),Fn(a)?((Fe=Uo(a,!0)).x+=a.clientLeft,Fe.y+=a.clientTop):oe&&(Fe.x=Lr(oe))),{x:be.left+Be.scrollLeft-Fe.x,y:be.top+Be.scrollTop-Fe.y,width:be.width,height:be.height}}function al(T){var a=new Map,g=new Set,S=[];function M(U){g.add(U.name),[].concat(U.requires||[],U.requiresIfExists||[]).forEach(function(Q){if(!g.has(Q)){var oe=a.get(Q);oe&&M(oe)}}),S.push(U)}return T.forEach(function(U){a.set(U.name,U)}),T.forEach(function(U){g.has(U.name)||M(U)}),S}var uc={placement:"bottom",modifiers:[],strategy:"absolute"};function ql(){for(var T=arguments.length,a=new Array(T),g=0;g<T;g++)a[g]=arguments[g];return!a.some(function(S){return!(S&&typeof S.getBoundingClientRect=="function")})}function gi(T){T===void 0&&(T={});var a=T,g=a.defaultModifiers,S=g===void 0?[]:g,M=a.defaultOptions,U=M===void 0?uc:M;return function(Q,oe,be){be===void 0&&(be=U);var Be,Fe,Ae={placement:"bottom",orderedModifiers:[],options:Object.assign({},uc,U),modifiersData:{},elements:{reference:Q,popper:oe},attributes:{},styles:{}},Qe=[],ze=!1,Pe={state:Ae,setOptions:function(lt){var Ht=typeof lt=="function"?lt(Ae.options):lt;qe(),Ae.options=Object.assign({},U,Ae.options,Ht),Ae.scrollParents={reference:Us(Q)?Xo(Q):Q.contextElement?Xo(Q.contextElement):[],popper:Xo(oe)};var Gt,ht,Et=function(ct){var dt=al(ct);return go.reduce(function(gt,Mt){return gt.concat(dt.filter(function(Dt){return Dt.phase===Mt}))},[])}((Gt=[].concat(S,Ae.options.modifiers),ht=Gt.reduce(function(ct,dt){var gt=ct[dt.name];return ct[dt.name]=gt?Object.assign({},gt,dt,{options:Object.assign({},gt.options,dt.options),data:Object.assign({},gt.data,dt.data)}):dt,ct},{}),Object.keys(ht).map(function(ct){return ht[ct]})));return Ae.orderedModifiers=Et.filter(function(ct){return ct.enabled}),Ae.orderedModifiers.forEach(function(ct){var dt=ct.name,gt=ct.options,Mt=gt===void 0?{}:gt,Dt=ct.effect;if(typeof Dt=="function"){var Jt=Dt({state:Ae,name:dt,instance:Pe,options:Mt});Qe.push(Jt||function(){})}}),Pe.update()},forceUpdate:function(){if(!ze){var lt=Ae.elements,Ht=lt.reference,Gt=lt.popper;if(ql(Ht,Gt)){Ae.rects={reference:lc(Ht,On(Gt),Ae.options.strategy==="fixed"),popper:Kl(Gt)},Ae.reset=!1,Ae.placement=Ae.options.placement,Ae.orderedModifiers.forEach(function(Dt){return Ae.modifiersData[Dt.name]=Object.assign({},Dt.data)});for(var ht=0;ht<Ae.orderedModifiers.length;ht++)if(Ae.reset!==!0){var Et=Ae.orderedModifiers[ht],ct=Et.fn,dt=Et.options,gt=dt===void 0?{}:dt,Mt=Et.name;typeof ct=="function"&&(Ae=ct({state:Ae,options:gt,name:Mt,instance:Pe})||Ae)}else Ae.reset=!1,ht=-1}}},update:(Be=function(){return new Promise(function(lt){Pe.forceUpdate(),lt(Ae)})},function(){return Fe||(Fe=new Promise(function(lt){Promise.resolve().then(function(){Fe=void 0,lt(Be())})})),Fe}),destroy:function(){qe(),ze=!0}};if(!ql(Q,oe))return Pe;function qe(){Qe.forEach(function(lt){return lt()}),Qe=[]}return Pe.setOptions(be).then(function(lt){!ze&&be.onFirstUpdate&&be.onFirstUpdate(lt)}),Pe}}var Yo=gi(),Ql=gi({defaultModifiers:[Qn,tn,nc,Fo]}),mo=gi({defaultModifiers:[Qn,tn,nc,Fo,rc,ll,zo,qn,cl]});const cc=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Bn,afterRead:po,afterWrite:Ms,applyStyles:Fo,arrow:qn,auto:nl,basePlacements:xi,beforeMain:Sn,beforeRead:ta,beforeWrite:na,bottom:dn,clippingParents:tc,computeStyles:nc,createPopper:mo,createPopperBase:Yo,createPopperLite:Ql,detectOverflow:Hs,end:ao,eventListeners:Qn,flip:ll,hide:cl,left:Ns,main:sa,modifierPhases:go,offset:rc,placements:Bi,popper:ho,popperGenerator:gi,popperOffsets:tn,preventOverflow:zo,read:Bo,reference:Sr,right:Ks,start:co,top:ws,variationPlacements:Or,viewport:ss,write:_o},Symbol.toStringTag,{value:"Module"})),ac="dropdown",To=".bs.dropdown",jo=".data-api",hc="ArrowUp",dc="ArrowDown",ah=`hide${To}`,ra=`hidden${To}`,la=`show${To}`,pc=`shown${To}`,_c=`click${To}${jo}`,gc=`keydown${To}${jo}`,ua=`keyup${To}${jo}`,Ko="show",Vi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Zl=`${Vi}.${Ko}`,hl=".dropdown-menu",$c=le()?"top-end":"top-start",eu=le()?"top-start":"top-end",Wi=le()?"bottom-end":"bottom-start",ca=le()?"bottom-start":"bottom-end",aa=le()?"left-start":"right-start",tu=le()?"right-start":"left-start",ha={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},da={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Zn extends Xe{constructor(a,g){super(a,g),this._popper=null,this._parent=this._element.parentNode,this._menu=Re.next(this._element,hl)[0]||Re.prev(this._element,hl)[0]||Re.findOne(hl,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ha}static get DefaultType(){return da}static get NAME(){return ac}toggle(){return this._isShown()?this.hide():this.show()}show(){if(de(this._element)||this._isShown())return;const a={relatedTarget:this._element};if(!W.trigger(this._element,la,a).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const g of[].concat(...document.body.children))W.on(g,"mouseover",q);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ko),this._element.classList.add(Ko),W.trigger(this._element,pc,a)}}hide(){if(de(this._element)||!this._isShown())return;const a={relatedTarget:this._element};this._completeHide(a)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(a){if(!W.trigger(this._element,ah,a).defaultPrevented){if("ontouchstart"in document.documentElement)for(const g of[].concat(...document.body.children))W.off(g,"mouseover",q);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ko),this._element.classList.remove(Ko),this._element.setAttribute("aria-expanded","false"),Ye.removeDataAttribute(this._menu,"popper"),W.trigger(this._element,ra,a)}}_getConfig(a){if(typeof(a=super._getConfig(a)).reference=="object"&&!j(a.reference)&&typeof a.reference.getBoundingClientRect!="function")throw new TypeError(`${ac.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return a}_createPopper(){if(cc===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let a=this._element;this._config.reference==="parent"?a=this._parent:j(this._config.reference)?a=V(this._config.reference):typeof this._config.reference=="object"&&(a=this._config.reference);const g=this._getPopperConfig();this._popper=mo(a,this._menu,g)}_isShown(){return this._menu.classList.contains(Ko)}_getPlacement(){const a=this._parent;if(a.classList.contains("dropend"))return aa;if(a.classList.contains("dropstart"))return tu;if(a.classList.contains("dropup-center"))return"top";if(a.classList.contains("dropdown-center"))return"bottom";const g=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return a.classList.contains("dropup")?g?eu:$c:g?ca:Wi}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(g=>Number.parseInt(g,10)):typeof a=="function"?g=>a(g,this._element):a}_getPopperConfig(){const a={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ye.setDataAttribute(this._menu,"popper","static"),a.modifiers=[{name:"applyStyles",enabled:!1}]),{...a,...ke(this._config.popperConfig,[a])}}_selectMenuItem({key:a,target:g}){const S=Re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(M=>Y(M));S.length&&ot(S,g,a===dc,!S.includes(g)).focus()}static jQueryInterface(a){return this.each(function(){const g=Zn.getOrCreateInstance(this,a);if(typeof a=="string"){if(g[a]===void 0)throw new TypeError(`No method named "${a}"`);g[a]()}})}static clearMenus(a){if(a.button===2||a.type==="keyup"&&a.key!=="Tab")return;const g=Re.find(Zl);for(const S of g){const M=Zn.getInstance(S);if(!M||M._config.autoClose===!1)continue;const U=a.composedPath(),Q=U.includes(M._menu);if(U.includes(M._element)||M._config.autoClose==="inside"&&!Q||M._config.autoClose==="outside"&&Q||M._menu.contains(a.target)&&(a.type==="keyup"&&a.key==="Tab"||/input|select|option|textarea|form/i.test(a.target.tagName)))continue;const oe={relatedTarget:M._element};a.type==="click"&&(oe.clickEvent=a),M._completeHide(oe)}}static dataApiKeydownHandler(a){const g=/input|textarea/i.test(a.target.tagName),S=a.key==="Escape",M=[hc,dc].includes(a.key);if(!M&&!S||g&&!S)return;a.preventDefault();const U=this.matches(Vi)?this:Re.prev(this,Vi)[0]||Re.next(this,Vi)[0]||Re.findOne(Vi,a.delegateTarget.parentNode),Q=Zn.getOrCreateInstance(U);if(M)return a.stopPropagation(),Q.show(),void Q._selectMenuItem(a);Q._isShown()&&(a.stopPropagation(),Q.hide(),U.focus())}}W.on(document,gc,Vi,Zn.dataApiKeydownHandler),W.on(document,gc,hl,Zn.dataApiKeydownHandler),W.on(document,_c,Zn.clearMenus),W.on(document,ua,Zn.clearMenus),W.on(document,_c,Vi,function(T){T.preventDefault(),Zn.getOrCreateInstance(this).toggle()}),pe(Zn);const Ar="backdrop",Jo="show",pa=`mousedown.bs.${Ar}`,_a={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ga={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class fc extends rt{constructor(a){super(),this._config=this._getConfig(a),this._isAppended=!1,this._element=null}static get Default(){return _a}static get DefaultType(){return ga}static get NAME(){return Ar}show(a){if(!this._config.isVisible)return void ke(a);this._append();const g=this._getElement();this._config.isAnimated&&Ie(g),g.classList.add(Jo),this._emulateAnimation(()=>{ke(a)})}hide(a){this._config.isVisible?(this._getElement().classList.remove(Jo),this._emulateAnimation(()=>{this.dispose(),ke(a)})):ke(a)}dispose(){this._isAppended&&(W.off(this._element,pa),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const a=document.createElement("div");a.className=this._config.className,this._config.isAnimated&&a.classList.add("fade"),this._element=a}return this._element}_configAfterMerge(a){return a.rootElement=V(a.rootElement),a}_append(){if(this._isAppended)return;const a=this._getElement();this._config.rootElement.append(a),W.on(a,pa,()=>{ke(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(a){Ne(a,this._getElement(),this._config.isAnimated)}}const dl=".bs.focustrap",wr=`focusin${dl}`,qo=`keydown.tab${dl}`,mc="backward",pl={autofocus:!0,trapElement:null},Tc={autofocus:"boolean",trapElement:"element"};class Ec extends rt{constructor(a){super(),this._config=this._getConfig(a),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return pl}static get DefaultType(){return Tc}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),W.off(document,dl),W.on(document,wr,a=>this._handleFocusin(a)),W.on(document,qo,a=>this._handleKeydown(a)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,W.off(document,dl))}_handleFocusin(a){const{trapElement:g}=this._config;if(a.target===document||a.target===g||g.contains(a.target))return;const S=Re.focusableChildren(g);S.length===0?g.focus():this._lastTabNavDirection===mc?S[S.length-1].focus():S[0].focus()}_handleKeydown(a){a.key==="Tab"&&(this._lastTabNavDirection=a.shiftKey?mc:"forward")}}const Ic=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Qo=".sticky-top",Xi="padding-right",zi="margin-right";class Zo{constructor(){this._element=document.body}getWidth(){const a=document.documentElement.clientWidth;return Math.abs(window.innerWidth-a)}hide(){const a=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Xi,g=>g+a),this._setElementAttributes(Ic,Xi,g=>g+a),this._setElementAttributes(Qo,zi,g=>g-a)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Xi),this._resetElementAttributes(Ic,Xi),this._resetElementAttributes(Qo,zi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(a,g,S){const M=this.getWidth();this._applyManipulationCallback(a,U=>{if(U!==this._element&&window.innerWidth>U.clientWidth+M)return;this._saveInitialAttribute(U,g);const Q=window.getComputedStyle(U).getPropertyValue(g);U.style.setProperty(g,`${S(Number.parseFloat(Q))}px`)})}_saveInitialAttribute(a,g){const S=a.style.getPropertyValue(g);S&&Ye.setDataAttribute(a,g,S)}_resetElementAttributes(a,g){this._applyManipulationCallback(a,S=>{const M=Ye.getDataAttribute(S,g);M!==null?(Ye.removeDataAttribute(S,g),S.style.setProperty(g,M)):S.style.removeProperty(g)})}_applyManipulationCallback(a,g){if(j(a))g(a);else for(const S of Re.find(a,this._element))g(S)}}const Rn=".bs.modal",$a=`hide${Rn}`,bc=`hidePrevented${Rn}`,su=`hidden${Rn}`,Sc=`show${Rn}`,Oc=`shown${Rn}`,fa=`resize${Rn}`,ma=`click.dismiss${Rn}`,hh=`mousedown.dismiss${Rn}`,Nr=`keydown.dismiss${Rn}`,nu=`click${Rn}.data-api`,iu="modal-open",_n="show",Gn="modal-static",Rc={backdrop:!0,focus:!0,keyboard:!0},ou={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Yi extends Xe{constructor(a,g){super(a,g),this._dialog=Re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Zo,this._addEventListeners()}static get Default(){return Rc}static get DefaultType(){return ou}static get NAME(){return"modal"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||this._isTransitioning||W.trigger(this._element,Sc,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(iu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(a)))}hide(){this._isShown&&!this._isTransitioning&&(W.trigger(this._element,$a).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(_n),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){W.off(window,Rn),W.off(this._dialog,Rn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new fc({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ec({trapElement:this._element})}_showElement(a){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const g=Re.findOne(".modal-body",this._dialog);g&&(g.scrollTop=0),Ie(this._element),this._element.classList.add(_n),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,W.trigger(this._element,Oc,{relatedTarget:a})},this._dialog,this._isAnimated())}_addEventListeners(){W.on(this._element,Nr,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),W.on(window,fa,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),W.on(this._element,hh,a=>{W.one(this._element,ma,g=>{this._element===a.target&&this._element===g.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(iu),this._resetAdjustments(),this._scrollBar.reset(),W.trigger(this._element,su)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(W.trigger(this._element,bc).defaultPrevented)return;const a=this._element.scrollHeight>document.documentElement.clientHeight,g=this._element.style.overflowY;g==="hidden"||this._element.classList.contains(Gn)||(a||(this._element.style.overflowY="hidden"),this._element.classList.add(Gn),this._queueCallback(()=>{this._element.classList.remove(Gn),this._queueCallback(()=>{this._element.style.overflowY=g},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const a=this._element.scrollHeight>document.documentElement.clientHeight,g=this._scrollBar.getWidth(),S=g>0;if(S&&!a){const M=le()?"paddingLeft":"paddingRight";this._element.style[M]=`${g}px`}if(!S&&a){const M=le()?"paddingRight":"paddingLeft";this._element.style[M]=`${g}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(a,g){return this.each(function(){const S=Yi.getOrCreateInstance(this,a);if(typeof a=="string"){if(S[a]===void 0)throw new TypeError(`No method named "${a}"`);S[a](g)}})}}W.on(document,nu,'[data-bs-toggle="modal"]',function(T){const a=Re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&T.preventDefault(),W.one(a,Sc,S=>{S.defaultPrevented||W.one(a,su,()=>{Y(this)&&this.focus()})});const g=Re.findOne(".modal.show");g&&Yi.getInstance(g).hide(),Yi.getOrCreateInstance(a).toggle(this)}),_t(Yi),pe(Yi);const At=".bs.offcanvas",ru=".data-api",_l=`load${At}${ru}`,er="show",tr="showing",gl="hiding",Eo=".offcanvas.show",sr=`show${At}`,Cc=`shown${At}`,ji=`hide${At}`,$i=`hidePrevented${At}`,$l=`hidden${At}`,yc=`resize${At}`,lu=`click${At}${ru}`,Ta=`keydown.dismiss${At}`,Ea={backdrop:!0,keyboard:!0,scroll:!1},vc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class fi extends Xe{constructor(a,g){super(a,g),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ea}static get DefaultType(){return vc}static get NAME(){return"offcanvas"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||W.trigger(this._element,sr,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Zo().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(tr),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(er),this._element.classList.remove(tr),W.trigger(this._element,Cc,{relatedTarget:a})},this._element,!0))}hide(){this._isShown&&(W.trigger(this._element,ji).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(gl),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(er,gl),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Zo().reset(),W.trigger(this._element,$l)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const a=!!this._config.backdrop;return new fc({className:"offcanvas-backdrop",isVisible:a,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:a?()=>{this._config.backdrop!=="static"?this.hide():W.trigger(this._element,$i)}:null})}_initializeFocusTrap(){return new Ec({trapElement:this._element})}_addEventListeners(){W.on(this._element,Ta,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():W.trigger(this._element,$i))})}static jQueryInterface(a){return this.each(function(){const g=fi.getOrCreateInstance(this,a);if(typeof a=="string"){if(g[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);g[a](this)}})}}W.on(document,lu,'[data-bs-toggle="offcanvas"]',function(T){const a=Re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),de(this))return;W.one(a,$l,()=>{Y(this)&&this.focus()});const g=Re.findOne(Eo);g&&g!==a&&fi.getInstance(g).hide(),fi.getOrCreateInstance(a).toggle(this)}),W.on(window,_l,()=>{for(const T of Re.find(Eo))fi.getOrCreateInstance(T).show()}),W.on(window,yc,()=>{for(const T of Re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(T).position!=="fixed"&&fi.getOrCreateInstance(T).hide()}),_t(fi),pe(fi);const uu={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},fl=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Io=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Lc=(T,a)=>{const g=T.nodeName.toLowerCase();return a.includes(g)?!fl.has(g)||!!Io.test(T.nodeValue):a.filter(S=>S instanceof RegExp).some(S=>S.test(g))},kc={allowList:uu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},cu={entry:"(string|element|function|null)",selector:"(string|element)"};class Mr extends rt{constructor(a){super(),this._config=this._getConfig(a)}static get Default(){return kc}static get DefaultType(){return dh}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(a=>this._resolvePossibleFunction(a)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(a){return this._checkContent(a),this._config.content={...this._config.content,...a},this}toHtml(){const a=document.createElement("div");a.innerHTML=this._maybeSanitize(this._config.template);for(const[M,U]of Object.entries(this._config.content))this._setContent(a,U,M);const g=a.children[0],S=this._resolvePossibleFunction(this._config.extraClass);return S&&g.classList.add(...S.split(" ")),g}_typeCheckConfig(a){super._typeCheckConfig(a),this._checkContent(a.content)}_checkContent(a){for(const[g,S]of Object.entries(a))super._typeCheckConfig({selector:g,entry:S},cu)}_setContent(a,g,S){const M=Re.findOne(S,a);M&&((g=this._resolvePossibleFunction(g))?j(g)?this._putElementInTemplate(V(g),M):this._config.html?M.innerHTML=this._maybeSanitize(g):M.textContent=g:M.remove())}_maybeSanitize(a){return this._config.sanitize?function(g,S,M){if(!g.length)return g;if(M&&typeof M=="function")return M(g);const U=new window.DOMParser().parseFromString(g,"text/html"),Q=[].concat(...U.body.querySelectorAll("*"));for(const oe of Q){const be=oe.nodeName.toLowerCase();if(!Object.keys(S).includes(be)){oe.remove();continue}const Be=[].concat(...oe.attributes),Fe=[].concat(S["*"]||[],S[be]||[]);for(const Ae of Be)Lc(Ae,Fe)||oe.removeAttribute(Ae.nodeName)}return U.body.innerHTML}(a,this._config.allowList,this._config.sanitizeFn):a}_resolvePossibleFunction(a){return ke(a,[this])}_putElementInTemplate(a,g){if(this._config.html)return g.innerHTML="",void g.append(a);g.textContent=a.textContent}}const Ia=new Set(["sanitize","allowList","sanitizeFn"]),Dr="fade",nr="show",Kt=".modal",ir="hide.bs.modal",Ki="hover",mi="focus",ba={AUTO:"auto",TOP:"top",RIGHT:le()?"left":"right",BOTTOM:"bottom",LEFT:le()?"right":"left"},Ac={allowList:uu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ei={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ti extends Xe{constructor(a,g){if(cc===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(a,g),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ac}static get DefaultType(){return ei}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),W.off(this._element.closest(Kt),ir,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const a=W.trigger(this._element,this.constructor.eventName("show")),g=(ge(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(a.defaultPrevented||!g)return;this._disposePopper();const S=this._getTipElement();this._element.setAttribute("aria-describedby",S.getAttribute("id"));const{container:M}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(M.append(S),W.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(S),S.classList.add(nr),"ontouchstart"in document.documentElement)for(const U of[].concat(...document.body.children))W.on(U,"mouseover",q);this._queueCallback(()=>{W.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!W.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(nr),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))W.off(a,"mouseover",q);this._activeTrigger.click=!1,this._activeTrigger[mi]=!1,this._activeTrigger[Ki]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),W.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(a){const g=this._getTemplateFactory(a).toHtml();if(!g)return null;g.classList.remove(Dr,nr),g.classList.add(`bs-${this.constructor.NAME}-auto`);const S=(M=>{do M+=Math.floor(1e6*Math.random());while(document.getElementById(M));return M})(this.constructor.NAME).toString();return g.setAttribute("id",S),this._isAnimated()&&g.classList.add(Dr),g}setContent(a){this._newContent=a,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(a){return this._templateFactory?this._templateFactory.changeContent(a):this._templateFactory=new Mr({...this._config,content:a,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(a){return this.constructor.getOrCreateInstance(a.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Dr)}_isShown(){return this.tip&&this.tip.classList.contains(nr)}_createPopper(a){const g=ke(this._config.placement,[this,a,this._element]),S=ba[g.toUpperCase()];return mo(this._element,a,this._getPopperConfig(S))}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(g=>Number.parseInt(g,10)):typeof a=="function"?g=>a(g,this._element):a}_resolvePossibleFunction(a){return ke(a,[this._element])}_getPopperConfig(a){const g={placement:a,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:S=>{this._getTipElement().setAttribute("data-popper-placement",S.state.placement)}}]};return{...g,...ke(this._config.popperConfig,[g])}}_setListeners(){const a=this._config.trigger.split(" ");for(const g of a)if(g==="click")W.on(this._element,this.constructor.eventName("click"),this._config.selector,S=>{this._initializeOnDelegatedTarget(S).toggle()});else if(g!=="manual"){const S=g===Ki?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),M=g===Ki?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");W.on(this._element,S,this._config.selector,U=>{const Q=this._initializeOnDelegatedTarget(U);Q._activeTrigger[U.type==="focusin"?mi:Ki]=!0,Q._enter()}),W.on(this._element,M,this._config.selector,U=>{const Q=this._initializeOnDelegatedTarget(U);Q._activeTrigger[U.type==="focusout"?mi:Ki]=Q._element.contains(U.relatedTarget),Q._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},W.on(this._element.closest(Kt),ir,this._hideModalHandler)}_fixTitle(){const a=this._element.getAttribute("title");a&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",a),this._element.setAttribute("data-bs-original-title",a),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(a,g){clearTimeout(this._timeout),this._timeout=setTimeout(a,g)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(a){const g=Ye.getDataAttributes(this._element);for(const S of Object.keys(g))Ia.has(S)&&delete g[S];return a={...g,...typeof a=="object"&&a?a:{}},a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a.container=a.container===!1?document.body:V(a.container),typeof a.delay=="number"&&(a.delay={show:a.delay,hide:a.delay}),typeof a.title=="number"&&(a.title=a.title.toString()),typeof a.content=="number"&&(a.content=a.content.toString()),a}_getDelegateConfig(){const a={};for(const[g,S]of Object.entries(this._config))this.constructor.Default[g]!==S&&(a[g]=S);return a.selector=!1,a.trigger="manual",a}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(a){return this.each(function(){const g=ti.getOrCreateInstance(this,a);if(typeof a=="string"){if(g[a]===void 0)throw new TypeError(`No method named "${a}"`);g[a]()}})}}pe(ti);const gn={...ti.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Sa={...ti.DefaultType,content:"(null|string|element|function)"};class au extends ti{static get Default(){return gn}static get DefaultType(){return Sa}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(a){return this.each(function(){const g=au.getOrCreateInstance(this,a);if(typeof a=="string"){if(g[a]===void 0)throw new TypeError(`No method named "${a}"`);g[a]()}})}}pe(au);const hu=".bs.scrollspy",Oa=`activate${hu}`,Ti=`click${hu}`,ml=`load${hu}.data-api`,bo="active",Tl="[href]",du=".nav-link",wc=`${du}, .nav-item > ${du}, .list-group-item`,ph={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Nc={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class El extends Xe{constructor(a,g){super(a,g),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ph}static get DefaultType(){return Nc}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const a of this._observableSections.values())this._observer.observe(a)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(a){return a.target=V(a.target)||document.body,a.rootMargin=a.offset?`${a.offset}px 0px -30%`:a.rootMargin,typeof a.threshold=="string"&&(a.threshold=a.threshold.split(",").map(g=>Number.parseFloat(g))),a}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(W.off(this._config.target,Ti),W.on(this._config.target,Ti,Tl,a=>{const g=this._observableSections.get(a.target.hash);if(g){a.preventDefault();const S=this._rootElement||window,M=g.offsetTop-this._element.offsetTop;if(S.scrollTo)return void S.scrollTo({top:M,behavior:"smooth"});S.scrollTop=M}}))}_getNewObserver(){const a={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(g=>this._observerCallback(g),a)}_observerCallback(a){const g=Q=>this._targetLinks.get(`#${Q.target.id}`),S=Q=>{this._previousScrollData.visibleEntryTop=Q.target.offsetTop,this._process(g(Q))},M=(this._rootElement||document.documentElement).scrollTop,U=M>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=M;for(const Q of a){if(!Q.isIntersecting){this._activeTarget=null,this._clearActiveClass(g(Q));continue}const oe=Q.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(U&&oe){if(S(Q),!M)return}else U||oe||S(Q)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const a=Re.find(Tl,this._config.target);for(const g of a){if(!g.hash||de(g))continue;const S=Re.findOne(decodeURI(g.hash),this._element);Y(S)&&(this._targetLinks.set(decodeURI(g.hash),g),this._observableSections.set(g.hash,S))}}_process(a){this._activeTarget!==a&&(this._clearActiveClass(this._config.target),this._activeTarget=a,a.classList.add(bo),this._activateParents(a),W.trigger(this._element,Oa,{relatedTarget:a}))}_activateParents(a){if(a.classList.contains("dropdown-item"))Re.findOne(".dropdown-toggle",a.closest(".dropdown")).classList.add(bo);else for(const g of Re.parents(a,".nav, .list-group"))for(const S of Re.prev(g,wc))S.classList.add(bo)}_clearActiveClass(a){a.classList.remove(bo);const g=Re.find(`${Tl}.${bo}`,a);for(const S of g)S.classList.remove(bo)}static jQueryInterface(a){return this.each(function(){const g=El.getOrCreateInstance(this,a);if(typeof a=="string"){if(g[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);g[a]()}})}}W.on(window,ml,()=>{for(const T of Re.find('[data-bs-spy="scroll"]'))El.getOrCreateInstance(T)}),pe(El);const or=".bs.tab",Il=`hide${or}`,So=`hidden${or}`,Ra=`show${or}`,rr=`shown${or}`,Vn=`click${or}`,Pr=`keydown${or}`,si=`load${or}`,pu="ArrowLeft",Mc="ArrowRight",bl="ArrowUp",Cn="ArrowDown",$n="Home",sn="End",Ei="active",_u="fade",Oo="show",Ii=".dropdown-toggle",Ut=`:not(${Ii})`,Wt='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',bi=`.nav-link${Ut}, .list-group-item${Ut}, [role="tab"]${Ut}, ${Wt}`,qs=`.${Ei}[data-bs-toggle="tab"], .${Ei}[data-bs-toggle="pill"], .${Ei}[data-bs-toggle="list"]`;class _s extends Xe{constructor(a){super(a),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),W.on(this._element,Pr,g=>this._keydown(g)))}static get NAME(){return"tab"}show(){const a=this._element;if(this._elemIsActive(a))return;const g=this._getActiveElem(),S=g?W.trigger(g,Il,{relatedTarget:a}):null;W.trigger(a,Ra,{relatedTarget:g}).defaultPrevented||S&&S.defaultPrevented||(this._deactivate(g,a),this._activate(a,g))}_activate(a,g){a&&(a.classList.add(Ei),this._activate(Re.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.removeAttribute("tabindex"),a.setAttribute("aria-selected",!0),this._toggleDropDown(a,!0),W.trigger(a,rr,{relatedTarget:g})):a.classList.add(Oo)},a,a.classList.contains(_u)))}_deactivate(a,g){a&&(a.classList.remove(Ei),a.blur(),this._deactivate(Re.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.setAttribute("aria-selected",!1),a.setAttribute("tabindex","-1"),this._toggleDropDown(a,!1),W.trigger(a,So,{relatedTarget:g})):a.classList.remove(Oo)},a,a.classList.contains(_u)))}_keydown(a){if(![pu,Mc,bl,Cn,$n,sn].includes(a.key))return;a.stopPropagation(),a.preventDefault();const g=this._getChildren().filter(M=>!de(M));let S;if([$n,sn].includes(a.key))S=g[a.key===$n?0:g.length-1];else{const M=[Mc,Cn].includes(a.key);S=ot(g,a.target,M,!0)}S&&(S.focus({preventScroll:!0}),_s.getOrCreateInstance(S).show())}_getChildren(){return Re.find(bi,this._parent)}_getActiveElem(){return this._getChildren().find(a=>this._elemIsActive(a))||null}_setInitialAttributes(a,g){this._setAttributeIfNotExists(a,"role","tablist");for(const S of g)this._setInitialAttributesOnChild(S)}_setInitialAttributesOnChild(a){a=this._getInnerElement(a);const g=this._elemIsActive(a),S=this._getOuterElement(a);a.setAttribute("aria-selected",g),S!==a&&this._setAttributeIfNotExists(S,"role","presentation"),g||a.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(a,"role","tab"),this._setInitialAttributesOnTargetPanel(a)}_setInitialAttributesOnTargetPanel(a){const g=Re.getElementFromSelector(a);g&&(this._setAttributeIfNotExists(g,"role","tabpanel"),a.id&&this._setAttributeIfNotExists(g,"aria-labelledby",`${a.id}`))}_toggleDropDown(a,g){const S=this._getOuterElement(a);if(!S.classList.contains("dropdown"))return;const M=(U,Q)=>{const oe=Re.findOne(U,S);oe&&oe.classList.toggle(Q,g)};M(Ii,Ei),M(".dropdown-menu",Oo),S.setAttribute("aria-expanded",g)}_setAttributeIfNotExists(a,g,S){a.hasAttribute(g)||a.setAttribute(g,S)}_elemIsActive(a){return a.classList.contains(Ei)}_getInnerElement(a){return a.matches(bi)?a:Re.findOne(bi,a)}_getOuterElement(a){return a.closest(".nav-item, .list-group-item")||a}static jQueryInterface(a){return this.each(function(){const g=_s.getOrCreateInstance(this);if(typeof a=="string"){if(g[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);g[a]()}})}}W.on(document,Vn,Wt,function(T){["A","AREA"].includes(this.tagName)&&T.preventDefault(),de(this)||_s.getOrCreateInstance(this).show()}),W.on(window,si,()=>{for(const T of Re.find(qs))_s.getOrCreateInstance(T)}),pe(_s);const Qs=".bs.toast",lr=`mouseover${Qs}`,Zs=`mouseout${Qs}`,gu=`focusin${Qs}`,Ca=`focusout${Qs}`,ya=`hide${Qs}`,$u=`hidden${Qs}`,He=`show${Qs}`,gs=`shown${Qs}`,cs="hide",wt="show",yn="showing",Sl={animation:"boolean",autohide:"boolean",delay:"number"},ve={animation:!0,autohide:!0,delay:5e3};class Nt extends Xe{constructor(a,g){super(a,g),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ve}static get DefaultType(){return Sl}static get NAME(){return"toast"}show(){W.trigger(this._element,He).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(cs),Ie(this._element),this._element.classList.add(wt,yn),this._queueCallback(()=>{this._element.classList.remove(yn),W.trigger(this._element,gs),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(W.trigger(this._element,ya).defaultPrevented||(this._element.classList.add(yn),this._queueCallback(()=>{this._element.classList.add(cs),this._element.classList.remove(yn,wt),W.trigger(this._element,$u)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(wt),super.dispose()}isShown(){return this._element.classList.contains(wt)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(a,g){switch(a.type){case"mouseover":case"mouseout":this._hasMouseInteraction=g;break;case"focusin":case"focusout":this._hasKeyboardInteraction=g}if(g)return void this._clearTimeout();const S=a.relatedTarget;this._element===S||this._element.contains(S)||this._maybeScheduleHide()}_setListeners(){W.on(this._element,lr,a=>this._onInteraction(a,!0)),W.on(this._element,Zs,a=>this._onInteraction(a,!1)),W.on(this._element,gu,a=>this._onInteraction(a,!0)),W.on(this._element,Ca,a=>this._onInteraction(a,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(a){return this.each(function(){const g=Nt.getOrCreateInstance(this,a);if(typeof a=="string"){if(g[a]===void 0)throw new TypeError(`No method named "${a}"`);g[a](this)}})}}return _t(Nt),pe(Nt),{Alert:an,Button:ks,Carousel:Le,Collapse:xn,Dropdown:Zn,Modal:Yi,Offcanvas:fi,Popover:au,ScrollSpy:El,Tab:_s,Toast:Nt,Tooltip:ti}})}(Fp)),Fp.exports}km();var he=rg();const Ss=uh(he);var xp={},J_={exports:{}},ro={},q_={exports:{}},Q_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf;function Am(){return sf||(sf=1,function(m){function R(ee,Je){var W=ee.length;ee.push(Je);e:for(;0<W;){var H=W-1>>>1,_e=ee[H];if(0<C(_e,Je))ee[H]=Je,ee[W]=_e,W=H;else break e}}function r(ee){return ee.length===0?null:ee[0]}function p(ee){if(ee.length===0)return null;var Je=ee[0],W=ee.pop();if(W!==Je){ee[0]=W;e:for(var H=0,_e=ee.length,it=_e>>>1;H<it;){var Ye=2*(H+1)-1,rt=ee[Ye],Xe=Ye+1,mt=ee[Xe];if(0>C(rt,W))Xe<_e&&0>C(mt,rt)?(ee[H]=mt,ee[Xe]=W,H=Xe):(ee[H]=rt,ee[Ye]=W,H=Ye);else if(Xe<_e&&0>C(mt,W))ee[H]=mt,ee[Xe]=W,H=Xe;else break e}}return Je}function C(ee,Je){var W=ee.sortIndex-Je.sortIndex;return W!==0?W:ee.id-Je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;m.unstable_now=function(){return x.now()}}else{var Z=Date,j=Z.now();m.unstable_now=function(){return Z.now()-j}}var V=[],Y=[],de=1,ge=null,q=3,Ie=!1,ie=!1,Se=!1,le=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,ke=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ne(ee){for(var Je=r(Y);Je!==null;){if(Je.callback===null)p(Y);else if(Je.startTime<=ee)p(Y),Je.sortIndex=Je.expirationTime,R(V,Je);else break;Je=r(Y)}}function ot(ee){if(Se=!1,Ne(ee),!ie)if(r(V)!==null)ie=!0,Ft(ft);else{var Je=r(Y);Je!==null&&Lt(ot,Je.startTime-ee)}}function ft(ee,Je){ie=!1,Se&&(Se=!1,pe(Oe),Oe=-1),Ie=!0;var W=q;try{for(Ne(Je),ge=r(V);ge!==null&&(!(ge.expirationTime>Je)||ee&&!Ls());){var H=ge.callback;if(typeof H=="function"){ge.callback=null,q=ge.priorityLevel;var _e=H(ge.expirationTime<=Je);Je=m.unstable_now(),typeof _e=="function"?ge.callback=_e:ge===r(V)&&p(V),Ne(Je)}else p(V);ge=r(V)}if(ge!==null)var it=!0;else{var Ye=r(Y);Ye!==null&&Lt(ot,Ye.startTime-Je),it=!1}return it}finally{ge=null,q=W,Ie=!1}}var bt=!1,at=null,Oe=-1,pt=5,Bt=-1;function Ls(){return!(m.unstable_now()-Bt<pt)}function fs(){if(at!==null){var ee=m.unstable_now();Bt=ee;var Je=!0;try{Je=at(!0,ee)}finally{Je?os():(bt=!1,at=null)}}else bt=!1}var os;if(typeof ke=="function")os=function(){ke(fs)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,St=nt.port2;nt.port1.onmessage=fs,os=function(){St.postMessage(null)}}else os=function(){le(fs,0)};function Ft(ee){at=ee,bt||(bt=!0,os())}function Lt(ee,Je){Oe=le(function(){ee(m.unstable_now())},Je)}m.unstable_IdlePriority=5,m.unstable_ImmediatePriority=1,m.unstable_LowPriority=4,m.unstable_NormalPriority=3,m.unstable_Profiling=null,m.unstable_UserBlockingPriority=2,m.unstable_cancelCallback=function(ee){ee.callback=null},m.unstable_continueExecution=function(){ie||Ie||(ie=!0,Ft(ft))},m.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<ee?Math.floor(1e3/ee):5},m.unstable_getCurrentPriorityLevel=function(){return q},m.unstable_getFirstCallbackNode=function(){return r(V)},m.unstable_next=function(ee){switch(q){case 1:case 2:case 3:var Je=3;break;default:Je=q}var W=q;q=Je;try{return ee()}finally{q=W}},m.unstable_pauseExecution=function(){},m.unstable_requestPaint=function(){},m.unstable_runWithPriority=function(ee,Je){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var W=q;q=ee;try{return Je()}finally{q=W}},m.unstable_scheduleCallback=function(ee,Je,W){var H=m.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?H+W:H):W=H,ee){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=W+_e,ee={id:de++,callback:Je,priorityLevel:ee,startTime:W,expirationTime:_e,sortIndex:-1},W>H?(ee.sortIndex=W,R(Y,ee),r(V)===null&&ee===r(Y)&&(Se?(pe(Oe),Oe=-1):Se=!0,Lt(ot,W-H))):(ee.sortIndex=_e,R(V,ee),ie||Ie||(ie=!0,Ft(ft))),ee},m.unstable_shouldYield=Ls,m.unstable_wrapCallback=function(ee){var Je=q;return function(){var W=q;q=Je;try{return ee.apply(this,arguments)}finally{q=W}}}}(Q_)),Q_}var nf;function wm(){return nf||(nf=1,q_.exports=Am()),q_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of;function Nm(){if(of)return ro;of=1;var m=rg(),R=wm();function r(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,C={};function x(n,i){Z(n,i),Z(n+"Capture",i)}function Z(n,i){for(C[n]=i,n=0;n<i.length;n++)p.add(i[n])}var j=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V=Object.prototype.hasOwnProperty,Y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de={},ge={};function q(n){return V.call(ge,n)?!0:V.call(de,n)?!1:Y.test(n)?ge[n]=!0:(de[n]=!0,!1)}function Ie(n,i,l,c){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ie(n,i,l,c){if(i===null||typeof i>"u"||Ie(n,i,l,c))return!0;if(c)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Se(n,i,l,c,d,_,I){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=_,this.removeEmptyString=I}var le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){le[n]=new Se(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];le[i]=new Se(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){le[n]=new Se(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){le[n]=new Se(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){le[n]=new Se(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){le[n]=new Se(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){le[n]=new Se(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){le[n]=new Se(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){le[n]=new Se(n,5,!1,n.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function ke(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(pe,ke);le[i]=new Se(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(pe,ke);le[i]=new Se(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(pe,ke);le[i]=new Se(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){le[n]=new Se(n,1,!1,n.toLowerCase(),null,!1,!1)}),le.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){le[n]=new Se(n,1,!1,n.toLowerCase(),null,!0,!0)});function Ne(n,i,l,c){var d=le.hasOwnProperty(i)?le[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(ie(i,l,d,c)&&(l=null),c||d===null?q(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):d.mustUseProperty?n[d.propertyName]=l===null?d.type===3?!1:"":l:(i=d.attributeName,c=d.attributeNamespace,l===null?n.removeAttribute(i):(d=d.type,l=d===3||d===4&&l===!0?"":""+l,c?n.setAttributeNS(c,i,l):n.setAttribute(i,l))))}var ot=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ft=Symbol.for("react.element"),bt=Symbol.for("react.portal"),at=Symbol.for("react.fragment"),Oe=Symbol.for("react.strict_mode"),pt=Symbol.for("react.profiler"),Bt=Symbol.for("react.provider"),Ls=Symbol.for("react.context"),fs=Symbol.for("react.forward_ref"),os=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),St=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Lt=Symbol.for("react.offscreen"),ee=Symbol.iterator;function Je(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var W=Object.assign,H;function _e(n){if(H===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);H=i&&i[1]||""}return`
`+H+n}var it=!1;function Ye(n,i){if(!n||it)return"";it=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(J){var c=J}Reflect.construct(n,[],i)}else{try{i.call()}catch(J){c=J}n.call(i.prototype)}else{try{throw Error()}catch(J){c=J}n()}}catch(J){if(J&&c&&typeof J.stack=="string"){for(var d=J.stack.split(`
`),_=c.stack.split(`
`),I=d.length-1,y=_.length-1;1<=I&&0<=y&&d[I]!==_[y];)y--;for(;1<=I&&0<=y;I--,y--)if(d[I]!==_[y]){if(I!==1||y!==1)do if(I--,y--,0>y||d[I]!==_[y]){var A=`
`+d[I].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=I&&0<=y);break}}}finally{it=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?_e(n):""}function rt(n){switch(n.tag){case 5:return _e(n.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return n=Ye(n.type,!1),n;case 11:return n=Ye(n.type.render,!1),n;case 1:return n=Ye(n.type,!0),n;default:return""}}function Xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case at:return"Fragment";case bt:return"Portal";case pt:return"Profiler";case Oe:return"StrictMode";case os:return"Suspense";case nt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ls:return(n.displayName||"Context")+".Consumer";case Bt:return(n._context.displayName||"Context")+".Provider";case fs:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case St:return i=n.displayName||null,i!==null?i:Xe(n.type)||"Memo";case Ft:i=n._payload,n=n._init;try{return Xe(n(i))}catch{}}return null}function mt(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xe(i);case 8:return i===Oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _t(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ds(n){var i=_t(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,_=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(I){c=""+I,_.call(this,I)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(I){c=""+I},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function lo(n){n._valueTracker||(n._valueTracker=ds(n))}function xo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),c="";return n&&(c=_t(n)?n.checked?"true":"false":n.value),n=c,n!==l?(i.setValue(n),!0):!1}function an(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mi(n,i){var l=i.checked;return W({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function ks(n,i){var l=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;l=Re(i.value!=null?i.value:l),n._wrapperState={initialChecked:c,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ps(n,i){i=i.checked,i!=null&&Ne(n,"checked",i,!1)}function li(n,i){ps(n,i);var l=Re(i.value),c=i.type;if(l!=null)c==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Di(n,i.type,l):i.hasOwnProperty("defaultValue")&&Di(n,i.type,Re(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function ui(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Di(n,i,l){(i!=="number"||an(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Ue=Array.isArray;function Tt(n,i,l,c){if(n=n.options,i){i={};for(var d=0;d<l.length;d++)i["$"+l[d]]=!0;for(l=0;l<n.length;l++)d=i.hasOwnProperty("$"+n[l].value),n[l].selected!==d&&(n[l].selected=d),d&&c&&(n[l].defaultSelected=!0)}else{for(l=""+Re(l),i=null,d=0;d<n.length;d++){if(n[d].value===l){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Ot(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return W({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ci(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(r(92));if(Ue(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:Re(l)}}function As(n,i){var l=Re(i.value),c=Re(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),c!=null&&(n.defaultValue=""+c)}function k(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Yn(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ts(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Yn(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Rt,ms=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,l,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Rt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function K(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f=["Webkit","ms","Moz","O"];Object.keys(ye).forEach(function(n){f.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ye[i]=ye[n]})});function b(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||ye.hasOwnProperty(n)&&ye[n]?(""+i).trim():i+"px"}function D(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var c=l.indexOf("--")===0,d=b(l,i[l],c);l==="float"&&(l="cssFloat"),c?n.setProperty(l,d):n[l]=d}}var B=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $e(n,i){if(i){if(B[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function kt(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=null;function Pn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ai=null,js=null,$=null;function O(n){if(n=$n(n)){if(typeof ai!="function")throw Error(r(280));var i=n.stateNode;i&&(i=Ei(i),ai(n.stateNode,n.type,i))}}function L(n){js?$?$.push(n):$=[n]:js=n}function G(){if(js){var n=js,i=$;if($=js=null,O(n),i)for(n=0;n<i.length;n++)O(i[n])}}function ue(n,i){return n(i)}function Le(){}var Ke=!1;function hn(n,i,l){if(Ke)return n(i,l);Ke=!0;try{return ue(n,i,l)}finally{Ke=!1,(js!==null||$!==null)&&(Le(),G())}}function jn(n,i){var l=n.stateNode;if(l===null)return null;var c=Ei(l);if(c===null)return null;l=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(r(231,i,typeof l));return l}var br=!1;if(j)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){br=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{br=!1}function Yl(n,i,l,c,d,_,I,y,A){var J=Array.prototype.slice.call(arguments,3);try{i.apply(l,J)}catch(fe){this.onError(fe)}}var Pi=!1,hi=null,uo=!1,Zu=null,ec={onError:function(n){Pi=!0,hi=n}};function ch(n,i,l,c,d,_,I,y,A){Pi=!1,hi=null,Yl.apply(ec,arguments)}function sl(n,i,l,c,d,_,I,y,A){if(ch.apply(this,arguments),Pi){if(Pi){var J=hi;Pi=!1,hi=null}else throw Error(r(198));uo||(uo=!0,Zu=J)}}function xn(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function ws(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function dn(n){if(xn(n)!==n)throw Error(r(188))}function Ks(n){var i=n.alternate;if(!i){if(i=xn(n),i===null)throw Error(r(188));return i!==n?null:n}for(var l=n,c=i;;){var d=l.return;if(d===null)break;var _=d.alternate;if(_===null){if(c=d.return,c!==null){l=c;continue}break}if(d.child===_.child){for(_=d.child;_;){if(_===l)return dn(d),n;if(_===c)return dn(d),i;_=_.sibling}throw Error(r(188))}if(l.return!==c.return)l=d,c=_;else{for(var I=!1,y=d.child;y;){if(y===l){I=!0,l=d,c=_;break}if(y===c){I=!0,c=d,l=_;break}y=y.sibling}if(!I){for(y=_.child;y;){if(y===l){I=!0,l=_,c=d;break}if(y===c){I=!0,c=_,l=d;break}y=y.sibling}if(!I)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?n:i}function Ns(n){return n=Ks(n),n!==null?nl(n):null}function nl(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=nl(n);if(i!==null)return i;n=n.sibling}return null}var xi=R.unstable_scheduleCallback,co=R.unstable_cancelCallback,ao=R.unstable_shouldYield,tc=R.unstable_requestPaint,ss=R.unstable_now,ho=R.unstable_getCurrentPriorityLevel,Sr=R.unstable_ImmediatePriority,Or=R.unstable_UserBlockingPriority,Bi=R.unstable_NormalPriority,ta=R.unstable_LowPriority,Bo=R.unstable_IdlePriority,po=null,Sn=null;function sa(n){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(po,n,void 0,(n.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:Ms,na=Math.log,_o=Math.LN2;function Ms(n){return n>>>=0,n===0?32:31-(na(n)/_o|0)|0}var go=64,pn=4194304;function jt(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Us(n,i){var l=n.pendingLanes;if(l===0)return 0;var c=0,d=n.suspendedLanes,_=n.pingedLanes,I=l&268435455;if(I!==0){var y=I&~d;y!==0?c=jt(y):(_&=I,_!==0&&(c=jt(_)))}else I=l&~d,I!==0?c=jt(I):_!==0&&(c=jt(_));if(c===0)return 0;if(i!==0&&i!==c&&!(i&d)&&(d=c&-c,_=i&-i,d>=_||d===16&&(_&4194240)!==0))return i;if(c&4&&(c|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)l=31-Bn(i),d=1<<l,c|=n[l],i&=~d;return c}function Fn(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jl(n,i){for(var l=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,_=n.pendingLanes;0<_;){var I=31-Bn(_),y=1<<I,A=d[I];A===-1?(!(y&l)||y&c)&&(d[I]=Fn(y,i)):A<=i&&(n.expiredLanes|=y),_&=~y}}function Fo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Un(){var n=go;return go<<=1,!(go&4194240)&&(go=64),n}function Fi(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Ui(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Bn(i),n[i]=l}function Hi(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<l;){var d=31-Bn(l),_=1<<d;i[d]=0,c[d]=-1,n[d]=-1,l&=~_}}function il(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var c=31-Bn(l),d=1<<c;d&i|n[c]&i&&(n[c]|=i),l&=~d}}var Ct=0;function Uo(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Kl,Rr,di,Cr,Gi,Ho=!1,Go=[],On=null,Jn=null,Hn=null,$o=new Map,pi=new Map,qn=[],yr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(n,i){switch(n){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":$o.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(i.pointerId)}}function Vo(n,i,l,c,d,_){return n===null||n.nativeEvent!==_?(n={blockedOn:i,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[d]},i!==null&&(i=$n(i),i!==null&&Rr(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function nc(n,i,l,c,d){switch(i){case"focusin":return On=Vo(On,n,i,l,c,d),!0;case"dragenter":return Jn=Vo(Jn,n,i,l,c,d),!0;case"mouseover":return Hn=Vo(Hn,n,i,l,c,d),!0;case"pointerover":var _=d.pointerId;return $o.set(_,Vo($o.get(_)||null,n,i,l,c,d)),!0;case"gotpointercapture":return _=d.pointerId,pi.set(_,Vo(pi.get(_)||null,n,i,l,c,d)),!0}return!1}function ol(n){var i=Cn(n.target);if(i!==null){var l=xn(i);if(l!==null){if(i=l.tag,i===13){if(i=ws(l),i!==null){n.blockedOn=i,Gi(n.priority,function(){di(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qn(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=rl(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);Fs=c,l.target.dispatchEvent(c),Fs=null}else return i=$n(l),i!==null&&Rr(i),n.blockedOn=l,!1;i.shift()}return!0}function ia(n,i,l){Qn(n)&&l.delete(i)}function Wo(){Ho=!1,On!==null&&Qn(On)&&(On=null),Jn!==null&&Qn(Jn)&&(Jn=null),Hn!==null&&Qn(Hn)&&(Hn=null),$o.forEach(ia),pi.forEach(ia)}function Js(n,i){n.blockedOn===i&&(n.blockedOn=null,Ho||(Ho=!0,R.unstable_scheduleCallback(R.unstable_NormalPriority,Wo)))}function vr(n){function i(d){return Js(d,n)}if(0<Go.length){Js(Go[0],n);for(var l=1;l<Go.length;l++){var c=Go[l];c.blockedOn===n&&(c.blockedOn=null)}}for(On!==null&&Js(On,n),Jn!==null&&Js(Jn,n),Hn!==null&&Js(Hn,n),$o.forEach(i),pi.forEach(i),l=0;l<qn.length;l++)c=qn[l],c.blockedOn===n&&(c.blockedOn=null);for(;0<qn.length&&(l=qn[0],l.blockedOn===null);)ol(l),l.blockedOn===null&&qn.shift()}var fo=ot.ReactCurrentBatchConfig,Lr=!0;function ic(n,i,l,c){var d=Ct,_=fo.transition;fo.transition=null;try{Ct=1,Xo(n,i,l,c)}finally{Ct=d,fo.transition=_}}function oa(n,i,l,c){var d=Ct,_=fo.transition;fo.transition=null;try{Ct=4,Xo(n,i,l,c)}finally{Ct=d,fo.transition=_}}function Xo(n,i,l,c){if(Lr){var d=rl(n,i,l,c);if(d===null)Ac(n,i,c,kr,l),sc(n,c);else if(nc(d,n,i,l,c))c.stopPropagation();else if(sc(n,c),i&4&&-1<yr.indexOf(n)){for(;d!==null;){var _=$n(d);if(_!==null&&Kl(_),_=rl(n,i,l,c),_===null&&Ac(n,i,c,kr,l),_===d)break;d=_}d!==null&&c.stopPropagation()}else Ac(n,i,c,null,l)}}var kr=null;function rl(n,i,l,c){if(kr=null,n=Pn(c),n=Cn(n),n!==null)if(i=xn(n),i===null)n=null;else if(l=i.tag,l===13){if(n=ws(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return kr=n,null}function _i(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ho()){case Sr:return 1;case Or:return 4;case Bi:case ta:return 16;case Bo:return 536870912;default:return 16}default:return 16}}var Hs=null,Jl=null,ll=null;function oc(){if(ll)return ll;var n,i=Jl,l=i.length,c,d="value"in Hs?Hs.value:Hs.textContent,_=d.length;for(n=0;n<l&&i[n]===d[n];n++);var I=l-n;for(c=1;c<=I&&i[l-c]===d[_-c];c++);return ll=d.slice(n,1<c?1-c:void 0)}function ul(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function cl(){return!0}function rc(){return!1}function tn(n){function i(l,c,d,_,I){this._reactName=l,this._targetInst=d,this.type=c,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var y in n)n.hasOwnProperty(y)&&(l=n[y],this[y]=l?l(_):_[y]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?cl:rc,this.isPropagationStopped=rc,this}return W(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),i}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=tn(zo),al=W({},zo,{view:0,detail:0}),uc=tn(al),ql,gi,Yo,Ql=W({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yo&&(Yo&&n.type==="mousemove"?(ql=n.screenX-Yo.screenX,gi=n.screenY-Yo.screenY):gi=ql=0,Yo=n),ql)},movementY:function(n){return"movementY"in n?n.movementY:gi}}),mo=tn(Ql),cc=W({},Ql,{dataTransfer:0}),ac=tn(cc),To=W({},al,{relatedTarget:0}),jo=tn(To),hc=W({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),dc=tn(hc),ah=W({},zo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ra=tn(ah),la=W({},zo,{data:0}),pc=tn(la),_c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ua={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ko(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ua[n])?!!i[n]:!1}function Vi(){return Ko}var Zl=W({},al,{key:function(n){if(n.key){var i=_c[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ul(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?gc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vi,charCode:function(n){return n.type==="keypress"?ul(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ul(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hl=tn(Zl),$c=W({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eu=tn($c),Wi=W({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vi}),ca=tn(Wi),aa=W({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=tn(aa),ha=W({},Ql,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),da=tn(ha),Zn=[9,13,27,32],Ar=j&&"CompositionEvent"in window,Jo=null;j&&"documentMode"in document&&(Jo=document.documentMode);var pa=j&&"TextEvent"in window&&!Jo,_a=j&&(!Ar||Jo&&8<Jo&&11>=Jo),ga=" ",fc=!1;function dl(n,i){switch(n){case"keyup":return Zn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wr(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qo=!1;function mc(n,i){switch(n){case"compositionend":return wr(i);case"keypress":return i.which!==32?null:(fc=!0,ga);case"textInput":return n=i.data,n===ga&&fc?null:n;default:return null}}function pl(n,i){if(qo)return n==="compositionend"||!Ar&&dl(n,i)?(n=oc(),ll=Jl=Hs=null,qo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _a&&i.locale!=="ko"?null:i.data;default:return null}}var Tc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ec(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Tc[n.type]:i==="textarea"}function Ic(n,i,l,c){L(c),i=ti(i,"onChange"),0<i.length&&(l=new lc("onChange","change",null,l,c),n.push({event:l,listeners:i}))}var Qo=null,Xi=null;function zi(n){nr(n,0)}function Zo(n){var i=sn(n);if(xo(i))return n}function Rn(n,i){if(n==="change")return i}var $a=!1;if(j){var bc;if(j){var su="oninput"in document;if(!su){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),su=typeof Sc.oninput=="function"}bc=su}else bc=!1;$a=bc&&(!document.documentMode||9<document.documentMode)}function Oc(){Qo&&(Qo.detachEvent("onpropertychange",fa),Xi=Qo=null)}function fa(n){if(n.propertyName==="value"&&Zo(Xi)){var i=[];Ic(i,Xi,n,Pn(n)),hn(zi,i)}}function ma(n,i,l){n==="focusin"?(Oc(),Qo=i,Xi=l,Qo.attachEvent("onpropertychange",fa)):n==="focusout"&&Oc()}function hh(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zo(Xi)}function Nr(n,i){if(n==="click")return Zo(i)}function nu(n,i){if(n==="input"||n==="change")return Zo(i)}function iu(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var _n=typeof Object.is=="function"?Object.is:iu;function Gn(n,i){if(_n(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),c=Object.keys(i);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var d=l[c];if(!V.call(i,d)||!_n(n[d],i[d]))return!1}return!0}function Rc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ou(n,i){var l=Rc(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=i&&c>=i)return{node:l,offset:i-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Rc(l)}}function Yi(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Yi(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function At(){for(var n=window,i=an();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=an(n.document)}return i}function ru(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function _l(n){var i=At(),l=n.focusedElem,c=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Yi(l.ownerDocument.documentElement,l)){if(c!==null&&ru(l)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=l.textContent.length,_=Math.min(c.start,d);c=c.end===void 0?_:Math.min(c.end,d),!n.extend&&_>c&&(d=c,c=_,_=d),d=ou(l,_);var I=ou(l,c);d&&I&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==I.node||n.focusOffset!==I.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),_>c?(n.addRange(i),n.extend(I.node,I.offset)):(i.setEnd(I.node,I.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var er=j&&"documentMode"in document&&11>=document.documentMode,tr=null,gl=null,Eo=null,sr=!1;function Cc(n,i,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;sr||tr==null||tr!==an(c)||(c=tr,"selectionStart"in c&&ru(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Eo&&Gn(Eo,c)||(Eo=c,c=ti(gl,"onSelect"),0<c.length&&(i=new lc("onSelect","select",null,i,l),n.push({event:i,listeners:c}),i.target=tr)))}function ji(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var $i={animationend:ji("Animation","AnimationEnd"),animationiteration:ji("Animation","AnimationIteration"),animationstart:ji("Animation","AnimationStart"),transitionend:ji("Transition","TransitionEnd")},$l={},yc={};j&&(yc=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function lu(n){if($l[n])return $l[n];if(!$i[n])return n;var i=$i[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in yc)return $l[n]=i[l];return n}var Ta=lu("animationend"),Ea=lu("animationiteration"),vc=lu("animationstart"),fi=lu("transitionend"),uu=new Map,fl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(n,i){uu.set(n,i),x(i,[n])}for(var Lc=0;Lc<fl.length;Lc++){var kc=fl[Lc],dh=kc.toLowerCase(),cu=kc[0].toUpperCase()+kc.slice(1);Io(dh,"on"+cu)}Io(Ta,"onAnimationEnd"),Io(Ea,"onAnimationIteration"),Io(vc,"onAnimationStart"),Io("dblclick","onDoubleClick"),Io("focusin","onFocus"),Io("focusout","onBlur"),Io(fi,"onTransitionEnd"),Z("onMouseEnter",["mouseout","mouseover"]),Z("onMouseLeave",["mouseout","mouseover"]),Z("onPointerEnter",["pointerout","pointerover"]),Z("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ia=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Dr(n,i,l){var c=n.type||"unknown-event";n.currentTarget=l,sl(c,i,void 0,n),n.currentTarget=null}function nr(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],d=c.event;c=c.listeners;e:{var _=void 0;if(i)for(var I=c.length-1;0<=I;I--){var y=c[I],A=y.instance,J=y.currentTarget;if(y=y.listener,A!==_&&d.isPropagationStopped())break e;Dr(d,y,J),_=A}else for(I=0;I<c.length;I++){if(y=c[I],A=y.instance,J=y.currentTarget,y=y.listener,A!==_&&d.isPropagationStopped())break e;Dr(d,y,J),_=A}}}if(uo)throw n=Zu,uo=!1,Zu=null,n}function Kt(n,i){var l=i[pu];l===void 0&&(l=i[pu]=new Set);var c=n+"__bubble";l.has(c)||(ba(i,n,2,!1),l.add(c))}function ir(n,i,l){var c=0;i&&(c|=4),ba(l,n,c,i)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function mi(n){if(!n[Ki]){n[Ki]=!0,p.forEach(function(l){l!=="selectionchange"&&(Ia.has(l)||ir(l,!1,n),ir(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ki]||(i[Ki]=!0,ir("selectionchange",!1,i))}}function ba(n,i,l,c){switch(_i(i)){case 1:var d=ic;break;case 4:d=oa;break;default:d=Xo}l=d.bind(null,i,l,n),d=void 0,!br||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,l,{capture:!0,passive:d}):n.addEventListener(i,l,!0):d!==void 0?n.addEventListener(i,l,{passive:d}):n.addEventListener(i,l,!1)}function Ac(n,i,l,c,d){var _=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var I=c.tag;if(I===3||I===4){var y=c.stateNode.containerInfo;if(y===d||y.nodeType===8&&y.parentNode===d)break;if(I===4)for(I=c.return;I!==null;){var A=I.tag;if((A===3||A===4)&&(A=I.stateNode.containerInfo,A===d||A.nodeType===8&&A.parentNode===d))return;I=I.return}for(;y!==null;){if(I=Cn(y),I===null)return;if(A=I.tag,A===5||A===6){c=_=I;continue e}y=y.parentNode}}c=c.return}hn(function(){var J=_,fe=Pn(l),me=[];e:{var ae=uu.get(n);if(ae!==void 0){var De=lc,Ve=n;switch(n){case"keypress":if(ul(l)===0)break e;case"keydown":case"keyup":De=hl;break;case"focusin":Ve="focus",De=jo;break;case"focusout":Ve="blur",De=jo;break;case"beforeblur":case"afterblur":De=jo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=ca;break;case Ta:case Ea:case vc:De=dc;break;case fi:De=tu;break;case"scroll":De=uc;break;case"wheel":De=da;break;case"copy":case"cut":case"paste":De=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=eu}var We=(i&4)!==0,is=!We&&n==="scroll",w=We?ae!==null?ae+"Capture":null:ae;We=[];for(var P=J,X;P!==null;){X=P;var Ce=X.stateNode;if(X.tag===5&&Ce!==null&&(X=Ce,w!==null&&(Ce=jn(P,w),Ce!=null&&We.push(ei(P,Ce,X)))),is)break;P=P.return}0<We.length&&(ae=new De(ae,Ve,null,l,fe),me.push({event:ae,listeners:We}))}}if(!(i&7)){e:{if(ae=n==="mouseover"||n==="pointerover",De=n==="mouseout"||n==="pointerout",ae&&l!==Fs&&(Ve=l.relatedTarget||l.fromElement)&&(Cn(Ve)||Ve[si]))break e;if((De||ae)&&(ae=fe.window===fe?fe:(ae=fe.ownerDocument)?ae.defaultView||ae.parentWindow:window,De?(Ve=l.relatedTarget||l.toElement,De=J,Ve=Ve?Cn(Ve):null,Ve!==null&&(is=xn(Ve),Ve!==is||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(De=null,Ve=J),De!==Ve)){if(We=mo,Ce="onMouseLeave",w="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(We=eu,Ce="onPointerLeave",w="onPointerEnter",P="pointer"),is=De==null?ae:sn(De),X=Ve==null?ae:sn(Ve),ae=new We(Ce,P+"leave",De,l,fe),ae.target=is,ae.relatedTarget=X,Ce=null,Cn(fe)===J&&(We=new We(w,P+"enter",Ve,l,fe),We.target=X,We.relatedTarget=is,Ce=We),is=Ce,De&&Ve)t:{for(We=De,w=Ve,P=0,X=We;X;X=gn(X))P++;for(X=0,Ce=w;Ce;Ce=gn(Ce))X++;for(;0<P-X;)We=gn(We),P--;for(;0<X-P;)w=gn(w),X--;for(;P--;){if(We===w||w!==null&&We===w.alternate)break t;We=gn(We),w=gn(w)}We=null}else We=null;De!==null&&Sa(me,ae,De,We,!1),Ve!==null&&is!==null&&Sa(me,is,Ve,We,!0)}}e:{if(ae=J?sn(J):window,De=ae.nodeName&&ae.nodeName.toLowerCase(),De==="select"||De==="input"&&ae.type==="file")var je=Rn;else if(Ec(ae))if($a)je=nu;else{je=hh;var et=ma}else(De=ae.nodeName)&&De.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(je=Nr);if(je&&(je=je(n,J))){Ic(me,je,l,fe);break e}et&&et(n,ae,J),n==="focusout"&&(et=ae._wrapperState)&&et.controlled&&ae.type==="number"&&Di(ae,"number",ae.value)}switch(et=J?sn(J):window,n){case"focusin":(Ec(et)||et.contentEditable==="true")&&(tr=et,gl=J,Eo=null);break;case"focusout":Eo=gl=tr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,Cc(me,l,fe);break;case"selectionchange":if(er)break;case"keydown":case"keyup":Cc(me,l,fe)}var tt;if(Ar)e:{switch(n){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else qo?dl(n,l)&&(st="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(st="onCompositionStart");st&&(_a&&l.locale!=="ko"&&(qo||st!=="onCompositionStart"?st==="onCompositionEnd"&&qo&&(tt=oc()):(Hs=fe,Jl="value"in Hs?Hs.value:Hs.textContent,qo=!0)),et=ti(J,st),0<et.length&&(st=new pc(st,n,null,l,fe),me.push({event:st,listeners:et}),tt?st.data=tt:(tt=wr(l),tt!==null&&(st.data=tt)))),(tt=pa?mc(n,l):pl(n,l))&&(J=ti(J,"onBeforeInput"),0<J.length&&(fe=new pc("onBeforeInput","beforeinput",null,l,fe),me.push({event:fe,listeners:J}),fe.data=tt))}nr(me,i)})}function ei(n,i,l){return{instance:n,listener:i,currentTarget:l}}function ti(n,i){for(var l=i+"Capture",c=[];n!==null;){var d=n,_=d.stateNode;d.tag===5&&_!==null&&(d=_,_=jn(n,l),_!=null&&c.unshift(ei(n,_,d)),_=jn(n,i),_!=null&&c.push(ei(n,_,d))),n=n.return}return c}function gn(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Sa(n,i,l,c,d){for(var _=i._reactName,I=[];l!==null&&l!==c;){var y=l,A=y.alternate,J=y.stateNode;if(A!==null&&A===c)break;y.tag===5&&J!==null&&(y=J,d?(A=jn(l,_),A!=null&&I.unshift(ei(l,A,y))):d||(A=jn(l,_),A!=null&&I.push(ei(l,A,y)))),l=l.return}I.length!==0&&n.push({event:i,listeners:I})}var au=/\r\n?/g,hu=/\u0000|\uFFFD/g;function Oa(n){return(typeof n=="string"?n:""+n).replace(au,`
`).replace(hu,"")}function Ti(n,i,l){if(i=Oa(i),Oa(n)!==i&&l)throw Error(r(425))}function ml(){}var bo=null,Tl=null;function du(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wc=typeof setTimeout=="function"?setTimeout:void 0,ph=typeof clearTimeout=="function"?clearTimeout:void 0,Nc=typeof Promise=="function"?Promise:void 0,El=typeof queueMicrotask=="function"?queueMicrotask:typeof Nc<"u"?function(n){return Nc.resolve(null).then(n).catch(or)}:wc;function or(n){setTimeout(function(){throw n})}function Il(n,i){var l=i,c=0;do{var d=l.nextSibling;if(n.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(c===0){n.removeChild(d),vr(i);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=d}while(l);vr(i)}function So(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Ra(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var rr=Math.random().toString(36).slice(2),Vn="__reactFiber$"+rr,Pr="__reactProps$"+rr,si="__reactContainer$"+rr,pu="__reactEvents$"+rr,Mc="__reactListeners$"+rr,bl="__reactHandles$"+rr;function Cn(n){var i=n[Vn];if(i)return i;for(var l=n.parentNode;l;){if(i=l[si]||l[Vn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=Ra(n);n!==null;){if(l=n[Vn])return l;n=Ra(n)}return i}n=l,l=n.parentNode}return null}function $n(n){return n=n[Vn]||n[si],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function sn(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function Ei(n){return n[Pr]||null}var _u=[],Oo=-1;function Ii(n){return{current:n}}function Ut(n){0>Oo||(n.current=_u[Oo],_u[Oo]=null,Oo--)}function Wt(n,i){Oo++,_u[Oo]=n.current,n.current=i}var bi={},qs=Ii(bi),_s=Ii(!1),Qs=bi;function lr(n,i){var l=n.type.contextTypes;if(!l)return bi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},_;for(_ in l)d[_]=i[_];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Zs(n){return n=n.childContextTypes,n!=null}function gu(){Ut(_s),Ut(qs)}function Ca(n,i,l){if(qs.current!==bi)throw Error(r(168));Wt(qs,i),Wt(_s,l)}function ya(n,i,l){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return l;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(r(108,mt(n)||"Unknown",d));return W({},l,c)}function $u(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||bi,Qs=qs.current,Wt(qs,n),Wt(_s,_s.current),!0}function He(n,i,l){var c=n.stateNode;if(!c)throw Error(r(169));l?(n=ya(n,i,Qs),c.__reactInternalMemoizedMergedChildContext=n,Ut(_s),Ut(qs),Wt(qs,n)):Ut(_s),Wt(_s,l)}var gs=null,cs=!1,wt=!1;function yn(n){gs===null?gs=[n]:gs.push(n)}function Sl(n){cs=!0,yn(n)}function ve(){if(!wt&&gs!==null){wt=!0;var n=0,i=Ct;try{var l=gs;for(Ct=1;n<l.length;n++){var c=l[n];do c=c(!0);while(c!==null)}gs=null,cs=!1}catch(d){throw gs!==null&&(gs=gs.slice(n+1)),xi(Sr,ve),d}finally{Ct=i,wt=!1}}return null}var Nt=[],T=0,a=null,g=0,S=[],M=0,U=null,Q=1,oe="";function be(n,i){Nt[T++]=g,Nt[T++]=a,a=n,g=i}function Be(n,i,l){S[M++]=Q,S[M++]=oe,S[M++]=U,U=n;var c=Q;n=oe;var d=32-Bn(c)-1;c&=~(1<<d),l+=1;var _=32-Bn(i)+d;if(30<_){var I=d-d%5;_=(c&(1<<I)-1).toString(32),c>>=I,d-=I,Q=1<<32-Bn(i)+d|l<<d|c,oe=_+n}else Q=1<<_|l<<d|c,oe=n}function Fe(n){n.return!==null&&(be(n,1),Be(n,1,0))}function Ae(n){for(;n===a;)a=Nt[--T],Nt[T]=null,g=Nt[--T],Nt[T]=null;for(;n===U;)U=S[--M],S[M]=null,oe=S[--M],S[M]=null,Q=S[--M],S[M]=null}var Qe=null,ze=null,Pe=!1,qe=null;function lt(n,i){var l=En(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function Ht(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Qe=n,ze=So(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Qe=n,ze=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=U!==null?{id:Q,overflow:oe}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=En(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,Qe=n,ze=null,!0):!1;default:return!1}}function Gt(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ht(n){if(Pe){var i=ze;if(i){var l=i;if(!Ht(n,i)){if(Gt(n))throw Error(r(418));i=So(l.nextSibling);var c=Qe;i&&Ht(n,i)?lt(c,l):(n.flags=n.flags&-4097|2,Pe=!1,Qe=n)}}else{if(Gt(n))throw Error(r(418));n.flags=n.flags&-4097|2,Pe=!1,Qe=n}}}function Et(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Qe=n}function ct(n){if(n!==Qe)return!1;if(!Pe)return Et(n),Pe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!du(n.type,n.memoizedProps)),i&&(i=ze)){if(Gt(n))throw dt(),Error(r(418));for(;i;)lt(n,i),i=So(i.nextSibling)}if(Et(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){ze=So(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}ze=null}}else ze=Qe?So(n.stateNode.nextSibling):null;return!0}function dt(){for(var n=ze;n;)n=So(n.nextSibling)}function gt(){ze=Qe=null,Pe=!1}function Mt(n){qe===null?qe=[n]:qe.push(n)}var Dt=ot.ReactCurrentBatchConfig;function Jt(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var c=l.stateNode}if(!c)throw Error(r(147,n));var d=c,_=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===_?i.ref:(i=function(I){var y=d.refs;I===null?delete y[_]:y[_]=I},i._stringRef=_,i)}if(typeof n!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,n))}return n}function Gs(n,i){throw n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function vn(n){var i=n._init;return i(n._payload)}function Ds(n){function i(w,P){if(n){var X=w.deletions;X===null?(w.deletions=[P],w.flags|=16):X.push(P)}}function l(w,P){if(!n)return null;for(;P!==null;)i(w,P),P=P.sibling;return null}function c(w,P){for(w=new Map;P!==null;)P.key!==null?w.set(P.key,P):w.set(P.index,P),P=P.sibling;return w}function d(w,P){return w=Ai(w,P),w.index=0,w.sibling=null,w}function _(w,P,X){return w.index=X,n?(X=w.alternate,X!==null?(X=X.index,X<P?(w.flags|=2,P):X):(w.flags|=2,P)):(w.flags|=1048576,P)}function I(w){return n&&w.alternate===null&&(w.flags|=2),w}function y(w,P,X,Ce){return P===null||P.tag!==6?(P=Ph(X,w.mode,Ce),P.return=w,P):(P=d(P,X),P.return=w,P)}function A(w,P,X,Ce){var je=X.type;return je===at?fe(w,P,X.props.children,Ce,X.key):P!==null&&(P.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===Ft&&vn(je)===P.type)?(Ce=d(P,X.props),Ce.ref=Jt(w,P,X),Ce.return=w,Ce):(Ce=_r(X.type,X.key,X.props,null,w.mode,Ce),Ce.ref=Jt(w,P,X),Ce.return=w,Ce)}function J(w,P,X,Ce){return P===null||P.tag!==4||P.stateNode.containerInfo!==X.containerInfo||P.stateNode.implementation!==X.implementation?(P=Qa(X,w.mode,Ce),P.return=w,P):(P=d(P,X.children||[]),P.return=w,P)}function fe(w,P,X,Ce,je){return P===null||P.tag!==7?(P=jr(X,w.mode,Ce,je),P.return=w,P):(P=d(P,X),P.return=w,P)}function me(w,P,X){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Ph(""+P,w.mode,X),P.return=w,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ft:return X=_r(P.type,P.key,P.props,null,w.mode,X),X.ref=Jt(w,null,P),X.return=w,X;case bt:return P=Qa(P,w.mode,X),P.return=w,P;case Ft:var Ce=P._init;return me(w,Ce(P._payload),X)}if(Ue(P)||Je(P))return P=jr(P,w.mode,X,null),P.return=w,P;Gs(w,P)}return null}function ae(w,P,X,Ce){var je=P!==null?P.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return je!==null?null:y(w,P,""+X,Ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case ft:return X.key===je?A(w,P,X,Ce):null;case bt:return X.key===je?J(w,P,X,Ce):null;case Ft:return je=X._init,ae(w,P,je(X._payload),Ce)}if(Ue(X)||Je(X))return je!==null?null:fe(w,P,X,Ce,null);Gs(w,X)}return null}function De(w,P,X,Ce,je){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return w=w.get(X)||null,y(P,w,""+Ce,je);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case ft:return w=w.get(Ce.key===null?X:Ce.key)||null,A(P,w,Ce,je);case bt:return w=w.get(Ce.key===null?X:Ce.key)||null,J(P,w,Ce,je);case Ft:var et=Ce._init;return De(w,P,X,et(Ce._payload),je)}if(Ue(Ce)||Je(Ce))return w=w.get(X)||null,fe(P,w,Ce,je,null);Gs(P,Ce)}return null}function Ve(w,P,X,Ce){for(var je=null,et=null,tt=P,st=P=0,Bs=null;tt!==null&&st<X.length;st++){tt.index>st?(Bs=tt,tt=null):Bs=tt.sibling;var ut=ae(w,tt,X[st],Ce);if(ut===null){tt===null&&(tt=Bs);break}n&&tt&&ut.alternate===null&&i(w,tt),P=_(ut,P,st),et===null?je=ut:et.sibling=ut,et=ut,tt=Bs}if(st===X.length)return l(w,tt),Pe&&be(w,st),je;if(tt===null){for(;st<X.length;st++)tt=me(w,X[st],Ce),tt!==null&&(P=_(tt,P,st),et===null?je=tt:et.sibling=tt,et=tt);return Pe&&be(w,st),je}for(tt=c(w,tt);st<X.length;st++)Bs=De(tt,w,st,X[st],Ce),Bs!==null&&(n&&Bs.alternate!==null&&tt.delete(Bs.key===null?st:Bs.key),P=_(Bs,P,st),et===null?je=Bs:et.sibling=Bs,et=Bs);return n&&tt.forEach(function(gr){return i(w,gr)}),Pe&&be(w,st),je}function We(w,P,X,Ce){var je=Je(X);if(typeof je!="function")throw Error(r(150));if(X=je.call(X),X==null)throw Error(r(151));for(var et=je=null,tt=P,st=P=0,Bs=null,ut=X.next();tt!==null&&!ut.done;st++,ut=X.next()){tt.index>st?(Bs=tt,tt=null):Bs=tt.sibling;var gr=ae(w,tt,ut.value,Ce);if(gr===null){tt===null&&(tt=Bs);break}n&&tt&&gr.alternate===null&&i(w,tt),P=_(gr,P,st),et===null?je=gr:et.sibling=gr,et=gr,tt=Bs}if(ut.done)return l(w,tt),Pe&&be(w,st),je;if(tt===null){for(;!ut.done;st++,ut=X.next())ut=me(w,ut.value,Ce),ut!==null&&(P=_(ut,P,st),et===null?je=ut:et.sibling=ut,et=ut);return Pe&&be(w,st),je}for(tt=c(w,tt);!ut.done;st++,ut=X.next())ut=De(tt,w,st,ut.value,Ce),ut!==null&&(n&&ut.alternate!==null&&tt.delete(ut.key===null?st:ut.key),P=_(ut,P,st),et===null?je=ut:et.sibling=ut,et=ut);return n&&tt.forEach(function(Zp){return i(w,Zp)}),Pe&&be(w,st),je}function is(w,P,X,Ce){if(typeof X=="object"&&X!==null&&X.type===at&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case ft:e:{for(var je=X.key,et=P;et!==null;){if(et.key===je){if(je=X.type,je===at){if(et.tag===7){l(w,et.sibling),P=d(et,X.props.children),P.return=w,w=P;break e}}else if(et.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===Ft&&vn(je)===et.type){l(w,et.sibling),P=d(et,X.props),P.ref=Jt(w,et,X),P.return=w,w=P;break e}l(w,et);break}else i(w,et);et=et.sibling}X.type===at?(P=jr(X.props.children,w.mode,Ce,X.key),P.return=w,w=P):(Ce=_r(X.type,X.key,X.props,null,w.mode,Ce),Ce.ref=Jt(w,P,X),Ce.return=w,w=Ce)}return I(w);case bt:e:{for(et=X.key;P!==null;){if(P.key===et)if(P.tag===4&&P.stateNode.containerInfo===X.containerInfo&&P.stateNode.implementation===X.implementation){l(w,P.sibling),P=d(P,X.children||[]),P.return=w,w=P;break e}else{l(w,P);break}else i(w,P);P=P.sibling}P=Qa(X,w.mode,Ce),P.return=w,w=P}return I(w);case Ft:return et=X._init,is(w,P,et(X._payload),Ce)}if(Ue(X))return Ve(w,P,X,Ce);if(Je(X))return We(w,P,X,Ce);Gs(w,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,P!==null&&P.tag===6?(l(w,P.sibling),P=d(P,X),P.return=w,w=P):(l(w,P),P=Ph(X,w.mode,Ce),P.return=w,w=P),I(w)):l(w,P)}return is}var Ps=Ds(!0),Ln=Ds(!1),Qt=Ii(null),kn=null,Os=null,Ji=null;function Ts(){Ji=Os=kn=null}function yt(n){var i=Qt.current;Ut(Qt),n._currentValue=i}function Xt(n,i,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===l)break;n=n.return}}function Vs(n,i){kn=n,Ji=Os=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(fn=!0),n.firstContext=null)}function Zt(n){var i=n._currentValue;if(Ji!==n)if(n={context:n,memoizedValue:i,next:null},Os===null){if(kn===null)throw Error(r(308));Os=n,kn.dependencies={lanes:0,firstContext:n}}else Os=Os.next=n;return i}var ni=null;function fu(n){ni===null?ni=[n]:ni.push(n)}function xr(n,i,l,c){var d=i.interleaved;return d===null?(l.next=l,fu(i)):(l.next=d.next,d.next=l),i.interleaved=l,An(n,c)}function An(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var qi=!1;function mu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ol(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Si(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Oi(n,i,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,vt&2){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,An(n,l)}return d=c.interleaved,d===null?(i.next=i,fu(c)):(i.next=d.next,d.next=i),c.interleaved=i,An(n,l)}function Rl(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,l|=c,i.lanes=l,il(n,l)}}function Tu(n,i){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var d=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var I={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};_===null?d=_=I:_=_.next=I,l=l.next}while(l!==null);_===null?d=_=i:_=_.next=i}else d=_=i;l={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:_,shared:c.shared,effects:c.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Br(n,i,l,c){var d=n.updateQueue;qi=!1;var _=d.firstBaseUpdate,I=d.lastBaseUpdate,y=d.shared.pending;if(y!==null){d.shared.pending=null;var A=y,J=A.next;A.next=null,I===null?_=J:I.next=J,I=A;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,y=fe.lastBaseUpdate,y!==I&&(y===null?fe.firstBaseUpdate=J:y.next=J,fe.lastBaseUpdate=A))}if(_!==null){var me=d.baseState;I=0,fe=J=A=null,y=_;do{var ae=y.lane,De=y.eventTime;if((c&ae)===ae){fe!==null&&(fe=fe.next={eventTime:De,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var Ve=n,We=y;switch(ae=i,De=l,We.tag){case 1:if(Ve=We.payload,typeof Ve=="function"){me=Ve.call(De,me,ae);break e}me=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=We.payload,ae=typeof Ve=="function"?Ve.call(De,me,ae):Ve,ae==null)break e;me=W({},me,ae);break e;case 2:qi=!0}}y.callback!==null&&y.lane!==0&&(n.flags|=64,ae=d.effects,ae===null?d.effects=[y]:ae.push(y))}else De={eventTime:De,lane:ae,tag:y.tag,payload:y.payload,callback:y.callback,next:null},fe===null?(J=fe=De,A=me):fe=fe.next=De,I|=ae;if(y=y.next,y===null){if(y=d.shared.pending,y===null)break;ae=y,y=ae.next,ae.next=null,d.lastBaseUpdate=ae,d.shared.pending=null}}while(!0);if(fe===null&&(A=me),d.baseState=A,d.firstBaseUpdate=J,d.lastBaseUpdate=fe,i=d.shared.interleaved,i!==null){d=i;do I|=d.lane,d=d.next;while(d!==i)}else _===null&&(d.shared.lanes=0);Du|=I,n.lanes=I,n.memoizedState=me}}function Dc(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=l,typeof d!="function")throw Error(r(191,d));d.call(c)}}}var Cl={},en=Ii(Cl),Ro=Ii(Cl),Fr=Ii(Cl);function Co(n){if(n===Cl)throw Error(r(174));return n}function yl(n,i){switch(Wt(Fr,i),Wt(Ro,n),Wt(en,Cl),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ts(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ts(i,n)}Ut(en),Wt(en,i)}function Qi(){Ut(en),Ut(Ro),Ut(Fr)}function Pc(n){Co(Fr.current);var i=Co(en.current),l=ts(i,n.type);i!==l&&(Wt(Ro,n),Wt(en,l))}function Eu(n){Ro.current===n&&(Ut(en),Ut(Ro))}var es=Ii(0);function vl(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Iu=[];function Ur(){for(var n=0;n<Iu.length;n++)Iu[n]._workInProgressVersionPrimary=null;Iu.length=0}var Hr=ot.ReactCurrentDispatcher,va=ot.ReactCurrentBatchConfig,Gr=0,rs=null,Es=null,Ws=null,La=!1,bu=!1,Su=0,Qh=0;function nn(){throw Error(r(321))}function ka(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!_n(n[l],i[l]))return!1;return!0}function Aa(n,i,l,c,d,_){if(Gr=_,rs=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Hr.current=n===null||n.memoizedState===null?ip:Cu,n=l(c,d),bu){_=0;do{if(bu=!1,Su=0,25<=_)throw Error(r(301));_+=1,Ws=Es=null,i.updateQueue=null,Hr.current=op,n=l(c,d)}while(bu)}if(Hr.current=Ll,i=Es!==null&&Es.next!==null,Gr=0,Ws=Es=rs=null,La=!1,i)throw Error(r(300));return n}function wa(){var n=Su!==0;return Su=0,n}function Zi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ws===null?rs.memoizedState=Ws=n:Ws=Ws.next=n,Ws}function ii(){if(Es===null){var n=rs.alternate;n=n!==null?n.memoizedState:null}else n=Es.next;var i=Ws===null?rs.memoizedState:Ws.next;if(i!==null)Ws=i,Es=n;else{if(n===null)throw Error(r(310));Es=n,n={memoizedState:Es.memoizedState,baseState:Es.baseState,baseQueue:Es.baseQueue,queue:Es.queue,next:null},Ws===null?rs.memoizedState=Ws=n:Ws=Ws.next=n}return Ws}function Ou(n,i){return typeof i=="function"?i(n):i}function _h(n){var i=ii(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=Es,d=c.baseQueue,_=l.pending;if(_!==null){if(d!==null){var I=d.next;d.next=_.next,_.next=I}c.baseQueue=d=_,l.pending=null}if(d!==null){_=d.next,c=c.baseState;var y=I=null,A=null,J=_;do{var fe=J.lane;if((Gr&fe)===fe)A!==null&&(A=A.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),c=J.hasEagerState?J.eagerState:n(c,J.action);else{var me={lane:fe,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};A===null?(y=A=me,I=c):A=A.next=me,rs.lanes|=fe,Du|=fe}J=J.next}while(J!==null&&J!==_);A===null?I=c:A.next=y,_n(c,i.memoizedState)||(fn=!0),i.memoizedState=c,i.baseState=I,i.baseQueue=A,l.lastRenderedState=c}if(n=l.interleaved,n!==null){d=n;do _=d.lane,rs.lanes|=_,Du|=_,d=d.next;while(d!==n)}else d===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function gh(n){var i=ii(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=l.dispatch,d=l.pending,_=i.memoizedState;if(d!==null){l.pending=null;var I=d=d.next;do _=n(_,I.action),I=I.next;while(I!==d);_n(_,i.memoizedState)||(fn=!0),i.memoizedState=_,i.baseQueue===null&&(i.baseState=_),l.lastRenderedState=_}return[_,c]}function Zh(){}function $h(n,i){var l=rs,c=ii(),d=i(),_=!_n(c.memoizedState,d);if(_&&(c.memoizedState=d,fn=!0),c=c.queue,yo(sd.bind(null,l,c,n),[n]),c.getSnapshot!==i||_||Ws!==null&&Ws.memoizedState.tag&1){if(l.flags|=2048,eo(9,td.bind(null,l,c,d,i),void 0,null),ln===null)throw Error(r(349));Gr&30||ed(l,i,d)}return d}function ed(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=rs.updateQueue,i===null?(i={lastEffect:null,stores:null},rs.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function td(n,i,l,c){i.value=l,i.getSnapshot=c,nd(i)&&id(n)}function sd(n,i,l){return l(function(){nd(i)&&id(n)})}function nd(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!_n(n,l)}catch{return!0}}function id(n){var i=An(n,1);i!==null&&so(i,n,1,-1)}function re(n){var i=Zi();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:n},i.queue=n,n=n.dispatch=hd.bind(null,rs,n),[i.memoizedState,n]}function eo(n,i,l,c){return n={tag:n,create:i,destroy:l,deps:c,next:null},i=rs.updateQueue,i===null?(i={lastEffect:null,stores:null},rs.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,i.lastEffect=n)),n}function sp(){return ii().memoizedState}function Ru(n,i,l,c){var d=Zi();rs.flags|=n,d.memoizedState=eo(1|i,l,void 0,c===void 0?null:c)}function Ri(n,i,l,c){var d=ii();c=c===void 0?null:c;var _=void 0;if(Es!==null){var I=Es.memoizedState;if(_=I.destroy,c!==null&&ka(c,I.deps)){d.memoizedState=eo(i,l,_,c);return}}rs.flags|=n,d.memoizedState=eo(1|i,l,_,c)}function ce(n,i){return Ru(8390656,8,n,i)}function yo(n,i){return Ri(2048,8,n,i)}function Wn(n,i){return Ri(4,2,n,i)}function z(n,i){return Ri(4,4,n,i)}function od(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function rd(n,i,l){return l=l!=null?l.concat([n]):null,Ri(4,4,od.bind(null,i,n),l)}function fh(){}function ld(n,i){var l=ii();i=i===void 0?null:i;var c=l.memoizedState;return c!==null&&i!==null&&ka(i,c[1])?c[0]:(l.memoizedState=[n,i],n)}function ud(n,i){var l=ii();i=i===void 0?null:i;var c=l.memoizedState;return c!==null&&i!==null&&ka(i,c[1])?c[0]:(n=n(),l.memoizedState=[n,i],n)}function np(n,i,l){return Gr&21?(_n(l,i)||(l=Un(),rs.lanes|=l,Du|=l,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,fn=!0),n.memoizedState=l)}function cd(n,i){var l=Ct;Ct=l!==0&&4>l?l:4,n(!0);var c=va.transition;va.transition={};try{n(!1),i()}finally{Ct=l,va.transition=c}}function ad(){return ii().memoizedState}function Na(n,i,l){var c=zr(n);if(l={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null},mh(n))ur(i,l);else if(l=xr(n,i,l,c),l!==null){var d=Mn();so(l,n,c,d),dd(l,i,c)}}function hd(n,i,l){var c=zr(n),d={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null};if(mh(n))ur(i,d);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=i.lastRenderedReducer,_!==null))try{var I=i.lastRenderedState,y=_(I,l);if(d.hasEagerState=!0,d.eagerState=y,_n(y,I)){var A=i.interleaved;A===null?(d.next=d,fu(i)):(d.next=A.next,A.next=d),i.interleaved=d;return}}catch{}finally{}l=xr(n,i,d,c),l!==null&&(d=Mn(),so(l,n,c,d),dd(l,i,c))}}function mh(n){var i=n.alternate;return n===rs||i!==null&&i===rs}function ur(n,i){bu=La=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function dd(n,i,l){if(l&4194240){var c=i.lanes;c&=n.pendingLanes,l|=c,i.lanes=l,il(n,l)}}var Ll={readContext:Zt,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},ip={readContext:Zt,useCallback:function(n,i){return Zi().memoizedState=[n,i===void 0?null:i],n},useContext:Zt,useEffect:ce,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,Ru(4194308,4,od.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Ru(4194308,4,n,i)},useInsertionEffect:function(n,i){return Ru(4,2,n,i)},useMemo:function(n,i){var l=Zi();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var c=Zi();return i=l!==void 0?l(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=Na.bind(null,rs,n),[c.memoizedState,n]},useRef:function(n){var i=Zi();return n={current:n},i.memoizedState=n},useState:re,useDebugValue:fh,useDeferredValue:function(n){return Zi().memoizedState=n},useTransition:function(){var n=re(!1),i=n[0];return n=cd.bind(null,n[1]),Zi().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var c=rs,d=Zi();if(Pe){if(l===void 0)throw Error(r(407));l=l()}else{if(l=i(),ln===null)throw Error(r(349));Gr&30||ed(c,i,l)}d.memoizedState=l;var _={value:l,getSnapshot:i};return d.queue=_,ce(sd.bind(null,c,_,n),[n]),c.flags|=2048,eo(9,td.bind(null,c,_,l,i),void 0,null),l},useId:function(){var n=Zi(),i=ln.identifierPrefix;if(Pe){var l=oe,c=Q;l=(c&~(1<<32-Bn(c)-1)).toString(32)+l,i=":"+i+"R"+l,l=Su++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Qh++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Cu={readContext:Zt,useCallback:ld,useContext:Zt,useEffect:yo,useImperativeHandle:rd,useInsertionEffect:Wn,useLayoutEffect:z,useMemo:ud,useReducer:_h,useRef:sp,useState:function(){return _h(Ou)},useDebugValue:fh,useDeferredValue:function(n){var i=ii();return np(i,Es.memoizedState,n)},useTransition:function(){var n=_h(Ou)[0],i=ii().memoizedState;return[n,i]},useMutableSource:Zh,useSyncExternalStore:$h,useId:ad,unstable_isNewReconciler:!1},op={readContext:Zt,useCallback:ld,useContext:Zt,useEffect:yo,useImperativeHandle:rd,useInsertionEffect:Wn,useLayoutEffect:z,useMemo:ud,useReducer:gh,useRef:sp,useState:function(){return gh(Ou)},useDebugValue:fh,useDeferredValue:function(n){var i=ii();return Es===null?i.memoizedState=n:np(i,Es.memoizedState,n)},useTransition:function(){var n=gh(Ou)[0],i=ii().memoizedState;return[n,i]},useMutableSource:Zh,useSyncExternalStore:$h,useId:ad,unstable_isNewReconciler:!1};function Xn(n,i){if(n&&n.defaultProps){i=W({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function Th(n,i,l,c){i=n.memoizedState,l=l(c,i),l=l==null?i:W({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Xs={isMounted:function(n){return(n=n._reactInternals)?xn(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var c=Mn(),d=zr(n),_=Si(c,d);_.payload=i,l!=null&&(_.callback=l),i=Oi(n,_,d),i!==null&&(so(i,n,d,c),Rl(i,n,d))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var c=Mn(),d=zr(n),_=Si(c,d);_.tag=1,_.payload=i,l!=null&&(_.callback=l),i=Oi(n,_,d),i!==null&&(so(i,n,d,c),Rl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Mn(),c=zr(n),d=Si(l,c);d.tag=2,i!=null&&(d.callback=i),i=Oi(n,d,c),i!==null&&(so(i,n,c,l),Rl(i,n,c))}};function yu(n,i,l,c,d,_,I){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,_,I):i.prototype&&i.prototype.isPureReactComponent?!Gn(l,c)||!Gn(d,_):!0}function to(n,i,l){var c=!1,d=bi,_=i.contextType;return typeof _=="object"&&_!==null?_=Zt(_):(d=Zs(i)?Qs:qs.current,c=i.contextTypes,_=(c=c!=null)?lr(n,d):bi),i=new i(l,_),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Xs,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=_),i}function Eh(n,i,l,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,c),i.state!==n&&Xs.enqueueReplaceState(i,i.state,null)}function Ma(n,i,l,c){var d=n.stateNode;d.props=l,d.state=n.memoizedState,d.refs={},mu(n);var _=i.contextType;typeof _=="object"&&_!==null?d.context=Zt(_):(_=Zs(i)?Qs:qs.current,d.context=lr(n,_)),d.state=n.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(Th(n,i,_,l),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Xs.enqueueReplaceState(d,d.state,null),Br(n,l,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function xc(n,i){try{var l="",c=i;do l+=rt(c),c=c.return;while(c);var d=l}catch(_){d=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:i,stack:d,digest:null}}function Ih(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function Bc(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var vu=typeof WeakMap=="function"?WeakMap:Map;function Da(n,i,l){l=Si(-1,l),l.tag=3,l.payload={element:null};var c=i.value;return l.callback=function(){Pu||(Pu=!0,Tn=c),Bc(n,i)},l}function kl(n,i,l){l=Si(-1,l),l.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;l.payload=function(){return c(d)},l.callback=function(){Bc(n,i)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(l.callback=function(){Bc(n,i),typeof c!="function"&&(Ml===null?Ml=new Set([this]):Ml.add(this));var I=i.stack;this.componentDidCatch(i.value,{componentStack:I!==null?I:""})}),l}function bh(n,i,l){var c=n.pingCache;if(c===null){c=n.pingCache=new vu;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(l)||(d.add(l),n=Mh.bind(null,n,i,l),i.then(n,n))}function pd(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function _d(n,i,l,c,d){return n.mode&1?(n.flags|=65536,n.lanes=d,n):(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Si(-1,1),i.tag=2,Oi(l,i,1))),l.lanes|=1),n)}var rp=ot.ReactCurrentOwner,fn=!1;function on(n,i,l,c){i.child=n===null?Ln(i,null,l,c):Ps(i,n.child,l,c)}function Sh(n,i,l,c,d){l=l.render;var _=i.ref;return Vs(i,d),c=Aa(n,i,l,c,_,d),l=wa(),n!==null&&!fn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Lo(n,i,d)):(Pe&&l&&Fe(i),i.flags|=1,on(n,i,c,d),i.child)}function gd(n,i,l,c,d){if(n===null){var _=l.type;return typeof _=="function"&&!Bl(_)&&_.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=_,$d(n,i,_,c,d)):(n=_r(l.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(_=n.child,!(n.lanes&d)){var I=_.memoizedProps;if(l=l.compare,l=l!==null?l:Gn,l(I,c)&&n.ref===i.ref)return Lo(n,i,d)}return i.flags|=1,n=Ai(_,c),n.ref=i.ref,n.return=i,i.child=n}function $d(n,i,l,c,d){if(n!==null){var _=n.memoizedProps;if(Gn(_,c)&&n.ref===i.ref)if(fn=!1,i.pendingProps=c=_,(n.lanes&d)!==0)n.flags&131072&&(fn=!0);else return i.lanes=n.lanes,Lo(n,i,d)}return Oh(n,i,l,c,d)}function fd(n,i,l){var c=i.pendingProps,d=c.children,_=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(wl,Nn),Nn|=l;else{if(!(l&1073741824))return n=_!==null?_.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Wt(wl,Nn),Nn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=_!==null?_.baseLanes:l,Wt(wl,Nn),Nn|=c}else _!==null?(c=_.baseLanes|l,i.memoizedState=null):c=l,Wt(wl,Nn),Nn|=c;return on(n,i,d,l),i.child}function lp(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Oh(n,i,l,c,d){var _=Zs(l)?Qs:qs.current;return _=lr(i,_),Vs(i,d),l=Aa(n,i,l,c,_,d),c=wa(),n!==null&&!fn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Lo(n,i,d)):(Pe&&c&&Fe(i),i.flags|=1,on(n,i,l,d),i.child)}function md(n,i,l,c,d){if(Zs(l)){var _=!0;$u(i)}else _=!1;if(Vs(i,d),i.stateNode===null)Fc(n,i),to(i,l,c),Ma(i,l,c,d),c=!0;else if(n===null){var I=i.stateNode,y=i.memoizedProps;I.props=y;var A=I.context,J=l.contextType;typeof J=="object"&&J!==null?J=Zt(J):(J=Zs(l)?Qs:qs.current,J=lr(i,J));var fe=l.getDerivedStateFromProps,me=typeof fe=="function"||typeof I.getSnapshotBeforeUpdate=="function";me||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(y!==c||A!==J)&&Eh(i,I,c,J),qi=!1;var ae=i.memoizedState;I.state=ae,Br(i,c,I,d),A=i.memoizedState,y!==c||ae!==A||_s.current||qi?(typeof fe=="function"&&(Th(i,l,fe,c),A=i.memoizedState),(y=qi||yu(i,l,y,c,ae,A,J))?(me||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(i.flags|=4194308)):(typeof I.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=A),I.props=c,I.state=A,I.context=J,c=y):(typeof I.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{I=i.stateNode,Ol(n,i),y=i.memoizedProps,J=i.type===i.elementType?y:Xn(i.type,y),I.props=J,me=i.pendingProps,ae=I.context,A=l.contextType,typeof A=="object"&&A!==null?A=Zt(A):(A=Zs(l)?Qs:qs.current,A=lr(i,A));var De=l.getDerivedStateFromProps;(fe=typeof De=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(y!==me||ae!==A)&&Eh(i,I,c,A),qi=!1,ae=i.memoizedState,I.state=ae,Br(i,c,I,d);var Ve=i.memoizedState;y!==me||ae!==Ve||_s.current||qi?(typeof De=="function"&&(Th(i,l,De,c),Ve=i.memoizedState),(J=qi||yu(i,l,J,c,ae,Ve,A)||!1)?(fe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(c,Ve,A),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(c,Ve,A)),typeof I.componentDidUpdate=="function"&&(i.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof I.componentDidUpdate!="function"||y===n.memoizedProps&&ae===n.memoizedState||(i.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&ae===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Ve),I.props=c,I.state=Ve,I.context=A,c=J):(typeof I.componentDidUpdate!="function"||y===n.memoizedProps&&ae===n.memoizedState||(i.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&ae===n.memoizedState||(i.flags|=1024),c=!1)}return Pa(n,i,l,c,_,d)}function Pa(n,i,l,c,d,_){lp(n,i);var I=(i.flags&128)!==0;if(!c&&!I)return d&&He(i,l,!1),Lo(n,i,_);c=i.stateNode,rp.current=i;var y=I&&typeof l.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&I?(i.child=Ps(i,n.child,null,_),i.child=Ps(i,null,y,_)):on(n,i,y,_),i.memoizedState=c.state,d&&He(i,l,!0),i.child}function xa(n){var i=n.stateNode;i.pendingContext?Ca(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Ca(n,i.context,!1),yl(n,i.containerInfo)}function Td(n,i,l,c,d){return gt(),Mt(d),i.flags|=256,on(n,i,l,c),i.child}var Ba={dehydrated:null,treeContext:null,retryLane:0};function Rh(n){return{baseLanes:n,cachePool:null,transitions:null}}function up(n,i,l){var c=i.pendingProps,d=es.current,_=!1,I=(i.flags&128)!==0,y;if((y=I)||(y=n!==null&&n.memoizedState===null?!1:(d&2)!==0),y?(_=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Wt(es,d&1),n===null)return ht(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(I=c.children,n=c.fallback,_?(c=i.mode,_=i.child,I={mode:"hidden",children:I},!(c&1)&&_!==null?(_.childLanes=0,_.pendingProps=I):_=No(I,c,0,null),n=jr(n,c,l,null),_.return=i,n.return=i,_.sibling=n,i.child=_,i.child.memoizedState=Rh(l),i.memoizedState=Ba,n):Ch(i,I));if(d=n.memoizedState,d!==null&&(y=d.dehydrated,y!==null))return Vr(n,i,I,c,y,d,l);if(_){_=c.fallback,I=i.mode,d=n.child,y=d.sibling;var A={mode:"hidden",children:c.children};return!(I&1)&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=A,i.deletions=null):(c=Ai(d,A),c.subtreeFlags=d.subtreeFlags&14680064),y!==null?_=Ai(y,_):(_=jr(_,I,l,null),_.flags|=2),_.return=i,c.return=i,c.sibling=_,i.child=c,c=_,_=i.child,I=n.child.memoizedState,I=I===null?Rh(l):{baseLanes:I.baseLanes|l,cachePool:null,transitions:I.transitions},_.memoizedState=I,_.childLanes=n.childLanes&~l,i.memoizedState=Ba,c}return _=n.child,n=_.sibling,c=Ai(_,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=l),c.return=i,c.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=c,i.memoizedState=null,c}function Ch(n,i){return i=No({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Fa(n,i,l,c){return c!==null&&Mt(c),Ps(i,n.child,null,l),n=Ch(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Vr(n,i,l,c,d,_,I){if(l)return i.flags&256?(i.flags&=-257,c=Ih(Error(r(422))),Fa(n,i,I,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(_=c.fallback,d=i.mode,c=No({mode:"visible",children:c.children},d,0,null),_=jr(_,d,I,null),_.flags|=2,c.return=i,_.return=i,c.sibling=_,i.child=c,i.mode&1&&Ps(i,n.child,null,I),i.child.memoizedState=Rh(I),i.memoizedState=Ba,_);if(!(i.mode&1))return Fa(n,i,I,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var y=c.dgst;return c=y,_=Error(r(419)),c=Ih(_,c,void 0),Fa(n,i,I,c)}if(y=(I&n.childLanes)!==0,fn||y){if(c=ln,c!==null){switch(I&-I){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|I)?0:d,d!==0&&d!==_.retryLane&&(_.retryLane=d,An(n,d),so(c,n,d,-1))}return Uu(),c=Ih(Error(r(421))),Fa(n,i,I,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=pp.bind(null,n),d._reactRetry=i,null):(n=_.treeContext,ze=So(d.nextSibling),Qe=i,Pe=!0,qe=null,n!==null&&(S[M++]=Q,S[M++]=oe,S[M++]=U,Q=n.id,oe=n.overflow,U=i),i=Ch(i,c.children),i.flags|=4096,i)}function Ed(n,i,l){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Xt(n.return,i,l)}function vo(n,i,l,c,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=l,_.tailMode=d)}function ns(n,i,l){var c=i.pendingProps,d=c.revealOrder,_=c.tail;if(on(n,i,c.children,l),c=es.current,c&2)c=c&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ed(n,l,i);else if(n.tag===19)Ed(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Wt(es,c),!(i.mode&1))i.memoizedState=null;else switch(d){case"forwards":for(l=i.child,d=null;l!==null;)n=l.alternate,n!==null&&vl(n)===null&&(d=l),l=l.sibling;l=d,l===null?(d=i.child,i.child=null):(d=l.sibling,l.sibling=null),vo(i,!1,d,l,_);break;case"backwards":for(l=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&vl(n)===null){i.child=d;break}n=d.sibling,d.sibling=l,l=d,d=n}vo(i,!0,l,null,_);break;case"together":vo(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Fc(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Lo(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Du|=i.lanes,!(l&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,l=Ai(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Ai(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Id(n,i,l){switch(i.tag){case 3:xa(i),gt();break;case 5:Pc(i);break;case 1:Zs(i.type)&&$u(i);break;case 4:yl(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Wt(Qt,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Wt(es,es.current&1),i.flags|=128,null):l&i.child.childLanes?up(n,i,l):(Wt(es,es.current&1),n=Lo(n,i,l),n!==null?n.sibling:null);Wt(es,es.current&1);break;case 19:if(c=(l&i.childLanes)!==0,n.flags&128){if(c)return ns(n,i,l);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Wt(es,es.current),c)break;return null;case 22:case 23:return i.lanes=0,fd(n,i,l)}return Lo(n,i,l)}var Ee,Lu,ko,oi;Ee=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Lu=function(){},ko=function(n,i,l,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Co(en.current);var _=null;switch(l){case"input":d=Mi(n,d),c=Mi(n,c),_=[];break;case"select":d=W({},d,{value:void 0}),c=W({},c,{value:void 0}),_=[];break;case"textarea":d=Ot(n,d),c=Ot(n,c),_=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ml)}$e(l,c);var I;l=null;for(J in d)if(!c.hasOwnProperty(J)&&d.hasOwnProperty(J)&&d[J]!=null)if(J==="style"){var y=d[J];for(I in y)y.hasOwnProperty(I)&&(l||(l={}),l[I]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(C.hasOwnProperty(J)?_||(_=[]):(_=_||[]).push(J,null));for(J in c){var A=c[J];if(y=d!=null?d[J]:void 0,c.hasOwnProperty(J)&&A!==y&&(A!=null||y!=null))if(J==="style")if(y){for(I in y)!y.hasOwnProperty(I)||A&&A.hasOwnProperty(I)||(l||(l={}),l[I]="");for(I in A)A.hasOwnProperty(I)&&y[I]!==A[I]&&(l||(l={}),l[I]=A[I])}else l||(_||(_=[]),_.push(J,l)),l=A;else J==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,y=y?y.__html:void 0,A!=null&&y!==A&&(_=_||[]).push(J,A)):J==="children"?typeof A!="string"&&typeof A!="number"||(_=_||[]).push(J,""+A):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(C.hasOwnProperty(J)?(A!=null&&J==="onScroll"&&Kt("scroll",n),_||y===A||(_=[])):(_=_||[]).push(J,A))}l&&(_=_||[]).push("style",l);var J=_;(i.updateQueue=J)&&(i.flags|=4)}},oi=function(n,i,l,c){l!==c&&(i.flags|=4)};function Ci(n,i){if(!Pe)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ls(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(i)for(var d=n.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)l|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=l,i}function bd(n,i,l){var c=i.pendingProps;switch(Ae(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(i),null;case 1:return Zs(i.type)&&gu(),ls(i),null;case 3:return c=i.stateNode,Qi(),Ut(_s),Ut(qs),Ur(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(ct(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,qe!==null&&(wh(qe),qe=null))),Lu(n,i),ls(i),null;case 5:Eu(i);var d=Co(Fr.current);if(l=i.type,n!==null&&i.stateNode!=null)ko(n,i,l,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(r(166));return ls(i),null}if(n=Co(en.current),ct(i)){c=i.stateNode,l=i.type;var _=i.memoizedProps;switch(c[Vn]=i,c[Pr]=_,n=(i.mode&1)!==0,l){case"dialog":Kt("cancel",c),Kt("close",c);break;case"iframe":case"object":case"embed":Kt("load",c);break;case"video":case"audio":for(d=0;d<Mr.length;d++)Kt(Mr[d],c);break;case"source":Kt("error",c);break;case"img":case"image":case"link":Kt("error",c),Kt("load",c);break;case"details":Kt("toggle",c);break;case"input":ks(c,_),Kt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!_.multiple},Kt("invalid",c);break;case"textarea":ci(c,_),Kt("invalid",c)}$e(l,_),d=null;for(var I in _)if(_.hasOwnProperty(I)){var y=_[I];I==="children"?typeof y=="string"?c.textContent!==y&&(_.suppressHydrationWarning!==!0&&Ti(c.textContent,y,n),d=["children",y]):typeof y=="number"&&c.textContent!==""+y&&(_.suppressHydrationWarning!==!0&&Ti(c.textContent,y,n),d=["children",""+y]):C.hasOwnProperty(I)&&y!=null&&I==="onScroll"&&Kt("scroll",c)}switch(l){case"input":lo(c),ui(c,_,!0);break;case"textarea":lo(c),k(c);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(c.onclick=ml)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{I=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Yn(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=I.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=I.createElement(l,{is:c.is}):(n=I.createElement(l),l==="select"&&(I=n,c.multiple?I.multiple=!0:c.size&&(I.size=c.size))):n=I.createElementNS(n,l),n[Vn]=i,n[Pr]=c,Ee(n,i,!1,!1),i.stateNode=n;e:{switch(I=kt(l,c),l){case"dialog":Kt("cancel",n),Kt("close",n),d=c;break;case"iframe":case"object":case"embed":Kt("load",n),d=c;break;case"video":case"audio":for(d=0;d<Mr.length;d++)Kt(Mr[d],n);d=c;break;case"source":Kt("error",n),d=c;break;case"img":case"image":case"link":Kt("error",n),Kt("load",n),d=c;break;case"details":Kt("toggle",n),d=c;break;case"input":ks(n,c),d=Mi(n,c),Kt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=W({},c,{value:void 0}),Kt("invalid",n);break;case"textarea":ci(n,c),d=Ot(n,c),Kt("invalid",n);break;default:d=c}$e(l,d),y=d;for(_ in y)if(y.hasOwnProperty(_)){var A=y[_];_==="style"?D(n,A):_==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&ms(n,A)):_==="children"?typeof A=="string"?(l!=="textarea"||A!=="")&&K(n,A):typeof A=="number"&&K(n,""+A):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(C.hasOwnProperty(_)?A!=null&&_==="onScroll"&&Kt("scroll",n):A!=null&&Ne(n,_,A,I))}switch(l){case"input":lo(n),ui(n,c,!1);break;case"textarea":lo(n),k(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Re(c.value));break;case"select":n.multiple=!!c.multiple,_=c.value,_!=null?Tt(n,!!c.multiple,_,!1):c.defaultValue!=null&&Tt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ml)}switch(l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ls(i),null;case 6:if(n&&i.stateNode!=null)oi(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(l=Co(Fr.current),Co(en.current),ct(i)){if(c=i.stateNode,l=i.memoizedProps,c[Vn]=i,(_=c.nodeValue!==l)&&(n=Qe,n!==null))switch(n.tag){case 3:Ti(c.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ti(c.nodeValue,l,(n.mode&1)!==0)}_&&(i.flags|=4)}else c=(l.nodeType===9?l:l.ownerDocument).createTextNode(c),c[Vn]=i,i.stateNode=c}return ls(i),null;case 13:if(Ut(es),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pe&&ze!==null&&i.mode&1&&!(i.flags&128))dt(),gt(),i.flags|=98560,_=!1;else if(_=ct(i),c!==null&&c.dehydrated!==null){if(n===null){if(!_)throw Error(r(318));if(_=i.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Vn]=i}else gt(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;ls(i),_=!1}else qe!==null&&(wh(qe),qe=null),_=!0;if(!_)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(n===null||es.current&1?Cs===0&&(Cs=3):Uu())),i.updateQueue!==null&&(i.flags|=4),ls(i),null);case 4:return Qi(),Lu(n,i),n===null&&mi(i.stateNode.containerInfo),ls(i),null;case 10:return yt(i.type._context),ls(i),null;case 17:return Zs(i.type)&&gu(),ls(i),null;case 19:if(Ut(es),_=i.memoizedState,_===null)return ls(i),null;if(c=(i.flags&128)!==0,I=_.rendering,I===null)if(c)Ci(_,!1);else{if(Cs!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(I=vl(n),I!==null){for(i.flags|=128,Ci(_,!1),c=I.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=l,l=i.child;l!==null;)_=l,n=c,_.flags&=14680066,I=_.alternate,I===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=I.childLanes,_.lanes=I.lanes,_.child=I.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=I.memoizedProps,_.memoizedState=I.memoizedState,_.updateQueue=I.updateQueue,_.type=I.type,n=I.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Wt(es,es.current&1|2),i.child}n=n.sibling}_.tail!==null&&ss()>Nl&&(i.flags|=128,c=!0,Ci(_,!1),i.lanes=4194304)}else{if(!c)if(n=vl(I),n!==null){if(i.flags|=128,c=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Ci(_,!0),_.tail===null&&_.tailMode==="hidden"&&!I.alternate&&!Pe)return ls(i),null}else 2*ss()-_.renderingStartTime>Nl&&l!==1073741824&&(i.flags|=128,c=!0,Ci(_,!1),i.lanes=4194304);_.isBackwards?(I.sibling=i.child,i.child=I):(l=_.last,l!==null?l.sibling=I:i.child=I,_.last=I)}return _.tail!==null?(i=_.tail,_.rendering=i,_.tail=i.sibling,_.renderingStartTime=ss(),i.sibling=null,l=es.current,Wt(es,c?l&1|2:l&1),i):(ls(i),null);case 22:case 23:return Nh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?Nn&1073741824&&(ls(i),i.subtreeFlags&6&&(i.flags|=8192)):ls(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function yh(n,i){switch(Ae(i),i.tag){case 1:return Zs(i.type)&&gu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Qi(),Ut(_s),Ut(qs),Ur(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return Eu(i),null;case 13:if(Ut(es),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));gt()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ut(es),null;case 4:return Qi(),null;case 10:return yt(i.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var xs=!1,F=!1,zt=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ku(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(c){as(n,i,c)}else l.current=null}function cr(n,i,l){try{l()}catch(c){as(n,i,c)}}var Sd=!1;function cp(n,i){if(bo=Lr,n=At(),ru(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var d=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var I=0,y=-1,A=-1,J=0,fe=0,me=n,ae=null;t:for(;;){for(var De;me!==l||d!==0&&me.nodeType!==3||(y=I+d),me!==_||c!==0&&me.nodeType!==3||(A=I+c),me.nodeType===3&&(I+=me.nodeValue.length),(De=me.firstChild)!==null;)ae=me,me=De;for(;;){if(me===n)break t;if(ae===l&&++J===d&&(y=I),ae===_&&++fe===c&&(A=I),(De=me.nextSibling)!==null)break;me=ae,ae=me.parentNode}me=De}l=y===-1||A===-1?null:{start:y,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(Tl={focusedElem:n,selectionRange:l},Lr=!1,Te=i;Te!==null;)if(i=Te,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Te=n;else for(;Te!==null;){i=Te;try{var Ve=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var We=Ve.memoizedProps,is=Ve.memoizedState,w=i.stateNode,P=w.getSnapshotBeforeUpdate(i.elementType===i.type?We:Xn(i.type,We),is);w.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var X=i.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ce){as(i,i.return,Ce)}if(n=i.sibling,n!==null){n.return=i.return,Te=n;break}Te=i.return}return Ve=Sd,Sd=!1,Ve}function Ua(n,i,l){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var _=d.destroy;d.destroy=void 0,_!==void 0&&cr(i,l,_)}d=d.next}while(d!==c)}}function ar(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var c=l.create;l.destroy=c()}l=l.next}while(l!==i)}}function $s(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function Ha(n){var i=n.alternate;i!==null&&(n.alternate=null,Ha(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Vn],delete i[Pr],delete i[pu],delete i[Mc],delete i[bl])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function vh(n){return n.tag===5||n.tag===3||n.tag===4}function Ga(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Au(n,i,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=ml));else if(c!==4&&(n=n.child,n!==null))for(Au(n,i,l),n=n.sibling;n!==null;)Au(n,i,l),n=n.sibling}function wu(n,i,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(wu(n,i,l),n=n.sibling;n!==null;)wu(n,i,l),n=n.sibling}var rn=null,Ao=!1;function yi(n,i,l){for(l=l.child;l!==null;)Lh(n,i,l),l=l.sibling}function Lh(n,i,l){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(po,l)}catch{}switch(l.tag){case 5:F||ku(l,i);case 6:var c=rn,d=Ao;rn=null,yi(n,i,l),rn=c,Ao=d,rn!==null&&(Ao?(n=rn,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):rn.removeChild(l.stateNode));break;case 18:rn!==null&&(Ao?(n=rn,l=l.stateNode,n.nodeType===8?Il(n.parentNode,l):n.nodeType===1&&Il(n,l),vr(n)):Il(rn,l.stateNode));break;case 4:c=rn,d=Ao,rn=l.stateNode.containerInfo,Ao=!0,yi(n,i,l),rn=c,Ao=d;break;case 0:case 11:case 14:case 15:if(!F&&(c=l.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var _=d,I=_.destroy;_=_.tag,I!==void 0&&(_&2||_&4)&&cr(l,i,I),d=d.next}while(d!==c)}yi(n,i,l);break;case 1:if(!F&&(ku(l,i),c=l.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=l.memoizedProps,c.state=l.memoizedState,c.componentWillUnmount()}catch(y){as(l,i,y)}yi(n,i,l);break;case 21:yi(n,i,l);break;case 22:l.mode&1?(F=(c=F)||l.memoizedState!==null,yi(n,i,l),F=c):yi(n,i,l);break;default:yi(n,i,l)}}function Od(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new zt),i.forEach(function(c){var d=Ld.bind(null,n,c);l.has(c)||(l.add(c),c.then(d,d))})}}function Ze(n,i){var l=i.deletions;if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];try{var _=n,I=i,y=I;e:for(;y!==null;){switch(y.tag){case 5:rn=y.stateNode,Ao=!1;break e;case 3:rn=y.stateNode.containerInfo,Ao=!0;break e;case 4:rn=y.stateNode.containerInfo,Ao=!0;break e}y=y.return}if(rn===null)throw Error(r(160));Lh(_,I,d),rn=null,Ao=!1;var A=d.alternate;A!==null&&(A.return=null),d.return=null}catch(J){as(d,i,J)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Rd(i,n),i=i.sibling}function Rd(n,i){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ze(i,n),mn(n),c&4){try{Ua(3,n,n.return),ar(3,n)}catch(We){as(n,n.return,We)}try{Ua(5,n,n.return)}catch(We){as(n,n.return,We)}}break;case 1:Ze(i,n),mn(n),c&512&&l!==null&&ku(l,l.return);break;case 5:if(Ze(i,n),mn(n),c&512&&l!==null&&ku(l,l.return),n.flags&32){var d=n.stateNode;try{K(d,"")}catch(We){as(n,n.return,We)}}if(c&4&&(d=n.stateNode,d!=null)){var _=n.memoizedProps,I=l!==null?l.memoizedProps:_,y=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{y==="input"&&_.type==="radio"&&_.name!=null&&ps(d,_),kt(y,I);var J=kt(y,_);for(I=0;I<A.length;I+=2){var fe=A[I],me=A[I+1];fe==="style"?D(d,me):fe==="dangerouslySetInnerHTML"?ms(d,me):fe==="children"?K(d,me):Ne(d,fe,me,J)}switch(y){case"input":li(d,_);break;case"textarea":As(d,_);break;case"select":var ae=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!_.multiple;var De=_.value;De!=null?Tt(d,!!_.multiple,De,!1):ae!==!!_.multiple&&(_.defaultValue!=null?Tt(d,!!_.multiple,_.defaultValue,!0):Tt(d,!!_.multiple,_.multiple?[]:"",!1))}d[Pr]=_}catch(We){as(n,n.return,We)}}break;case 6:if(Ze(i,n),mn(n),c&4){if(n.stateNode===null)throw Error(r(162));d=n.stateNode,_=n.memoizedProps;try{d.nodeValue=_}catch(We){as(n,n.return,We)}}break;case 3:if(Ze(i,n),mn(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{vr(i.containerInfo)}catch(We){as(n,n.return,We)}break;case 4:Ze(i,n),mn(n);break;case 13:Ze(i,n),mn(n),d=n.child,d.flags&8192&&(_=d.memoizedState!==null,d.stateNode.isHidden=_,!_||d.alternate!==null&&d.alternate.memoizedState!==null||(Wa=ss())),c&4&&Od(n);break;case 22:if(fe=l!==null&&l.memoizedState!==null,n.mode&1?(F=(J=F)||fe,Ze(i,n),F=J):Ze(i,n),mn(n),c&8192){if(J=n.memoizedState!==null,(n.stateNode.isHidden=J)&&!fe&&n.mode&1)for(Te=n,fe=n.child;fe!==null;){for(me=Te=fe;Te!==null;){switch(ae=Te,De=ae.child,ae.tag){case 0:case 11:case 14:case 15:Ua(4,ae,ae.return);break;case 1:ku(ae,ae.return);var Ve=ae.stateNode;if(typeof Ve.componentWillUnmount=="function"){c=ae,l=ae.return;try{i=c,Ve.props=i.memoizedProps,Ve.state=i.memoizedState,Ve.componentWillUnmount()}catch(We){as(c,l,We)}}break;case 5:ku(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Al(me);continue}}De!==null?(De.return=ae,Te=De):Al(me)}fe=fe.sibling}e:for(fe=null,me=n;;){if(me.tag===5){if(fe===null){fe=me;try{d=me.stateNode,J?(_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(y=me.stateNode,A=me.memoizedProps.style,I=A!=null&&A.hasOwnProperty("display")?A.display:null,y.style.display=b("display",I))}catch(We){as(n,n.return,We)}}}else if(me.tag===6){if(fe===null)try{me.stateNode.nodeValue=J?"":me.memoizedProps}catch(We){as(n,n.return,We)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===n)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===n)break e;for(;me.sibling===null;){if(me.return===null||me.return===n)break e;fe===me&&(fe=null),me=me.return}fe===me&&(fe=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:Ze(i,n),mn(n),c&4&&Od(n);break;case 21:break;default:Ze(i,n),mn(n)}}function mn(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(vh(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(K(d,""),c.flags&=-33);var _=Ga(n);wu(n,_,d);break;case 3:case 4:var I=c.stateNode.containerInfo,y=Ga(n);Au(n,y,I);break;default:throw Error(r(161))}}catch(A){as(n,n.return,A)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Wr(n,i,l){Te=n,Nu(n)}function Nu(n,i,l){for(var c=(n.mode&1)!==0;Te!==null;){var d=Te,_=d.child;if(d.tag===22&&c){var I=d.memoizedState!==null||xs;if(!I){var y=d.alternate,A=y!==null&&y.memoizedState!==null||F;y=xs;var J=F;if(xs=I,(F=A)&&!J)for(Te=d;Te!==null;)I=Te,A=I.child,I.tag===22&&I.memoizedState!==null?wn(d):A!==null?(A.return=I,Te=A):wn(d);for(;_!==null;)Te=_,Nu(_),_=_.sibling;Te=d,xs=y,F=J}Xr(n)}else d.subtreeFlags&8772&&_!==null?(_.return=d,Te=_):Xr(n)}}function Xr(n){for(;Te!==null;){var i=Te;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:F||ar(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!F)if(l===null)c.componentDidMount();else{var d=i.elementType===i.type?l.memoizedProps:Xn(i.type,l.memoizedProps);c.componentDidUpdate(d,l.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var _=i.updateQueue;_!==null&&Dc(i,_,c);break;case 3:var I=i.updateQueue;if(I!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Dc(i,I,l)}break;case 5:var y=i.stateNode;if(l===null&&i.flags&4){l=y;var A=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&l.focus();break;case"img":A.src&&(l.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var J=i.alternate;if(J!==null){var fe=J.memoizedState;if(fe!==null){var me=fe.dehydrated;me!==null&&vr(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}F||i.flags&512&&$s(i)}catch(ae){as(i,i.return,ae)}}if(i===n){Te=null;break}if(l=i.sibling,l!==null){l.return=i.return,Te=l;break}Te=i.return}}function Al(n){for(;Te!==null;){var i=Te;if(i===n){Te=null;break}var l=i.sibling;if(l!==null){l.return=i.return,Te=l;break}Te=i.return}}function wn(n){for(;Te!==null;){var i=Te;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{ar(4,i)}catch(A){as(i,l,A)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(A){as(i,d,A)}}var _=i.return;try{$s(i)}catch(A){as(i,_,A)}break;case 5:var I=i.return;try{$s(i)}catch(A){as(i,I,A)}}}catch(A){as(i,i.return,A)}if(i===n){Te=null;break}var y=i.sibling;if(y!==null){y.return=i.return,Te=y;break}Te=i.return}}var ap=Math.ceil,Va=ot.ReactCurrentDispatcher,kh=ot.ReactCurrentOwner,vi=ot.ReactCurrentBatchConfig,vt=0,ln=null,Rs=null,un=0,Nn=0,wl=Ii(0),Cs=0,Mu=null,Du=0,Ah=0,Li=0,Is=null,cn=null,Wa=0,Nl=1/0,ki=null,Pu=!1,Tn=null,Ml=null,xu=!1,hr=null,Uc=0,dr=0,Xa=null,za=-1,Bu=0;function Mn(){return vt&6?ss():za!==-1?za:za=ss()}function zr(n){return n.mode&1?vt&2&&un!==0?un&-un:Dt.transition!==null?(Bu===0&&(Bu=Un()),Bu):(n=Ct,n!==0||(n=window.event,n=n===void 0?16:_i(n.type)),n):1}function so(n,i,l,c){if(50<dr)throw dr=0,Xa=null,Error(r(185));Ui(n,l,c),(!(vt&2)||n!==ln)&&(n===ln&&(!(vt&2)&&(Ah|=l),Cs===4&&pr(n,un)),zn(n,c),l===1&&vt===0&&!(i.mode&1)&&(Nl=ss()+500,cs&&ve()))}function zn(n,i){var l=n.callbackNode;jl(n,i);var c=Us(n,n===ln?un:0);if(c===0)l!==null&&co(l),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(l!=null&&co(l),i===1)n.tag===0?Sl(Hc.bind(null,n)):yn(Hc.bind(null,n)),El(function(){!(vt&6)&&ve()}),l=null;else{switch(Uo(c)){case 1:l=Sr;break;case 4:l=Or;break;case 16:l=Bi;break;case 536870912:l=Bo;break;default:l=Bi}l=Dh(l,Dl.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function Dl(n,i){if(za=-1,Bu=0,vt&6)throw Error(r(327));var l=n.callbackNode;if(no()&&n.callbackNode!==l)return null;var c=Us(n,n===ln?un:0);if(c===0)return null;if(c&30||c&n.expiredLanes||i)i=Ja(n,c);else{i=c;var d=vt;vt|=2;var _=Cd();(ln!==n||un!==i)&&(ki=null,Nl=ss()+500,bs(n,i));do try{dp();break}catch(y){Fu(n,y)}while(!0);Ts(),Va.current=_,vt=d,Rs!==null?i=0:(ln=null,un=0,i=Cs)}if(i!==0){if(i===2&&(d=Fo(n),d!==0&&(c=d,i=Ya(n,d))),i===1)throw l=Mu,bs(n,0),pr(n,c),zn(n,ss()),l;if(i===6)pr(n,c);else{if(d=n.current.alternate,!(c&30)&&!ja(d)&&(i=Ja(n,c),i===2&&(_=Fo(n),_!==0&&(c=_,i=Ya(n,_))),i===1))throw l=Mu,bs(n,0),pr(n,c),zn(n,ss()),l;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(r(345));case 2:wo(n,cn,ki);break;case 3:if(pr(n,c),(c&130023424)===c&&(i=Wa+500-ss(),10<i)){if(Us(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Mn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=wc(wo.bind(null,n,cn,ki),i);break}wo(n,cn,ki);break;case 4:if(pr(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var I=31-Bn(c);_=1<<I,I=i[I],I>d&&(d=I),c&=~_}if(c=d,c=ss()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*ap(c/1960))-c,10<c){n.timeoutHandle=wc(wo.bind(null,n,cn,ki),c);break}wo(n,cn,ki);break;case 5:wo(n,cn,ki);break;default:throw Error(r(329))}}}return zn(n,ss()),n.callbackNode===l?Dl.bind(null,n):null}function Ya(n,i){var l=Is;return n.current.memoizedState.isDehydrated&&(bs(n,i).flags|=256),n=Ja(n,i),n!==2&&(i=cn,cn=l,i!==null&&wh(i)),n}function wh(n){cn===null?cn=n:cn.push.apply(cn,n)}function ja(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var c=0;c<l.length;c++){var d=l[c],_=d.getSnapshot;d=d.value;try{if(!_n(_(),d))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pr(n,i){for(i&=~Li,i&=~Ah,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-Bn(i),c=1<<l;n[l]=-1,i&=~c}}function Hc(n){if(vt&6)throw Error(r(327));no();var i=Us(n,0);if(!(i&1))return zn(n,ss()),null;var l=Ja(n,i);if(n.tag!==0&&l===2){var c=Fo(n);c!==0&&(i=c,l=Ya(n,c))}if(l===1)throw l=Mu,bs(n,0),pr(n,i),zn(n,ss()),l;if(l===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,wo(n,cn,ki),zn(n,ss()),null}function Ka(n,i){var l=vt;vt|=1;try{return n(i)}finally{vt=l,vt===0&&(Nl=ss()+500,cs&&ve())}}function Yr(n){hr!==null&&hr.tag===0&&!(vt&6)&&no();var i=vt;vt|=1;var l=vi.transition,c=Ct;try{if(vi.transition=null,Ct=1,n)return n()}finally{Ct=c,vi.transition=l,vt=i,!(vt&6)&&ve()}}function Nh(){Nn=wl.current,Ut(wl)}function bs(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,ph(l)),Rs!==null)for(l=Rs.return;l!==null;){var c=l;switch(Ae(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&gu();break;case 3:Qi(),Ut(_s),Ut(qs),Ur();break;case 5:Eu(c);break;case 4:Qi();break;case 13:Ut(es);break;case 19:Ut(es);break;case 10:yt(c.type._context);break;case 22:case 23:Nh()}l=l.return}if(ln=n,Rs=n=Ai(n.current,null),un=Nn=i,Cs=0,Mu=null,Li=Ah=Du=0,cn=Is=null,ni!==null){for(i=0;i<ni.length;i++)if(l=ni[i],c=l.interleaved,c!==null){l.interleaved=null;var d=c.next,_=l.pending;if(_!==null){var I=_.next;_.next=d,c.next=I}l.pending=c}ni=null}return n}function Fu(n,i){do{var l=Rs;try{if(Ts(),Hr.current=Ll,La){for(var c=rs.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}La=!1}if(Gr=0,Ws=Es=rs=null,bu=!1,Su=0,kh.current=null,l===null||l.return===null){Cs=1,Mu=i,Rs=null;break}e:{var _=n,I=l.return,y=l,A=i;if(i=un,y.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var J=A,fe=y,me=fe.tag;if(!(fe.mode&1)&&(me===0||me===11||me===15)){var ae=fe.alternate;ae?(fe.updateQueue=ae.updateQueue,fe.memoizedState=ae.memoizedState,fe.lanes=ae.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var De=pd(I);if(De!==null){De.flags&=-257,_d(De,I,y,_,i),De.mode&1&&bh(_,J,i),i=De,A=J;var Ve=i.updateQueue;if(Ve===null){var We=new Set;We.add(A),i.updateQueue=We}else Ve.add(A);break e}else{if(!(i&1)){bh(_,J,i),Uu();break e}A=Error(r(426))}}else if(Pe&&y.mode&1){var is=pd(I);if(is!==null){!(is.flags&65536)&&(is.flags|=256),_d(is,I,y,_,i),Mt(xc(A,y));break e}}_=A=xc(A,y),Cs!==4&&(Cs=2),Is===null?Is=[_]:Is.push(_),_=I;do{switch(_.tag){case 3:_.flags|=65536,i&=-i,_.lanes|=i;var w=Da(_,A,i);Tu(_,w);break e;case 1:y=A;var P=_.type,X=_.stateNode;if(!(_.flags&128)&&(typeof P.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Ml===null||!Ml.has(X)))){_.flags|=65536,i&=-i,_.lanes|=i;var Ce=kl(_,y,i);Tu(_,Ce);break e}}_=_.return}while(_!==null)}yd(l)}catch(je){i=je,Rs===l&&l!==null&&(Rs=l=l.return);continue}break}while(!0)}function Cd(){var n=Va.current;return Va.current=Ll,n===null?Ll:n}function Uu(){(Cs===0||Cs===3||Cs===2)&&(Cs=4),ln===null||!(Du&268435455)&&!(Ah&268435455)||pr(ln,un)}function Ja(n,i){var l=vt;vt|=2;var c=Cd();(ln!==n||un!==i)&&(ki=null,bs(n,i));do try{hp();break}catch(d){Fu(n,d)}while(!0);if(Ts(),vt=l,Va.current=c,Rs!==null)throw Error(r(261));return ln=null,un=0,Cs}function hp(){for(;Rs!==null;)Pl(Rs)}function dp(){for(;Rs!==null&&!ao();)Pl(Rs)}function Pl(n){var i=qa(n.alternate,n,Nn);n.memoizedProps=n.pendingProps,i===null?yd(n):Rs=i,kh.current=null}function yd(n){var i=n;do{var l=i.alternate;if(n=i.return,i.flags&32768){if(l=yh(l,i),l!==null){l.flags&=32767,Rs=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Cs=6,Rs=null;return}}else if(l=bd(l,i,Nn),l!==null){Rs=l;return}if(i=i.sibling,i!==null){Rs=i;return}Rs=i=n}while(i!==null);Cs===0&&(Cs=5)}function wo(n,i,l){var c=Ct,d=vi.transition;try{vi.transition=null,Ct=1,zs(n,i,l,c)}finally{vi.transition=d,Ct=c}return null}function zs(n,i,l,c){do no();while(hr!==null);if(vt&6)throw Error(r(327));l=n.finishedWork;var d=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var _=l.lanes|l.childLanes;if(Hi(n,_),n===ln&&(Rs=ln=null,un=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||xu||(xu=!0,Dh(Bi,function(){return no(),null})),_=(l.flags&15990)!==0,l.subtreeFlags&15990||_){_=vi.transition,vi.transition=null;var I=Ct;Ct=1;var y=vt;vt|=4,kh.current=null,cp(n,l),Rd(l,n),_l(Tl),Lr=!!bo,Tl=bo=null,n.current=l,Wr(l),tc(),vt=y,Ct=I,vi.transition=_}else n.current=l;if(xu&&(xu=!1,hr=n,Uc=d),_=n.pendingLanes,_===0&&(Ml=null),sa(l.stateNode),zn(n,ss()),i!==null)for(c=n.onRecoverableError,l=0;l<i.length;l++)d=i[l],c(d.value,{componentStack:d.stack,digest:d.digest});if(Pu)throw Pu=!1,n=Tn,Tn=null,n;return Uc&1&&n.tag!==0&&no(),_=n.pendingLanes,_&1?n===Xa?dr++:(dr=0,Xa=n):dr=0,ve(),null}function no(){if(hr!==null){var n=Uo(Uc),i=vi.transition,l=Ct;try{if(vi.transition=null,Ct=16>n?16:n,hr===null)var c=!1;else{if(n=hr,hr=null,Uc=0,vt&6)throw Error(r(331));var d=vt;for(vt|=4,Te=n.current;Te!==null;){var _=Te,I=_.child;if(Te.flags&16){var y=_.deletions;if(y!==null){for(var A=0;A<y.length;A++){var J=y[A];for(Te=J;Te!==null;){var fe=Te;switch(fe.tag){case 0:case 11:case 15:Ua(8,fe,_)}var me=fe.child;if(me!==null)me.return=fe,Te=me;else for(;Te!==null;){fe=Te;var ae=fe.sibling,De=fe.return;if(Ha(fe),fe===J){Te=null;break}if(ae!==null){ae.return=De,Te=ae;break}Te=De}}}var Ve=_.alternate;if(Ve!==null){var We=Ve.child;if(We!==null){Ve.child=null;do{var is=We.sibling;We.sibling=null,We=is}while(We!==null)}}Te=_}}if(_.subtreeFlags&2064&&I!==null)I.return=_,Te=I;else e:for(;Te!==null;){if(_=Te,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Ua(9,_,_.return)}var w=_.sibling;if(w!==null){w.return=_.return,Te=w;break e}Te=_.return}}var P=n.current;for(Te=P;Te!==null;){I=Te;var X=I.child;if(I.subtreeFlags&2064&&X!==null)X.return=I,Te=X;else e:for(I=P;Te!==null;){if(y=Te,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:ar(9,y)}}catch(je){as(y,y.return,je)}if(y===I){Te=null;break e}var Ce=y.sibling;if(Ce!==null){Ce.return=y.return,Te=Ce;break e}Te=y.return}}if(vt=d,ve(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(po,n)}catch{}c=!0}return c}finally{Ct=l,vi.transition=i}}return!1}function xl(n,i,l){i=xc(l,i),i=Da(n,i,1),n=Oi(n,i,1),i=Mn(),n!==null&&(Ui(n,1,i),zn(n,i))}function as(n,i,l){if(n.tag===3)xl(n,n,l);else for(;i!==null;){if(i.tag===3){xl(i,n,l);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ml===null||!Ml.has(c))){n=xc(l,n),n=kl(i,n,1),i=Oi(i,n,1),n=Mn(),i!==null&&(Ui(i,1,n),zn(i,n));break}}i=i.return}}function Mh(n,i,l){var c=n.pingCache;c!==null&&c.delete(i),i=Mn(),n.pingedLanes|=n.suspendedLanes&l,ln===n&&(un&l)===l&&(Cs===4||Cs===3&&(un&130023424)===un&&500>ss()-Wa?bs(n,0):Li|=l),zn(n,i)}function vd(n,i){i===0&&(n.mode&1?(i=pn,pn<<=1,!(pn&130023424)&&(pn=4194304)):i=1);var l=Mn();n=An(n,i),n!==null&&(Ui(n,i,l),zn(n,l))}function pp(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),vd(n,l)}function Ld(n,i){var l=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(l=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(i),vd(n,l)}var qa;qa=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||_s.current)fn=!0;else{if(!(n.lanes&l)&&!(i.flags&128))return fn=!1,Id(n,i,l);fn=!!(n.flags&131072)}else fn=!1,Pe&&i.flags&1048576&&Be(i,g,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Fc(n,i),n=i.pendingProps;var d=lr(i,qs.current);Vs(i,l),d=Aa(null,i,c,n,d,l);var _=wa();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zs(c)?(_=!0,$u(i)):_=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,mu(i),d.updater=Xs,i.stateNode=d,d._reactInternals=i,Ma(i,c,n,l),i=Pa(null,i,c,!0,_,l)):(i.tag=0,Pe&&_&&Fe(i),on(null,i,d,l),i=i.child),i;case 16:c=i.elementType;e:{switch(Fc(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=Pt(c),n=Xn(c,n),d){case 0:i=Oh(null,i,c,n,l);break e;case 1:i=md(null,i,c,n,l);break e;case 11:i=Sh(null,i,c,n,l);break e;case 14:i=gd(null,i,c,Xn(c.type,n),l);break e}throw Error(r(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Xn(c,d),Oh(n,i,c,d,l);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Xn(c,d),md(n,i,c,d,l);case 3:e:{if(xa(i),n===null)throw Error(r(387));c=i.pendingProps,_=i.memoizedState,d=_.element,Ol(n,i),Br(i,c,null,l);var I=i.memoizedState;if(c=I.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){d=xc(Error(r(423)),i),i=Td(n,i,c,l,d);break e}else if(c!==d){d=xc(Error(r(424)),i),i=Td(n,i,c,l,d);break e}else for(ze=So(i.stateNode.containerInfo.firstChild),Qe=i,Pe=!0,qe=null,l=Ln(i,null,c,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(gt(),c===d){i=Lo(n,i,l);break e}on(n,i,c,l)}i=i.child}return i;case 5:return Pc(i),n===null&&ht(i),c=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,I=d.children,du(c,d)?I=null:_!==null&&du(c,_)&&(i.flags|=32),lp(n,i),on(n,i,I,l),i.child;case 6:return n===null&&ht(i),null;case 13:return up(n,i,l);case 4:return yl(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Ps(i,null,c,l):on(n,i,c,l),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Xn(c,d),Sh(n,i,c,d,l);case 7:return on(n,i,i.pendingProps,l),i.child;case 8:return on(n,i,i.pendingProps.children,l),i.child;case 12:return on(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,_=i.memoizedProps,I=d.value,Wt(Qt,c._currentValue),c._currentValue=I,_!==null)if(_n(_.value,I)){if(_.children===d.children&&!_s.current){i=Lo(n,i,l);break e}}else for(_=i.child,_!==null&&(_.return=i);_!==null;){var y=_.dependencies;if(y!==null){I=_.child;for(var A=y.firstContext;A!==null;){if(A.context===c){if(_.tag===1){A=Si(-1,l&-l),A.tag=2;var J=_.updateQueue;if(J!==null){J=J.shared;var fe=J.pending;fe===null?A.next=A:(A.next=fe.next,fe.next=A),J.pending=A}}_.lanes|=l,A=_.alternate,A!==null&&(A.lanes|=l),Xt(_.return,l,i),y.lanes|=l;break}A=A.next}}else if(_.tag===10)I=_.type===i.type?null:_.child;else if(_.tag===18){if(I=_.return,I===null)throw Error(r(341));I.lanes|=l,y=I.alternate,y!==null&&(y.lanes|=l),Xt(I,l,i),I=_.sibling}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===i){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}on(n,i,d.children,l),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,Vs(i,l),d=Zt(d),c=c(d),i.flags|=1,on(n,i,c,l),i.child;case 14:return c=i.type,d=Xn(c,i.pendingProps),d=Xn(c.type,d),gd(n,i,c,d,l);case 15:return $d(n,i,i.type,i.pendingProps,l);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Xn(c,d),Fc(n,i),i.tag=1,Zs(c)?(n=!0,$u(i)):n=!1,Vs(i,l),to(i,c,d),Ma(i,c,d,l),Pa(null,i,c,!0,n,l);case 19:return ns(n,i,l);case 22:return fd(n,i,l)}throw Error(r(156,i.tag))};function Dh(n,i){return xi(n,i)}function Hu(n,i,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,i,l,c){return new Hu(n,i,l,c)}function Bl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Pt(n){if(typeof n=="function")return Bl(n)?1:0;if(n!=null){if(n=n.$$typeof,n===fs)return 11;if(n===St)return 14}return 2}function Ai(n,i){var l=n.alternate;return l===null?(l=En(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function _r(n,i,l,c,d,_){var I=2;if(c=n,typeof n=="function")Bl(n)&&(I=1);else if(typeof n=="string")I=5;else e:switch(n){case at:return jr(l.children,d,_,i);case Oe:I=8,d|=8;break;case pt:return n=En(12,l,i,d|2),n.elementType=pt,n.lanes=_,n;case os:return n=En(13,l,i,d),n.elementType=os,n.lanes=_,n;case nt:return n=En(19,l,i,d),n.elementType=nt,n.lanes=_,n;case Lt:return No(l,d,_,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Bt:I=10;break e;case Ls:I=9;break e;case fs:I=11;break e;case St:I=14;break e;case Ft:I=16,c=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return i=En(I,l,i,d),i.elementType=n,i.type=c,i.lanes=_,i}function jr(n,i,l,c){return n=En(7,n,c,i),n.lanes=l,n}function No(n,i,l,c){return n=En(22,n,c,i),n.elementType=Lt,n.lanes=l,n.stateNode={isHidden:!1},n}function Ph(n,i,l){return n=En(6,n,null,i),n.lanes=l,n}function Qa(n,i,l){return i=En(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Dn(n,i,l,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Gu(n,i,l,c,d,_,I,y,A){return n=new Dn(n,i,l,y,A),i===1?(i=1,_===!0&&(i|=8)):i=0,_=En(3,null,null,i),n.current=_,_.stateNode=n,_.memoizedState={element:c,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},mu(_),n}function Gc(n,i,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bt,key:c==null?null:""+c,children:n,containerInfo:i,implementation:l}}function Za(n){if(!n)return bi;n=n._reactInternals;e:{if(xn(n)!==n||n.tag!==1)throw Error(r(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zs(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(n.tag===1){var l=n.type;if(Zs(l))return ya(n,l,i)}return i}function Vc(n,i,l,c,d,_,I,y,A){return n=Gu(l,c,!0,n,d,_,I,y,A),n.context=Za(null),l=n.current,c=Mn(),d=zr(l),_=Si(c,d),_.callback=i??null,Oi(l,_,d),n.current.lanes=d,Ui(n,d,c),zn(n,c),n}function Kr(n,i,l,c){var d=i.current,_=Mn(),I=zr(d);return l=Za(l),i.context===null?i.context=l:i.pendingContext=l,i=Si(_,I),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Oi(d,i,I),n!==null&&(so(n,d,I,_),Rl(n,d,I)),I}function eh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kd(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Jr(n,i){kd(n,i),(n=n.alternate)&&kd(n,i)}function Ad(){return null}var xh=typeof reportError=="function"?reportError:function(n){console.error(n)};function ri(n){this._internalRoot=n}Fl.prototype.render=ri.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));Kr(n,i,null,null)},Fl.prototype.unmount=ri.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Yr(function(){Kr(null,n,null,null)}),i[si]=null}};function Fl(n){this._internalRoot=n}Fl.prototype.unstable_scheduleHydration=function(n){if(n){var i=Cr();n={blockedOn:null,target:n,priority:i};for(var l=0;l<qn.length&&i!==0&&i<qn[l].priority;l++);qn.splice(l,0,n),l===0&&ol(n)}};function th(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wd(){}function _p(n,i,l,c,d){if(d){if(typeof c=="function"){var _=c;c=function(){var J=eh(I);_.call(J)}}var I=Vc(i,c,n,0,null,!1,!1,"",wd);return n._reactRootContainer=I,n[si]=I.current,mi(n.nodeType===8?n.parentNode:n),Yr(),I}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var y=c;c=function(){var J=eh(A);y.call(J)}}var A=Gu(n,0,!1,null,null,!1,!1,"",wd);return n._reactRootContainer=A,n[si]=A.current,mi(n.nodeType===8?n.parentNode:n),Yr(function(){Kr(i,A,l,c)}),A}function Vu(n,i,l,c,d){var _=l._reactRootContainer;if(_){var I=_;if(typeof d=="function"){var y=d;d=function(){var A=eh(I);y.call(A)}}Kr(i,I,n,d)}else I=_p(l,i,n,d,c);return eh(I)}Kl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=jt(i.pendingLanes);l!==0&&(il(i,l|1),zn(i,ss()),!(vt&6)&&(Nl=ss()+500,ve()))}break;case 13:Yr(function(){var c=An(n,1);if(c!==null){var d=Mn();so(c,n,1,d)}}),Jr(n,1)}},Rr=function(n){if(n.tag===13){var i=An(n,134217728);if(i!==null){var l=Mn();so(i,n,134217728,l)}Jr(n,134217728)}},di=function(n){if(n.tag===13){var i=zr(n),l=An(n,i);if(l!==null){var c=Mn();so(l,n,i,c)}Jr(n,i)}},Cr=function(){return Ct},Gi=function(n,i){var l=Ct;try{return Ct=n,i()}finally{Ct=l}},ai=function(n,i,l){switch(i){case"input":if(li(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var c=l[i];if(c!==n&&c.form===n.form){var d=Ei(c);if(!d)throw Error(r(90));xo(c),li(c,d)}}}break;case"textarea":As(n,l);break;case"select":i=l.value,i!=null&&Tt(n,!!l.multiple,i,!1)}},ue=Ka,Le=Yr;var Ys={usingClientEntryPoint:!1,Events:[$n,sn,Ei,L,G,Ka]},In={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nd={bundleType:In.bundleType,version:In.version,rendererPackageName:In.rendererPackageName,rendererConfig:In.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ot.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ns(n),n===null?null:n.stateNode},findFiberByHostInstance:In.findFiberByHostInstance||Ad,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xc.isDisabled&&Xc.supportsFiber)try{po=Xc.inject(Nd),Sn=Xc}catch{}}return ro.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ys,ro.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!th(i))throw Error(r(200));return Gc(n,i,null,l)},ro.createRoot=function(n,i){if(!th(n))throw Error(r(299));var l=!1,c="",d=xh;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Gu(n,1,!1,null,null,l,!1,c,d),n[si]=i.current,mi(n.nodeType===8?n.parentNode:n),new ri(i)},ro.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=Ns(i),n=n===null?null:n.stateNode,n},ro.flushSync=function(n){return Yr(n)},ro.hydrate=function(n,i,l){if(!Wc(i))throw Error(r(200));return Vu(null,n,i,!0,l)},ro.hydrateRoot=function(n,i,l){if(!th(n))throw Error(r(405));var c=l!=null&&l.hydratedSources||null,d=!1,_="",I=xh;if(l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),i=Vc(i,null,n,1,l??null,d,!1,_,I),n[si]=i.current,mi(n),c)for(n=0;n<c.length;n++)l=c[n],d=l._getVersion,d=d(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,d]:i.mutableSourceEagerHydrationData.push(l,d);return new Fl(i)},ro.render=function(n,i,l){if(!Wc(i))throw Error(r(200));return Vu(null,n,i,!1,l)},ro.unmountComponentAtNode=function(n){if(!Wc(n))throw Error(r(40));return n._reactRootContainer?(Yr(function(){Vu(null,null,n,!1,function(){n._reactRootContainer=null,n[si]=null})}),!0):!1},ro.unstable_batchedUpdates=Ka,ro.unstable_renderSubtreeIntoContainer=function(n,i,l,c){if(!Wc(l))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return Vu(n,i,l,!1,c)},ro.version="18.3.1-next-f1338f8080-20240426",ro}var rf;function Mm(){if(rf)return J_.exports;rf=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(R){console.error(R)}}return m(),J_.exports=Nm(),J_.exports}var lf;function Dm(){if(lf)return xp;lf=1;var m=Mm();return xp.createRoot=m.createRoot,xp.hydrateRoot=m.hydrateRoot,xp}var Pm=Dm(),Jd={},uf;function xm(){if(uf)return Jd;uf=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.parse=Z,Jd.serialize=Y;const m=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,R=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,p=/^[\u0020-\u003A\u003D-\u007E]*$/,C=Object.prototype.toString,x=(()=>{const q=function(){};return q.prototype=Object.create(null),q})();function Z(q,Ie){const ie=new x,Se=q.length;if(Se<2)return ie;const le=(Ie==null?void 0:Ie.decode)||de;let pe=0;do{const ke=q.indexOf("=",pe);if(ke===-1)break;const Ne=q.indexOf(";",pe),ot=Ne===-1?Se:Ne;if(ke>ot){pe=q.lastIndexOf(";",ke-1)+1;continue}const ft=j(q,pe,ke),bt=V(q,ke,ft),at=q.slice(ft,bt);if(ie[at]===void 0){let Oe=j(q,ke+1,ot),pt=V(q,ot,Oe);const Bt=le(q.slice(Oe,pt));ie[at]=Bt}pe=ot+1}while(pe<Se);return ie}function j(q,Ie,ie){do{const Se=q.charCodeAt(Ie);if(Se!==32&&Se!==9)return Ie}while(++Ie<ie);return ie}function V(q,Ie,ie){for(;Ie>ie;){const Se=q.charCodeAt(--Ie);if(Se!==32&&Se!==9)return Ie+1}return ie}function Y(q,Ie,ie){const Se=(ie==null?void 0:ie.encode)||encodeURIComponent;if(!m.test(q))throw new TypeError(`argument name is invalid: ${q}`);const le=Se(Ie);if(!R.test(le))throw new TypeError(`argument val is invalid: ${Ie}`);let pe=q+"="+le;if(!ie)return pe;if(ie.maxAge!==void 0){if(!Number.isInteger(ie.maxAge))throw new TypeError(`option maxAge is invalid: ${ie.maxAge}`);pe+="; Max-Age="+ie.maxAge}if(ie.domain){if(!r.test(ie.domain))throw new TypeError(`option domain is invalid: ${ie.domain}`);pe+="; Domain="+ie.domain}if(ie.path){if(!p.test(ie.path))throw new TypeError(`option path is invalid: ${ie.path}`);pe+="; Path="+ie.path}if(ie.expires){if(!ge(ie.expires)||!Number.isFinite(ie.expires.valueOf()))throw new TypeError(`option expires is invalid: ${ie.expires}`);pe+="; Expires="+ie.expires.toUTCString()}if(ie.httpOnly&&(pe+="; HttpOnly"),ie.secure&&(pe+="; Secure"),ie.partitioned&&(pe+="; Partitioned"),ie.priority)switch(typeof ie.priority=="string"?ie.priority.toLowerCase():void 0){case"low":pe+="; Priority=Low";break;case"medium":pe+="; Priority=Medium";break;case"high":pe+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${ie.priority}`)}if(ie.sameSite)switch(typeof ie.sameSite=="string"?ie.sameSite.toLowerCase():ie.sameSite){case!0:case"strict":pe+="; SameSite=Strict";break;case"lax":pe+="; SameSite=Lax";break;case"none":pe+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${ie.sameSite}`)}return pe}function de(q){if(q.indexOf("%")===-1)return q;try{return decodeURIComponent(q)}catch{return q}}function ge(q){return C.call(q)==="[object Date]"}return Jd}xm();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cf="popstate";function Bm(m={}){function R(p,C){let{pathname:x,search:Z,hash:j}=p.location;return ig("",{pathname:x,search:Z,hash:j},C.state&&C.state.usr||null,C.state&&C.state.key||"default")}function r(p,C){return typeof C=="string"?C:Zd(C)}return Um(R,r,null,m)}function vs(m,R){if(m===!1||m===null||typeof m>"u")throw new Error(R)}function el(m,R){if(!m){typeof console<"u"&&console.warn(R);try{throw new Error(R)}catch{}}}function Fm(){return Math.random().toString(36).substring(2,10)}function af(m,R){return{usr:m.state,key:m.key,idx:R}}function ig(m,R,r=null,p){return{pathname:typeof m=="string"?m:m.pathname,search:"",hash:"",...typeof R=="string"?Kh(R):R,state:r,key:R&&R.key||p||Fm()}}function Zd({pathname:m="/",search:R="",hash:r=""}){return R&&R!=="?"&&(m+=R.charAt(0)==="?"?R:"?"+R),r&&r!=="#"&&(m+=r.charAt(0)==="#"?r:"#"+r),m}function Kh(m){let R={};if(m){let r=m.indexOf("#");r>=0&&(R.hash=m.substring(r),m=m.substring(0,r));let p=m.indexOf("?");p>=0&&(R.search=m.substring(p),m=m.substring(0,p)),m&&(R.pathname=m)}return R}function Um(m,R,r,p={}){let{window:C=document.defaultView,v5Compat:x=!1}=p,Z=C.history,j="POP",V=null,Y=de();Y==null&&(Y=0,Z.replaceState({...Z.state,idx:Y},""));function de(){return(Z.state||{idx:null}).idx}function ge(){j="POP";let le=de(),pe=le==null?null:le-Y;Y=le,V&&V({action:j,location:Se.location,delta:pe})}function q(le,pe){j="PUSH";let ke=ig(Se.location,le,pe);Y=de()+1;let Ne=af(ke,Y),ot=Se.createHref(ke);try{Z.pushState(Ne,"",ot)}catch(ft){if(ft instanceof DOMException&&ft.name==="DataCloneError")throw ft;C.location.assign(ot)}x&&V&&V({action:j,location:Se.location,delta:1})}function Ie(le,pe){j="REPLACE";let ke=ig(Se.location,le,pe);Y=de();let Ne=af(ke,Y),ot=Se.createHref(ke);Z.replaceState(Ne,"",ot),x&&V&&V({action:j,location:Se.location,delta:0})}function ie(le){let pe=C.location.origin!=="null"?C.location.origin:C.location.href,ke=typeof le=="string"?le:Zd(le);return ke=ke.replace(/ $/,"%20"),vs(pe,`No window.location.(origin|href) available to create URL for href: ${ke}`),new URL(ke,pe)}let Se={get action(){return j},get location(){return m(C,Z)},listen(le){if(V)throw new Error("A history only accepts one active listener");return C.addEventListener(cf,ge),V=le,()=>{C.removeEventListener(cf,ge),V=null}},createHref(le){return R(C,le)},createURL:ie,encodeLocation(le){let pe=ie(le);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:q,replace:Ie,go(le){return Z.go(le)}};return Se}function Sf(m,R,r="/"){return Hm(m,R,r,!1)}function Hm(m,R,r,p){let C=typeof R=="string"?Kh(R):R,x=Zc(C.pathname||"/",r);if(x==null)return null;let Z=Of(m);Gm(Z);let j=null;for(let V=0;j==null&&V<Z.length;++V){let Y=Zm(x);j=qm(Z[V],Y,p)}return j}function Of(m,R=[],r=[],p=""){let C=(x,Z,j)=>{let V={relativePath:j===void 0?x.path||"":j,caseSensitive:x.caseSensitive===!0,childrenIndex:Z,route:x};V.relativePath.startsWith("/")&&(vs(V.relativePath.startsWith(p),`Absolute route path "${V.relativePath}" nested under path "${p}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),V.relativePath=V.relativePath.slice(p.length));let Y=Qu([p,V.relativePath]),de=r.concat(V);x.children&&x.children.length>0&&(vs(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${Y}".`),Of(x.children,R,de,Y)),!(x.path==null&&!x.index)&&R.push({path:Y,score:Km(Y,x.index),routesMeta:de})};return m.forEach((x,Z)=>{var j;if(x.path===""||!((j=x.path)!=null&&j.includes("?")))C(x,Z);else for(let V of Rf(x.path))C(x,Z,V)}),R}function Rf(m){let R=m.split("/");if(R.length===0)return[];let[r,...p]=R,C=r.endsWith("?"),x=r.replace(/\?$/,"");if(p.length===0)return C?[x,""]:[x];let Z=Rf(p.join("/")),j=[];return j.push(...Z.map(V=>V===""?x:[x,V].join("/"))),C&&j.push(...Z),j.map(V=>m.startsWith("/")&&V===""?"/":V)}function Gm(m){m.sort((R,r)=>R.score!==r.score?r.score-R.score:Jm(R.routesMeta.map(p=>p.childrenIndex),r.routesMeta.map(p=>p.childrenIndex)))}var Vm=/^:[\w-]+$/,Wm=3,Xm=2,zm=1,Ym=10,jm=-2,hf=m=>m==="*";function Km(m,R){let r=m.split("/"),p=r.length;return r.some(hf)&&(p+=jm),R&&(p+=Xm),r.filter(C=>!hf(C)).reduce((C,x)=>C+(Vm.test(x)?Wm:x===""?zm:Ym),p)}function Jm(m,R){return m.length===R.length&&m.slice(0,-1).every((p,C)=>p===R[C])?m[m.length-1]-R[R.length-1]:0}function qm(m,R,r=!1){let{routesMeta:p}=m,C={},x="/",Z=[];for(let j=0;j<p.length;++j){let V=p[j],Y=j===p.length-1,de=x==="/"?R:R.slice(x.length)||"/",ge=jp({path:V.relativePath,caseSensitive:V.caseSensitive,end:Y},de),q=V.route;if(!ge&&Y&&r&&!p[p.length-1].route.index&&(ge=jp({path:V.relativePath,caseSensitive:V.caseSensitive,end:!1},de)),!ge)return null;Object.assign(C,ge.params),Z.push({params:C,pathname:Qu([x,ge.pathname]),pathnameBase:nT(Qu([x,ge.pathnameBase])),route:q}),ge.pathnameBase!=="/"&&(x=Qu([x,ge.pathnameBase]))}return Z}function jp(m,R){typeof m=="string"&&(m={path:m,caseSensitive:!1,end:!0});let[r,p]=Qm(m.path,m.caseSensitive,m.end),C=R.match(r);if(!C)return null;let x=C[0],Z=x.replace(/(.)\/+$/,"$1"),j=C.slice(1);return{params:p.reduce((Y,{paramName:de,isOptional:ge},q)=>{if(de==="*"){let ie=j[q]||"";Z=x.slice(0,x.length-ie.length).replace(/(.)\/+$/,"$1")}const Ie=j[q];return ge&&!Ie?Y[de]=void 0:Y[de]=(Ie||"").replace(/%2F/g,"/"),Y},{}),pathname:x,pathnameBase:Z,pattern:m}}function Qm(m,R=!1,r=!0){el(m==="*"||!m.endsWith("*")||m.endsWith("/*"),`Route path "${m}" will be treated as if it were "${m.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${m.replace(/\*$/,"/*")}".`);let p=[],C="^"+m.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(Z,j,V)=>(p.push({paramName:j,isOptional:V!=null}),V?"/?([^\\/]+)?":"/([^\\/]+)"));return m.endsWith("*")?(p.push({paramName:"*"}),C+=m==="*"||m==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?C+="\\/*$":m!==""&&m!=="/"&&(C+="(?:(?=\\/|$))"),[new RegExp(C,R?void 0:"i"),p]}function Zm(m){try{return m.split("/").map(R=>decodeURIComponent(R).replace(/\//g,"%2F")).join("/")}catch(R){return el(!1,`The URL path "${m}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${R}).`),m}}function Zc(m,R){if(R==="/")return m;if(!m.toLowerCase().startsWith(R.toLowerCase()))return null;let r=R.endsWith("/")?R.length-1:R.length,p=m.charAt(r);return p&&p!=="/"?null:m.slice(r)||"/"}function eT(m,R="/"){let{pathname:r,search:p="",hash:C=""}=typeof m=="string"?Kh(m):m;return{pathname:r?r.startsWith("/")?r:tT(r,R):R,search:iT(p),hash:oT(C)}}function tT(m,R){let r=R.replace(/\/+$/,"").split("/");return m.split("/").forEach(C=>{C===".."?r.length>1&&r.pop():C!=="."&&r.push(C)}),r.length>1?r.join("/"):"/"}function Z_(m,R,r,p){return`Cannot include a '${m}' character in a manually specified \`to.${R}\` field [${JSON.stringify(p)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sT(m){return m.filter((R,r)=>r===0||R.route.path&&R.route.path.length>0)}function lg(m){let R=sT(m);return R.map((r,p)=>p===R.length-1?r.pathname:r.pathnameBase)}function ug(m,R,r,p=!1){let C;typeof m=="string"?C=Kh(m):(C={...m},vs(!C.pathname||!C.pathname.includes("?"),Z_("?","pathname","search",C)),vs(!C.pathname||!C.pathname.includes("#"),Z_("#","pathname","hash",C)),vs(!C.search||!C.search.includes("#"),Z_("#","search","hash",C)));let x=m===""||C.pathname==="",Z=x?"/":C.pathname,j;if(Z==null)j=r;else{let ge=R.length-1;if(!p&&Z.startsWith("..")){let q=Z.split("/");for(;q[0]==="..";)q.shift(),ge-=1;C.pathname=q.join("/")}j=ge>=0?R[ge]:"/"}let V=eT(C,j),Y=Z&&Z!=="/"&&Z.endsWith("/"),de=(x||Z===".")&&r.endsWith("/");return!V.pathname.endsWith("/")&&(Y||de)&&(V.pathname+="/"),V}var Qu=m=>m.join("/").replace(/\/\/+/g,"/"),nT=m=>m.replace(/\/+$/,"").replace(/^\/*/,"/"),iT=m=>!m||m==="?"?"":m.startsWith("?")?m:"?"+m,oT=m=>!m||m==="#"?"":m.startsWith("#")?m:"#"+m;function rT(m){return m!=null&&typeof m.status=="number"&&typeof m.statusText=="string"&&typeof m.internal=="boolean"&&"data"in m}var Cf=["POST","PUT","PATCH","DELETE"];new Set(Cf);var lT=["GET",...Cf];new Set(lT);var Jh=he.createContext(null);Jh.displayName="DataRouter";var Jp=he.createContext(null);Jp.displayName="DataRouterState";var yf=he.createContext({isTransitioning:!1});yf.displayName="ViewTransition";var uT=he.createContext(new Map);uT.displayName="Fetchers";var cT=he.createContext(null);cT.displayName="Await";var tl=he.createContext(null);tl.displayName="Navigation";var ep=he.createContext(null);ep.displayName="Location";var zl=he.createContext({outlet:null,matches:[],isDataRoute:!1});zl.displayName="Route";var cg=he.createContext(null);cg.displayName="RouteError";function aT(m,{relative:R}={}){vs(qh(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:p}=he.useContext(tl),{hash:C,pathname:x,search:Z}=tp(m,{relative:R}),j=x;return r!=="/"&&(j=x==="/"?r:Qu([r,x])),p.createHref({pathname:j,search:Z,hash:C})}function qh(){return he.useContext(ep)!=null}function ea(){return vs(qh(),"useLocation() may be used only in the context of a <Router> component."),he.useContext(ep).location}var vf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lf(m){he.useContext(tl).static||he.useLayoutEffect(m)}function kf(){let{isDataRoute:m}=he.useContext(zl);return m?ST():hT()}function hT(){vs(qh(),"useNavigate() may be used only in the context of a <Router> component.");let m=he.useContext(Jh),{basename:R,navigator:r}=he.useContext(tl),{matches:p}=he.useContext(zl),{pathname:C}=ea(),x=JSON.stringify(lg(p)),Z=he.useRef(!1);return Lf(()=>{Z.current=!0}),he.useCallback((V,Y={})=>{if(el(Z.current,vf),!Z.current)return;if(typeof V=="number"){r.go(V);return}let de=ug(V,JSON.parse(x),C,Y.relative==="path");m==null&&R!=="/"&&(de.pathname=de.pathname==="/"?R:Qu([R,de.pathname])),(Y.replace?r.replace:r.push)(de,Y.state,Y)},[R,r,x,C,m])}he.createContext(null);function tp(m,{relative:R}={}){let{matches:r}=he.useContext(zl),{pathname:p}=ea(),C=JSON.stringify(lg(r));return he.useMemo(()=>ug(m,JSON.parse(C),p,R==="path"),[m,C,p,R])}function dT(m,R){return Af(m,R)}function Af(m,R,r,p){var ke;vs(qh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:C,static:x}=he.useContext(tl),{matches:Z}=he.useContext(zl),j=Z[Z.length-1],V=j?j.params:{},Y=j?j.pathname:"/",de=j?j.pathnameBase:"/",ge=j&&j.route;{let Ne=ge&&ge.path||"";wf(Y,!ge||Ne.endsWith("*")||Ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${Y}" (under <Route path="${Ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Ne}"> to <Route path="${Ne==="/"?"*":`${Ne}/*`}">.`)}let q=ea(),Ie;if(R){let Ne=typeof R=="string"?Kh(R):R;vs(de==="/"||((ke=Ne.pathname)==null?void 0:ke.startsWith(de)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${de}" but pathname "${Ne.pathname}" was given in the \`location\` prop.`),Ie=Ne}else Ie=q;let ie=Ie.pathname||"/",Se=ie;if(de!=="/"){let Ne=de.replace(/^\//,"").split("/");Se="/"+ie.replace(/^\//,"").split("/").slice(Ne.length).join("/")}let le=!x&&r&&r.matches&&r.matches.length>0?r.matches:Sf(m,{pathname:Se});el(ge||le!=null,`No routes matched location "${Ie.pathname}${Ie.search}${Ie.hash}" `),el(le==null||le[le.length-1].route.element!==void 0||le[le.length-1].route.Component!==void 0||le[le.length-1].route.lazy!==void 0,`Matched leaf route at location "${Ie.pathname}${Ie.search}${Ie.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let pe=fT(le&&le.map(Ne=>Object.assign({},Ne,{params:Object.assign({},V,Ne.params),pathname:Qu([de,C.encodeLocation?C.encodeLocation(Ne.pathname).pathname:Ne.pathname]),pathnameBase:Ne.pathnameBase==="/"?de:Qu([de,C.encodeLocation?C.encodeLocation(Ne.pathnameBase).pathname:Ne.pathnameBase])})),Z,r,p);return R&&pe?he.createElement(ep.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...Ie},navigationType:"POP"}},pe):pe}function pT(){let m=bT(),R=rT(m)?`${m.status} ${m.statusText}`:m instanceof Error?m.message:JSON.stringify(m),r=m instanceof Error?m.stack:null,p="rgba(200,200,200, 0.5)",C={padding:"0.5rem",backgroundColor:p},x={padding:"2px 4px",backgroundColor:p},Z=null;return console.error("Error handled by React Router default ErrorBoundary:",m),Z=he.createElement(he.Fragment,null,he.createElement("p",null,"💿 Hey developer 👋"),he.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",he.createElement("code",{style:x},"ErrorBoundary")," or"," ",he.createElement("code",{style:x},"errorElement")," prop on your route.")),he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},R),r?he.createElement("pre",{style:C},r):null,Z)}var _T=he.createElement(pT,null),gT=class extends he.Component{constructor(m){super(m),this.state={location:m.location,revalidation:m.revalidation,error:m.error}}static getDerivedStateFromError(m){return{error:m}}static getDerivedStateFromProps(m,R){return R.location!==m.location||R.revalidation!=="idle"&&m.revalidation==="idle"?{error:m.error,location:m.location,revalidation:m.revalidation}:{error:m.error!==void 0?m.error:R.error,location:R.location,revalidation:m.revalidation||R.revalidation}}componentDidCatch(m,R){console.error("React Router caught the following error during render",m,R)}render(){return this.state.error!==void 0?he.createElement(zl.Provider,{value:this.props.routeContext},he.createElement(cg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $T({routeContext:m,match:R,children:r}){let p=he.useContext(Jh);return p&&p.static&&p.staticContext&&(R.route.errorElement||R.route.ErrorBoundary)&&(p.staticContext._deepestRenderedBoundaryId=R.route.id),he.createElement(zl.Provider,{value:m},r)}function fT(m,R=[],r=null,p=null){if(m==null){if(!r)return null;if(r.errors)m=r.matches;else if(R.length===0&&!r.initialized&&r.matches.length>0)m=r.matches;else return null}let C=m,x=r==null?void 0:r.errors;if(x!=null){let V=C.findIndex(Y=>Y.route.id&&(x==null?void 0:x[Y.route.id])!==void 0);vs(V>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),C=C.slice(0,Math.min(C.length,V+1))}let Z=!1,j=-1;if(r)for(let V=0;V<C.length;V++){let Y=C[V];if((Y.route.HydrateFallback||Y.route.hydrateFallbackElement)&&(j=V),Y.route.id){let{loaderData:de,errors:ge}=r,q=Y.route.loader&&!de.hasOwnProperty(Y.route.id)&&(!ge||ge[Y.route.id]===void 0);if(Y.route.lazy||q){Z=!0,j>=0?C=C.slice(0,j+1):C=[C[0]];break}}}return C.reduceRight((V,Y,de)=>{let ge,q=!1,Ie=null,ie=null;r&&(ge=x&&Y.route.id?x[Y.route.id]:void 0,Ie=Y.route.errorElement||_T,Z&&(j<0&&de===0?(wf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,ie=null):j===de&&(q=!0,ie=Y.route.hydrateFallbackElement||null)));let Se=R.concat(C.slice(0,de+1)),le=()=>{let pe;return ge?pe=Ie:q?pe=ie:Y.route.Component?pe=he.createElement(Y.route.Component,null):Y.route.element?pe=Y.route.element:pe=V,he.createElement($T,{match:Y,routeContext:{outlet:V,matches:Se,isDataRoute:r!=null},children:pe})};return r&&(Y.route.ErrorBoundary||Y.route.errorElement||de===0)?he.createElement(gT,{location:r.location,revalidation:r.revalidation,component:Ie,error:ge,children:le(),routeContext:{outlet:null,matches:Se,isDataRoute:!0}}):le()},null)}function ag(m){return`${m} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mT(m){let R=he.useContext(Jh);return vs(R,ag(m)),R}function TT(m){let R=he.useContext(Jp);return vs(R,ag(m)),R}function ET(m){let R=he.useContext(zl);return vs(R,ag(m)),R}function hg(m){let R=ET(m),r=R.matches[R.matches.length-1];return vs(r.route.id,`${m} can only be used on routes that contain a unique "id"`),r.route.id}function IT(){return hg("useRouteId")}function bT(){var p;let m=he.useContext(cg),R=TT("useRouteError"),r=hg("useRouteError");return m!==void 0?m:(p=R.errors)==null?void 0:p[r]}function ST(){let{router:m}=mT("useNavigate"),R=hg("useNavigate"),r=he.useRef(!1);return Lf(()=>{r.current=!0}),he.useCallback(async(C,x={})=>{el(r.current,vf),r.current&&(typeof C=="number"?m.navigate(C):await m.navigate(C,{fromRouteId:R,...x}))},[m,R])}var df={};function wf(m,R,r){!R&&!df[m]&&(df[m]=!0,el(!1,r))}he.memo(OT);function OT({routes:m,future:R,state:r}){return Af(m,void 0,r,R)}function RT({to:m,replace:R,state:r,relative:p}){vs(qh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:C}=he.useContext(tl);el(!C,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:x}=he.useContext(zl),{pathname:Z}=ea(),j=kf(),V=ug(m,lg(x),Z,p==="path"),Y=JSON.stringify(V);return he.useEffect(()=>{j(JSON.parse(Y),{replace:R,state:r,relative:p})},[j,Y,p,R,r]),null}function qu(m){vs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CT({basename:m="/",children:R=null,location:r,navigationType:p="POP",navigator:C,static:x=!1}){vs(!qh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let Z=m.replace(/^\/*/,"/"),j=he.useMemo(()=>({basename:Z,navigator:C,static:x,future:{}}),[Z,C,x]);typeof r=="string"&&(r=Kh(r));let{pathname:V="/",search:Y="",hash:de="",state:ge=null,key:q="default"}=r,Ie=he.useMemo(()=>{let ie=Zc(V,Z);return ie==null?null:{location:{pathname:ie,search:Y,hash:de,state:ge,key:q},navigationType:p}},[Z,V,Y,de,ge,q,p]);return el(Ie!=null,`<Router basename="${Z}"> is not able to match the URL "${V}${Y}${de}" because it does not start with the basename, so the <Router> won't render anything.`),Ie==null?null:he.createElement(tl.Provider,{value:j},he.createElement(ep.Provider,{children:R,value:Ie}))}function yT({children:m,location:R}){return dT(og(m),R)}function og(m,R=[]){let r=[];return he.Children.forEach(m,(p,C)=>{if(!he.isValidElement(p))return;let x=[...R,C];if(p.type===he.Fragment){r.push.apply(r,og(p.props.children,x));return}vs(p.type===qu,`[${typeof p.type=="string"?p.type:p.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vs(!p.props.index||!p.props.children,"An index route cannot have child routes.");let Z={id:p.props.id||x.join("-"),caseSensitive:p.props.caseSensitive,element:p.props.element,Component:p.props.Component,index:p.props.index,path:p.props.path,loader:p.props.loader,action:p.props.action,hydrateFallbackElement:p.props.hydrateFallbackElement,HydrateFallback:p.props.HydrateFallback,errorElement:p.props.errorElement,ErrorBoundary:p.props.ErrorBoundary,hasErrorBoundary:p.props.hasErrorBoundary===!0||p.props.ErrorBoundary!=null||p.props.errorElement!=null,shouldRevalidate:p.props.shouldRevalidate,handle:p.props.handle,lazy:p.props.lazy};p.props.children&&(Z.children=og(p.props.children,x)),r.push(Z)}),r}var Up="get",Hp="application/x-www-form-urlencoded";function qp(m){return m!=null&&typeof m.tagName=="string"}function vT(m){return qp(m)&&m.tagName.toLowerCase()==="button"}function LT(m){return qp(m)&&m.tagName.toLowerCase()==="form"}function kT(m){return qp(m)&&m.tagName.toLowerCase()==="input"}function AT(m){return!!(m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)}function wT(m,R){return m.button===0&&(!R||R==="_self")&&!AT(m)}var Bp=null;function NT(){if(Bp===null)try{new FormData(document.createElement("form"),0),Bp=!1}catch{Bp=!0}return Bp}var MT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eg(m){return m!=null&&!MT.has(m)?(el(!1,`"${m}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hp}"`),null):m}function DT(m,R){let r,p,C,x,Z;if(LT(m)){let j=m.getAttribute("action");p=j?Zc(j,R):null,r=m.getAttribute("method")||Up,C=eg(m.getAttribute("enctype"))||Hp,x=new FormData(m)}else if(vT(m)||kT(m)&&(m.type==="submit"||m.type==="image")){let j=m.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let V=m.getAttribute("formaction")||j.getAttribute("action");if(p=V?Zc(V,R):null,r=m.getAttribute("formmethod")||j.getAttribute("method")||Up,C=eg(m.getAttribute("formenctype"))||eg(j.getAttribute("enctype"))||Hp,x=new FormData(j,m),!NT()){let{name:Y,type:de,value:ge}=m;if(de==="image"){let q=Y?`${Y}.`:"";x.append(`${q}x`,"0"),x.append(`${q}y`,"0")}else Y&&x.append(Y,ge)}}else{if(qp(m))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Up,p=null,C=Hp,Z=m}return x&&C==="text/plain"&&(Z=x,x=void 0),{action:p,method:r.toLowerCase(),encType:C,formData:x,body:Z}}function dg(m,R){if(m===!1||m===null||typeof m>"u")throw new Error(R)}async function PT(m,R){if(m.id in R)return R[m.id];try{let r=await import(m.module);return R[m.id]=r,r}catch(r){return console.error(`Error loading route module \`${m.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xT(m){return m==null?!1:m.href==null?m.rel==="preload"&&typeof m.imageSrcSet=="string"&&typeof m.imageSizes=="string":typeof m.rel=="string"&&typeof m.href=="string"}async function BT(m,R,r){let p=await Promise.all(m.map(async C=>{let x=R.routes[C.route.id];if(x){let Z=await PT(x,r);return Z.links?Z.links():[]}return[]}));return GT(p.flat(1).filter(xT).filter(C=>C.rel==="stylesheet"||C.rel==="preload").map(C=>C.rel==="stylesheet"?{...C,rel:"prefetch",as:"style"}:{...C,rel:"prefetch"}))}function pf(m,R,r,p,C,x){let Z=(V,Y)=>r[Y]?V.route.id!==r[Y].route.id:!0,j=(V,Y)=>{var de;return r[Y].pathname!==V.pathname||((de=r[Y].route.path)==null?void 0:de.endsWith("*"))&&r[Y].params["*"]!==V.params["*"]};return x==="assets"?R.filter((V,Y)=>Z(V,Y)||j(V,Y)):x==="data"?R.filter((V,Y)=>{var ge;let de=p.routes[V.route.id];if(!de||!de.hasLoader)return!1;if(Z(V,Y)||j(V,Y))return!0;if(V.route.shouldRevalidate){let q=V.route.shouldRevalidate({currentUrl:new URL(C.pathname+C.search+C.hash,window.origin),currentParams:((ge=r[0])==null?void 0:ge.params)||{},nextUrl:new URL(m,window.origin),nextParams:V.params,defaultShouldRevalidate:!0});if(typeof q=="boolean")return q}return!0}):[]}function FT(m,R){return UT(m.map(r=>{let p=R.routes[r.route.id];if(!p)return[];let C=[p.module];return p.imports&&(C=C.concat(p.imports)),C}).flat(1))}function UT(m){return[...new Set(m)]}function HT(m){let R={},r=Object.keys(m).sort();for(let p of r)R[p]=m[p];return R}function GT(m,R){let r=new Set;return new Set(R),m.reduce((p,C)=>{let x=JSON.stringify(HT(C));return r.has(x)||(r.add(x),p.push({key:x,link:C})),p},[])}function VT(m){let R=typeof m=="string"?new URL(m,typeof window>"u"?"server://singlefetch/":window.location.origin):m;return R.pathname==="/"?R.pathname="_root.data":R.pathname=`${R.pathname.replace(/\/$/,"")}.data`,R}function WT(){let m=he.useContext(Jh);return dg(m,"You must render this element inside a <DataRouterContext.Provider> element"),m}function XT(){let m=he.useContext(Jp);return dg(m,"You must render this element inside a <DataRouterStateContext.Provider> element"),m}var pg=he.createContext(void 0);pg.displayName="FrameworkContext";function Nf(){let m=he.useContext(pg);return dg(m,"You must render this element inside a <HydratedRouter> element"),m}function zT(m,R){let r=he.useContext(pg),[p,C]=he.useState(!1),[x,Z]=he.useState(!1),{onFocus:j,onBlur:V,onMouseEnter:Y,onMouseLeave:de,onTouchStart:ge}=R,q=he.useRef(null);he.useEffect(()=>{if(m==="render"&&Z(!0),m==="viewport"){let Se=pe=>{pe.forEach(ke=>{Z(ke.isIntersecting)})},le=new IntersectionObserver(Se,{threshold:.5});return q.current&&le.observe(q.current),()=>{le.disconnect()}}},[m]),he.useEffect(()=>{if(p){let Se=setTimeout(()=>{Z(!0)},100);return()=>{clearTimeout(Se)}}},[p]);let Ie=()=>{C(!0)},ie=()=>{C(!1),Z(!1)};return r?m!=="intent"?[x,q,{}]:[x,q,{onFocus:qd(j,Ie),onBlur:qd(V,ie),onMouseEnter:qd(Y,Ie),onMouseLeave:qd(de,ie),onTouchStart:qd(ge,Ie)}]:[!1,q,{}]}function qd(m,R){return r=>{m&&m(r),r.defaultPrevented||R(r)}}function YT({page:m,...R}){let{router:r}=WT(),p=he.useMemo(()=>Sf(r.routes,m,r.basename),[r.routes,m,r.basename]);return p?he.createElement(KT,{page:m,matches:p,...R}):null}function jT(m){let{manifest:R,routeModules:r}=Nf(),[p,C]=he.useState([]);return he.useEffect(()=>{let x=!1;return BT(m,R,r).then(Z=>{x||C(Z)}),()=>{x=!0}},[m,R,r]),p}function KT({page:m,matches:R,...r}){let p=ea(),{manifest:C,routeModules:x}=Nf(),{loaderData:Z,matches:j}=XT(),V=he.useMemo(()=>pf(m,R,j,C,p,"data"),[m,R,j,C,p]),Y=he.useMemo(()=>pf(m,R,j,C,p,"assets"),[m,R,j,C,p]),de=he.useMemo(()=>{if(m===p.pathname+p.search+p.hash)return[];let Ie=new Set,ie=!1;if(R.forEach(le=>{var ke;let pe=C.routes[le.route.id];!pe||!pe.hasLoader||(!V.some(Ne=>Ne.route.id===le.route.id)&&le.route.id in Z&&((ke=x[le.route.id])!=null&&ke.shouldRevalidate)||pe.hasClientLoader?ie=!0:Ie.add(le.route.id))}),Ie.size===0)return[];let Se=VT(m);return ie&&Ie.size>0&&Se.searchParams.set("_routes",R.filter(le=>Ie.has(le.route.id)).map(le=>le.route.id).join(",")),[Se.pathname+Se.search]},[Z,p,C,V,R,m,x]),ge=he.useMemo(()=>FT(Y,C),[Y,C]),q=jT(Y);return he.createElement(he.Fragment,null,de.map(Ie=>he.createElement("link",{key:Ie,rel:"prefetch",as:"fetch",href:Ie,...r})),ge.map(Ie=>he.createElement("link",{key:Ie,rel:"modulepreload",href:Ie,...r})),q.map(({key:Ie,link:ie})=>he.createElement("link",{key:Ie,...ie})))}function JT(...m){return R=>{m.forEach(r=>{typeof r=="function"?r(R):r!=null&&(r.current=R)})}}var Mf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mf&&(window.__reactRouterVersion="7.1.5")}catch{}function qT({basename:m,children:R,window:r}){let p=he.useRef();p.current==null&&(p.current=Bm({window:r,v5Compat:!0}));let C=p.current,[x,Z]=he.useState({action:C.action,location:C.location}),j=he.useCallback(V=>{he.startTransition(()=>Z(V))},[Z]);return he.useLayoutEffect(()=>C.listen(j),[C,j]),he.createElement(CT,{basename:m,children:R,location:x.location,navigationType:x.action,navigator:C})}var Df=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qc=he.forwardRef(function({onClick:R,discover:r="render",prefetch:p="none",relative:C,reloadDocument:x,replace:Z,state:j,target:V,to:Y,preventScrollReset:de,viewTransition:ge,...q},Ie){let{basename:ie}=he.useContext(tl),Se=typeof Y=="string"&&Df.test(Y),le,pe=!1;if(typeof Y=="string"&&Se&&(le=Y,Mf))try{let pt=new URL(window.location.href),Bt=Y.startsWith("//")?new URL(pt.protocol+Y):new URL(Y),Ls=Zc(Bt.pathname,ie);Bt.origin===pt.origin&&Ls!=null?Y=Ls+Bt.search+Bt.hash:pe=!0}catch{el(!1,`<Link to="${Y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ke=aT(Y,{relative:C}),[Ne,ot,ft]=zT(p,q),bt=tE(Y,{replace:Z,state:j,target:V,preventScrollReset:de,relative:C,viewTransition:ge});function at(pt){R&&R(pt),pt.defaultPrevented||bt(pt)}let Oe=he.createElement("a",{...q,...ft,href:le||ke,onClick:pe||x?R:at,ref:JT(Ie,ot),target:V,"data-discover":!Se&&r==="render"?"true":void 0});return Ne&&!Se?he.createElement(he.Fragment,null,Oe,he.createElement(YT,{page:ke})):Oe});Qc.displayName="Link";var QT=he.forwardRef(function({"aria-current":R="page",caseSensitive:r=!1,className:p="",end:C=!1,style:x,to:Z,viewTransition:j,children:V,...Y},de){let ge=tp(Z,{relative:Y.relative}),q=ea(),Ie=he.useContext(Jp),{navigator:ie,basename:Se}=he.useContext(tl),le=Ie!=null&&rE(ge)&&j===!0,pe=ie.encodeLocation?ie.encodeLocation(ge).pathname:ge.pathname,ke=q.pathname,Ne=Ie&&Ie.navigation&&Ie.navigation.location?Ie.navigation.location.pathname:null;r||(ke=ke.toLowerCase(),Ne=Ne?Ne.toLowerCase():null,pe=pe.toLowerCase()),Ne&&Se&&(Ne=Zc(Ne,Se)||Ne);const ot=pe!=="/"&&pe.endsWith("/")?pe.length-1:pe.length;let ft=ke===pe||!C&&ke.startsWith(pe)&&ke.charAt(ot)==="/",bt=Ne!=null&&(Ne===pe||!C&&Ne.startsWith(pe)&&Ne.charAt(pe.length)==="/"),at={isActive:ft,isPending:bt,isTransitioning:le},Oe=ft?R:void 0,pt;typeof p=="function"?pt=p(at):pt=[p,ft?"active":null,bt?"pending":null,le?"transitioning":null].filter(Boolean).join(" ");let Bt=typeof x=="function"?x(at):x;return he.createElement(Qc,{...Y,"aria-current":Oe,className:pt,ref:de,style:Bt,to:Z,viewTransition:j},typeof V=="function"?V(at):V)});QT.displayName="NavLink";var ZT=he.forwardRef(({discover:m="render",fetcherKey:R,navigate:r,reloadDocument:p,replace:C,state:x,method:Z=Up,action:j,onSubmit:V,relative:Y,preventScrollReset:de,viewTransition:ge,...q},Ie)=>{let ie=iE(),Se=oE(j,{relative:Y}),le=Z.toLowerCase()==="get"?"get":"post",pe=typeof j=="string"&&Df.test(j),ke=Ne=>{if(V&&V(Ne),Ne.defaultPrevented)return;Ne.preventDefault();let ot=Ne.nativeEvent.submitter,ft=(ot==null?void 0:ot.getAttribute("formmethod"))||Z;ie(ot||Ne.currentTarget,{fetcherKey:R,method:ft,navigate:r,replace:C,state:x,relative:Y,preventScrollReset:de,viewTransition:ge})};return he.createElement("form",{ref:Ie,method:le,action:Se,onSubmit:p?V:ke,...q,"data-discover":!pe&&m==="render"?"true":void 0})});ZT.displayName="Form";function eE(m){return`${m} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pf(m){let R=he.useContext(Jh);return vs(R,eE(m)),R}function tE(m,{target:R,replace:r,state:p,preventScrollReset:C,relative:x,viewTransition:Z}={}){let j=kf(),V=ea(),Y=tp(m,{relative:x});return he.useCallback(de=>{if(wT(de,R)){de.preventDefault();let ge=r!==void 0?r:Zd(V)===Zd(Y);j(m,{replace:ge,state:p,preventScrollReset:C,relative:x,viewTransition:Z})}},[V,j,Y,r,p,R,m,C,x,Z])}var sE=0,nE=()=>`__${String(++sE)}__`;function iE(){let{router:m}=Pf("useSubmit"),{basename:R}=he.useContext(tl),r=IT();return he.useCallback(async(p,C={})=>{let{action:x,method:Z,encType:j,formData:V,body:Y}=DT(p,R);if(C.navigate===!1){let de=C.fetcherKey||nE();await m.fetch(de,r,C.action||x,{preventScrollReset:C.preventScrollReset,formData:V,body:Y,formMethod:C.method||Z,formEncType:C.encType||j,flushSync:C.flushSync})}else await m.navigate(C.action||x,{preventScrollReset:C.preventScrollReset,formData:V,body:Y,formMethod:C.method||Z,formEncType:C.encType||j,replace:C.replace,state:C.state,fromRouteId:r,flushSync:C.flushSync,viewTransition:C.viewTransition})},[m,R,r])}function oE(m,{relative:R}={}){let{basename:r}=he.useContext(tl),p=he.useContext(zl);vs(p,"useFormAction must be used inside a RouteContext");let[C]=p.matches.slice(-1),x={...tp(m||".",{relative:R})},Z=ea();if(m==null){x.search=Z.search;let j=new URLSearchParams(x.search),V=j.getAll("index");if(V.some(de=>de==="")){j.delete("index"),V.filter(ge=>ge).forEach(ge=>j.append("index",ge));let de=j.toString();x.search=de?`?${de}`:""}}return(!m||m===".")&&C.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(x.pathname=x.pathname==="/"?r:Qu([r,x.pathname])),Zd(x)}function rE(m,R={}){let r=he.useContext(yf);vs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:p}=Pf("useViewTransitionState"),C=tp(m,{relative:R.relative});if(!r.isTransitioning)return!1;let x=Zc(r.currentLocation.pathname,p)||r.currentLocation.pathname,Z=Zc(r.nextLocation.pathname,p)||r.nextLocation.pathname;return jp(C.pathname,Z)!=null||jp(C.pathname,x)!=null}new TextEncoder;const lE=()=>Ge.jsxs("div",{className:"container mt-5",children:[Ge.jsx("h1",{children:"歡迎來到，首頁網頁。"}),Ge.jsx("p",{children:"這是一個教育網站。"})]}),uE=()=>Ge.jsxs("div",{className:"container mt-5",children:[Ge.jsx("h1",{children:"歡迎來到，課程網頁。"}),Ge.jsx("p",{children:"這是一個教育網站。"})]}),cE=()=>Ge.jsxs("div",{className:"container mt-5",children:[Ge.jsx("h1",{children:"歡迎來到，申請網頁。"}),Ge.jsx("p",{children:"這是一個教育網站。"})]}),aE=()=>Ge.jsxs("div",{className:"container mt-5",children:[Ge.jsx("h1",{children:"歡迎來到，登入網頁。"}),Ge.jsx("p",{children:"請使用您的帳號進行登入。"})]}),hE=()=>Ge.jsxs("div",{className:"container mt-5",children:[Ge.jsx("h1",{children:"歡迎來到，註冊網頁。"}),Ge.jsx("p",{children:"這是一個教育網站。"})]});var Gp={exports:{}},dE=Gp.exports,_f;function Qp(){return _f||(_f=1,function(m,R){(function(r,p){m.exports=p()})(dE,function(){var r={},p,C,x,Z,j,V,Y,de,ge,q,Ie,ie,Se,le,pe,ke,Ne,ot,ft,bt,at,Oe,pt,Bt,Ls,fs,os,nt,St,Ft,Lt,ee,Je,W,H,_e,it,Ye,rt,Xe,mt,Re,_t,ds,lo,xo,an,Mi,ks,ps,li,ui,Di,Ue,Tt,Ot,ci,As,k,Yn,ts,Rt,ms,K,ye,f,b,D,B,$e,kt,Fs,Pn,ai,js,$,O,L,G,ue,Le,Ke,hn,jn,br,Kn,Yl,Pi,hi,uo,Zu,ec,ch,sl,xn,ws,dn,Ks,Ns,nl,xi,co,ao,tc,ss,ho,Sr,Or,Bi,ta,Bo,po,Sn,sa,Bn,na,_o,Ms,go,pn,jt,Us,Fn,jl,Fo,Un,Fi,Ui,Hi,il,Ct,Uo,Kl,Rr,di,Cr,Gi,Ho,Go,On,Jn,Hn,$o,pi,qn,yr,sc,Vo,nc,ol,Qn,ia,Wo,Js,vr,fo,Lr,ic,oa,Xo,kr,rl,_i,Hs,Jl,ll,oc,ul,cl,rc,tn,zo,lc,al,uc,ql,gi,Yo,Ql,mo,cc,ac,To,jo,hc,dc,ah,ra,la,pc,_c,gc,ua,Ko,Vi,Zl,hl,$c,eu,Wi,ca,aa,tu,ha,da,Zn,Ar,Jo,pa,_a,ga,fc,dl,wr,qo,mc,pl,Tc,Ec,Ic,Qo,Xi,zi,Zo,Rn,$a,bc,su,Sc,Oc,fa,ma,hh,Nr,nu,iu,_n,Gn,Rc,ou,Yi,At,ru,_l,er,tr,gl,Eo,sr,Cc,ji,$i,$l,yc,lu,Ta,Ea,vc,fi,uu,fl,Io,Lc,kc,dh,cu,Mr,Ia,Dr,nr,Kt,ir,Ki,mi,ba,Ac,ei,ti,gn,Sa,au,hu,Oa,Ti,ml,bo,Tl,du,wc,ph,Nc,El,or,Il,So,Ra,rr,Vn,Pr,si,pu,Mc,bl,Cn,$n,sn,Ei,_u,Oo,Ii,Ut,Wt,bi,qs,_s,Qs,lr,Zs,gu,Ca,ya,$u,He,gs,cs,wt,yn,Sl,ve,Nt,T,a,g,S,M,U,Q,oe,be,Be,Fe,Ae,Qe,ze,Pe,qe,lt,Ht,Gt,ht,Et,ct,dt,gt,Mt,Dt,Jt,Gs,vn,Ds,Ps,Ln,Qt,kn,Os,Ji,Ts,yt,Xt,Vs,Zt,ni,fu,xr,An,qi,mu,Ol,Si,Oi,Rl,Tu,Br,Dc,Cl,en,Ro,Fr,Co,yl,Qi,Pc,Eu,es,vl,Iu,Ur,Hr,va,Gr,rs,Es,Ws,La,bu,Su,Qh,nn,ka,Aa,wa,Zi,ii,Ou,_h,gh,Zh,$h,ed,td,sd,nd,id,re;p=function(e,t,s,o){if(!(e instanceof ce)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const u=t.toLowerCase();if(!s)throw Error("Can not register a null value");let h=eo[e],E=Ru[e];if(h||(h=eo[e]=Object.create(null),E=Ru[e]=Object.create(null)),C(e,s),!o&&h[u]&&h[u]!==s)throw Error('Name "'+u+'" with type "'+e+'" already registered.');h[u]=s,E[u]=t},C=function(e,t){switch(e){case String(ce.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},x=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const s=eo[e];s&&s[t]?(delete eo[e][t],delete Ru[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},Z=function(e,t,s){e=`${e}`.toLowerCase(),t=t.toLowerCase();const o=eo[e];if(!o||!o[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",s)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return o[t]},j=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=eo[e])?!!e[t]:!1},V=function(e,t,s){return Z(e,t,s)},Y=function(e,t,s){return Z(e,t,s)},de=function(e,t,s){e=`${e}`.toLowerCase();var o=eo[e];if(!o){if(o=`Unable to find [${e}] in the registry.`,s)throw Error(`${o} You must require or register a ${e} plugin.`);return console.warn(o),null}if(!t)return o;e=Ru[e],s=Object.create(null);for(const u of Object.keys(o))s[e[u]]=o[u];return s},ge=function(e,t,s){return t=t.plugins[String(e)]||Ri,typeof t=="function"?t:V(e,t,s)},q=function(e,t,s,o){e=e+" was deprecated in "+t+" and will be deleted in "+s+".",o&&(e+=`
Use `+o+" instead."),rd.has(e)||(rd.add(e),console.warn(e))},Ie=function(){return"blockly-"+(np++).toString(36)},ie=function(){return ud.genUid()},Se=function(e){return e.type===z.BLOCK_CREATE},le=function(e){return e.type===z.BLOCK_DELETE},pe=function(e){return e.type===z.BLOCK_CHANGE},ke=function(e){return e.type===z.BLOCK_FIELD_INTERMEDIATE_CHANGE},Ne=function(e){return e.type===z.BLOCK_MOVE},ot=function(e){return e.type===z.CLICK},ft=function(e){return e.type===z.BUBBLE_OPEN},bt=function(e){return e.type===z.VIEWPORT_CHANGE},r.setRecordUndo$$module$build$src$core$events$utils=function(e){Na=e},at=function(){return Na},Oe=function(e){dd.fireInternal(e)},pt=function(e){if(nt()){if(!ur.length)try{requestAnimationFrame(()=>{setTimeout(Bt,0)})}catch{setTimeout(Bt,0)}Ls(e)}},Bt=function(){const e=fs(ur,!0);ur.length=0;for(const t of e){if(!t.workspaceId)continue;let s;(s=W(t.workspaceId))==null||s.fireChangeListener(t)}},Ls=function(e){if(pe(e)&&e.element==="mutation"){let t;for(t=ur.length;0<t;t--){const s=ur[t-1];if(s.group!==e.group||s.workspaceId!==e.workspaceId||!Ne(s)||s.newParentId!==e.blockId)break}ur.splice(t,0,e)}else ur.push(e)},fs=function(e,t=!0){t||(q("filter(queue, /*forward=*/false)","v11.2","v12"),e=e.slice().reverse());const s=[];for(const o of e)if(e=s[s.length-1],!o.isNull())if(e&&e.workspaceId===o.workspaceId&&e.group===o.group)if(Ne(o)&&Ne(e)&&o.blockId===e.blockId){if(e.newParentId=o.newParentId,e.newInputName=o.newInputName,e.newCoordinate=o.newCoordinate,e.reason||o.reason){let u,h;e.reason=Array.from(new Set(((u=e.reason)!=null?u:[]).concat((h=o.reason)!=null?h:[])))}}else pe(o)&&pe(e)&&o.blockId===e.blockId&&o.element===e.element&&o.name===e.name?e.newValue=o.newValue:bt(o)&&bt(e)?(e.viewTop=o.viewTop,e.viewLeft=o.viewLeft,e.scale=o.scale,e.oldScale=o.oldScale):ot(o)&&ft(e)||s.push(o);else s.push(o);return e=s.filter(o=>!o.isNull()),t||e.reverse(),e},os=function(){for(let e=0,t;t=ur[e];e++)t.recordUndo=!1},r.disable$$module$build$src$core$events$utils=function(){hd++},r.enable$$module$build$src$core$events$utils=function(){hd--},nt=function(){return hd===0},r.getGroup$$module$build$src$core$events$utils=function(){return ad},r.setGroup$$module$build$src$core$events$utils=function(e){dd.setGroupInternal(e)},St=function(e){ad=typeof e=="boolean"?e?ie():"":e},Ft=function(e){const t=[];e=e.getDescendants(!1);for(let s=0,o;o=e[s];s++)t[s]=o.id;return t},Lt=function(e,t){const s=ee(e.type);if(!s)throw Error("Unknown event type.");return s.fromJson(e,t)},ee=function(e){const t=V(ce.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},Je=function(e){if((Ne(e)||Se(e))&&e.workspaceId){var t=W(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const s=Na;try{Na=!1;const o=e.getParent();if(o&&!o.hasDisabledReason(mh)){const u=e.getDescendants(!1);for(let h=0,E;E=u[h];h++)E.setDisabledReason(!1,mh)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,mh),e=e.getNextBlock();while(e)}finally{Na=s}}}},W=function(e){return Ll[e]||null},H=function(){const e=[];for(const t in Ll)e.push(Ll[t]);return e},_e=function(e){Ll[e.id]=e},it=function(e){delete Ll[e.id]},Ye=function(){return ip},rt=function(e){ip=e},Xe=function(){return Cu},r.setSelected$$module$build$src$core$common=function(e){if(Cu!==e){var t,s,o,u,h,E,v=new(ee(z.SELECTED))((o=(t=Cu)==null?void 0:t.id)!=null?o:null,(u=e==null?void 0:e.id)!=null?u:null,(E=(h=e==null?void 0:e.workspace.id)!=null?h:(s=Cu)==null?void 0:s.workspace.id)!=null?E:"");Oe(v);var se;(se=Cu)==null||se.unselect(),Cu=e;var Me;(Me=Cu)==null||Me.select()}},mt=function(){return op},Re=function(e){op=e},_t=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),s=e.getCachedParentSvgSize();var o=t.parentElement;if(o instanceof HTMLElement){var u=o.offsetWidth;o=o.offsetHeight,s.width!==u&&(t.setAttribute("width",u+"px"),e.setCachedParentSvgSize(u,null)),s.height!==o&&(t.setAttribute("height",o+"px"),e.setCachedParentSvgSize(null,o)),e.resize()}},ds=function(e,t){const s=Object.create(null),o=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=o.indexOf(e),o.splice(e,o.length-e));for(let u=0,h;h=o[u];u++)s[h.type]?s[h.type]++:s[h.type]=1;return s},lo=function(e){return function(){this.jsonInit(e)}},xo=function(e){Th.defineBlocksWithJsonArrayInternal(e)},an=function(e){r.defineBlocks$$module$build$src$core$common(r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let s=0;s<e.length;s++){const o=e[s];if(!o){console.warn(`Block definition #${s} in JSON array is ${o}. Skipping`);continue}const u=o.type;u?t[u]={init:lo(o)}:console.warn(`Block definition #${s} in JSON array is missing a type attribute. Skipping.`)}return t},r.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const s=e[t];t in Wn&&console.warn(`Block definition "${t}" overwrites previous definition.`),Wn[t]=s}},Mi=function(e,t){ks(),Da=setTimeout(function(){t&&t.handleRightClick(e)},xc)},ks=function(){Da&&(clearTimeout(Da),Da=0)},ps=function(){Bc=null},li=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&Di(e)},ui=function(e){return`${e.pointerId}`},Di=function(e){const t=ui(e);return Bc?Bc===t:e.type==="pointerdown"?(Bc=t,!0):!1},Ue=function(e,t,s,o,u){function h(v){(u||li(v))&&(s?o.call(s,v):o(v))}const E=[];if(t in vu)for(let v=0;v<vu[t].length;v++){const se=vu[t][v];e.addEventListener(se,h,!1),E.push([e,se,h])}else e.addEventListener(t,h,!1),E.push([e,t,h]);return E},Tt=function(e,t,s,o){function u(E){s?o.call(s,E):o(E)}const h=[];if(t in vu)for(let E=0;E<vu[t].length;E++){const v=vu[t][E];e.addEventListener(v,u,!1),h.push([e,v,u])}else e.addEventListener(t,u,!1),h.push([e,t,u]);return h},Ot=function(e){const t=e[e.length-1][2];for(;e.length;){const[s,o,u]=e.pop();s.removeEventListener(o,u,!1)}return t},ci=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},As=function(e){return e.ctrlKey&&Ba?!0:e.button===2},k=function(e,t,s){const o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,s||(s=t.getScreenCTM().inverse()),o.matrixTransform(s)},Yn=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Ch,y:e.deltaY*Ch};case 2:return{x:e.deltaX*Fa,y:e.deltaY*Fa}}},ts=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},Rt=function(e){if(Fc)throw Error("CSS already injected");Lo+=`
`+e},ms=function(e,t){Fc||(Fc=!0,e&&(e=t.replace(/[\\/]$/,""),t=Lo.replace(/<<<PATH>>>/g,e),Lo="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},K=function(e,t,s){e=document.createElementNS(Lu,`${e}`);for(const o in t)e.setAttribute(o,`${t[o]}`);return s&&s.appendChild(e),e},ye=function(e,t){return t=t.split(" "),t.every(s=>e.classList.contains(s))?!1:(e.classList.add(...t),!0)},f=function(e,t){e.classList.remove(...t.split(" "))},b=function(e,t){return t=t.split(" "),t.every(s=>!e.classList.contains(s))?!1:(e.classList.remove(...t),!0)},D=function(e,t){return e.classList.contains(t)},B=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},$e=function(e,t){const s=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");s?t.insertBefore(e,s):t.appendChild(e)},kt=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Fs=function(){bd++,ls||(ls=Object.create(null))},Pn=function(){bd--,bd||(ls=null)},ai=function(e){const t=e.textContent+`
`+e.className.baseVal;let s;if(ls&&(s=ls[t]))return s;try{s=e.getComputedTextLength()}catch{return 8*e.textContent.length}return ls&&(ls[t]=s),s},js=function(e,t,s,o){return $(e,t+"pt",s,o)},$=function(e,t,s,o){const u=e.textContent;e=u+`
`+e.className.baseVal;var h;return ls&&(h=ls[e])||(yh||(h=document.createElement("canvas"),h.className="blocklyComputeCanvas",document.body.appendChild(h),yh=h.getContext("2d")),yh.font=s+" "+t+" "+o,h=u?yh.measureText(u).width:0,ls&&(ls[e]=h)),h},O=function(e,t,s,o){const u=document.createElement("span");u.style.font=s+" "+t+" "+o,u.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(u),t.appendChild(e),document.body.appendChild(t),s={height:0,baseline:0};try{t.style.alignItems="baseline",s.baseline=e.offsetTop-u.offsetTop,t.style.alignItems="flex-end",s.height=e.offsetTop-u.offsetTop}finally{document.body.removeChild(t)}return s},L=function(e){return ku.getSizeInternal(e)},G=function(e){if(Le(e,"display")!=="none")return ue(e);const t=e.style,s=t.display,o=t.visibility,u=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const h=e.offsetWidth;return e=e.offsetHeight,t.display=s,t.position=u,t.visibility=o,new Te(h,e)},ue=function(e){return q("Blockly.utils.style.getSizeWithDisplay()","v11.2","v13"),new Te(e.offsetWidth,e.offsetHeight)},Le=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},Ke=function(e){const t=new Ee(0,0);e=e.getBoundingClientRect();var s=document.documentElement;return s=new Ee(window.pageXOffset||s.scrollLeft,window.pageYOffset||s.scrollTop),t.x=e.left+s.x,t.y=e.top+s.y,t},hn=function(){const e=document.body,t=document.documentElement;return new Ee(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},jn=function(e){q("Blockly.utils.style.getBorderBox()","v11.2","v13");const t=parseFloat(Le(e,"borderLeftWidth")),s=parseFloat(Le(e,"borderRightWidth")),o=parseFloat(Le(e,"borderTopWidth"));return e=parseFloat(Le(e,"borderBottomWidth")),new zt(o,e,t,s)},br=function(e,t,s){q("Blockly.utils.style.scrollIntoContainerView()","v11.2","v13","the native Element.scrollIntoView()"),e=Kn(e,t,s),t.scrollLeft=e.x,t.scrollTop=e.y},Kn=function(e,t,s){q("Blockly.utils.style.getContainerOffsetToScrollInto()","v11.2","v13");var o=Ke(e),u=Ke(t),h=jn(t);const E=o.x-u.x-h.left;return o=o.y-u.y-h.top,u=ue(e),e=t.clientWidth-u.width,u=t.clientHeight-u.height,h=t.scrollLeft,t=t.scrollTop,s?(h+=E-e/2,t+=o-u/2):(h+=Math.min(E,Math.max(E-e,0)),t+=Math.min(o,Math.max(o-u,0))),new Ee(h,t)},Yl=function(e){const t=new Ee(0,0);var s=e.x&&e.getAttribute("x");const o=e.y&&e.getAttribute("y");return s&&(t.x=parseInt(s)),o&&(t.y=parseInt(o)),(s=(s=e.getAttribute("transform"))&&s.match(Sd))&&(t.x+=Number(s[1]),s[3]&&(t.y+=Number(s[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(cp))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},Pi=function(e){let t=0,s=0;for(;e;){const o=Yl(e);if(t+=o.x,s+=o.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new Ee(t,s)},hi=function(){const e=hn();return new zt(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},uo=function(){const e=document.documentElement,t=window;return new Ee(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},Zu=function(e,t){var s=t.x;t=t.y;const o=e.getInjectionDiv().getBoundingClientRect();return s=new Ee(s-o.left,t-o.top),t=e.getOriginOffsetInPixels(),Ee.difference(s,t).scale(1/e.scale)},ec=function(e,t){var s=t.scale(e.scale);t=s.x,s=s.y;const o=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new Ee(t+o.left+e.x,s+o.top+e.y)},ch=function(e){({document:Ga=Ga,DOMParser:Au=Au,XMLSerializer:wu=wu}=e),Ha=new Au,vh=new wu},r.createElement$$module$build$src$core$utils$xml=function(e){return Ga.createElementNS(rn,e)},r.createTextNode$$module$build$src$core$utils$xml=function(e){return Ga.createTextNode(e)},r.textToDom$$module$build$src$core$utils$xml=function(e){let t=Ha.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=Ha.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},sl=function(e){return xn(vh.serializeToString(e))},xn=function(e){return e.replace(Ao,t=>`&#${t.charCodeAt(0)};`)},ws=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=ss(e),e=co(e)),dn(e),e):null},dn=function(e){const t=e.kind;if(e=e.contents,t&&t!==Od&&t!==Lh)throw Error("Invalid toolbox kind "+t+". Please supply either "+Od+" or "+Lh);if(!e)throw Error("Toolbox must have a contents attribute.")},Ks=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:ao(e):[]},Ns=function(e){return Rd.hasCategoriesInternal(e)},nl=function(e){if(!e)return!1;const t=e.kind;return t?t===Lh:!!e.contents.filter(s=>s.kind.toUpperCase()==="CATEGORY").length},xi=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},co=function(e){const t={contents:ao(e)};return e instanceof Node&&tc(e,t),t},ao=function(e){const t=[];let s=e.childNodes;s||(s=e);for(let o=0,u;u=s[o];o++){if(!u.tagName)continue;e={};const h=u.tagName.toUpperCase();e.kind=h,h==="BLOCK"?e.blockxml=u:u.childNodes&&0<u.childNodes.length&&(e.contents=ao(u)),tc(u,e),t.push(e)}return t},tc=function(e,t){for(let s=0;s<e.attributes.length;s++){const o=e.attributes[s];o.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[o.nodeName.replace("css-","")]=o.value):t[o.nodeName]=o.value}},ss=function(e){let t=null;if(e)if(typeof e=="string"){if(t=r.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},ho=function(e,t,s,o,u,h){const E=h.scrollbar&&h.scrollbar.canScrollVertically();return e.horizontal===Nu.LEFT?(s=u.absoluteMetrics.left+s,E&&h.RTL&&(s+=$s.scrollbarThickness)):(s=u.absoluteMetrics.left+u.viewMetrics.width-t.width-s,E&&!h.RTL&&(s-=$s.scrollbarThickness)),e.vertical===Wr.TOP?e=u.absoluteMetrics.top+o:(e=u.absoluteMetrics.top+u.viewMetrics.height-t.height-o,h.scrollbar&&h.scrollbar.canScrollHorizontally()&&(e-=$s.scrollbarThickness)),new zt(e,e+t.height,s,s+t.width)},Sr=function(e,t){return{horizontal:t.toolboxMetrics.position===Ze.LEFT||e.horizontalLayout&&!e.RTL?Nu.RIGHT:Nu.LEFT,vertical:t.toolboxMetrics.position===Ze.BOTTOM?Wr.TOP:Wr.BOTTOM}},Or=function(e,t,s,o){const u=e.left,h=e.right-e.left,E=e.bottom-e.top;for(let v=0;v<o.length;v++){const se=o[v];e.intersects(se)&&(e=s===Xr.UP?se.top-E-t:se.bottom+t,e=new zt(e,e+E,u,u+h),v=-1)}return e},Bi=function(e,t){p(ce.SERIALIZER,e,t)},ta=function(e){x(ce.SERIALIZER,e)},Bo=function(e,{addCoordinates:t=!1,saveIds:s=!0}={}){const o=e.workspace,u=Object.create(null);return u.height=e.getSize().height,u.width=e.getSize().width,s&&(u.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),u.x=o.RTL?o.getWidth()-t.x:t.x,u.y=t.y),e.getText()&&(u.text=e.getText()),e.isCollapsed()&&(u.collapsed=!0),e.isOwnEditable()||(u.editable=!1),e.isOwnMovable()||(u.movable=!1),e.isOwnDeletable()||(u.deletable=!1),u},po=function(e,t,{recordUndo:s=!1}={}){const o=at();if(r.setRecordUndo$$module$build$src$core$events$utils(s),s=t.newComment(e.id),e.text!==void 0&&s.setText(e.text),e.x!==void 0||e.y!==void 0){const h=s.getRelativeToSurfaceXY();let E,v=(E=e.x)!=null?E:h.x;v=t.RTL?t.getWidth()-v:v;var u;t=(u=e.y)!=null?u:h.y,s.moveTo(new Ee(v,t))}if(e.width!==void 0||e.height){u=s.getSize();let h,E;s.setSize(new Te((h=e.width)!=null?h:u.width,(E=e.height)!=null?E:u.height))}return e.collapsed!==void 0&&s.setCollapsed(e.collapsed),e.editable!==void 0&&s.setEditable(e.editable),e.movable!==void 0&&s.setMovable(e.movable),e.deletable!==void 0&&s.setDeletable(e.deletable),r.setRecordUndo$$module$build$src$core$events$utils(o),s},Sn=function(e,t){p(ce.PASTER,e,t)},sa=function(e){x(ce.PASTER,e)},Bn=function(e){const t=e.workspace,s=e.getRelativeToSurfaceXY(),o=new Ee(0,0),u=t.getTopComments(!1).filter(h=>h.id!==e.id).map(h=>h.getRelativeToSurfaceXY());for(;na(Ee.sum(s,o),u);)o.translate(t.RTL?-30:30,30);e.moveTo(Ee.sum(s,o))},na=function(e,t){return t.some(s=>1>=Math.abs(s.x-e.x)&&1>=Math.abs(s.y-e.y))},_o=function(e,t){e.setAttribute(Ah,t)},Ms=function(e,t,s){Array.isArray(s)&&(s=s.join(" ")),e.setAttribute(Du+t,`${s}`)},go=function(e){return e.saveState!==void 0&&e.loadState!==void 0},pn=function(e){return jl(e),Fn()?(Fo(),Promise.resolve()):(dr||(dr=new Promise(t=>{Xa=t,za=window.requestAnimationFrame(()=>{Fo(),t()})})),dr)},jt=function(){return dr||Promise.resolve()},Us=function(e){e||window.cancelAnimationFrame(za),Fo(e),!e&&Xa&&Xa()},Fn=function(){return Oh},jl=function(e){hr.add(e),Uc.set(e,r.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?jl(t):xu.add(e)},Fo=function(e){const t=e?new Set([e]):new Set([...xu].map(h=>h.workspace)),s=[...xu].filter(Fi).filter(h=>t.has(h.workspace));for(var o of s)Ui(o);for(const h of t)h.resizeContents();for(var u of s)o=u.getRelativeToSurfaceXY(),u.updateComponentLocations(o);for(const h of s)u=r.getGroup$$module$build$src$core$events$utils(),(o=Uc.get(h))&&r.setGroup$$module$build$src$core$events$utils(o),h.bumpNeighbours(),r.setGroup$$module$build$src$core$events$utils(u);for(const h of s)Un(h);e||(dr=null)},Un=function(e){xu.delete(e),hr.delete(e),Uc.delete(e);for(const t of e.getChildren(!1))Un(t)},Fi=function(e){return!e.isDisposed()&&!e.getParent()},Ui=function(e){if(hr.has(e)&&e.initialized){for(const t of e.getChildren(!1))Ui(t);e.renderEfficiently()}},Hi=function(e,t){Mn(e,t)},il=function(e){Mn=e},Ct=function(e,t){zn.confirmInternal(e,t)},Uo=function(e,t){zr(e,t)},Kl=function(e){zr=e},Rr=function(e,t,s){so(e,t,s)},di=function(e){so=e},Cr=function(e){return e.getProcedureDef!==void 0},Gi=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},Ho=function(e){return e.getVariableModel!==void 0},r.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let s=0;s<e.length;s++){const o=e[s].getVarModels();if(o)for(let u=0;u<o.length;u++){const h=o[u];h.getId()&&t.add(h)}}return Array.from(t.values())},r.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let o=0,u;u=e[o];o++){var s=u.getDeveloperVariables;if(s){s=s();for(let h=0;h<s.length;h++)t.add(s[h])}}return Array.from(t.values())},Go=function(e){let t=[];const s=document.createElement("button");return s.setAttribute("text","%{BKY_NEW_VARIABLE}"),s.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(o){pi(o.getTargetWorkspace())}),t.push(s),e=On(e),t=t.concat(e)},On=function(e){e=e.getVariablesOfType("");const t=[];if(0<e.length){var s=e[e.length-1];if(Wn.variables_set){var o=r.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",Wn.math_change?"8":"24"),o.appendChild(Qn(s)),t.push(o)}if(Wn.math_change&&(o=r.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","math_change"),o.setAttribute("gap",Wn.variables_get?"20":"8"),o.appendChild(Qn(s)),s=r.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(s),t.push(o)),Wn.variables_get){e.sort(Hc.compareByName);for(let u=0,h;h=e[u];u++)s=r.createElement$$module$build$src$core$utils$xml("block"),s.setAttribute("type","variables_get"),s.setAttribute("gap","8"),s.appendChild(Qn(h)),t.push(s)}}return t},Jn=function(e){return Nh.generateUniqueNameInternal(e)},Hn=function(e){return $o(Yr.charAt(0),e.getAllVariableNames())},$o=function(e,t){if(!t.length)return e;const s=Yr;let o="",u=s.indexOf(e);for(;;){let h=!1;for(let E=0;E<t.length;E++)if(t[E].toLowerCase()===e){h=!0;break}if(!h)break;u++,u===s.length&&(u=0,o=`${Number(o)+1}`),e=s.charAt(u)+o}return e},pi=function(e,t,s){function o(h){qn(r.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,h,function(E){if(E){var v=sc(E,e);if(v){if(v.type===u)var se=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",v.name);else se=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,se=se.replace("%1",v.name).replace("%2",v.type);Hi(se,function(){o(E)})}else e.createVariable(E,u),t&&t(E)}else t&&t(null)})}const u=s||"";o("")},r.renameVariable$$module$build$src$core$variables=function(e,t,s){function o(u){const h=r.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);qn(h,u,function(E){if(E){var v=yr(E,t.type,e),se=Vo(t.name,E,e);if(v||se){var Me="";v?Me=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",v.name).replace("%2",v.type):se&&(Me=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",E).replace("%2",se)),Hi(Me,function(){o(E)})}else e.renameVariableById(t.getId(),E),s&&s(E)}else s&&s(null)})}o("")},qn=function(e,t,s){Rr(e,t,function(o){o&&(o=o.replace(/[\s\xa0]+/g," ").trim(),o===r.Msg$$module$build$src$core$msg.RENAME_VARIABLE||o===r.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(o=null),s(o)})},yr=function(e,t,s){s=s.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,u;u=s[o];o++)if(u.name.toLowerCase()===e&&u.type!==t)return u;return null},sc=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let s=0,o;o=t[s];s++)if(o.name.toLowerCase()===e)return o;return null},Vo=function(e,t,s){return s.getProcedureMap().getProcedures().length?nc(e,t,s):ol(e,t,s)},nc=function(e,t,s){e=e.toLowerCase(),t=t.toLowerCase(),s=s.getProcedureMap().getProcedures();for(const u of s){var o=u.getParameters().filter(Ho).map(h=>h.getVariableModel().name);if(o&&(s=o.some(h=>h.toLowerCase()===e),o=o.some(h=>h.toLowerCase()===t),s&&o))return u.getName()}return null},ol=function(e,t,s){e=e.toLowerCase(),t=t.toLowerCase(),s=s.getAllBlocks(!1);for(const u of s){if(!Cr(u))continue;s=u.getProcedureDef();var o=s[1];const h=o.some(E=>E.toLowerCase()===e);if(o=o.some(E=>E.toLowerCase()===t),h&&o)return s[0]}return null},Qn=function(e){const t=r.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=r.createTextNode$$module$build$src$core$utils$xml(e.name),t.appendChild(e),t},r.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,s,o){let u=r.getVariable$$module$build$src$core$variables(e,t,s,o);return u||(u=ia(e,t,s,o)),u},r.getVariable$$module$build$src$core$variables=function(e,t,s,o){const u=e.getPotentialVariableMap();let h=null;if(t&&(h=e.getVariableById(t),!h&&u&&(h=u.getVariableById(t)),h))return h;if(s){if(o===void 0)throw Error("Tried to look up a variable by name without a type");h=e.getVariable(s,o),!h&&u&&(h=u.getVariable(s,o))}return h},ia=function(e,t,s,o){const u=e.getPotentialVariableMap();return s||(s=Jn(e.isFlyout?e.targetWorkspace:e)),u?u.createVariable(s,o,t):e.createVariable(s,o,t)},Wo=function(e,t){e=e.getAllVariables();const s=[];if(t.length!==e.length)for(let o=0;o<e.length;o++){const u=e[o];t.includes(u)||s.push(u)}return s},Js=function(e,{addCoordinates:t=!1,addInputBlocks:s=!0,addNextBlocks:o=!0,doFullSerialization:u=!0,saveIds:h=!0}={}){if(e.isInsertionMarker())return null;const E={type:e.type,id:h?e.id:void 0};return t&&fo(e,E),vr(e,E),Lr(e,E,u),ic(e,E,u),oa(e,E,u),s&&Xo(e,E,u,h),o&&kr(e,E,u,h),E},vr=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},fo=function(e,t){const s=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(s.RTL?s.getWidth()-e.x:e.x),t.y=Math.round(e.y)},Lr=function(e,t,s){e.saveExtraState?(e=e.saveExtraState(s),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=gn(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},ic=function(e,t,s){const o=Object.create(null);for(const u of e.getIcons())go(u)&&(e=u.saveState(s))&&(o[u.getType().toString()]=e);Object.keys(o).length&&(t.icons=o)},oa=function(e,t,s){const o=Object.create(null);for(let u=0;u<e.inputList.length;u++){const h=e.inputList[u];for(let E=0;E<h.fieldRow.length;E++){const v=h.fieldRow[E];v.isSerializable()&&(o[v.name]=v.saveState(s))}}Object.keys(o).length&&(t.fields=o)},Xo=function(e,t,s,o){const u=Object.create(null);for(let h=0;h<e.inputList.length;h++){const E=e.inputList[h];if(!E.connection)continue;const v=rl(E.connection,s,o);v&&(u[E.name]=v)}Object.keys(u).length&&(t.inputs=u)},kr=function(e,t,s,o){e.nextConnection&&(e=rl(e.nextConnection,s,o))&&(t.next=e)},rl=function(e,t,s){const o=e.getShadowState(!0);if(e=e.targetBlock(),!o&&!e)return null;const u=Object.create(null);return o&&(u.shadow=o),e&&!e.isShadow()&&(u.block=Js(e,{doFullSerialization:t,saveIds:s})),u},_i=function(e,t,{recordUndo:s=!1}={}){return e=Hs(e,t,{recordUndo:s}),t.rendered&&Us(),e},Hs=function(e,t,{parentConnection:s,isShadow:o=!1,recordUndo:u=!1}={}){const h=at();r.setRecordUndo$$module$build$src$core$events$utils(u),(u=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),r.disable$$module$build$src$core$events$utils();const E=t.getAllVariables();let v;try{v=Jl(e,t,{parentConnection:s,isShadow:o})}finally{r.enable$$module$build$src$core$events$utils()}if(ll(t,E),nt()&&Oe(new(ee(z.BLOCK_CREATE))(v)),r.setGroup$$module$build$src$core$events$utils(u),r.setRecordUndo$$module$build$src$core$events$utils(h),t.rendered){const se=v;setTimeout(()=>{se.disposed||se.setConnectionTracking(!0)},1)}return v},Jl=function(e,t,{parentConnection:s,isShadow:o=!1}={}){if(!e.type)throw new Cd(e);const u=t.newBlock(e.type,e.id);return u.setShadow(o),oc(u,e),ul(u,e),cl(u,e),rc(s,u,e),tn(u,e),zo(u,e),lc(u,e),al(u,e),ql(u,t.rendered),u},ll=function(e,t){if(nt())for(e=Wo(e,t),t=0;t<e.length;t++){const s=e[t];Oe(new(ee(z.VAR_CREATE))(s))}},oc=function(e,t){let s=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const o=e.workspace;s=o.RTL?o.getWidth()-s:s,e.moveBy(s,t)},ul=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,Tn),Array.isArray(t.disabledReasons))for(const s of t.disabledReasons)e.setDisabledReason(!0,s);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},cl=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(r.textToDom$$module$build$src$core$utils$xml(t.extraState)))},rc=function(e,t,s){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new hp(s);if(e.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var o=t.outputConnection;if(!o)throw new Uu("output",t,s)}else if(o=t.previousConnection,!o)throw new Uu("previous",t,s);if(!e.connect(o)){const u=t.workspace.connectionChecker;throw new Ja(u.getErrorMessage(u.canConnectWithReason(o,e,!1),o,e),e.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,s)}}},tn=function(e,t){if(t.icons){var s=Object.keys(t.icons);for(const u of s){s=t.icons[u];var o=e.getIcon(u);if(!o){if(o=V(ce.ICON,u,!1),!o)throw new dp(u,e,t);o=new o(e),e.addIcon(o)}go(o)&&o.loadState(s)}}},zo=function(e,t){if(t.fields){var s=Object.keys(t.fields);for(let o=0;o<s.length;o++){const u=s[o],h=t.fields[u],E=e.getField(u);E?E.loadState(h):console.warn(`Ignoring non-existant field ${u} in block ${e.type}`)}}},lc=function(e,t){if(t.inputs){var s=Object.keys(t.inputs);for(let o=0;o<s.length;o++){const u=s[o],h=e.getInput(u);if(!h||!h.connection)throw new Uu(u,e,t);uc(h.connection,t.inputs[u])}}},al=function(e,t){if(t.next){if(!e.nextConnection)throw new Uu("next",e,t);uc(e.nextConnection,t.next)}},uc=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&Jl(t.block,e.getSourceBlock().workspace,{parentConnection:e})},ql=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const s of e.getIcons())s.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},gi=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},Yo=function(e){return e*Math.PI/180},Ql=function(e){return 180*e/Math.PI},mo=function(e,t,s){if(s<e){const o=s;s=e,e=o}return Math.max(e,Math.min(t,s))},cc=function(){document.querySelector(".blocklyDropDownDiv")||(Pt=document.createElement("div"),Pt.className="blocklyDropDownDiv",(mt()||document.body).appendChild(Pt),Ai=document.createElement("div"),Ai.className="blocklyDropDownContent",Pt.appendChild(Ai),_r=document.createElement("div"),_r.className="blocklyDropDownArrow",Pt.appendChild(_r),Pt.style.opacity="0",Pt.style.transition="transform "+qa+"s, opacity "+qa+"s",Pt.addEventListener("focusin",function(){ye(Pt,"blocklyFocused")}),Pt.addEventListener("focusout",function(){b(Pt,"blocklyFocused")}))},ac=function(e){jr=e},To=function(){return No},jo=function(){return Ai},hc=function(){Ai.textContent="",Ai.style.width=""},dc=function(e,t){Pt.style.backgroundColor=e,Pt.style.borderColor=t},ah=function(e,t,s,o){return _c(la(t),e,s,o)},ra=function(e,t,s){return Ph=!0,_c(pc(e),e,t,s)},la=function(e){var t=e.getSvgRoot();const s=e.workspace.scale,o=e.height*s;return e=e.width*s,t=Ke(t),new zt(t.y,t.y+o,t.x,t.x+e)},pc=function(e){return e=e.getScaledBBox(),new zt(e.top,e.bottom,e.left,e.right)},_c=function(e,t,s,o){const u=e.left+(e.right-e.left)/2,h=e.bottom;e=e.top,o&&(e+=o),o=t.getSourceBlock();let E=o.workspace;for(;E.options.parentWorkspace;)E=E.options.parentWorkspace;return ac(E.getParentSvg().parentNode),gc(t,o.RTL,u,h,u,e,s)},gc=function(e,t,s,o,u,h,E){return No=e,Hu=E||null,Pt.style.direction=t?"rtl":"ltr",e=Ye(),En=e.getRenderer().getClassName(),Bl=e.getTheme().getClassName(),En&&ye(Pt,En),Bl&&ye(Pt,Bl),ca(s,o,u,h)},ua=function(e,t,s,o){return e=Zl(e,s.left,s.right,o.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+Ld,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Ko=function(e,t,s,o){return e=Zl(e,s.left,s.right,o.width),{initialX:e.divX,initialY:t-o.height,finalX:e.divX,finalY:t-o.height-Ld,arrowX:e.arrowX,arrowY:o.height-2*vd-Mh/2,arrowAtTop:!1,arrowVisible:!0}},Vi=function(e,t,s){return e=Zl(e,t.left,t.right,s.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Zl=function(e,t,s,o){return t=mo(t,e-o/2,s-o),e=e-Mh/2-t,s=pp,e=mo(s,e,o-s-Mh),{arrowX:e,divX:t}},hl=function(){return!!No},$c=function(e,t){return No===e?(t?Wi():eu(),!0):!1},eu=function(){Pt.style.transform="translate(0, 0)",Pt.style.opacity="0",Dh=setTimeout(function(){Wi()},1e3*qa),Hu&&(Hu(),Hu=null)},Wi=function(){hl()&&(Dh&&clearTimeout(Dh),Pt.style.transform="",Pt.style.left="",Pt.style.top="",Pt.style.opacity="0",Pt.style.display="none",Pt.style.backgroundColor="",Pt.style.borderColor="",Hu&&(Hu(),Hu=null),hc(),No=null,En&&(b(Pt,En),En=""),Bl&&(b(Pt,Bl),Bl=""),Ye().markFocused())},ca=function(e,t,s,o){e=Qa.getPositionMetrics(e,t,s,o),e.arrowVisible?(_r.style.display="",_r.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",_r.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):_r.style.display="none",t=Math.floor(e.initialX),s=Math.floor(e.initialY),o=Math.floor(e.finalX);const u=Math.floor(e.finalY);return Pt.style.left=t+"px",Pt.style.top=s+"px",Pt.style.display="block",Pt.style.opacity="1",Pt.style.transform="translate("+(o-t)+"px,"+(u-s)+"px)",!!e.arrowAtTop},aa=function(){if(No){var e=No.getSourceBlock();e=Ph?pc(No):la(e);const t=e.left+(e.right-e.left)/2;ca(t,e.bottom,t,e.top)}else eu()},tu=function(e){return e.length?e.reduce(function(t,s){return t.length<s.length?t:s}).length:0},ha=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let s=0;t=t||tu(e);let o;for(o=0;o<t;o++){for(var u=e[0][o],h=1;h<e.length;h++)if(u!==e[h][o])return s;u===" "&&(s=o+1)}for(u=1;u<e.length;u++)if((h=e[u][o])&&h!==" ")return s;return t},da=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let s=0;t=t||tu(e);let o;for(o=0;o<t;o++){for(var u=e[0].substr(-o-1,1),h=1;h<e.length;h++)if(u!==e[h].substr(-o-1,1))return s;u===" "&&(s=o+1)}for(u=1;u<e.length;u++)if((h=e[u].charAt(e[u].length-o-1))&&h!==" ")return s;return t},r.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let s=0;s<e.length;s++)e[s]=Zn(e[s],t);return e.join(`
`)},Zn=function(e,t){if(e.length<=t)return e;const s=e.trim().split(/\s+/);for(var o=0;o<s.length;o++)s[o].length>t&&(t=s[o].length);var u=-1/0;let h,E=1;do{o=u,h=e,e=[],u=s.length/E;let v=1;for(let se=0;se<s.length-1;se++)v<(se+1.5)/u?(v++,e[se]=!0):e[se]=!1;e=Jo(s,e,t),u=Ar(s,e,t),e=pa(s,e),E++}while(u>o);return h},Ar=function(e,t,s){const o=[0],u=[];for(var h=0;h<e.length;h++)o[o.length-1]+=e[h].length,t[h]===!0?(o.push(0),u.push(e[h].charAt(e[h].length-1))):t[h]===!1&&o[o.length-1]++;for(e=Math.max(...o),t=0,h=0;h<o.length;h++)t-=2*Math.pow(Math.abs(s-o[h]),1.5),t-=Math.pow(e-o[h],1.5),".?!".includes(u[h])?t+=s/3:",;)]}".includes(u[h])&&(t+=s/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5),t},Jo=function(e,t,s){let o=Ar(e,t,s),u;for(let h=0;h<t.length-1;h++){if(t[h]===t[h+1])continue;const E=[].concat(t);E[h]=!E[h],E[h+1]=!E[h+1];const v=Ar(e,E,s);v>o&&(o=v,u=E)}return u?Jo(e,u,s):t},pa=function(e,t){const s=[];for(let o=0;o<e.length;o++)s.push(e[o]),t[o]!==void 0&&s.push(t[o]?`
`:" ");return s.join("")},r.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},_a=function(e){Za=e},ga=function(){return Za},fc=function(){return Vc},dl=function(){return Ys},wr=function(e){if(e=qo(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},qo=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},mc=function(){document.querySelector(".blocklyTooltipDiv")||(Ys=document.createElement("div"),Ys.className="blocklyTooltipDiv",(mt()||document.body).appendChild(Ys))},pl=function(e){e.mouseOverWrapper_=Tt(e,"pointerover",null,Ec),e.mouseOutWrapper_=Tt(e,"pointerout",null,Ic),e.addEventListener("pointermove",Qo,!1)},Tc=function(e){e&&(Ot(e.mouseOverWrapper_),Ot(e.mouseOutWrapper_),e.removeEventListener("pointermove",Qo))},Ec=function(e){Kr||(e=qo(e.currentTarget),ri!==e&&(zi(),Fl=null,ri=e),clearTimeout(kd))},Ic=function(e){Kr||(kd=setTimeout(function(){Fl=ri=null,zi()},1),clearTimeout(Jr),Jr=0)},Qo=function(e){if(ri&&ri.tooltip&&!Kr)if(Vc){const t=Ad-e.pageX;e=xh-e.pageY,Math.sqrt(t*t+e*e)>wd&&zi()}else Fl!==ri&&(clearTimeout(Jr),Ad=e.pageX,xh=e.pageY,Jr=setTimeout(Sc,_p))},Xi=function(){Fl=ri=null,zi()},zi=function(){Vc&&(Vc=!1,Ys&&(Ys.style.display="none")),Jr&&(clearTimeout(Jr),Jr=0)},Zo=function(){zi(),Kr=!0},Rn=function(){Kr=!1},$a=function(){Ys&&ri&&(typeof Za=="function"?Za(Ys,ri):bc())},bc=function(){var e=wr(ri);e=r.wrap$$module$build$src$core$utils$string(e,eh),e=e.split(`
`);for(let t=0;t<e.length;t++){const s=document.createElement("div");s.appendChild(document.createTextNode(e[t])),Ys.appendChild(s)}},su=function(e){const t=document.documentElement.clientWidth,s=document.documentElement.clientHeight;let o=Ad;o=e?o-(th+Ys.offsetWidth):o+th;let u=xh+Wc;return u+Ys.offsetHeight>s+window.scrollY&&(u-=Ys.offsetHeight+2*Wc),e?o=Math.max(Vu-window.scrollX,o):o+Ys.offsetWidth>t+window.scrollX-2*Vu&&(o=t-Ys.offsetWidth-2*Vu),{x:o,y:u}},Sc=function(){if(!Kr&&(Fl=ri,Ys)){Ys.textContent="",$a();var e=ri.RTL;Ys.style.direction=e?"rtl":"ltr",Ys.style.display="block",Vc=!0;var{x:t,y:s}=su(e);Ys.style.left=t+"px",Ys.style.top=s+"px"}},Oc=function(){return Nd},fa=function(e){Nd=e},ma=function(){return Xc},hh=function(e){Xc=e},Nr=function(e){e=`${e}`.toLowerCase().trim();var t=n[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var s=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return s&&(e=Number(s[1]),t=Number(s[2]),s=Number(s[3]),0<=e&&256>e&&0<=t&&256>t&&0<=s&&256>s)?nu(e,t,s):null},nu=function(e,t,s){return t=e<<16|t<<8|s,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},iu=function(e){return e=Nr(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},_n=function(e,t,s){let o=0,u=0,h=0;if(t===0)h=u=o=s;else{const E=Math.floor(e/60),v=e/60-E;e=s*(1-t);const se=s*(1-t*v);switch(t=s*(1-t*(1-v)),E){case 1:o=se,u=s,h=e;break;case 2:o=e,u=s,h=t;break;case 3:o=e,u=se,h=s;break;case 4:o=t,u=e,h=s;break;case 5:o=s,u=e,h=se;break;case 6:case 0:o=s,u=t,h=e}}return nu(Math.floor(o),Math.floor(u),Math.floor(h))},Gn=function(e,t,s){return e=Nr(e),!e||(t=Nr(t),!t)?null:(e=iu(e),t=iu(t),nu(Math.round(t[0]+s*(e[0]-t[0])),Math.round(t[1]+s*(e[1]-t[1])),Math.round(t[2]+s*(e[2]-t[2]))))},Rc=function(e){return _n(e,Nd,255*Xc)},ou=function(e,t,s){const o=[];var u=e.split("");u.push("");var h=0;e=[];let E=null;for(let Me=0;Me<u.length;Me++){var v=u[Me];if(h===0)if(v==="%")(h=e.join(""))&&o.push(h),e.length=0,h=1;else if(s&&v===`
`){const hs=e.join("");hs&&o.push(hs),e.length=0,o.push(v)}else e.push(v);else if(h===1)v==="%"?(e.push(v),h=0):t&&"0"<=v&&"9">=v?(h=2,E=v,(v=e.join(""))&&o.push(v),e.length=0):v==="{"?h=3:(e.push("%",v),h=0);else if(h===2)if("0"<=v&&"9">=v)E+=v;else{var se=void 0;o.push(parseInt((se=E)!=null?se:"",10)),Me--,h=0}else h===3&&(v===""?(e.splice(0,0,"%{"),Me--,h=0):v!=="}"?e.push(v):(h=e.join(""),/[A-Z]\w*/i.test(h)?(v=h.toUpperCase(),(v=v.startsWith("BKY_")?v.substring(4):null)&&v in r.Msg$$module$build$src$core$msg?(h=r.Msg$$module$build$src$core$msg[v],typeof h=="string"?Array.prototype.push.apply(o,ou(h,t,s)):t?o.push(`${h}`):o.push(h)):o.push("%{"+h+"}")):o.push("%{"+h+"}"),h=e.length=0))}for((t=e.join(""))&&o.push(t),se=[],e.length=0,u=0;u<o.length;u++)typeof o[u]!="string"||s&&o[u]===`
`?((t=e.join(""))&&se.push(t),e.length=0,se.push(o[u])):e.push(o[u]);return(t=e.join(""))&&se.push(t),e.length=0,se},Yi=function(e){return ou(e,!0,!0)},At=function(e){return typeof e!="string"?e:(e=ou(e,!1,!1),e.length?String(e[0]):"")},ru=function(e){let t=!0;const s=r.Msg$$module$build$src$core$msg,o=e.match(/%{BKY_[A-Z]\w*}/gi);if(o)for(let u=0;u<o.length;u++){const h=o[u].toUpperCase();s[h.slice(6,-1)]===void 0&&(console.warn("No message string for "+o[u]+" in "+e),t=!1)}return t},_l=function(e){const t=typeof e=="string"?At(e):e;var s=Number(t);if(!isNaN(s)&&0<=s&&360>=s)return{hue:s,hex:_n(s,Oc(),255*ma())};if(s=Nr(t))return{hue:null,hex:s};throw s='Invalid colour: "'+t+'"',e!==t&&(s+=' (from "'+e+'")'),Error(s)},er=function(){return me},tr=function(e){if(me=e,e===null){let t;(t=document.querySelector("."+A))==null||t.remove()}},gl=function(){const e=mt()||document.body;document.querySelector("."+A)?me=document.querySelector("."+A):(me=document.createElement("div"),me.className=A),e.appendChild(me)},Eo=function(e,t,s,o){if(sr(),_=e,y=s,s=me){if(s.style.direction=t?"rtl":"ltr",s.style.display="block",!o&&e instanceof c){let E;o=(E=e.getSourceBlock())==null?void 0:E.workspace}var u;I=(u=o)!=null?u:null;var h;e=(h=o)!=null?h:Ye(),J=e.getRenderer().getClassName(),fe=e.getTheme().getClassName(),J&&ye(s,J),fe&&ye(s,fe)}},sr=function(){if(Cc()){_=null;var e=me;e&&(e.style.display="none",e.style.left="",e.style.top="",y&&y(),y=null,e.textContent="",J&&(b(e,J),J=""),fe&&(b(e,fe),fe=""),Ye().markFocused())}},Cc=function(){return!!_},ji=function(e){_===e&&sr()},$i=function(e){I!==null&&I!==e||sr()},$l=function(e,t,s){me.style.left=e+"px",me.style.top=t+"px",me.style.height=s+"px"},yc=function(e,t,s,o){const u=Ta(e,t,s);e=lu(e,t,s,o),0>u?$l(e,0,s.height+u):$l(e,u,s.height)},lu=function(e,t,s,o){return o?Math.min(Math.max(t.right-s.width,e.left),e.right-s.width):Math.max(Math.min(t.left,e.right-s.width),e.left)},Ta=function(e,t,s){return t.bottom+s.height>=e.bottom?t.top-s.height:t.bottom},Ea=function(e){return!(e==null||!e.repositionForWindowResize)},vc=function(){Ea(_)&&_.repositionForWindowResize()||sr()},fi=function(){return De},uu=function(e){De=e},fl=function(e,t,s,o){if(Eo(Ve,s,Mr,o),t.length){var u=Io(t,s,e);We=u,Lc(u,e,s),setTimeout(function(){u.focus()},1),De=null}else cu()},Io=function(e,t,s){const o=new Wa;o.setRole(Li.MENU);for(let u=0;u<e.length;u++){const h=e[u],E=new Nl(h.text);E.setRightToLeft(t),E.setRole(Li.MENUITEM),o.addChild(E),E.setEnabled(h.enabled),h.enabled&&E.onAction(function(){cu(),requestAnimationFrame(()=>{setTimeout(()=>{h.callback(h.scope,s)},0)})},{})}return o},Lc=function(e,t,s){const o=hi();t=new zt(t.clientY+o.top,t.clientY+o.top,t.clientX+o.left,t.clientX+o.left),kc(e);const u=e.getSize();s&&(t.left+=u.width,t.right+=u.width,o.left+=u.width,o.right+=u.width),yc(o,t,u,s),e.focus()},kc=function(e){var t=er();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),ye(t,"blocklyContextMenu"),Ue(t,"contextmenu",null,dh),e.focus()},dh=function(e){e.preventDefault(),e.stopPropagation()},cu=function(){ji(Ve),De=null},Mr=function(){We&&(We.dispose(),We=null)},r.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{r.disable$$module$build$src$core$events$utils();let s;try{s=t instanceof Element?Ti(t,e.workspace):Hs(t,e.workspace);const o=e.getRelativeToSurfaceXY();o.x=e.RTL?o.x-r.config$$module$build$src$core$config.snapRadius:o.x+r.config$$module$build$src$core$config.snapRadius,o.y+=2*r.config$$module$build$src$core$config.snapRadius,s.moveBy(o.x,o.y)}finally{r.enable$$module$build$src$core$events$utils()}return nt()&&!s.isShadow()&&Oe(new(ee(z.BLOCK_CREATE))(s)),r.setSelected$$module$build$src$core$common(s),s}},Ia=function(e,t){return t=k(t,e.getParentSvg(),e.getInverseScreenCTM()),t.x/=e.scale,t.y/=e.scale,t},Dr=function(e,t,s){t=Ia(e,t),et.set(e,Ee.difference(s,t))},nr=function(e,t){if(t=Ia(e,t),e=et.get(e),!e)throw Error("Drag not initialized");return Ee.sum(e,t)},Kt=function(e,t=!1){const s=r.createElement$$module$build$src$core$utils$xml("xml");var o=Ki(r.allUsedVarModels$$module$build$src$core$variables(e));o.hasChildNodes()&&s.appendChild(o);for(const u of e.getTopComments())s.appendChild(ir(u,t));for(e=e.getTopBlocks(!0),o=0;o<e.length;o++)s.appendChild(mi(e[o],t));return s},ir=function(e,t=!1){const s=r.createElement$$module$build$src$core$utils$xml("comment");t||s.setAttribute("id",e.id),t=e.workspace;const o=e.getRelativeToSurfaceXY();return o.x=t.RTL?t.getWidth()-o.x:o.x,s.setAttribute("x",`${o.x}`),s.setAttribute("y",`${o.y}`),s.setAttribute("w",`${e.getSize().width}`),s.setAttribute("h",`${e.getSize().height}`),e.getText()&&(s.textContent=e.getText()),e.isCollapsed()&&s.setAttribute("collapsed","true"),e.isOwnEditable()||s.setAttribute("editable","false"),e.isOwnMovable()||s.setAttribute("movable","false"),e.isOwnDeletable()||s.setAttribute("deletable","false"),s},Ki=function(e){const t=r.createElement$$module$build$src$core$utils$xml("variables");for(let s=0;s<e.length;s++){const o=e[s],u=r.createElement$$module$build$src$core$utils$xml("variable");u.appendChild(r.createTextNode$$module$build$src$core$utils$xml(o.name)),o.type&&u.setAttribute("type",o.type),u.id=o.getId(),t.appendChild(u)}return t},mi=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let s=0;if(e.workspace.RTL&&(s=e.workspace.getWidth()),t=ei(e,t),rr(t)){const o=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?s-o.x:o.x))),t.setAttribute("y",String(Math.round(o.y)))}return t},ba=function(e){if(e.isSerializable()){const t=r.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},Ac=function(e,t){for(let s=0;s<e.inputList.length;s++){const o=e.inputList[s];for(let u=0;u<o.fieldRow.length;u++){const h=ba(o.fieldRow[u]);h&&t.appendChild(h)}}},ei=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?ei(t):new DocumentFragment;const s=r.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(s.setAttribute("type",e.type),t||(s.id=e.id),e.mutationToDom){var o=e.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&s.appendChild(o)}if(Ac(e,s),o=e.getCommentText()){var u=e.getIcon(zs.COMMENT),h=u.getBubbleSize();u=u.bubbleIsVisible();var E=r.createElement$$module$build$src$core$utils$xml("comment");E.appendChild(r.createTextNode$$module$build$src$core$utils$xml(o)),E.setAttribute("pinned",`${u}`),E.setAttribute("h",String(h.height)),E.setAttribute("w",String(h.width)),s.appendChild(E)}for(e.data&&(o=r.createElement$$module$build$src$core$utils$xml("data"),o.appendChild(r.createTextNode$$module$build$src$core$utils$xml(e.data)),s.appendChild(o)),o=0;o<e.inputList.length;o++){h=e.inputList[o];var v=void 0;if(u=!0,h.type!==r.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&h.type!==r.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){E=h.connection.targetBlock(),h.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE?v=r.createElement$$module$build$src$core$utils$xml("value"):h.type===r.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(v=r.createElement$$module$build$src$core$utils$xml("statement"));const Me=h.connection.getShadowDom();!Me||E&&E.isShadow()||v.appendChild(ti(Me,t)),E&&(E=ei(E,t),E.nodeType===Ci.ELEMENT_NODE&&(v.appendChild(E),u=!1)),v.setAttribute("name",h.name),u||s.appendChild(v)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&s.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&s.setAttribute("collapsed","true"),e.isEnabled()||s.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||s.setAttribute("deletable","false"),e.isOwnMovable()||s.setAttribute("movable","false"),e.isOwnEditable()||s.setAttribute("editable","false"),v=e.getNextBlock();let se;return v&&(o=ei(v,t),o.nodeType===Ci.ELEMENT_NODE&&(se=r.createElement$$module$build$src$core$utils$xml("next"),se.appendChild(o),s.appendChild(se))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||v&&v.isShadow()||se.appendChild(ti(e,t)),s},ti=function(e,t){let s=e=e.cloneNode(!0),o;for(;s;)if(t&&s.nodeName==="shadow"&&s.removeAttribute("id"),s.firstChild)s=s.firstChild;else{for(;s&&!s.nextSibling;){o=s,s=s.parentNode;let u;o.nodeType===Ci.TEXT_NODE&&o.data.trim()===""&&((u=s)==null?void 0:u.firstChild)!==o&&B(o)}s&&(o=s,s=s.nextSibling,o.nodeType===Ci.TEXT_NODE&&o.data.trim()===""&&B(o))}return e},gn=function(e){return sl(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Sa=function(e){e=gn(e).split("<");let t="";for(let s=1;s<e.length;s++){const o=e[s];o[0]==="/"&&(t=t.substring(2)),e[s]=t+"<"+o,o[0]!=="/"&&o.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},au=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=r.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},r.domToWorkspace$$module$build$src$core$xml=function(e,t){let s=0;t.RTL&&(s=t.getWidth());const o=[];Fs();const u=r.getGroup$$module$build$src$core$events$utils();u||r.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let h=!0;try{for(let E=0,v;v=e.childNodes[E];E++){const se=v.nodeName.toLowerCase(),Me=v;if(se==="block"||se==="shadow"&&!at()){const hs=Ti(Me,t);o.push(hs.id);let us;const oo=parseInt((us=Me.getAttribute("x"))!=null?us:"10",10);let jh;const jd=parseInt((jh=Me.getAttribute("y"))!=null?jh:"10",10);isNaN(oo)||isNaN(jd)||hs.moveBy(t.RTL?s-oo:oo,jd,["create"]),h=!1}else{if(se==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(se==="comment")hu(Me,t);else if(se==="variables"){if(h)ml(Me,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");h=!1}}}}finally{r.setGroup$$module$build$src$core$events$utils(u),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&Us(),Pn()}return Oe(new(ee(z.FINISHED_LOADING))(t)),o},hu=function(e,t){var s;const o=(s=e.getAttribute("id"))!=null?s:void 0;s=t.rendered?new Bs(t,o):new st(t,o);var u;s.setText((u=e.textContent)!=null?u:"");var h;u=parseInt((h=e.getAttribute("x"))!=null?h:"",10);let E;h=parseInt((E=e.getAttribute("y"))!=null?E:"",10),isNaN(u)||isNaN(h)||(u=t.RTL?t.getWidth()-u:u,s.moveTo(new Ee(u,h)));var v;t=parseInt((v=e.getAttribute("w"))!=null?v:"",10);let se;return v=parseInt((se=e.getAttribute("h"))!=null?se:"",10),isNaN(t)||isNaN(v)||s.setSize(new Te(t,v)),e.getAttribute("collapsed")==="true"&&s.setCollapsed(!0),e.getAttribute("editable")==="false"&&s.setEditable(!1),e.getAttribute("movable")==="false"&&s.setMovable(!1),e.getAttribute("deletable")==="false"&&s.setDeletable(!1),s},Oa=function(e,t){if(!t.getBlocksBoundingBox)return r.domToWorkspace$$module$build$src$core$xml(e,t);var s=t.getBlocksBoundingBox();if(e=r.domToWorkspace$$module$build$src$core$xml(e,t),s&&s.top!==s.bottom){var o=s.bottom;s=t.RTL?s.right:s.left;var u=1/0;let h=-1/0,E=1/0;for(let v=0;v<e.length;v++){const se=t.getBlockById(e[v]).getRelativeToSurfaceXY();se.y<E&&(E=se.y),se.x<u&&(u=se.x),se.x>h&&(h=se.x)}for(o=o-E+10,s=t.RTL?s-h:s-u,u=0;u<e.length;u++)t.getBlockById(e[u]).moveBy(s,o,["create"])}return e},r.domToBlock$$module$build$src$core$xml=function(e,t){return e=Ti(e,t),t.rendered&&Us(),e},Ti=function(e,t){r.disable$$module$build$src$core$events$utils();var s=t.getAllVariables();let o;try{if(o=Il(e,t),t.rendered){const u=o,h=o.getDescendants(!1);u.setConnectionTracking(!1);for(let E=h.length-1;0<=E;E--)h[E].initSvg();for(let E=h.length-1;0<=E;E--)h[E].queueRender();setTimeout(function(){u.disposed||u.setConnectionTracking(!0)},1),t.resizeContents()}else{const u=o.getDescendants(!1);for(let h=u.length-1;0<=h;h--)u[h].initModel()}}finally{r.enable$$module$build$src$core$events$utils()}if(nt()){for(e=Wo(t,s),t=0;t<e.length;t++)s=e[t],Oe(new(ee(z.VAR_CREATE))(s));Oe(new(ee(z.BLOCK_CREATE))(o))}return o},ml=function(e,t){for(let o=0;o<e.children.length;o++){var s=e.children[o];const u=s.getAttribute("type"),h=s.getAttribute("id");if(s=s.textContent,!s)break;t.createVariable(s,u,h)}},bo=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let s=0;s<e.children.length;s++){const o=e.children[s];if(o.nodeType!==Ci.TEXT_NODE)switch(o.nodeName.toLowerCase()){case"mutation":t.mutation.push(o);break;case"comment":t.comment.push(o);break;case"data":t.data.push(o);break;case"title":case"field":t.field.push(o);break;case"value":case"statement":t.input.push(o);break;case"next":t.next.push(o);break;default:console.warn("Ignoring unknown tag: "+o.nodeName)}}return t},Tl=function(e,t){let s=!1;for(let o=0;o<e.length;o++){const u=e[o];t.domToMutation&&(t.domToMutation(u),t.initSvg&&(s=!0))}return s},du=function(e,t){for(let o=0;o<e.length;o++){var s=e[o];const u=s.textContent,h=s.getAttribute("pinned")==="true";let E;const v=parseInt((E=s.getAttribute("w"))!=null?E:"50",10);let se;s=parseInt((se=s.getAttribute("h"))!=null?se:"50",10),t.setCommentText(u);const Me=t.getIcon(zs.COMMENT);isNaN(v)||isNaN(s)||Me.setBubbleSize(new Te(v,s)),Me.setBubbleVisible(h),setTimeout(()=>Me.setBubbleVisible(h),1)}},wc=function(e,t){for(let s=0;s<e.length;s++)t.data=e[s].textContent},ph=function(e,t){for(let s=0;s<e.length;s++){const o=e[s],u=o.getAttribute("name");u?So(t,u,o):console.warn(`Ignoring unnamed field in block ${t.type}`)}},Nc=function(e){let t=null,s=null;for(let o=0;o<e.childNodes.length;o++){const u=e.childNodes[o];rr(u)&&(u.nodeName.toLowerCase()==="block"?t=u:u.nodeName.toLowerCase()==="shadow"&&(s=u))}return{childBlockElement:t,childShadowElement:s}},El=function(e,t,s,o){for(let h=0;h<e.length;h++){var u=e[h];const E=u.getAttribute("name"),v=E?s.getInput(E):null;if(!v){console.warn("Ignoring non-existent input "+E+" in block "+o);break}if(u=Nc(u),u.childBlockElement){if(!v.connection)throw TypeError("Input connection does not exist.");Il(u.childBlockElement,t,v.connection,!1)}if(u.childShadowElement){let se;(se=v.connection)==null||se.setShadowDom(u.childShadowElement)}}},or=function(e,t,s){for(let o=0;o<e.length;o++){const u=Nc(e[o]);if(u.childBlockElement){if(!s.nextConnection)throw TypeError("Next statement does not exist.");if(s.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Il(u.childBlockElement,t,s.nextConnection,!0)}u.childShadowElement&&s.nextConnection&&s.nextConnection.setShadowDom(u.childShadowElement)}},Il=function(e,t,s,o){var u;const h=e.getAttribute("type");if(!h)throw TypeError("Block type unspecified: "+e.outerHTML);var E=(u=e.getAttribute("id"))!=null?u:void 0;u=t.newBlock(h,E),E=bo(e);const v=Tl(E.mutation,u);if(du(E.comment,u),wc(E.data,u),s)if(o)if(u.previousConnection)s.connect(u.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(u.outputConnection)s.connect(u.outputConnection);else if(u.previousConnection)s.connect(u.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(ph(E.field,u),El(E.input,t,u,h),or(E.next,t,u),v&&u.initSvg(),(t=e.getAttribute("inline"))&&u.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&u.setDisabledReason(t==="true"||t==="disabled",Tn),t=e.getAttribute("disabled-reasons"),t!==null)for(var se of t.split(","))u.setDisabledReason(!0,decodeURIComponent(se));if((se=e.getAttribute("deletable"))&&u.setDeletable(se==="true"),(se=e.getAttribute("movable"))&&u.setMovable(se==="true"),(se=e.getAttribute("editable"))&&u.setEditable(se==="true"),(se=e.getAttribute("collapsed"))&&u.setCollapsed(se==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=u.getChildren(!1),se=0;se<e.length;se++)if(!e[se].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");u.setShadow(!0)}return u},So=function(e,t,s){const o=e.getField(t);o?o.fromXml(s):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Ra=function(e){for(let t=0;t<e.childNodes.length;t++){const s=e.childNodes[t];if(s.nodeName.toLowerCase()==="next"){e.removeChild(s);break}}},rr=function(e){return e.nodeType===Ci.ELEMENT_NODE},Vn=function(e){if(!(100<e.getDescendants(!1).length)){var t=e.workspace,s=e.getSvgRoot();t.getAudioManager().play("delete");var o=e.getRelativeToSurfaceXY(),u=s.cloneNode(!0);u.setAttribute("transform","translate("+o.x+","+o.y+")");var h;(h=t.getLayerManager())==null||h.appendToAnimationLayer({getSvgRoot:()=>u}),Pr(u,{x:o.x,y:o.y,width:e.width,height:e.height},t.RTL,new Date)}},Pr=function(e,t,s,o){const u=(new Date().getTime()-o.getTime())/150;1<u?B(e):(e.setAttribute("transform","translate("+(t.x+(s?-1:1)*t.width/2*u)+","+(t.y+t.height/2*u)+") scale("+(1-u)+")"),setTimeout(Pr,10,e,t,s,o))},si=function(e){var t=e.workspace;const s=t.scale;if(t.getAudioManager().play("click"),!(1>s)){var o=t.getSvgXY(e.getSvgRoot());e.outputConnection?(o.x+=(e.RTL?3:-3)*s,o.y+=13*s):e.previousConnection&&(o.x+=(e.RTL?-23:23)*s,o.y+=3*s);var u=K(F.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=K(F.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*s},u),t=K(F.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},u),e.beginElement(),t.beginElement(),setTimeout(()=>void B(u),150)}},pu=function(e){if(bl(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),Md=e,Mc(e,t,new Date)}},Mc=function(e,t,s){const o=(new Date().getTime()-s.getTime())/200;let u="";1>=o&&(u=`skewX(${Math.round(Math.sin(o*Math.PI*3)*(1-o)*t)})`,gp=setTimeout(Mc,10,e,t,s)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${u}`)},bl=function(){Md&&(gp&&(clearTimeout(gp),gp=null),Md.getSvgRoot().setAttribute("transform",Md.getTranslation()),Md=null)},Cn=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},$n=function(e,t){for(const s in t)e[s]=t[s]!==null&&typeof t[s]=="object"?$n(e[s]||Object.create(null),t[s]):t[s];return e},sn=function(e,t){p(ce.FIELD,e,t)},Ei=function(e){x(ce.FIELD,e)},r.fromJson$$module$build$src$core$field_registry=function(e){return fg.fromJsonInternal(e)},_u=function(e){const t=Y(ce.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},r.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Fh[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');Fh[e]=t},r.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');r.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},r.registerMutator$$module$build$src$core$extensions=function(e,t,s,o){const u='Error when registering mutator "'+e+'": ';lr(u,t);const h=_s(t,u);if(s&&typeof s!="function")throw Error(u+'Extension "'+e+'" is not a function');r.register$$module$build$src$core$extensions(e,function(){h&&this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(o||[],this)),this.mixin(t),s&&s.apply(this)})},Oo=function(e){Ii(e)?delete Fh[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Ii=function(e){return!!Fh[e]},Ut=function(e,t,s){const o=Fh[e];if(typeof o!="function")throw Error('Error: Extension "'+e+'" not found.');let u;if(s?Wt(e,t):u=Zs(t),o.apply(t),s)lr('Error after applying mutator "'+e+'": ',t);else if(!gu(u,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Wt=function(e,t){if(Zs(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},bi=function(e,t){return Qs(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},qs=function(e,t){return Qs(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},_s=function(e,t){return Qs(e.compose,e.decompose,t+" compose/decompose")},Qs=function(e,t,s){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(s+" must be a function");return!0}if(!e&&!t)return!1;throw Error(s+"Must have both or neither functions")},lr=function(e,t){const s=bi(t,e),o=qs(t,e);if(!s&&!o)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");_s(t,e)},Zs=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},gu=function(e,t){if(t=Zs(t),t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(e[s]!==t[s])return!1;return!0},Ca=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},r.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const s=[];return function(){s.includes(this.type)||(ya(this,e,t),s.push(this.type)),this.setTooltip((function(){const o=String(this.getFieldValue(e));return At(t[o])}).bind(this))}},ya=function(e,t,s){var o=e.getField(t);if(o instanceof io&&!o.isOptionListDynamic()){o=o.getOptions();for(const[,u]of o)s[u]===void 0&&console.warn(`No tooltip mapping for value ${u} of field ${t} of block type ${e.type}.`)}},r.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const s=this.getField(t);return At(e).replace("%1",s?s.getText():"")}).bind(this))}},$u=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},He=function(e,t){return" "+e+","+t+" "},gs=function(e,t){return" "+e+t.join("")},cs=function(e,t){return" M "+e+","+t+" "},wt=function(e,t){return" m "+e+","+t+" "},yn=function(e,t){return" l "+e+","+t+" "},Sl=function(e){return" l"+e.join("")},ve=function(e,t){return" "+e+" "+t+" "},Nt=function(e,t,s,o){return e+" "+s+" "+s+" "+t+o},T=function(e,t){p(ce.ICON,e.toString(),t)},a=function(e){x(ce.ICON,e)},g=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},S=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},M=function(e){const t=e.getProcedureMap().getProcedures().filter(o=>!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(u=>u.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(o=>{!g(o)&&Cr(o)&&t.push(o.getProcedureDef())});const s=e.getProcedureMap().getProcedures().filter(o=>!!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(u=>u.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(o=>{!g(o)&&Cr(o)&&s.push(o.getProcedureDef())}),t.sort(U),s.sort(U),[t,s]},U=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},r.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||r.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Q(e,t.workspace,t);){const s=e.match(/^(.*?)(\d+)$/);e=s?s[1]+(parseInt(s[2])+1):e+"2"}return e},Q=function(e,t,s){return!oe(e,t,s)},oe=function(e,t,s){for(const o of t.getAllBlocks(!1))if(o!==s&&Cr(o)&&r.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],e))return!0;s=s&&g(s)?s==null?void 0:s.getProcedureModel():void 0;for(const o of t.getProcedureMap().getProcedures())if(o!==s&&r.Names$$module$build$src$core$names.equals(o.getName(),e))return!0;return!1},r.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new d;e=e.trim();const s=r.findLegalName$$module$build$src$core$procedures(e,t);g(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(s);const o=this.getValue();if(o!==e&&o!==s)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const u=e[t];u.renameProcedure&&u.renameProcedure(o,s)}return s},be=function(e){function t(h,E){for(let se=0;se<h.length;se++){var v=h[se][0];const Me=h[se][1],hs=r.createElement$$module$build$src$core$utils$xml("block");hs.setAttribute("type",E),hs.setAttribute("gap","16");const us=r.createElement$$module$build$src$core$utils$xml("mutation");for(us.setAttribute("name",v),hs.appendChild(us),v=0;v<Me.length;v++){const oo=r.createElement$$module$build$src$core$utils$xml("arg");oo.setAttribute("name",Me[v]),us.appendChild(oo)}s.push(hs)}}const s=[];if(Wn.procedures_defnoreturn){var o=r.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap","16");var u=r.createElement$$module$build$src$core$utils$xml("field");u.setAttribute("name","NAME"),u.appendChild(r.createTextNode$$module$build$src$core$utils$xml(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(u),s.push(o)}return Wn.procedures_defreturn&&(o=r.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_defreturn"),o.setAttribute("gap","16"),u=r.createElement$$module$build$src$core$utils$xml("field"),u.setAttribute("name","NAME"),u.appendChild(r.createTextNode$$module$build$src$core$utils$xml(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(u),s.push(o)),Wn.procedures_ifreturn&&(o=r.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_ifreturn"),o.setAttribute("gap","16"),s.push(o)),s.length&&s[s.length-1].setAttribute("gap","24"),e=M(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),s},Be=function(e){var t=[],s=e.getBlocksByType("procedures_mutatorarg",!1);for(let h=0,E;E=s[h];h++)t.push(E.getFieldValue("NAME"));s=r.createElement$$module$build$src$core$utils$xml("xml");const o=r.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_mutatorarg");const u=r.createElement$$module$build$src$core$utils$xml("field");u.setAttribute("name","NAME"),t=$o(r.DEFAULT_ARG$$module$build$src$core$procedures,t),t=r.createTextNode$$module$build$src$core$utils$xml(t),u.appendChild(t),o.appendChild(u),s.appendChild(o),e.updateToolbox(s)},Fe=function(e){if(ft(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=W(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Be(e),e.addChangeListener(Ae))}},Ae=function(e){(Se(e)||le(e)||pe(e)||ke(e))&&(e=W(e.workspaceId),Be(e))},Qe=function(e,t){return t.getAllBlocks(!1).filter(s=>ze(s,e)||Gi(s)&&r.Names$$module$build$src$core$names.equals(s.getProcedureCall(),e))},ze=function(e,t){return g(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&r.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},r.mutateCallers$$module$build$src$core$procedures=function(e){const t=at();var s=e.getProcedureDef()[0];const o=e.mutationToDom(!0);e=Qe(s,e.workspace);for(let h=0,E;E=e[h];h++){s=(s=E.mutationToDom())&&sl(s),E.domToMutation&&E.domToMutation(o);var u=E.mutationToDom();u=u&&sl(u),s!==u&&(r.setRecordUndo$$module$build$src$core$events$utils(!1),Oe(new(ee(z.BLOCK_CHANGE))(E,"mutation",null,s,u)),r.setRecordUndo$$module$build$src$core$events$utils(t))}},r.getDefinition$$module$build$src$core$procedures=function(e,t){for(const s of t.getAllBlocks(!1))if(g(s)&&s.isProcedureDef()&&r.Names$$module$build$src$core$names.equals(s.getProcedureModel().getName(),e)||Cr(s)&&r.Names$$module$build$src$core$names.equals(s.getProcedureDef()[0],e))return s;return null},Pe=function(e){return e.isDynamic},qe=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},lt=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Ht=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},Gt=function(e,t){let s=null;t=t.outputConnection;const o=t==null?void 0:t.getConnectionChecker();for(let u=0,h;h=e.inputList[u];u++){const E=h.connection;let v;if(E&&((v=o)!=null&&v.canConnect(t,E,!1))){if(s)return null;s=E}}return s},ht=function(e,t){let s;for(;s=Gt(e,t);)if(e=s.targetBlock(),!e||e.isShadow())return s;return null},Et=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},ct=function(e){return Et(e)&&gi(e)&&go(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===zs.COMMENT},dt=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},gt=function(e,t){p(ce.RENDERER,e,t)},Mt=function(e){x(ce.RENDERER,e)},Dt=function(e,t,s){return e=new(V(ce.RENDERER,e))(e),e.init(t,s),e},Jt=function(e){pi(e.getTargetWorkspace(),void 0,"String")},Gs=function(e){pi(e.getTargetWorkspace(),void 0,"Number")},vn=function(e){pi(e.getTargetWorkspace(),void 0,"Colour")},Ds=function(e){let t=[],s=document.createElement("button");return s.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(s),s=document.createElement("button"),s.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(s),s=document.createElement("button"),s.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(s),e.registerButtonCallback("CREATE_VARIABLE_STRING",Jt),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Gs),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",vn),e=Ps(e),t=t.concat(e)},Ps=function(e){e=e.getAllVariables();const t=[];if(0<e.length){if(Wn.variables_set_dynamic){var s=e[e.length-1];const o=r.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap","24"),o.appendChild(Qn(s)),t.push(o)}if(Wn.variables_get_dynamic){e.sort(Hc.compareByName);for(let o=0,u;u=e[o];o++)s=r.createElement$$module$build$src$core$utils$xml("block"),s.setAttribute("type","variables_get_dynamic"),s.setAttribute("gap","8"),s.appendChild(Qn(u)),t.push(s)}}return t},Ln=function(e,t){const s=e.workspace,o=r.config$$module$build$src$core$config.snapRadius,u=Ee.difference(t,e.getRelativeToSurfaceXY()),h=new Ee(0,0),E=s.getAllBlocks(!1).filter(v=>v.id!=e.id).map(v=>v.getRelativeToSurfaceXY());for(;Qt(Ee.sum(t,h),E)||kn(e,Ee.sum(u,h),o);)s.RTL?h.translate(-o,2*o):h.translate(o,2*o);e.moveTo(Ee.sum(t,h))},Qt=function(e,t){return t.some(s=>1>=Math.abs(s.x-e.x)&&1>=Math.abs(s.y-e.y))},kn=function(e,t,s){return e.getConnections_(!1).some(o=>!!o.closest(s,t).connection)},Os=function(e,t,s){const o=s.getBoundingRectangle(),u=o.right-o.left,h=mo(t.top,o.top,t.top+t.height-(o.bottom-o.top))-o.top;let E=t.left;return t=t.left+t.width-u,e.RTL?E=Math.min(t,E):t=Math.max(E,t),(e=mo(E,o.left,t)-o.left)||h?(s.moveBy(e,h,["inbounds"]),!0):!1},Ji=function(e){return t=>{var s=e.getMetricsManager();if(s.hasFixedEdges()&&!e.isDragging()){var o;if(od.includes((o=t.type)!=null?o:"")){o=s.getScrollMetrics(!0);const u=Ts(e,t);u&&(s=r.getGroup$$module$build$src$core$events$utils()||!1,r.setGroup$$module$build$src$core$events$utils(t.group),Os(e,o,u)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),r.setGroup$$module$build$src$core$events$utils(s))}else bt(t)&&t.scale&&t.oldScale&&t.scale>t.oldScale&&yt(e)}}},Ts=function(e,t){let s=null;switch(t.type){case z.BLOCK_CREATE:case z.BLOCK_MOVE:(s=e.getBlockById(t.blockId))&&(s=s.getRootBlock());break;case z.COMMENT_CREATE:case z.COMMENT_MOVE:case z.COMMENT_RESIZE:s=e.getCommentById(t.commentId)}return s},yt=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var s=e.getTopBoundedElements();for(let o=0,u;u=s[o];o++)Os(e,t,u)}},Xt=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},Vs=function(e){const t=e.toCopyData();O_=t;let s;return R_=(s=e.workspace)!=null?s:null,t},Zt=function(e,t,s){return e&&t?ni(e,t,s):O_&&R_?ni(O_,R_):null},ni=function(e,t,s){let o;t=(o=t.getRootWorkspace())!=null?o:t;let u,h;return(h=(u=Y(ce.PASTER,e.paster,!1))==null?void 0:u.paste(e,t,s))!=null?h:null},fu=function(e){const t=e.toCopyData();return t?Zt(t,e.workspace):null},xr=function(e){return e.toCopyData!==void 0},An=function(){Vt.registry.register({name:Gl.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[$t.ESC]})},qi=function(){Vt.registry.register({name:Gl.DELETE,preconditionFn(e){const t=Xe();return!e.options.readOnly&&t!=null&&Xt(t)&&t.isDeletable()&&!Wu.inProgress()},callback(e,t){return t.preventDefault(),e=Xe(),e instanceof Er?e.checkAndDelete():Xt(e)&&e.isDeletable()&&(r.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),r.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[$t.DELETE,$t.BACKSPACE]})},mu=function(){const e=Vt.registry.createSerializedKey($t.C,[$t.CTRL]),t=Vt.registry.createSerializedKey($t.C,[$t.ALT]),s=Vt.registry.createSerializedKey($t.C,[$t.META]);Vt.registry.register({name:Gl.COPY,preconditionFn(o){const u=Xe();return!o.options.readOnly&&!Wu.inProgress()&&u!=null&&Xt(u)&&u.isDeletable()&&Cn(u)&&u.isMovable()&&xr(u)},callback(o,u){return u.preventDefault(),o.hideChaff(),u=Xe(),!u||!xr(u)?!1:(Kc=u.toCopyData(),Jc=o,Xh=Cn(u)?u.getRelativeToSurfaceXY():null,!!Kc)},keyCodes:[e,t,s]})},Ol=function(){const e=Vt.registry.createSerializedKey($t.X,[$t.CTRL]),t=Vt.registry.createSerializedKey($t.X,[$t.ALT]),s=Vt.registry.createSerializedKey($t.X,[$t.META]);Vt.registry.register({name:Gl.CUT,preconditionFn(o){const u=Xe();return!o.options.readOnly&&!Wu.inProgress()&&u!=null&&Xt(u)&&u.isDeletable()&&Cn(u)&&u.isMovable()&&!u.workspace.isFlyout},callback(o){const u=Xe();return u instanceof Er?(Kc=u.toCopyData(),Jc=o,Xh=u.getRelativeToSurfaceXY(),u.checkAndDelete(),!0):Xt(u)&&u.isDeletable()&&xr(u)?(Kc=u.toCopyData(),Jc=o,Xh=Cn(u)?u.getRelativeToSurfaceXY():null,u.dispose(),!0):!1},keyCodes:[e,t,s]})},Si=function(){const e=Vt.registry.createSerializedKey($t.V,[$t.CTRL]),t=Vt.registry.createSerializedKey($t.V,[$t.ALT]),s=Vt.registry.createSerializedKey($t.V,[$t.META]);Vt.registry.register({name:Gl.PASTE,preconditionFn(o){return!o.options.readOnly&&!Wu.inProgress()},callback(){if(!Kc||!Jc)return!1;if(!Xh)return!!Zt(Kc,Jc);const{left:o,top:u,width:h,height:E}=Jc.getMetricsManager().getViewMetrics(!0);if(new zt(u,u+E,o,o+h).contains(Xh.x,Xh.y))return!!Zt(Kc,Jc);const v=new Ee(o+h/2,u+E/2);return!!Zt(Kc,Jc,v)},keyCodes:[e,t,s]})},Oi=function(){const e=Vt.registry.createSerializedKey($t.Z,[$t.CTRL]),t=Vt.registry.createSerializedKey($t.Z,[$t.ALT]),s=Vt.registry.createSerializedKey($t.Z,[$t.META]);Vt.registry.register({name:Gl.UNDO,preconditionFn(o){return!o.options.readOnly&&!Wu.inProgress()},callback(o,u){return o.hideChaff(),o.undo(!1),u.preventDefault(),!0},keyCodes:[e,t,s]})},Rl=function(){const e=Vt.registry.createSerializedKey($t.Z,[$t.SHIFT,$t.CTRL]),t=Vt.registry.createSerializedKey($t.Z,[$t.SHIFT,$t.ALT]),s=Vt.registry.createSerializedKey($t.Z,[$t.SHIFT,$t.META]),o=Vt.registry.createSerializedKey($t.Y,[$t.CTRL]);Vt.registry.register({name:Gl.REDO,preconditionFn(u){return!Wu.inProgress()&&!u.options.readOnly},callback(u,h){return u.hideChaff(),u.undo(!0),h.preventDefault(),!0},keyCodes:[e,t,s,o]})},Tu=function(){An(),qi(),mu(),Ol(),Si(),Oi(),Rl()},Br=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(s=>s.saveState())),t},Dc=function(e,t,s,o){if(e=e.loadState(s,o),!s.parameters)return e;for(const[u,h]of s.parameters.entries())e.insertParameter(t.loadState(h,o),u);return e},Cl=function(e){const t=Object.create(null),s=de(ce.SERIALIZER,!0);for(const o in s){let u;const h=(u=s[o])==null?void 0:u.save(e);h&&(t[o]=h)}return t},en=function(e,t,{recordUndo:s=!1}={}){var o=de(ce.SERIALIZER,!0);if(o){o=Object.entries(o).sort((h,E)=>E[1].priority-h[1].priority);var u=at();r.setRecordUndo$$module$build$src$core$events$utils(s),(s=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),Fs(),t instanceof Tr&&t.setResizesEnabled(!1);for(const[,h]of o.reverse()){let E;(E=h)==null||E.clear(t)}for(const[h,E]of o.reverse())if(e[h]){let v;(v=E)==null||v.load(e[h],t)}t instanceof Tr&&t.setResizesEnabled(!0),Pn(),Oe(new(ee(z.FINISHED_LOADING))(t)),r.setGroup$$module$build$src$core$events$utils(s),r.setRecordUndo$$module$build$src$core$events$utils(u)}},Ro=function(e,t){let s=null;s=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var o;if(!document.contains(s)&&document!==((o=s)==null?void 0:o.ownerDocument))throw Error("Error: container is not in current document");e=new $r(t||{}),o=document.createElement("div"),ye(o,"injectionDiv"),t!=null&&t.rtl&&ye(o,"blocklyRTL"),o.tabIndex=0,Ms(o,Is.LABEL,r.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),s.appendChild(o),t=Fr(o,e);const u=Co(o,t,e);return yl(u),rt(u),_t(u),o.addEventListener("focusin",function(){rt(u)}),Ue(o,"keydown",null,Qi),Ue(jo(),"keydown",null,Qi),(t=er())&&Ue(t,"keydown",null,Qi),u},Fr=function(e,t){e.setAttribute("dir","LTR"),ms(t.hasCss,t.pathToMedia),e=K(F.SVG,{xmlns:Lu,"xmlns:html":ko,"xmlns:xlink":oi,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const s=K(F.DEFS,{},e),o=String(Math.random()).substring(2);return t.gridPattern=s_.createDom(o,t.gridOptions,s),e},Co=function(e,t,s){s.parentWorkspace=null,s=new Tr(s);const o=s.options;s.scale=o.zoomOptions.startScale,t.appendChild(s.createDom("blocklyMainBackground",e));var u=s.getRenderer().getClassName();return u&&ye(e,u),(u=s.getTheme().getClassName())&&ye(e,u),!o.hasCategories&&o.languageTree&&(e=s.addFlyout(F.SVG),$e(e,t)),o.hasTrashcan&&s.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&s.addZoomControls(),s.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),s.translate(0,0),s.addChangeListener(Ji(s)),_t(s),gl(),cc(),mc(),s},yl=function(e){const t=e.options;var s=e.getParentSvg();if(Ue(s.parentNode,"contextmenu",null,function(o){ci(o)||o.preventDefault()}),s=Ue(window,"resize",null,function(){zi(),e.hideComponents(!0),aa(),vc(),_t(e),yt(e)}),e.setResizeHandlerWrapper(s),Pc(),t.languageTree){s=e.getToolbox();const o=e.getFlyout(!0);s?s.init():o&&(o.init(e),o.show(t.languageTree),typeof o.scrollToStart=="function"&&o.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new y_(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&Eu(t.pathToMedia,e)},Qi=function(e){const t=Ye();t&&!(ci(e)||t.rendered&&!t.isVisible())&&Vt.registry.onKeyDown(t,e)},Pc=function(){s$||(Ue(document,"scroll",null,function(){const e=H();for(let t=0,s;s=e[t];t++)s instanceof Tr&&s.updateInverseScreenCTM()}),Tt(document,"touchend",null,ks),Tt(document,"touchcancel",null,ks)),s$=!0},Eu=function(e,t){function s(){for(;u.length;){const h=u.pop();h&&Ot(h)}o.preload()}const o=t.getAudioManager();o.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),o.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),o.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const u=[];u.push(Ue(document,"pointermove",null,s,!0)),u.push(Ue(document,"touchstart",null,s,!0))},es=function(){w.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:w.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},vl=function(){w.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:w.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Iu=function(){w.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:w.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Ur=function(e,t){function s(h){u--,h.setCollapsed(e),u===0&&r.setGroup$$module$build$src$core$events$utils(!1)}let o=0,u=0;r.setGroup$$module$build$src$core$events$utils(!0);for(let h=0;h<t.length;h++){let E=t[h];for(;E;)u++,setTimeout(s.bind(null,E),o),E=E.getNextBlock(),o+=10}},Hr=function(){w.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let s=e[t];for(;s;){if(!s.isCollapsed())return"enabled";s=s.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Ur(!0,e.workspace.getTopBlocks(!0))},scopeType:w.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},va=function(){w.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let s=e[t];for(;s;){if(s.isCollapsed())return"enabled";s=s.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Ur(!1,e.workspace.getTopBlocks(!0))},scopeType:w.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Gr=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let s=0;s<e.length;s++)Gr(e[s],t)}},rs=function(e){const t=[];e=e.getTopBlocks(!0);for(let s=0;s<e.length;s++)Gr(e[s],t);return t},Es=function(e,t){t?r.setGroup$$module$build$src$core$events$utils(t):(r.setGroup$$module$build$src$core$events$utils(!0),t=r.getGroup$$module$build$src$core$events$utils());const s=e.shift();s&&(s.isDeadOrDying()?Es(e,t):(s.dispose(!1,!0),setTimeout(Es,10,e,t))),r.setGroup$$module$build$src$core$events$utils(!1)},Ws=function(){w.registry.register({displayText(e){return e.workspace?(e=rs(e.workspace).length,e===1?r.Msg$$module$build$src$core$msg.DELETE_BLOCK:r.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<rs(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=rs(e.workspace);2>t.length?Es(t):Ct(r.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(s){s&&Es(t)})}},scopeType:w.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},La=function(){es(),vl(),Iu(),Hr(),va(),Ws()},bu=function(){w.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&Zt(t,e.block.workspace)}},scopeType:w.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Su=function(){w.registry.register({displayText(e){return e.block.hasIcon(Yu.TYPE)?r.Msg$$module$build$src$core$msg.REMOVE_COMMENT:r.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(Yu.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:w.ScopeType.BLOCK,id:"blockComment",weight:2})},Qh=function(){w.registry.register({displayText(e){return e.block.getInputsInline()?r.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:r.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof Mp||e.inputList[t]instanceof Mp))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:w.ScopeType.BLOCK,id:"blockInline",weight:3})},nn=function(){w.registry.register({displayText(e){return e.block.isCollapsed()?r.Msg$$module$build$src$core$msg.EXPAND_BLOCK:r.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:w.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},ka=function(){w.registry.register({displayText(e){return e.block.hasDisabledReason(Tn)?r.Msg$$module$build$src$core$msg.ENABLE_BLOCK:r.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(Tn)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=r.getGroup$$module$build$src$core$events$utils();t||r.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(Tn),Tn),r.setGroup$$module$build$src$core$events$utils(t)},scopeType:w.ScopeType.BLOCK,id:"blockDisable",weight:5})},Aa=function(){w.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?r.Msg$$module$build$src$core$msg.DELETE_BLOCK:r.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:w.ScopeType.BLOCK,id:"blockDelete",weight:6})},wa=function(){w.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:w.ScopeType.BLOCK,id:"blockHelp",weight:7})},Zi=function(){w.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){r.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),r.setGroup$$module$build$src$core$events$utils(!1)},scopeType:w.ScopeType.COMMENT,id:"commentDelete",weight:6})},ii=function(){w.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&Zt(t,e.comment.workspace)}},scopeType:w.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Ou=function(){w.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:()=>"enabled",callback:(e,t)=>{if(e=e.workspace){r.setGroup$$module$build$src$core$events$utils(!0);var s=new Bs(e);s.setText(r.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),s.moveTo(_h(new Ee(t.clientX,t.clientY),e)),r.setSelected$$module$build$src$core$common(s),r.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:w.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},_h=function(e,t){var s=t.getInjectionDiv().getBoundingClientRect();return e=new Ee(e.x-s.left,e.y-s.top),s=t.getOriginOffsetInPixels(),e=Ee.difference(e,s),e.scale(1/t.scale),e},gh=function(){bu(),Su(),Qh(),nn(),ka(),Aa(),wa()},Zh=function(){ii(),Zi(),Ou()},$h=function(){La(),gh()},ed=function(e){return e.paste!==void 0},td=function(e){return e.getSvgRoot!==void 0},sd=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},nd=function(e){return e.isSelectable()},id=function(e){Ye().hideChaff(e)},re=re||{},re.scope={},re.ASSUME_ES5=!1,re.ASSUME_NO_NATIVE_MAP=!1,re.ASSUME_NO_NATIVE_SET=!1,re.SIMPLE_FROUND_POLYFILL=!1,re.ISOLATE_POLYFILLS=!1,re.FORCE_POLYFILL_PROMISE=!1,re.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,re.defineProperty=re.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,s){return e==Array.prototype||e==Object.prototype||(e[t]=s.value),e},re.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof J$=="object"&&J$];for(var t=0;t<e.length;++t){var s=e[t];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},re.global=re.getGlobal(this),re.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",re.TRUST_ES6_POLYFILLS=!re.ISOLATE_POLYFILLS||re.IS_SYMBOL_NATIVE,re.polyfills={},re.propertyToPolyfillSymbol={},re.POLYFILL_PREFIX="$jscp$",re.polyfill=function(e,t,s,o){t&&(re.ISOLATE_POLYFILLS?re.polyfillIsolated(e,t,s,o):re.polyfillUnisolated(e,t,s,o))},re.polyfillUnisolated=function(e,t,s,o){for(s=re.global,e=e.split("."),o=0;o<e.length-1;o++){var u=e[o];if(!(u in s))return;s=s[u]}e=e[e.length-1],o=s[e],t=t(o),t!=o&&t!=null&&re.defineProperty(s,e,{configurable:!0,writable:!0,value:t})},re.polyfillIsolated=function(e,t,s,o){var u=e.split(".");e=u.length===1,o=u[0],o=!e&&o in re.polyfills?re.polyfills:re.global;for(var h=0;h<u.length-1;h++){var E=u[h];if(!(E in o))return;o=o[E]}u=u[u.length-1],s=re.IS_SYMBOL_NATIVE&&s==="es6"?o[u]:null,t=t(s),t!=null&&(e?re.defineProperty(re.polyfills,u,{configurable:!0,writable:!0,value:t}):t!==s&&(re.propertyToPolyfillSymbol[u]===void 0&&(s=1e9*Math.random()>>>0,re.propertyToPolyfillSymbol[u]=re.IS_SYMBOL_NATIVE?re.global.Symbol(u):re.POLYFILL_PREFIX+s+"$"+u),re.defineProperty(o,re.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:t})))},re.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},re.setPrototypeOf=re.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:re.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,re.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},re.arrayIterator=function(e){return{next:re.arrayIteratorImpl(e)}},re.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return re.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},re.generator={},re.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},re.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},re.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},re.generator.Context.prototype.stop_=function(){this.isRunning_=!1},re.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},re.generator.Context.prototype.next_=function(e){this.yieldResult=e},re.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},re.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},re.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},re.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},re.generator.Context.prototype.yieldAll=function(e,t){e=re.makeIterator(e);var s=e.next();if(re.generator.ensureIteratorResultIsObject_(s),s.done)this.yieldResult=s.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(s.value,t)},re.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},re.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},re.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},re.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},re.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},re.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},re.generator.Context.prototype.enterFinallyBlock=function(e,t,s){s?this.finallyContexts_[s]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},re.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},re.generator.Context.prototype.forIn=function(e){return new re.generator.Context.PropertyIterator(e)},re.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},re.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},re.generator.Engine_=function(e){this.context_=new re.generator.Context,this.program_=e},re.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},re.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(s){return{value:s,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},re.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},re.generator.Engine_.prototype.yieldAllStep_=function(e,t,s){try{var o=e.call(this.context_.yieldAllIterator_,t);if(re.generator.ensureIteratorResultIsObject_(o),!o.done)return this.context_.stop_(),o;var u=o.value}catch(h){return this.context_.yieldAllIterator_=null,this.context_.throw_(h),this.nextStep_()}return this.context_.yieldAllIterator_=null,s.call(this.context_,u),this.nextStep_()},re.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},re.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},re.generator.createGenerator=function(e,t){return t=new re.generator.Generator_(new re.generator.Engine_(t)),re.setPrototypeOf&&e.prototype&&re.setPrototypeOf(t,e.prototype),t},re.asyncExecutePromiseGenerator=function(e){function t(o){return e.next(o)}function s(o){return e.throw(o)}return new Promise(function(o,u){function h(E){E.done?o(E.value):Promise.resolve(E.value).then(t,s).then(h,u)}h(e.next())})},re.asyncExecutePromiseGeneratorFunction=function(e){return re.asyncExecutePromiseGenerator(e())},re.asyncExecutePromiseGeneratorProgram=function(e){return re.asyncExecutePromiseGenerator(new re.generator.Generator_(new re.generator.Engine_(e)))},re.polyfill("globalThis",function(e){return e||re.global},"es_2020","es3"),re.polyfill("Array.prototype.includes",function(e){return e||function(t,s){var o=this;o instanceof String&&(o=String(o));var u=o.length;for(s=s||0,0>s&&(s=Math.max(s+u,0));s<u;s++){var h=o[s];if(h===t||Object.is(h,t))return!0}return!1}},"es7","es3"),re.initSymbol=function(){},re.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},re.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var s=0,o=!1,u={next:function(){if(!o&&s<e.length){var h=s++;return{value:t(h,e[h]),done:!1}}return o=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u},re.polyfill("Array.prototype.values",function(e){return e||function(){return re.iteratorFromArray(this,function(t,s){return s})}},"es8","es3"),re.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var s=[];return Array.prototype.forEach.call(this,function(o){Array.isArray(o)&&0<t?(o=Array.prototype.flat.call(o,t-1),s.push.apply(s,o)):s.push(o)}),s}},"es9","es5"),re.polyfill("Array.prototype.flatMap",function(e){return e||function(t,s){var o=[];return Array.prototype.forEach.call(this,function(u,h){u=t.call(s,u,h,this),Array.isArray(u)?o.push.apply(o,u):o.push(u)}),o}},"es9","es5"),re.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},re.polyfill("Object.entries",function(e){return e||function(t){var s=[],o;for(o in t)re.owns(t,o)&&s.push([o,t[o]]);return s}},"es8","es3"),re.polyfill("Object.values",function(e){return e||function(t){var s=[],o;for(o in t)re.owns(t,o)&&s.push(t[o]);return s}},"es8","es3");var eo=Object.create(null),sp={typeMap:eo},Ru=Object.create(null),Ri="default",ce=class{constructor(e){this.name=e}toString(){return this.name}};ce.CONNECTION_CHECKER=new ce("connectionChecker"),ce.CONNECTION_PREVIEWER=new ce("connectionPreviewer"),ce.CURSOR=new ce("cursor"),ce.EVENT=new ce("event"),ce.FIELD=new ce("field"),ce.INPUT=new ce("input"),ce.RENDERER=new ce("renderer"),ce.TOOLBOX=new ce("toolbox"),ce.THEME=new ce("theme"),ce.TOOLBOX_ITEM=new ce("toolboxItem"),ce.FLYOUTS_VERTICAL_TOOLBOX=new ce("flyoutsVerticalToolbox"),ce.FLYOUTS_HORIZONTAL_TOOLBOX=new ce("flyoutsHorizontalToolbox"),ce.METRICS_MANAGER=new ce("metricsManager"),ce.BLOCK_DRAGGER=new ce("blockDragger"),ce.SERIALIZER=new ce("serializer"),ce.ICON=new ce("icon"),ce.PASTER=new ce("paster");var yo={DEFAULT:Ri,TEST_ONLY:sp};yo.Type=ce,yo.getAllItems=de,yo.getClass=V,yo.getClassFromOptions=ge,yo.getObject=Y,yo.hasItem=j,yo.register=p,yo.unregister=x;var Wn=Object.create(null),z;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(z||(z={}));var od=[z.BLOCK_CREATE,z.BLOCK_MOVE,z.COMMENT_CREATE,z.COMMENT_MOVE],rd=new Set,fh={};fh.warn=q;var ld="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ud={genUid:()=>{const e=ld.length,t=[];for(let s=0;20>s;s++)t[s]=ld.charAt(Math.random()*e);return t.join("")}},np=0,cd={TEST_ONLY:ud};cd.genUid=ie,cd.getNextUniqueId=Ie;var ad="",Na=!0,hd=0,mh="ORPHANED_BLOCK",ur=[],dd={FIRE_QUEUE:ur,enqueueEvent:Ls,fireNow:Bt,fireInternal:pt,setGroupInternal:St};r.disable$$module$build$src$core$events$utils,r.enable$$module$build$src$core$events$utils,r.getGroup$$module$build$src$core$events$utils,r.setGroup$$module$build$src$core$events$utils,r.setRecordUndo$$module$build$src$core$events$utils;var Ll=Object.create(null),ip,Cu=null,op,Xn=[],Th={defineBlocksWithJsonArrayInternal:an},Xs={TEST_ONLY:Th};Xs.createBlockDefinitionsFromJsonArray=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Xs.defineBlocks=r.defineBlocks$$module$build$src$core$common,Xs.defineBlocksWithJsonArray=xo,Xs.draggingConnections=Xn,Xs.getAllWorkspaces=H,Xs.getBlockTypeCounts=ds,Xs.getMainWorkspace=Ye,Xs.getParentContainer=mt,Xs.getSelected=Xe,Xs.getWorkspaceById=W,Xs.registerWorkspace=_e,Xs.setMainWorkspace=rt,Xs.setParentContainer=Re,Xs.setSelected=r.setSelected$$module$build$src$core$common,Xs.svgResize=_t,Xs.unregisterWorkpace=it;var yu=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=r.getGroup$$module$build$src$core$events$utils(),this.recordUndo=at()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,s){return s.isBlank=!1,s.group=e.group||"",s.workspaceId=t.id,s}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=W(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},to=class extends yu{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Eh=class extends to{constructor(e,t,s){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=z.CLICK,this.blockId=e?e.id:void 0,this.targetType=s}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Eh),t.targetType=e.targetType,t.blockId=e.blockId,t}},Ma;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Ma||(Ma={})),p(ce.EVENT,z.CLICK,Eh);var xc=750,Ih="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Bc=null,vu={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Da=0,kl={TOUCH_ENABLED:Ih,TOUCH_MAP:vu};kl.checkTouchIdentifier=Di,kl.clearTouchIdentifier=ps,kl.getTouchIdentifierFromEvent=ui,kl.longStart=Mi,kl.longStop=ks,kl.shouldHandleEvent=li;var bh,pd,_d,rp,fn,on,Sh,gd,$d,fd;(function(e){function t(o){return s.includes(o.toUpperCase())}bh=e;const s=bh.toUpperCase();pd=t("JavaFX"),_d=t("WebKit"),rp=t("Gecko")&&!_d,fn=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,on=t("iPad")||t("Macintosh")&&0<e,Sh=t("iPhone")&&!on,gd=t("Macintosh"),$d=on||fn&&!t("Mobile")||t("Silk"),fd=!$d&&(Sh||fn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var lp=bh,Oh=pd,md=rp,Pa=fn,xa=on,Td=Sh,Ba=gd,Rh=fd,up={ANDROID:Pa,GECKO:md,IPAD:xa,IPHONE:Td,JavaFx:Oh,MAC:Ba,MOBILE:Rh,raw:lp},Ch=40,Fa=125,Vr={};Vr.bind=Tt,Vr.conditionalBind=Ue,Vr.getScrollDeltaPixels=Yn,Vr.isRightButton=As,Vr.isTargetInput=ci,Vr.mouseToSvg=k,Vr.unbind=Ot;var Ed={};Ed.removeElem=ts;var vo=class{constructor(e){this.name=e}toString(){return this.name}};vo.POSITIONABLE=new vo("positionable"),vo.DRAG_TARGET=new vo("drag_target"),vo.DELETE_AREA=new vo("delete_area"),vo.AUTOHIDEABLE=new vo("autohideable");var ns=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const s=e.component.id;if(!t&&this.componentData.has(s)){var o;throw Error('Plugin "'+s+'" with capabilities "'+((o=this.componentData.get(s))==null?void 0:o.capabilities)+'" already added.')}for(this.componentData.set(s,e),t=[],o=0;o<e.capabilities.length;o++){const u=String(e.capabilities[o]).toLowerCase();if(t.push(u),this.capabilityToComponentIds.has(u)){let h;(h=this.capabilityToComponentIds.get(u))==null||h.push(s)}else this.capabilityToComponentIds.set(u,[s])}this.componentData.get(s).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let s=0;s<t.capabilities.length;s++){const o=String(t.capabilities[s]).toLowerCase();ts(this.capabilityToComponentIds.get(o),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var s;(s=this.componentData.get(e))==null||s.capabilities.push(t);var o;(o=this.capabilityToComponentIds.get(t))==null||o.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),ts(this.componentData.get(e).capabilities,t),ts(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const s=[];if(t){const o=[];e.forEach(u=>{o.push(this.componentData.get(u))}),o.sort(function(u,h){return u.weight-h.weight}),o.forEach(function(u){s.push(u.component)})}else e.forEach(o=>{s.push(this.componentData.get(o).component)});return s}};ns.Capability=vo,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(ns||(ns={})),ns.ComponentWeight;var Fc=!1,Lo=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,Id={};Id.inject=ms,Id.register=Rt;var Ee=class{constructor(e,t){this.x=e,this.y=t}clone(){return new Ee(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const s=e.x-t.x;return e=e.y-t.y,Math.sqrt(s*s+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new Ee(e.x-t.x,e.y-t.y)}static sum(e,t){return new Ee(e.x+t.x,e.y+t.y)}},Lu="http://www.w3.org/2000/svg",ko="http://www.w3.org/1999/xhtml",oi="http://www.w3.org/1999/xlink",Ci;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Ci||(Ci={}));var ls=null,bd=0,yh=null,xs={HTML_NS:ko};xs.NodeType=Ci,xs.SVG_NS=Lu,xs.XLINK_NS=oi,xs.addClass=ye,xs.createSvgElement=K,xs.getFastTextWidth=js,xs.getFastTextWidthWithSizeString=$,xs.getTextWidth=ai,xs.hasClass=D,xs.insertAfter=$e,xs.measureFontMetrics=O,xs.removeClass=b,xs.removeClasses=f,xs.removeNode=B,xs.setCssTransform=kt,xs.startTextWidthCache=Fs,xs.stopTextWidthCache=Pn;var F=class{constructor(e){this.tagName=e}toString(){return this.tagName}};F.ANIMATE=new F("animate"),F.CIRCLE=new F("circle"),F.CLIPPATH=new F("clipPath"),F.DEFS=new F("defs"),F.FECOMPOSITE=new F("feComposite"),F.FECOMPONENTTRANSFER=new F("feComponentTransfer"),F.FEFLOOD=new F("feFlood"),F.FEFUNCA=new F("feFuncA"),F.FEGAUSSIANBLUR=new F("feGaussianBlur"),F.FEPOINTLIGHT=new F("fePointLight"),F.FESPECULARLIGHTING=new F("feSpecularLighting"),F.FILTER=new F("filter"),F.FOREIGNOBJECT=new F("foreignObject"),F.G=new F("g"),F.IMAGE=new F("image"),F.LINE=new F("line"),F.PATH=new F("path"),F.PATTERN=new F("pattern"),F.POLYGON=new F("polygon"),F.RECT=new F("rect"),F.SVG=new F("svg"),F.TEXT=new F("text"),F.TSPAN=new F("tspan");var zt=class{constructor(e,t,s,o){this.top=e,this.bottom=t,this.left=s,this.right=o}clone(){return new zt(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,t){return e===t?!0:e&&t?e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right:!1}static createFromPoint(e,t,s){const o=e.x;return e=e.y,new zt(e,e+s,o,o+t)}},Te=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new Te(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new Te(Math.min(e.width,t.width),Math.min(e.height,t.height))}},ku={getSizeInternal:G},cr={TEST_ONLY:ku};cr.getBorderBox=jn,cr.getComputedStyle=Le,cr.getContainerOffsetToScrollInto=Kn,cr.getPageOffset=Ke,cr.getSize=L,cr.getViewportPageOffset=hn,cr.scrollIntoContainerView=br;var Sd=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,cp=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Ua={XY_REGEX:Sd,XY_STYLE_REGEX:cp},ar={TEST_ONLY:Ua};ar.getDocumentScroll=uo,ar.getInjectionDivXY=Pi,ar.getRelativeXY=Yl,ar.getViewportBBox=hi,ar.screenToWsCoordinates=Zu,ar.wsToScreenCoordinates=ec;var $s=class{constructor(e,t,s,o,u){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new Ee(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Ee(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=s||!1,this.margin=u!==void 0?u:$s.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),o&&(e+=" "+o),this.outerSvg=K(F.SVG,{class:e}),o=K(F.G,{},this.outerSvg),this.svgBackground=K(F.RECT,{class:"blocklyScrollbarBackground"},o),e=Math.floor(($s.scrollbarThickness-5)/2),this.svgHandle=K(F.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},o),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),$e(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ue(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ue(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=$s.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),Ot(this.onMouseDownBarWrapper_),Ot(this.onMouseDownHandleWrapper_),B(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,kt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&$s.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=$s.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=$s.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-$s.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var s=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*s,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=s/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=$s.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-$s.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var s=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*s,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=s/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),ps(),this.cleanUp(),As(e))e.stopPropagation();else{var t=k(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var s=Pi(this.svgHandle);s=this.horizontal?s.x:s.y;var o=this.handlePosition,u=.95*this.handleLength;t<=s?o-=u:t>=s+this.handleLength&&(o+=u),this.setHandlePosition(this.constrainHandlePosition(o)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),As(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=Ue(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ue(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){ps(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(Ot(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Ot(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new Ee(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};$s.scrollbarThickness=Ih?25:15,$s.DEFAULT_SCROLLBAR_MARGIN=.5;var Ha={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},vh={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Ga,DOMParser:Au,XMLSerializer:wu}=globalThis;Au&&(Ha=new Au),wu&&(vh=new wu);var rn="https://developers.google.com/blockly/xml",Ao=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,yi={NAME_SPACE:rn};yi.createElement=r.createElement$$module$build$src$core$utils$xml,yi.createTextNode=r.createTextNode$$module$build$src$core$utils$xml,yi.domToText=sl,yi.injectDependencies=ch,yi.textToDom=r.textToDom$$module$build$src$core$utils$xml;var Lh="categoryToolbox",Od="flyoutToolbox",Ze;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(Ze||(Ze={}));var Rd={hasCategoriesInternal:nl},mn={};mn.Position=Ze,mn.TEST_ONLY=Rd,mn.convertFlyoutDefToJsonArray=Ks,mn.convertToolboxDefToJson=ws,mn.hasCategories=Ns,mn.isCategoryCollapsible=xi,mn.parseToolboxTree=ss;var Wr;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(Wr||(Wr={}));var Nu;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Nu||(Nu={}));var Xr;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(Xr||(Xr={}));var Al={};Al.bumpDirection=Xr,Al.bumpPositionRect=Or,Al.getCornerOppositeToolbox=Sr,Al.getStartPositionRect=ho,Al.horizontalPosition=Nu,Al.verticalPosition=Wr;var wn={width:96,height:124,url:"sprites.png"},ap=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=K(F.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:ns.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[ns.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&B(this.svgGroup);for(const e of this.boundEvents)Ot(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new zt(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var s=Sr(this.workspace,e),o=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(o+=this.LARGE_SPACING+this.HEIGHT),e=ho(s,new Te(this.WIDTH,o),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),s=s.vertical,t=Or(e,this.MARGIN_VERTICAL,s===Wr.TOP?Xr.DOWN:Xr.UP,t),s===Wr.TOP){var u=this.SMALL_SPACING+this.HEIGHT,h;(h=this.zoomInGroup)==null||h.setAttribute("transform","translate(0, "+u+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(u+this.LARGE_SPACING+this.HEIGHT)+")")}else{h=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let v;(v=this.zoomInGroup)==null||v.setAttribute("transform","translate(0, "+h+")"),h=h+this.SMALL_SPACING+this.HEIGHT,(u=this.zoomOutGroup)==null||u.setAttribute("transform","translate(0, "+h+")")}this.top=t.top,this.left=t.left;var E;(E=this.svgGroup)==null||E.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=K(F.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=K(F.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);K(F.RECT,{width:32,height:32},t),K(F.IMAGE,{width:wn.width,height:wn.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(oi,"xlink:href",this.workspace.options.pathToMedia+wn.url),this.boundEvents.push(Ue(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=K(F.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=K(F.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);K(F.RECT,{width:32,height:32},t),K(F.IMAGE,{width:wn.width,height:wn.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(oi,"xlink:href",this.workspace.options.pathToMedia+wn.url),this.boundEvents.push(Ue(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),ps(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=K(F.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=K(F.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);K(F.RECT,{width:32,height:32},t),K(F.IMAGE,{width:wn.width,height:wn.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(oi,"xlink:href",this.workspace.options.pathToMedia+wn.url),this.boundEvents.push(Ue(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),ps(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(ee(z.CLICK))(null,this.workspace.id,"zoom_controls");Oe(e)}};Rt(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Va=100,kh=75,vi=50,vt=25,ln={BLOCKS:vi,PROCEDURES:kh,VARIABLES:Va,WORKSPACE_COMMENTS:vt},Rs={};Rs.register=Bi,Rs.unregister=ta;var un=class{constructor(){this.priority=vt}save(e){const t=[];for(const s of e.getTopComments())(e=Bo(s,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const s of e)po(s,t,{recordUndo:at()})}clear(e){for(const t of e.getTopComments())t.dispose()}};Bi("workspaceComments",new un);var Nn={};Nn.WorkspaceCommentSerializer=un,Nn.append=po,Nn.save=Bo;var wl={};wl.register=Sn,wl.unregister=sa;var Cs=class{paste(e,t,s){e=e.commentState,s&&(e.x=s.x,e.y=s.y),r.disable$$module$build$src$core$events$utils();let o;try{o=po(e,t),Bn(o)}finally{r.enable$$module$build$src$core$events$utils()}return o?(nt()&&Oe(new(ee(z.COMMENT_CREATE))(o)),r.setSelected$$module$build$src$core$common(o),o):null}};Cs.TYPE="workspace-comment",Sn(Cs.TYPE,new Cs);var Mu;Mu=28,r.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Mu,connectingSnapRadius:Mu,currentConnectionPreference:8,bumpDelay:250},r.config$$module$build$src$core$config;var Du="aria-",Ah="role",Li;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(Li||(Li={}));var Is;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(Is||(Is={}));var cn={};cn.Role=Li,cn.State=Is,cn.setRole=_o,cn.setState=Ms;var Wa=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&_o(t,this.roleName),this.element=t;for(let s=0,o;o=this.menuItems[s];s++)t.appendChild(o.createDom());return this.mouseOverHandler=Ue(t,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Ue(t,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Ue(t,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Ue(t,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Ue(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),ye(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),b(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(Ot(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(Ot(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(Ot(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(Ot(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(Ot(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){for(let s=0,o;o=this.menuItems[s];s++)if(o.getElement()===e)return o}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;if(t&&(t.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,(t=this.getElement())&&Ms(t,Is.ACTIVEDESCENDANT,e.getId());let s;(s=e.getElement())==null||s.scrollIntoView({block:"nearest",inline:"start"})}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let s;for(;s=this.menuItems[e];){if(s.isEnabled()){this.setHighlighted(s);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const s=new Ee(e.clientX,e.clientY);if(1>Ee.distance(t,s))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=L(e);return t.height=e.scrollHeight,t}},Nl=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=Ie(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var s=document.createElement("div");s.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(s)}return s=this.content,typeof this.content=="string"&&(s=document.createTextNode(this.content)),t.appendChild(s),e.appendChild(t),this.roleName&&_o(e,this.roleName),Ms(e,Is.SELECTED,this.checkable&&this.checked||!1),Ms(e,Is.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(ye(t,"blocklyMenuItemHighlight"),ye(t,"goog-menuitem-highlight")):(b(t,"blocklyMenuItemHighlight"),b(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},ki="_TEMP_COLLAPSED_INPUT",Pu="_TEMP_COLLAPSED_FIELD",Tn="MANUALLY_DISABLED",Ml={COLLAPSED_FIELD_NAME:Pu,COLLAPSED_INPUT_NAME:ki,MANUALLY_DISABLED:Tn};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(r.inputTypes$$module$build$src$core$inputs$input_types||(r.inputTypes$$module$build$src$core$inputs$input_types={})),r.inputTypes$$module$build$src$core$inputs$input_types;var xu=new Set,hr=new WeakSet,Uc=new WeakMap,dr=null,Xa=null,za=0,Bu={};Bu.finishQueuedRenders=jt,Bu.queueRender=pn,Bu.triggerQueuedRenders=Us;var Mn=function(e,t){window.alert(e),t&&t()},zr=function(e,t){t(window.confirm(e))},so=function(e,t,s){s(window.prompt(e,t))},zn={confirmInternal:Uo},Dl={TEST_ONLY:zn};Dl.alert=Hi,Dl.confirm=Ct,Dl.prompt=Rr,Dl.setAlert=il,Dl.setConfirm=Kl,Dl.setPrompt=di;var Ya,wh;r.Msg$$module$build$src$core$msg=Object.create(null),Ya=function(e){Object.keys(e).forEach(function(t){r.Msg$$module$build$src$core$msg[t]=e[t]})},wh={Msg:r.Msg$$module$build$src$core$msg,setLocale:Ya};var ja=class extends yu{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new ja),t.varId=e.varId,t}},pr=class extends ja{constructor(e){super(e),this.type=z.VAR_CREATE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new pr),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};p(ce.EVENT,z.VAR_CREATE,pr);var Hc=class{constructor(e,t,s,o){this.workspace=e,this.name=t,this.type=s||"",this.id=o||ie()}getId(){return this.id}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},Ka="VARIABLE",Yr="ijkmnopqrstuvwxyzabcdefgh",Nh={generateUniqueNameInternal:Hn},bs={CATEGORY_NAME:Ka,TEST_ONLY:Nh,VAR_LETTER_OPTIONS:Yr};bs.allDeveloperVariables=r.allDeveloperVariables$$module$build$src$core$variables,bs.allUsedVarModels=r.allUsedVarModels$$module$build$src$core$variables,bs.createVariableButtonHandler=pi,bs.flyoutCategory=Go,bs.flyoutCategoryBlocks=On,bs.generateUniqueName=Jn,bs.generateUniqueNameFromOptions=$o,bs.generateVariableFieldDom=Qn,bs.getAddedVariables=Wo,bs.getOrCreateVariablePackage=r.getOrCreateVariablePackage$$module$build$src$core$variables,bs.getVariable=r.getVariable$$module$build$src$core$variables,bs.nameUsedWithAnyType=sc,bs.nameUsedWithConflictingParam=Vo,bs.promptName=qn,bs.renameVariable=r.renameVariable$$module$build$src$core$variables;var Fu=class extends Error{},Cd=class extends Fu{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Uu=class extends Fu{constructor(e,t,s){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=s}},Ja=class extends Fu{constructor(e,t,s,o){super(`The block ${s.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=s,this.childState=o}},hp=class extends Fu{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},dp=class extends Fu{constructor(e,t,s){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=s}},Pl={};Pl.BadConnectionCheck=Ja,Pl.DeserializationError=Fu,Pl.MissingBlockType=Cd,Pl.MissingConnection=Uu,Pl.RealChildOfShadow=hp,Pl.UnregisteredIcon=dp;var yd=class{constructor(){this.priority=vi}save(e){const t=[];for(const s of e.getTopBlocks(!1))(e=Js(s,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const s of e)_i(s,t,{recordUndo:at()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Bi("blocks",new yd);var wo={};wo.BlockSerializer=yd,wo.append=_i,wo.appendInternal=Hs,wo.save=Js;var zs=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};zs.MUTATOR=new zs("mutator"),zs.WARNING=new zs("warning"),zs.COMMENT=new zs("comment");var no=class extends yu{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new no),t.blockId=e.blockId,t}},xl=class extends no{constructor(e,t,s,o,u){super(e),this.type=z.BLOCK_CHANGE,e&&(this.element=t,this.name=s||void 0,this.oldValue=o,this.newValue=u)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new xl),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const s=t.getIcon(zs.MUTATOR);switch(s&&gi(s)&&s.bubbleIsVisible()&&s.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var o;t.setDisabledReason(!!e,(o=this.disabledReason)!=null?o:Tn);break;case"inline":t.setInputsInline(!!e);break;case"mutation":o=xl.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(r.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),Oe(new xl(t,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?gn(e):""}};p(ce.EVENT,z.BLOCK_CHANGE,xl);var as={};as.clamp=mo,as.toDegrees=Ql,as.toRadians=Yo;var Mh=16,vd=1,pp=12,Ld=16,qa=.25,Dh=null,Hu=null,En="",Bl="",Pt,Ai,_r,jr=null,No=null,Ph=null,Qa={getBoundsInfo:function(){const e=Ke(jr),t=L(jr);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,s,o){const u=Qa.getBoundsInfo(),h=L(Pt);return t+h.height<u.bottom?ua(e,t,u,h):o-h.height>u.top?Ko(s,o,u,h):t+h.height<document.documentElement.clientHeight?ua(e,t,u,h):o-h.height>document.documentElement.clientTop?Ko(s,o,u,h):Vi(e,u,h)}},Dn={ANIMATION_TIME:qa,ARROW_HORIZONTAL_PADDING:pp,ARROW_SIZE:Mh,BORDER_SIZE:vd,PADDING_Y:Ld,TEST_ONLY:Qa};Dn.clearContent=hc,Dn.createDom=cc,Dn.getContentDiv=jo,Dn.getOwner=To,Dn.getPositionX=Zl,Dn.hide=eu,Dn.hideIfOwner=$c,Dn.hideWithoutAnimation=Wi,Dn.isVisible=hl,Dn.repositionForWindowResize=aa,Dn.setBoundsElement=ac,Dn.setColour=dc,Dn.show=gc,Dn.showPositionedByBlock=ah,Dn.showPositionedByField=ra;var Gu=class{constructor(e){this.workspace=e,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(e),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t=0,s;s=e[t];t++)this.unregisterMarker(s);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};Gu.LOCAL_MARKER="local_marker_1";var Gc={};Gc.commonWordPrefix=ha,Gc.commonWordSuffix=da,Gc.isNumber=r.isNumber$$module$build$src$core$utils$string,Gc.shortestStringLength=tu,Gc.wrap=r.wrap$$module$build$src$core$utils$string;var Za=void 0,Vc=!1,Kr=!1,eh=50,kd=0,Jr=0,Ad=0,xh=0,ri=null,Fl=null,th=0,Wc=10,wd=10,_p=750,Vu=5,Ys=null,In={HOVER_MS:_p,LIMIT:eh,MARGINS:Vu,OFFSET_X:th,OFFSET_Y:Wc,RADIUS_OK:wd};In.bindMouseEvents=pl,In.block=Zo,In.createDom=mc,In.dispose=Xi,In.getCustomTooltip=ga,In.getDiv=dl,In.getTooltipOfObject=wr,In.hide=zi,In.isVisible=fc,In.setCustomTooltip=_a,In.unbindMouseEvents=Tc,In.unblock=Rn;var Nd=.45,Xc=.65,n={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},i={};i.blend=Gn,i.getHsvSaturation=Oc,i.getHsvValue=ma,i.hexToRgb=iu,i.hsvToHex=_n,i.hueToHex=Rc,i.names=n,i.parse=Nr,i.rgbToHex=nu,i.setHsvSaturation=fa,i.setHsvValue=hh;var l={};l.checkMessageReferences=ru,l.parseBlockColour=_l,l.replaceMessageReferences=At,l.tokenizeInterpolation=Yi;var c=class{constructor(e,t,s){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Te(0,0),e!==c.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(At(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=K(F.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=K(F.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=K(F.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");pl(e),this.mouseDownWrapper=Ue(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(c),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(c,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=r.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),sl(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(r.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){$c(this),ji(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||B(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(ye(e,"blocklyEditableText"),b(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(ye(e,"blocklyNonEditableText"),b(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==c.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let s=2*e,o=t.FIELD_TEXT_HEIGHT,u=0;this.textElement_&&(u=js(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),s+=u),this.isFullBlockField()||(o=Math.max(o,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=s,this.positionTextElement_(e,u),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var s=this.getConstants(),o=this.size_.height/2,u;this.textElement_.setAttribute("x",String((u=this.getSourceBlock())!=null&&u.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(s.FIELD_TEXT_BASELINE_CENTER?o:o-s.FIELD_TEXT_HEIGHT/2+s.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Te(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new d;if(this.isFullBlockField()){var s=this.sourceBlock_.getHeightWidth();const o=t.workspace.scale;e=this.getAbsoluteXY_(),t=(s.width+1)*o,s=(s.height+1)*o,md?(e.x+=1.5*o,e.y+=1.5*o):(e.x-=.5*o,e.y-=.5*o)}else s=this.borderRect_.getBoundingClientRect(),e=Ke(this.borderRect_),t=s.width,s=s.height;return new zt(e.y,e.y+s,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,c.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e):c.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var s=r.getGroup$$module$build$src$core$events$utils();s||r.setGroup$$module$build$src$core$events$utils(!0);try{const se=this.doClassValidation_(e),Me=this.processValidation(e,se,t);if(!(Me instanceof Error)){var o,u=(o=this.getValidator())==null?void 0:o.call(this,Me),h=this.processValidation(Me,u,t);if(!(h instanceof Error)){var E=this.sourceBlock_;if(!E||!E.disposed){var v=this.getValue();v===h?this.doValueUpdate_(h):(this.doValueUpdate_(h),t&&E&&nt()&&Oe(new(ee(z.BLOCK_CHANGE))(E,"field",this.name||null,v,h)),this.isDirty_&&this.forceRerender())}}}}finally{r.setGroup$$module$build$src$core$events$utils(s)}}}processValidation(e,t,s){return t===null?(this.doValueInvalid_(e,s),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return wr(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Ke(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new d;const s=t.inputList;for(let o=0;o<t.inputList.length;o++){const u=s[o],h=u.fieldRow;for(let E=0;E<h.length;E++)if(h[E]===this){e=u;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg=e}else this.cursorSvg=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg=e}else this.markerSvg=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new d;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg&&e.getMarker(Gu.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};c.NBSP=" ",c.SKIP_SETUP=Symbol("SKIP_SETUP");var d=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},_=null,I=null,y=null,A="blocklyWidgetDiv",J="",fe="",me,ae={};ae.createDom=gl,ae.getDiv=er,ae.hide=sr,ae.hideIfOwner=ji,ae.hideIfOwnerIsInWorkspace=$i,ae.isVisible=Cc,ae.positionWithAnchor=yc,ae.repositionForWindowResize=vc,ae.show=Eo,ae.testOnly_setDiv=tr;var De=null,Ve={},We=null,is={};is.callbackFactory=r.callbackFactory$$module$build$src$core$contextmenu,is.dispose=Mr,is.getCurrentBlock=fi,is.hide=cu,is.setCurrentBlock=uu,is.show=fl;var w=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let t;return(t=this.registeredItems.get(e))!=null?t:null}getContextMenuOptions(e,t){const s=[];for(const u of this.registeredItems.values())if(e===u.scopeType){var o=u.preconditionFn(t);o!=="hidden"&&(o={text:typeof u.displayText=="function"?u.displayText(t):u.displayText,enabled:o==="enabled",callback:u.callback,scope:t,weight:u.weight},s.push(o))}return s.sort(function(u,h){return u.weight-h.weight}),s}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(w||(w={})),w.ScopeType;var P=50,X=100,Ce={BLOCK:P,BUBBLE:X},je=class{constructor(e){this.comment=e,this.startLoc=null,this.inGroup=!1,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,P),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||r.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const e=new(ee(z.COMMENT_DRAG))(this.comment,!0);Oe(e)}fireDragEndEvent(){const e=new(ee(z.COMMENT_DRAG))(this.comment,!1);Oe(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(ee(z.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),Oe(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},et=new WeakMap,tt=class{constructor(e){this.workspace=e,this.size=new Te(120,100),this.collapsed=!1,this.editable=!0,this.location=new Ee(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=K(F.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let t;(t=e.getLayerManager())==null||t.append(this,P),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Ee(0,0))}createHighlightRect(e){return K(F.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,t){e=K(F.G,{class:"blocklyCommentTopbar"},e);const s=K(F.RECT,{class:"blocklyCommentTopbarBackground"},e),o=K(F.IMAGE,{class:"blocklyDeleteIcon",href:`${t.options.pathToMedia}delete-icon.svg`},e);t=K(F.IMAGE,{class:"blocklyFoldoutIcon",href:`${t.options.pathToMedia}foldout-icon.svg`},e);const u=K(F.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),h=document.createTextNode("");return u.appendChild(h),Ue(t,"pointerdown",this,this.onFoldoutDown),Ue(o,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:s,deleteIcon:o,foldoutIcon:t,textPreview:u,textPreviewNode:h}}createTextArea(e){e=K(F.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const t=document.createElementNS(ko,"body");t.setAttribute("xmlns",ko),t.className="blocklyMinimalBody";const s=document.createElementNS(ko,"textarea");return ye(s,"blocklyCommentText"),ye(s,"blocklyTextarea"),ye(s,"blocklyText"),t.appendChild(s),e.appendChild(t),Ue(s,"change",this,this.onTextChange),{foreignObject:e,textArea:s}}createResizeHandle(e,t){return e=K(F.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),Ue(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const t=this.topBarBackground.getBBox(),s=this.deleteIcon.getBBox(),o=this.foldoutIcon.getBBox(),u=this.textPreview.getBBox(),h=this.resizeHandle.getBBox();this.size=e=Te.max(e,this.calcMinSize(t,o,s)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,t),this.updateDeleteIconPosition(e,t,s),this.updateFoldoutIconPosition(t,o),this.updateTextPreviewSize(e,t,u,s,h),this.updateResizeHandlePosition(e,h)}setSize(e){const t=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(t,this.size)}calcMinSize(e,t,s){var o;this.updateTextPreview((o=this.textArea.value)!=null?o:""),o=ai(this.textPreview);const u=this.calcFoldoutMargin(e,t),h=this.calcDeleteMargin(e,s);let E=o;return this.foldoutIcon.checkVisibility()?E+=t.width+2*u:o&&(E+=4),this.deleteIcon.checkVisibility()?E+=s.width+2*h:o&&(E+=4),new Te(E,e.height+20)}calcDeleteMargin(e,t){return(e.height-t.height)/2}calcFoldoutMargin(e,t){return(e.height-t.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,t,s){t=this.calcDeleteMargin(t,s),this.deleteIcon.setAttribute("y",`${t}`),this.deleteIcon.setAttribute("x",`${e.width-s.width-t}`)}updateFoldoutIconPosition(e,t){e=this.calcFoldoutMargin(e,t),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,t,s,o,u){const h=(t.height-s.height)/2,E=this.calcDeleteMargin(t,o);t=this.calcFoldoutMargin(t,u),e=e.width-u.width-2*t-o.width-2*E,this.textPreview.setAttribute("x",`${u.width+2*t*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${h+s.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let s=this.sizeChangeListeners.length-1;0<=s;s--)this.sizeChangeListeners[s](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),As(e)||(this.preResizeSize=this.getSize(),Dr(this.workspace,e,new Ee(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ue(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ue(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){ps(),this.resizePointerUpListener&&(Ot(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Ot(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=nr(this.workspace,e),this.setSizeWithoutFiringEvents(new Te(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?ye(this.svgRoot,"blocklyCollapsed"):b(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){ps(),this.bringToFront(),As(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(ye(this.svgRoot,"blocklyEditable"),b(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(b(this.svgRoot,"blocklyEditable"),ye(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let t=this.textChangeListeners.length-1;0<=t;t--)this.textChangeListeners[t](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){ps(),As(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,B(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};Rt(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var st=class{constructor(e,t){this.workspace=e,this.text="",this.size=new Te(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Ee(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:ie(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){nt()&&Oe(new(ee(z.COMMENT_CREATE))(this))}fireDeleteEvent(){nt()&&Oe(new(ee(z.COMMENT_DELETE))(this))}fireChangeEvent(e,t){nt()&&Oe(new(ee(z.COMMENT_CHANGE))(this,e,t))}fireCollapseEvent(e){nt()&&Oe(new(ee(z.COMMENT_COLLAPSE))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){const t=new(ee(z.COMMENT_RESIZE))(this);this.size=e,t.recordCurrentSizeAsNewSize(),Oe(t)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,t){const s=new(ee(z.COMMENT_MOVE))(this);t&&s.setReason(t),this.location=e,s.recordNew(),Oe(s)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},Bs=class extends st{constructor(e,t){super(e,t),this.dragStrategy=new je(this),this.workspace=e,this.view=new tt(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),Ue(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),Ue(this.view.getSvgRoot(),"wheel",this,s=>{s.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>void super.setText(t)),this.view.addSizeChangeListener((e,t)=>void super.setSize(t)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,s;const o=(s=(t=this.view)==null?void 0:t.getSize())!=null?s:this.getSize();return this.workspace.RTL?(t=e.x-o.width,s=e.x):(t=e.x,s=e.x+o.width),new zt(e.y,e.y+o.height,t,s)}moveBy(e,t,s){const o=this.getRelativeToSurfaceXY();e=new Ee(o.x+e,o.y+t),this.moveTo(e,s)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?ye(this.getSvgRoot(),"blocklyDragging"):b(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);if(t){t.handleCommentStart(e,this);let s;(s=this.workspace.getLayerManager())==null||s.append(this,P),r.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(e){e?ye(this.getSvgRoot(),"blocklyDraggingDelete"):b(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){ye(this.getSvgRoot(),"blocklySelected")}unselect(){b(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:Cs.TYPE,commentState:Bo(this,{addCoordinates:!0})}}showContextMenu(e){const t=w.registry.getContextMenuOptions(w.ScopeType.COMMENT,{comment:this});fl(e,t,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}},ut={};ut.appendDomToWorkspace=Oa,ut.blockToDom=ei,ut.blockToDomWithXY=mi,ut.clearWorkspaceAndLoadFromXml=au,ut.deleteNext=Ra,ut.domToBlock=r.domToBlock$$module$build$src$core$xml,ut.domToBlockInternal=Ti,ut.domToPrettyText=Sa,ut.domToText=gn,ut.domToVariables=ml,ut.domToWorkspace=r.domToWorkspace$$module$build$src$core$xml,ut.loadWorkspaceComment=hu,ut.saveWorkspaceComment=ir,ut.variablesToDom=Ki,ut.workspaceToDom=Kt;var gr=class extends no{constructor(e){super(e),this.type=z.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=mi(e),this.ids=Ft(e),this.json=Js(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=gn(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new gr),t.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Zp(t,this.ids))if(e)_i(this.json,t);else for(e=0;e<this.ids.length;e++){const s=this.ids[e],o=t.getBlockById(s);o?o.dispose(!1):s===this.blockId&&console.warn("Can't uncreate non-existent block: "+s)}}},Zp=function(e,t){return t.map(s=>e.getBlockById(s)).filter(s=>s&&s.isShadow()).length===t.length};p(ce.EVENT,z.BLOCK_CREATE,gr);var e_=class extends to{constructor(e,t){super(t),this.type=z.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new e_),t.themeName=e.themeName,t}};p(ce.EVENT,z.THEME_CHANGE,e_);var t_=class extends to{constructor(e,t,s,o,u){super(o),this.type=z.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=t,this.scale=s,this.oldScale=u}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new t_),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};p(ce.EVENT,z.VIEWPORT_CHANGE,t_);var xe;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(xe||(xe={}));var Bh=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const s=this.calculateIndexForYPos(t);if(s>=this.connections.length)return-1;t=e.y;let o=s;for(;0<=o&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o--}for(o=s;o<this.connections.length&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,s=this.connections.length;for(;t<s;){const o=Math.floor((t+s)/2);if(this.connections[o].y<e)t=o+1;else if(this.connections[o].y>e)s=o;else{t=o;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function s(Me){const hs=u-o[Me].x,us=h-o[Me].y;return Math.sqrt(hs*hs+us*us)<=t&&se.push(o[Me]),us<t}const o=this.connections,u=e.x,h=e.y;e=0;let E=o.length-2,v=E;for(;e<v;)o[v].y<h?e=v:E=v,v=Math.floor((e+E)/2);const se=[];if(E=e=v,o.length){for(;0<=e&&s(e);)e--;do E++;while(E<o.length&&s(E))}return se}isInYRange(e,t,s){return Math.abs(this.connections[e].y-t)<=s}searchForClosest(e,t,s){if(!this.connections.length)return{connection:null,radius:t};const o=e.y,u=e.x;e.x=u+s.x,e.y=o+s.y;var h=this.calculateIndexForYPos(e.y);s=null;let E=t,v,se=h-1;for(;0<=se&&this.isInYRange(se,e.y,t);)v=this.connections[se],this.connectionChecker.canConnect(e,v,!0,E)&&(s=v,E=v.distanceFrom(e)),se--;for(;h<this.connections.length&&this.isInYRange(h,e.y,t);)v=this.connections[h],this.connectionChecker.canConnect(e,v,!0,E)&&(s=v,E=v.distanceFrom(e)),h++;return e.x=u,e.y=o,{connection:s,radius:E}}static init(e){const t=[];return t[xe.INPUT_VALUE]=new Bh(e),t[xe.OUTPUT_VALUE]=new Bh(e),t[xe.NEXT_STATEMENT]=new Bh(e),t[xe.PREVIOUS_STATEMENT]=new Bh(e),t}},gp=null,Md=null,Dd={};Dd.connectionUiEffect=si,Dd.disconnectUiEffect=pu,Dd.disconnectUiStop=bl,Dd.disposeUiEffect=Vn;var gg=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Ee(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){Xe()&&Xe().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=Ee.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},Gf=5,Vf=6,Wu=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new Ee(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new Ee(0,0)}dispose(){ps(),Rn(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)Ot(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new Ee(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),ks()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=Ee.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Ee.magnitude(this.currentDragDeltaXY)>(this.flyout?r.config$$module$build$src$core$config.flyoutDragRadius:r.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),r.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new gg(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=Xe();t&&Cn(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(ge(ce.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,ci(e)?this.cancel():(this.gestureHasStarted=!0,bl(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=To(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,Zo(),As(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&Mi(e,this),this.mouseDownXY=new Ee(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(Ue(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ue(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ue(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&ks())}handleMove(e){this.isDragging()&&li(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),ks())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!li(e))return;if(this.updateFromEvent(e),ks(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=ui(e);this.cachedPoints.set(t,this.getTouchPoint(e));var s=Array.from(this.cachedPoints.keys());s.length===2&&(t=this.cachedPoints.get(s[0]),s=this.cachedPoints.get(s[1]),this.startDistance=Ee.distance(t,s),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const t=ui(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),s=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),s=Ee.distance(s,t)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(t=s-this.previousScale,t=0<t?t*Gf:t*Vf,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const o=this.startWorkspace_,u=k(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(u.x,u.y,t)}this.previousScale=s,e.preventDefault()}handleTouchEnd(e){e=ui(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new Ee(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(ks(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||r.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){Oe(new(ee(z.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(ee(z.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),Oe(e)}this.bringBlockToFront(),r.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,Xe()&&Xe().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,r.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=H();for(let t=0,s;s=e[t];t++)if(s.currentGesture_)return!0;return!1}},s_=class{constructor(e,t){this.pattern=e,this.scale=1;let s;this.spacing=(s=t.spacing)!=null?s:0;let o;this.length=(o=t.length)!=null?o:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let u;this.snapToGrid=(u=t.snap)!=null?u:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let s=t-this.length/2,o=t+this.length/2;t*=e,s*=e,o*=e,this.setLineAttributes(this.line1,e,s,o,t,t),this.setLineAttributes(this.line2,e,t,t,s,o)}setLineAttributes(e,t,s,o,u,h){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${s}`),e.setAttribute("y1",`${u}`),e.setAttribute("x2",`${o}`),e.setAttribute("y2",`${h}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const s=t/2,o=Math.round(Math.round((e.x-s)/t)*t+s);return t=Math.round(Math.round((e.y-s)/t)*t+s),o===e.x&&t===e.y?e:new Ee(o,t)}static createDom(e,t,s){e=K(F.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},s);let o,u;if(0<((o=t.length)!=null?o:1)&&0<((u=t.spacing)!=null?u:0)){K(F.LINE,{stroke:t.colour},e);let h;(h=t.length)!=null&&h&&K(F.LINE,{stroke:t.colour},e)}else K(F.LINE,{},e);return e}},Wf=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(P),ye(e,"blocklyBlockCanvas"),e=this.createLayer(X),ye(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=K(F.SVG,{class:"blocklyBlockDragSurface",xmlns:Lu,"xmlns:html":ko,"xmlns:xlink":oi,version:"1.1"});return e.append(t),K(F.G,{},t)}createAnimationLayer(e){const t=K(F.SVG,{class:"blocklyAnimationLayer",xmlns:Lu,"xmlns:html":ko,"xmlns:xlink":oi,version:"1.1"});return e.append(t),K(F.G,{},t)}appendToAnimationLayer(e){let t;const s=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(s){let u;(u=this.animationLayer)==null||u.setAttribute("transform",s)}let o;(o=this.animationLayer)==null||o.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let s;(s=this.dragLayer)==null||s.setAttribute("transform",e);for(const[,o]of this.layers)o.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot())}moveOffDragLayer(e,t){this.append(e,t)}append(e,t){this.layers.has(t)||this.createLayer(t);let s;(s=this.layers.get(t))==null||s.appendChild(e.getSvgRoot())}createLayer(e){const t=this.workspace.getSvgGroup(),s=K(F.G,{});let o=!1;const u=[...this.layers].sort((h,E)=>h[0]-E[0]);for(const[h,E]of u)if(e<h){t.insertBefore(s,E),o=!0;break}return o||t.appendChild(s),this.layers.set(e,s),s}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(P)}getBubbleLayer(){return this.layers.get(X)}},$g={};$g.deepMerge=$n;var sh=class{constructor(e,t,s,o){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=s||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),p(ce.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const s=new sh(e);let o=t.base;if(o){if(typeof o=="string"){let u;o=(u=Y(ce.THEME,o))!=null?u:void 0}o instanceof sh&&($n(s,o),s.name=e)}return $n(s.blockStyles,t.blockStyles),$n(s.categoryStyles,t.categoryStyles),$n(s.componentStyles,t.componentStyles),$n(s.fontStyle,t.fontStyle),t.startHats!==null&&(s.startHats=t.startHats),s}},Xf={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},zf={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},$p=new sh("classic",Xf,zf),$r=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,s=!1;var o=!1,u=!1,h=!1,E=!1,v=!1;const se=!!e.readOnly;if(!se){var Me;t=ws((Me=e.toolbox)!=null?Me:null),s=Ns(t),o=e.trashcan,o=o===void 0?s:o,u=e.collapse,u=u===void 0?s:u,h=e.comments,h=h===void 0?s:h,E=e.disable,E=E===void 0?s:E,v=e.sounds,v=v===void 0?!0:v}Me=e.maxTrashcanContents,o?Me===void 0&&(Me=32):Me=0;const hs=!!e.rtl;let us=e.horizontalLayout;us===void 0&&(us=!1);var oo=e.toolboxPosition!=="end";oo=us?oo?Ze.TOP:Ze.BOTTOM:oo===hs?Ze.RIGHT:Ze.LEFT;let jh=e.css;jh===void 0&&(jh=!0);let jd="https://blockly-demo.appspot.com/static/media/";e.media&&(jd=e.media.endsWith("/")?e.media:e.media+"/");const z$=e.oneBasedIndex,Om=e.renderer||"geras",Rm=e.plugins||{};let Y_=e.modalInputs;Y_===void 0&&(Y_=!0),this.RTL=hs,this.oneBasedIndex=z$===void 0?!0:z$,this.collapse=u,this.comments=h,this.disable=E,this.readOnly=se,this.maxBlocks=e.maxBlocks||1/0;let Y$;this.maxInstances=(Y$=e.maxInstances)!=null?Y$:null,this.modalInputs=Y_,this.pathToMedia=jd,this.hasCategories=s,this.moveOptions=$r.parseMoveOptions(e,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=o,this.maxTrashcanContents=Me,this.hasSounds=v,this.hasCss=jh,this.horizontalLayout=us,this.languageTree=t,this.gridOptions=$r.parseGridOptions(e),this.zoomOptions=$r.parseZoomOptions(e),this.toolboxPosition=oo,this.theme=$r.parseThemeOptions(e),this.renderer=Om;let j$;this.rendererOverrides=(j$=e.rendererOverrides)!=null?j$:null;let K$;this.parentWorkspace=(K$=e.parentWorkspace)!=null?K$:null,this.plugins=Rm}static parseMoveOptions(e,t){const s=e.move||{},o={};return s.scrollbars===void 0&&e.scrollbars===void 0?o.scrollbars=t:typeof s.scrollbars=="object"?(o.scrollbars={horizontal:!!s.scrollbars.horizontal,vertical:!!s.scrollbars.vertical},o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!s.scrollbars||!!e.scrollbars,o.wheel=o.scrollbars&&s.wheel!==void 0?!!s.wheel:typeof o.scrollbars=="object",o.drag=o.scrollbars?s.drag===void 0?!0:!!s.drag:!1,o}static parseZoomOptions(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions(e){return e=e.theme||$p,typeof e=="string"?Y(ce.THEME,e):e instanceof sh?e:sh.defineTheme(e.name||"builtin"+Ie(),e)}},fg={fromJsonInternal:_u},fp={TEST_ONLY:fg};fp.fromJson=r.fromJson$$module$build$src$core$field_registry,fp.register=sn,fp.unregister=Ei;var io=class extends c{constructor(e,t,s){super(c.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==c.SKIP_SETUP&&(Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],s&&this.configure_(s),this.setValue(this.selectedOption[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(io,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=K(F.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ye(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=K(F.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?io.ARROW_CHAR+" ":" "+io.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=K(F.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(oi,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new d;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new Ee(e.clientX,e.clientY):null,hc(),e=this.menu_.render(jo()),ye(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),dc(t,this.sourceBlock_.style.colourTertiary)),ra(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new d;const t=new Wa;t.setRole(Li.LISTBOX),this.menu_=t;const s=this.getOptions(!1);this.selectedMenuItem=null;for(let u=0;u<s.length;u++){const[h,E]=s[u];if(typeof h=="object"){var o=new Image(h.width,h.height);o.src=h.src,o.alt=h.alt||""}else o=h;o=new Nl(o,E),o.setRole(Li.OPTION),o.setRightToLeft(e.RTL),o.setCheckable(!0),t.addChild(o),o.setChecked(E===this.value_),E===this.value_&&(this.selectedMenuItem=o),o.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){$c(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,s;s=e[t];t++)s[1]===this.value_&&(this.selectedOption=s)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=e.colourSecondary:this.arrow.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new d;this.imageElement.style.display="",this.imageElement.setAttributeNS(oi,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const s=Number(e.height);e=Number(e.width);var o=!!this.borderRect_;const u=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,s+io.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let h;h=this.svgArrow?this.positionSVGArrow(e+o,u/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):js(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+h+2*o,this.size_.height=u;let E=0;t.RTL?this.imageElement.setAttribute("x",`${o+h}`):(E=e+h,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${o}`)),this.imageElement.setAttribute("y",String(u/2-s/2)),this.positionTextElement_(E+o,e+h)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();ye(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const s=js(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let o=0;this.svgArrow&&(o=this.positionSVGArrow(s+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=s+o+2*t,this.size_.height=e,this.positionTextElement_(t,s)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const s=this.getSourceBlock();if(!s)throw new d;const o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,h=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(s.RTL?o:e+u)+","+t+")"),h+u}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let t=!1;const s=e.map(([E,v])=>typeof E=="string"?[At(E),v]:(t=!0,[E.alt!==null?Object.assign({},E,{alt:At(E.alt)}):Object.assign({},E),v]));if(t||2>e.length)return{options:s};var o=s.map(([E])=>E),u=tu(o);e=ha(o,u);const h=da(o,u);return!e&&!h||u<=e+h?{options:s}:(u=e?o[0].substring(0,e-1):void 0,o=h?o[0].substr(1-h):void 0,{options:this.applyTrim(s,e,h),prefix:u,suffix:o})}applyTrim(e,t,s){return e.map(([o,u])=>[o.substring(t,o.length-s),u])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let s=0;s<e.length;s++){const o=e[s];Array.isArray(o)?typeof o[1]!="string"?(t=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option id must be a string. 
          Found ${o[1]} in: ${o}`)):o[0]&&typeof o[0]!="string"&&typeof o[0].src!="string"&&(t=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option must have a string 
          label or image description. Found ${o[0]} in: ${o}`)):(t=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option must be an array.
          Found: ${o}`))}if(t)throw TypeError("Found invalid FieldDropdown options.")}};io.CHECKMARK_OVERHANG=25,io.MAX_MENU_HEIGHT_VH=.45,io.ARROW_CHAR="▾",io.IMAGE_Y_OFFSET=5,io.IMAGE_Y_PADDING=2*io.IMAGE_Y_OFFSET,sn("field_dropdown",io);var mg=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||r.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,X),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},Mo,qt=class{constructor(e,t,s){this.workspace=e,this.anchor=t,this.ownerRect=s,this.size=new Te(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new mg(this,this.workspace),this.id=Ie(),this.svgRoot=K(F.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=K(F.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=K(F.PATH,{class:"blocklyBubbleTail"},e),this.background=K(F.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Mo.BORDER_WIDTH,ry:Mo.BORDER_WIDTH},e),this.contentContainer=K(F.G,{},this.svgRoot),Ue(this.background,"pointerdown",this,this.onMouseDown)}dispose(){B(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,Mo.MIN_SIZE),e.height=Math.max(e.height,Mo.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),this.bringToFront(),r.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new zt(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),s=this.getOptimalRelativeLeft(t),o=this.getOptimalRelativeTop(t);const u={x:s,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},h={x:-this.size.width-30,y:o};o={x:e.getWidth(),y:o};var E={x:s,y:e.getHeight()};s=e.getWidth()<e.getHeight()?o:E,e=e.getWidth()<e.getHeight()?E:o,o=this.getOverlap(u,t),E=this.getOverlap(h,t);const v=this.getOverlap(s,t);t=this.getOverlap(e,t),t=Math.max(o,E,v,t),o===t?(this.relativeLeft=u.x,this.relativeTop=u.y):E===t?(this.relativeLeft=h.x,this.relativeTop=h.y):v===t?(this.relativeLeft=s.x,this.relativeTop=s.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var s=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(s+this.size.width,t.left+t.width)-Math.max(s,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var s=this.anchor.x-t;s-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):s>e.right&&(t=-(e.right-this.anchor.x))}else{s=t+this.anchor.x;const o=s+this.size.width;s<e.left?t=e.left-this.anchor.x:o>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const s=this.anchor.y+t,o=s+this.size.height;return e=this.getWorkspaceViewRect(e),s<e.top?t=e.top-this.anchor.y:o>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let s=e.top+e.height,o=e.left;return e=e.left+e.width,s-=this.getScrollbarThickness(),this.workspace.RTL?o-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new zt(t,s,o,e)}getScrollbarThickness(){return $s.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,s=this.size.height/2,o=-this.relativeLeft,u=-this.relativeTop;if(t===o&&s===u)e.push("M "+t+","+s);else{u-=s,o-=t,this.workspace.RTL&&(o*=-1);var h=Math.sqrt(u*u+o*o),E=Math.acos(o/h);0>u&&(E=2*Math.PI-E);var v=E+Math.PI/2;v>2*Math.PI&&(v-=2*Math.PI);var se=Math.sin(v);const hs=Math.cos(v);let us=(this.size.width+this.size.height)/Mo.TAIL_THICKNESS;us=Math.min(us,this.size.width,this.size.height)/4,v=1-Mo.ANCHOR_RADIUS/h,o=t+v*o,u=s+v*u,v=t+us*hs;const oo=s+us*se;t-=us*hs,s-=us*se,se=Yo(this.workspace.RTL?-Mo.TAIL_ANGLE:Mo.TAIL_ANGLE),se=E+se,se>2*Math.PI&&(se-=2*Math.PI),E=Math.sin(se)*h/Mo.TAIL_BEND,h=Math.cos(se)*h/Mo.TAIL_BEND,e.push("M"+v+","+oo),e.push("C"+(v+h)+","+(oo+E)+" "+o+","+u+" "+o+","+u),e.push("C"+o+","+u+" "+(t+h)+","+(s+E)+" "+t+","+s)}e.push("z");let Me;(Me=this.tail)==null||Me.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&(t==null?void 0:t.lastChild)!==this.svgRoot?(t==null||t.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Ee(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};Mo=qt,qt.BORDER_WIDTH=6,qt.DOUBLE_BORDER=2*Mo.BORDER_WIDTH,qt.MIN_SIZE=Mo.DOUBLE_BORDER,qt.TAIL_THICKNESS=1,qt.TAIL_ANGLE=20,qt.TAIL_BEND=4,qt.ANCHOR_RADIUS=8;var Xu=class extends qt{constructor(e,t,s,o){super(t,s,o),this.workspace=t,this.anchor=s,this.ownerRect=o,this.autoLayout=!0,t=new $r(e),this.validateWorkspaceOptions(t),this.svgDialog=K(F.SVG,{x:qt.BORDER_WIDTH,y:qt.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new $r(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(F.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e==null||e.init(this.miniWorkspace),e==null||e.show(t.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let u,h;(u=this.miniWorkspace.getFlyout())==null||(h=u.getWorkspace())==null||h.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(20>t.y&&e.moveBy(0,20-t.y),e.RTL){let s=-20;const o=this.miniWorkspace.getFlyout();o&&(s-=o.getWidth()),t.x>s&&e.moveBy(s-t.x,0)}else 20>t.x&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Xu.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Xu.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new Te(t.width+qt.DOUBLE_BORDER,t.height+qt.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+Xu.MARGIN;e=e.height+Xu.MARGIN;const s=this.miniWorkspace.getFlyout();if(s){const o=s.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,o.height+20),t+=s.getWidth()}return new Te(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const s of e.getAllBlocks(!1))s.setStyle(s.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Xu.MINIMUM_VIEW_CHANGE=10,Xu.MARGIN=3*qt.DOUBLE_BORDER;var mp=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new Ee(0,0),this.workspaceLocation=new Ee(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=K(F.G,{class:"blocklyIconGroup"}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ue(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,pl(this.svgRoot)}}dispose(){Tc(this.svgRoot),B(this.svgRoot)}getWeight(){return-1}getSize(){return new Te(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",gi(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=Ee.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},Tp,Ep;Tp=17,Ep=16,r.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends mp{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),K(F.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),K(F.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),K(F.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),ye(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return r.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Te(Tp,Tp)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary);let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return re.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield jt(),e){t.miniWorkspaceBubble=new Xu(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let s;(s=t.miniWorkspaceBubble)==null||s.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let s;(s=t.miniWorkspaceBubble)==null||s.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}Oe(new(ee(z.BUBBLE_OPEN))(t.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(s=>({kind:"block",type:s}))}),t}getAnchorLocation(){const e=Tp/2;return Ee.sum(this.workspaceLocation,new Ee(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new zt(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,s,o,u;e=(u=(t=this.miniWorkspaceBubble)==null||(s=t.getWorkspace())==null||(o=s.getFlyout())==null?void 0:o.getWidth())!=null?u:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+Ep):Ep,Ep)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{r.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||Se(e)||pe(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);var t=xl.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var s=xl.getExtraBlockState_(this.sourceBlock);t!==s&&Oe(new(ee(z.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,t,s)),r.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=zs.MUTATOR,r.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,r.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Fh=Object.create(null),Yf={allExtensions:Fh};r.register$$module$build$src$core$extensions("parent_tooltip_when_inline",$u);var qr={TEST_ONLY:Yf};qr.apply=Ut,qr.buildTooltipForDropdown=r.buildTooltipForDropdown$$module$build$src$core$extensions,qr.buildTooltipWithFieldText=r.buildTooltipWithFieldText$$module$build$src$core$extensions,qr.isRegistered=Ii,qr.register=r.register$$module$build$src$core$extensions,qr.registerMixin=r.registerMixin$$module$build$src$core$extensions,qr.registerMutator=r.registerMutator$$module$build$src$core$extensions,qr.runAfterPageLoad=Ca,qr.unregister=Oo;var $t;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})($t||($t={}));var zu={};zu.arc=Nt,zu.curve=gs,zu.line=Sl,zu.lineOnAxis=ve,zu.lineTo=yn,zu.moveBy=wt,zu.moveTo=cs,zu.point=He;var ys={};ys.Coordinate=Ee,ys.KeyCodes=$t,ys.Rect=zt,ys.Size=Te,ys.Svg=F,ys.aria=cn,ys.array=Ed,ys.browserEvents=Vr,ys.colour=i,ys.deprecation=fh,ys.dom=xs,ys.extensions=qr,ys.idGenerator=cd,ys.math=as,ys.object=$g,ys.parsing=l,ys.string=Gc,ys.style=cr,ys.svgMath=ar,ys.svgPaths=zu,ys.toolbox=mn,ys.userAgent=up,ys.xml=yi;var Tg=class extends qt{constructor(e,t,s){super(e,t,s),this.workspace=e,this.anchor=t,this.ownerRect=s,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Te(160+qt.DOUBLE_BORDER,80+qt.DOUBLE_BORDER),this.MIN_SIZE=new Te(45+qt.DOUBLE_BORDER,20+qt.DOUBLE_BORDER),this.editable=!0,ye(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=K(F.FOREIGNOBJECT,{x:qt.BORDER_WIDTH,y:qt.BORDER_WIDTH},e);const t=document.createElementNS(ko,"body");t.setAttribute("xmlns",ko),t.className="blocklyMinimalBody";const s=document.createElementNS(ko,"textarea");return s.className="blocklyTextarea blocklyText",s.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),t.appendChild(s),e.appendChild(t),this.bindTextAreaEvents(s),setTimeout(()=>{s.focus()},0),{inputRoot:e,textArea:s}}bindTextAreaEvents(e){Ue(e,"wheel",this,t=>{t.stopPropagation()}),Ue(e,"focus",this,this.onStartEdit,!0),Ue(e,"change",this,this.onTextChange)}createResizeHandle(e,t){return e=K(F.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),Ue(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const s=e.width-qt.DOUBLE_BORDER,o=e.height-qt.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${s}`),this.inputRoot.setAttribute("height",`${o}`),this.resizeGroup.setAttribute("y",`${o}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-qt.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${s}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),As(e)||(Dr(this.workspace,e,new Ee(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ue(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ue(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){ps(),this.resizePointerUpListener&&(Ot(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Ot(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=nr(this.workspace,e),this.setSize(new Te(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};Rt(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var n_={};n_.register=T,n_.unregister=a;var i_=17,Eg=160,Ig=80,Yu=class extends mp{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new Te(Eg,Ig),this.bubbleVisiblity=!1}getType(){return Yu.TYPE}initView(e){this.svgRoot||(super.initView(e),K(F.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),K(F.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),K(F.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),ye(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return Yu.WEIGHT}getSize(){return new Te(i_,i_)}applyColour(){super.applyColour();const e=this.sourceBlock.style.colourPrimary;let t;(t=this.textInputBubble)==null||t.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return re.asyncExecutePromiseGeneratorFunction(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let t;(t=this.textInputBubble)==null||t.setAnchorLocation(e)}setText(e){const t=this.text;Oe(new(ee(z.BLOCK_CHANGE))(this.sourceBlock,"comment",null,t,e)),this.text=e;let s;(s=this.textInputBubble)==null||s.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let s,o;this.bubbleSize=new Te((s=e.width)!=null?s:Eg,(o=e.height)!=null?o:Ig);let u;this.bubbleVisiblity=(u=e.pinned)!=null?u:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(Oe(new(ee(z.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return re.asyncExecutePromiseGeneratorFunction(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield jt(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),Oe(new(ee(z.BUBBLE_OPEN))(t.sourceBlock,e,"comment"))))})}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let t;(t=this.textInputBubble)==null||t.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new Tg(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=i_/2;return Ee.sum(this.workspaceLocation,new Ee(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Yu.TYPE=zs.COMMENT,Yu.WEIGHT=3,T(Yu.TYPE,Yu);var bg=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},Sg={};Sg.DuplicateIconType=bg;var Og=class extends qt{constructor(e,t,s,o){super(t,s,o),this.text=e,this.workspace=t,this.anchor=s,this.ownerRect=o,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,B(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createSpans(t,e),this.workspace.RTL&&this.rightAlignSpans(t.getBBox().width,e),t}createParagraph(e){return K(F.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:qt.BORDER_WIDTH},e)}createSpans(e,t){return t.split(`
`).map(s=>{const o=K(F.TSPAN,{dy:"1em",x:qt.BORDER_WIDTH},e);return s=document.createTextNode(s),o.appendChild(s),o})}rightAlignSpans(e,t){for(const s of t)s.setAttribute("text-anchor","end"),s.setAttribute("x",`${e+qt.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new Te(e.width+2*qt.BORDER_WIDTH,e.height+2*qt.BORDER_WIDTH),!0)}},o_=17,ju=class extends mp{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return ju.TYPE}initView(e){this.svgRoot||(super.initView(e),K(F.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),K(F.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),K(F.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),ye(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return ju.WEIGHT}getSize(){return new Te(o_,o_)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let s;return(s=this.textBubble)==null||s.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return re.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield jt(),e)t.textBubble=new Og(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let s;(s=t.textBubble)==null||s.dispose(),t.textBubble=null}Oe(new(ee(z.BUBBLE_OPEN))(t.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=o_/2;return Ee.sum(this.workspaceLocation,new Ee(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new zt(e.y,e.y+e.height,e.x,e.x+e.width)}};ju.TYPE=zs.WARNING,ju.WEIGHT=2;var zc={};zc.CommentIcon=Yu,zc.Icon=mp,zc.IconType=zs,zc.MutatorIcon=r.MutatorIcon$$module$build$src$core$icons$mutator_icon,zc.WarningIcon=ju,zc.exceptions=Sg,zc.registry=n_,r.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=r.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),r.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let s=e;t===r.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(s=e),e=s.toLowerCase();const o=t===r.NameType$$module$build$src$core$names.VARIABLE||t===r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const u=this.db.get(t);return u.has(e)?o+u.get(e):(t=this.getDistinctName(s,t),u.set(e,t.substr(o.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let s=null,o,u;for(;this.dbReverse.has(e+((o=s)!=null?o:""))||this.reservedWords.has(e+((u=s)!=null?u:""));)s=s?s+1:2;let h;return e+=(h=s)!=null?h:"",this.dbReverse.add(e),(t===r.NameType$$module$build$src$core$names.VARIABLE||t===r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=r.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(r.Names$$module$build$src$core$names||(r.Names$$module$build$src$core$names={})),r.NameType$$module$build$src$core$names=r.Names$$module$build$src$core$names.NameType,r.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,r.NameType$$module$build$src$core$names,r.Names$$module$build$src$core$names;var Rg=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),S(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(S(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},Ip,wi;Ip="PROCEDURE",r.DEFAULT_ARG$$module$build$src$core$procedures="x",wi={CATEGORY_NAME:Ip,DEFAULT_ARG:r.DEFAULT_ARG$$module$build$src$core$procedures},wi.ObservableProcedureMap=Rg,wi.allProcedures=M,wi.findLegalName=r.findLegalName$$module$build$src$core$procedures,wi.flyoutCategory=be,wi.getCallers=Qe,wi.getDefinition=r.getDefinition$$module$build$src$core$procedures,wi.isNameUsed=oe,wi.isProcedureBlock=g,wi.mutateCallers=r.mutateCallers$$module$build$src$core$procedures,wi.mutatorOpenListener=Fe,wi.rename=r.rename$$module$build$src$core$procedures;var jf=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},N=new jf,Ul=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=N.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Pd=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=N.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(N.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(N.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(N.isSpacer(t))return t}return null}},r_=class extends Pd{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=N.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,s=0;for(let o=0;o<this.elements.length;o++){const u=this.elements[o];t+=u.width,N.isSpacer(u)||(N.isNextConnection(u)?s=Math.max(s,u.height):e=Math.max(e,u.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+s,this.descenderHeight=s,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Ku=class extends Ul{constructor(e,t){super(e),this.connectionModel=t,this.type|=N.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},Yc=class extends Ku{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=N.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},bp=class extends Yc{constructor(e,t){super(e,t),this.height=0,this.type|=N.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Uh=class extends Ul{constructor(e,t,s){super(e),this.field=t,this.parentInput=s,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=N.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},l_=class extends Ul{constructor(e){super(e),this.type|=N.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Cg=class extends Ul{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=N.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},Do=class extends Ul{constructor(e,t){super(e),this.type=this.type|N.SPACER|N.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},u_=class extends Yc{constructor(e,t){super(e,t),this.type|=N.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},xd=class extends Yc{constructor(e,t){super(e,t),this.type|=N.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},c_=class extends Pd{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=N.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const s=this.elements[t];this.width+=s.width,N.isInput(s)&&s instanceof Yc&&(N.isStatementInput(s)&&s instanceof xd?e+=s.connectedBlockWidth:N.isExternalInput(s)&&s instanceof bp&&s.connectedBlockWidth!==0&&(e+=s.connectedBlockWidth-s.connectionWidth)),N.isSpacer(s)||(this.height=Math.max(this.height,s.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},yg=class extends Ul{constructor(e){super(e),this.type|=N.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},vg=class extends Ku{constructor(e,t){super(e,t),this.type|=N.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Lg=class extends Ku{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=N.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},kg=class extends Ku{constructor(e,t){super(e,t),this.type|=N.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Bd=class extends Ul{constructor(e,t){super(e),this.type=(t&&t!=="left"?N.RIGHT_ROUND_CORNER:N.LEFT_ROUND_CORNER)|N.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},a_=class extends Pd{constructor(e,t,s){super(e),this.height=t,this.width=s,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|N.SPACER|N.BETWEEN_ROW_SPACER,this.elements=[new Do(this.constants_,s)]}measure(){}},Fd=class extends Ul{constructor(e,t){super(e),this.type=(t&&t!=="left"?N.RIGHT_SQUARE_CORNER:N.LEFT_SQUARE_CORNER)|N.CORNER,this.width=this.height=this.constants_.NO_PADDING}},h_=class extends Pd{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=N.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,s=e.getPreviousBlock();return!!e.outputConnection||t||(s?s.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,s=0;for(let o=0;o<this.elements.length;o++){const u=this.elements[o];t+=u.width,N.isSpacer(u)||(N.isHat(u)&&u instanceof l_?s=Math.max(s,u.ascenderHeight):e=Math.max(e,u.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+s,this.capline=this.ascenderHeight=s,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Sp=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=wt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const s in t)this.blockStyles[s]=this.validatedBlockStyle_(t[s]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=O("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=_l(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?_l(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?_l(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return Gn("#fff",e,.6)||e}generateTertiaryColour_(e){return Gn("#fff",e,.3)||e}dispose(){this.embossFilter&&B(this.embossFilter),this.disabledPattern&&B(this.disabledPattern),this.debugFilter&&B(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,s=Sl([He(t,e/4),He(2*-t,e/2),He(t,e/4)]);return{height:e,width:t,path:s}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,s=gs("c",[He(30,-e),He(70,-e),He(t,0)]);return{height:e,width:t,path:s}}makePuzzleTab(){function e(h){h=h?-1:1;const E=-h;var v=s/2;const se=v+2.5,Me=v+.5,hs=He(-t,h*v);return v=He(t,h*v),gs("c",[He(0,h*se),He(-t,E*Me),hs])+gs("s",[He(t,2.5*E),v])}const t=this.TAB_WIDTH,s=this.TAB_HEIGHT,o=e(!0),u=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:s,pathDown:u,pathUp:o}}makeNotch(){function e(E){return Sl([He(E*o,s),He(3*E,0),He(E*o,-s)])}const t=this.NOTCH_WIDTH,s=this.NOTCH_HEIGHT,o=(t-3)/2,u=e(1),h=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:s,pathLeft:u,pathRight:h}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Nt("a","0 0,0",e,He(-e,e)),s=Nt("a","0 0,0",e,He(e,e));return{width:e,height:e,pathTop:t,pathBottom:s}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=wt(0,e)+Nt("a","0 0,1",e,He(e,-e)),s=Nt("a","0 0,1",e,He(e,e)),o=Nt("a","0 0,1",e,He(-e,-e)),u=Nt("a","0 0,1",e,He(-e,e));return{topLeft:t,topRight:s,bottomRight:u,bottomLeft:o,rightHeight:e}}shapeFor(e){switch(e.type){case xe.INPUT_VALUE:case xe.OUTPUT_VALUE:return this.PUZZLE_TAB;case xe.PREVIOUS_STATEMENT:case xe.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,s){this.injectCSS_(t,s),this.defs=K(F.DEFS,{},e),e=K(F.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),K(F.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=K(F.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),K(F.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),K(F.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),K(F.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=K(F.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),K(F.RECT,{width:10,height:10,fill:"#aaa"},e),K(F.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=K(F.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=K(F.FECOMPONENTTRANSFER,{result:"outBlur"},e);K(F.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),K(F.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),K(F.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const s=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=s:(t=document.createElement("style"),t.id=e,e=document.createTextNode(s),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Op=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=wt(e.xPos,this.info_.startY);for(let s=0,o;o=t[s];s++)N.isLeftRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:N.isRightRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:N.isPreviousConnection(o)&&o instanceof Ku?this.outlinePath_+=o.shape.pathLeft:N.isHat(o)?this.outlinePath_+=this.constants_.START_HAT.path:N.isSpacer(o)&&(this.outlinePath_+=ve("h",o.width));this.outlinePath_+=ve("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+ve("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const s=Pe(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=ve("H",t.xPos+t.width)+s+ve("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var s=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+ve("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=ve("H",s)+t+ve("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+ve("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=ve("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let s=0,o="";for(let u=t.length-1,h;h=t[u];u--)N.isNextConnection(h)&&h instanceof Ku?o+=h.shape.pathRight:N.isLeftSquareCorner(h)?o+=ve("H",e.xPos):N.isLeftRoundedCorner(h)?o+=this.constants_.OUTSIDE_CORNERS.bottomLeft:N.isRightRoundedCorner(h)?(o+=this.constants_.OUTSIDE_CORNERS.bottomRight,s=this.constants_.OUTSIDE_CORNERS.rightHeight):N.isSpacer(h)&&(o+=ve("h",-1*h.width));this.outlinePath_+=ve("V",e.baseline-s),this.outlinePath_+=o}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=Pe(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=ve("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let s=0,o;o=t.elements[s];s++)N.isInlineInput(o)?this.drawInlineInput_(o):(N.isIcon(o)||N.isField(o))&&this.layoutField_(o)}layoutField_(e){const t=e.centerline-e.height/2;let s=e.xPos;var o="";this.info_.RTL&&(s=-(s+e.width),e.flipRtl&&(s+=e.width,o="scale(-1 1)")),N.isIcon(e)?(o=e.icon,o.setOffsetInBlock(new Ee(s,t)),this.info_.isInsertionMarker&&o.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+s+","+t+")"+o),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,s=e.height,o=e.connectionOffsetY,u=e.connectionHeight+o;this.inlinePath_+=cs(e.xPos+e.connectionWidth,e.centerline-s/2)+ve("v",o)+e.shape.pathDown+ve("v",s-u)+ve("h",t-e.connectionWidth)+ve("v",-s)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let s=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(s*=-1),e.connectionModel.setOffsetInBlock(s,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let s=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(s*=-1),t.connectionModel.setOffsetInBlock(s,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let s=e.xPos+e.width;this.info_.RTL&&(s*=-1),t.connectionModel.setOffsetInBlock(s,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,s=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-s:s,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements)if(t instanceof Ku)if(t.highlighted)this.drawConnectionHighlightPath(t);else{let s,o;(o=(s=this.block_.pathObject).removeConnectionHighlight)==null||o.call(s,t.connectionModel)}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===xe.INPUT_VALUE||t.type===xe.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const s=t.getSourceBlock();let o,u;(u=(o=s.pathObject).addConnectionHighlight)==null||u.call(o,t,e,t.getOffsetInBlock(),s.RTL)}getExpressionConnectionHighlightPath(e){let t="";return Pe(e.shape)?t=e.shape.pathDown(e.height):qe(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,wt(0,-e)+ve("v",e)+t+ve("v",e)}getStatementConnectionHighlightPath(e){if(!lt(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return wt(-t,0)+ve("h",t)+e.shape.pathLeft+ve("h",t)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(r.Align$$module$build$src$core$inputs$align||(r.Align$$module$build$src$core$inputs$align={})),r.Align$$module$build$src$core$inputs$align;var nh=class extends c{constructor(e,t,s){super(c.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==c.SKIP_SETUP&&(s?this.configure_(s):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&ye(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&b(this.textElement_,this.class),e&&ye(this.textElement_,e)),this.class=e}static fromJson(e){return new this(At(e.text),void 0,e)}};sn("field_label",nh),nh.prototype.DEFAULT_VALUE="";var Hh=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=r.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,s){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&s)&&(typeof t=="string"&&(t=r.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=s,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let s=0,o;o=this.fieldRow[s];s++)if(o.name===e)return o.dispose(),this.fieldRow.splice(s,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let o=0,u;u=this.fieldRow[o];o++)u.setVisible(e);if(this.connection){var s=this.connection;e?t=s.startTrackingAll():s.stopTrackingAll(),(s=s.targetBlock())&&(s.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},Hl=class extends Hh{constructor(e,t){super(e,t),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Ju=class extends Hh{constructor(e,t){super(e,t),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Po=class extends Hh{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(xe.NEXT_STATEMENT)}},Ag;r.ValueInput$$module$build$src$core$inputs$value_input=class extends Hh{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(xe.INPUT_VALUE)}},Ag={},Ag.ValueInput=r.ValueInput$$module$build$src$core$inputs$value_input;var Ud=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Lg(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new h_(this.constants_),this.bottomRow=new r_(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new c_(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let s=0,o;o=t[s];s++){const u=new Cg(this.constants_,o);this.isCollapsed&&!o.isShownWhenCollapsed()||e.elements.push(u)}t=void 0;for(let s=0,o;o=this.block_.inputList[s];s++)if(o.isVisible()){this.shouldStartNewRow_(o,t)&&(this.rows.push(e),e=new c_(this.constants_),this.inputRows.push(e));for(let u=0,h;h=o.fieldRow[u];u++)e.elements.push(new Uh(this.constants_,h,o));this.addInput_(o,e),t=o}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new yg(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let s=this.topRow.hasLeftSquareCorner(this.block_)?Fd:Bd;this.topRow.elements.push(new s(this.constants_)),t?(e=new l_(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new kg(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Po&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,s=this.topRow.hasRightSquareCorner(this.block_)?Fd:Bd,this.topRow.elements.push(new s(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Po?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Fd(this.constants_)):this.bottomRow.elements.push(new Bd(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new vg(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Fd(this.constants_,"right")):this.bottomRow.elements.push(new Bd(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new u_(this.constants_,e)),t.hasInlineInput=!0):e instanceof Po?(t.elements.push(new xd(this.constants_,e)),t.hasStatement=!0):e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new bp(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Hl||e instanceof Ju)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof Ju||e instanceof Po||t instanceof Po?!0:e instanceof r.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Hl||t instanceof r.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const s=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new Do(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(let o=0;o<s.length-1;o++){t.elements.push(s[o]);const u=this.getInRowSpacing_(s[o],s[o+1]);t.elements.push(new Do(this.constants_,u))}t.elements.push(s[s.length-1]),t.endsWithElemSpacer()&&t.elements.push(new Do(this.constants_,this.getInRowSpacing_(s[s.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&N.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&N.isInput(e)&&!t){if(N.isExternalInput(e))return this.constants_.NO_PADDING;if(N.isInlineInput(e))return this.constants_.LARGE_PADDING;if(N.isStatementInput(e))return this.constants_.NO_PADDING}return e&&N.isLeftSquareCorner(e)&&t&&(N.isPreviousConnection(t)||N.isNextConnection(t))?t.notchOffset:e&&N.isLeftRoundedCorner(e)&&t&&(N.isPreviousConnection(t)||N.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,s=0;for(let u=0,h;h=this.rows[u];u++){if(h.measure(),t=Math.max(t,h.width),h.hasStatement){var o=h.getLastInput();let E,v;o=h.width-((v=(E=o)==null?void 0:E.width)!=null?v:0),e=Math.max(e,o)}s=Math.max(s,h.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let u=0,h;h=this.rows[u];u++)h.hasStatement&&(h.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,s),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,s;s=this.rows[t];t++)if(s.hasStatement)this.alignStatementRow_(s);else{var e=s.width;e=this.getDesiredRowWidth_(s)-e,0<e&&this.addAlignmentPadding_(s,e),N.isTopOrBottomRow(s)&&(s.widthWithConnectedBlocks=s.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const s=e.getFirstSpacer(),o=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===r.Align$$module$build$src$core$inputs$align.LEFT&&o)o.width+=t;else if(e.align===r.Align$$module$build$src$core$inputs$align.CENTRE&&s&&o)s.width+=t/2,o.width+=t/2;else if(e.align===r.Align$$module$build$src$core$inputs$align.RIGHT&&s)s.width+=t;else if(o)o.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var s=e.width-t.width,o=this.statementEdge;s=o-s,0<s&&this.addAlignmentPadding_(e,s),s=e.width,o=this.getDesiredRowWidth_(e),t.width+=o-s,t.height=Math.max(t.height,e.height),e.width+=o-s,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var s=this.getSpacerRowHeight_(e,t);const o=this.getSpacerRowWidth_(e,t);return s=new a_(this.constants_,s,o),e.hasStatement&&(s.followsStatement=!0),t.hasStatement&&(s.precedesStatement=!0),s}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return N.isSpacer(t)?e.yPos+t.height/2:N.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,N.isNextConnection(t)?e+t.height/2:e-t.height/2):N.isTopRow(e)?N.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let s=0,o;o=e.elements[s];s++)N.isSpacer(o)&&(o.height=e.height),o.xPos=t,o.centerline=this.getElemCenterline_(e,o),t+=o.width}finalize_(){let e=0,t=0;for(let s=0,o;o=this.rows[s];s++)o.yPos=t,o.xPos=this.startX,t+=o.height,e=Math.max(e,o.widthWithConnectedBlocks),this.recordElemPositions_(o);if(this.outputConnection&&this.block_.nextConnection){const s=this.block_.nextConnection.targetBlock();s&&(e=Math.max(e,s.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const s of this.rows)for(const o of s.elements)if(o instanceof Ku&&o.connectionModel===e)return o;return null}},d_=class extends no{constructor(e){if(super(e),this.type=z.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=mi(e),this.ids=Ft(e),this.wasShadow=e.isShadow(),this.oldJson=Js(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=gn(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new d_),t.oldXml=r.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const s=this.ids[e],o=t.getBlockById(s);o?o.dispose(!1):s===this.blockId&&console.warn("Can't delete non-existent block: "+s)}else _i(this.oldJson,t)}};p(ce.EVENT,z.BLOCK_DELETE,d_);var xt=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const t=xe.INPUT_VALUE,s=this.getSourceBlock();var o=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let u;if(this.isConnected()){const E=this.stashShadowState(),v=this.targetBlock();v.isShadow()?v.dispose(!1):(this.disconnectInternal(),u=v),this.applyShadowState(E)}let h;nt()&&(h=new(ee(z.BLOCK_MOVE))(o),h.setReason(["connect"])),Ht(this,e),o.setParent(s),h&&(h.recordNew(),Oe(h)),u&&(e=this.type===t?u.outputConnection:u.previousConnection)&&((o=xt.getConnectionForOrphanedConnection(o,e))?e.connect(o):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===xe.INPUT_VALUE||this.type===xe.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=r.getGroup$$module$build$src$core$events$utils();t||r.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),r.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:s}=this.getParentAndChildConnections();if(!t||!s)throw Error("Source connection not connected.");const o=r.getGroup$$module$build$src$core$events$utils();o||r.setGroup$$module$build$src$core$events$utils(!0);let u;nt()&&(u=new(ee(z.BLOCK_MOVE))(s.getSourceBlock()),u.setReason(["disconnect"]));const h=this.targetConnection;h&&(h.targetConnection=null),this.targetConnection=null,e&&s.getSourceBlock().setParent(null),u&&(u.recordNew(),Oe(u)),s.getSourceBlock().isShadow()||t.respawnShadow_(),r.setGroup$$module$build$src$core$events$utils(o)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var s;return t=(s=e.getInput(t))==null?void 0:s.connection,s=this.targetBlock(),s&&s!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?ei(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Js(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let s=0;s<t.length;s++)if(t[s].connection===this){e=t[s];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let s=0,o;o=e.inputList[s];s++)if(o.connection===this){t=o;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const s=this.getShadowState(),o=this.getShadowDom();if(t.isDeadOrDying()||!s&&!o)return null;if(s)return t=Hs(s,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(o){if(t=Ti(o,t.workspace),e)if(this.type===xe.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===xe.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=ei(e),this.shadowState=Js(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===xe.OUTPUT_VALUE)return ht(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const s=t.getConnectionChecker();return e&&s.canConnect(t,e,!1)?e:null}};xt.CAN_CONNECT=0,xt.REASON_SELF_CONNECTION=1,xt.REASON_WRONG_TYPE=2,xt.REASON_TARGET_NULL=3,xt.REASON_CHECKS_FAILED=4,xt.REASON_DIFFERENT_WORKSPACES=5,xt.REASON_SHADOW_PARENT=6,xt.REASON_DRAG_CHECKS_FAILED=7,xt.REASON_PREVIOUS_AND_OUTPUT=8;var jc=class{constructor(e,t,s){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=s&&!e.getBlockById(s)?s:ie(),e.setBlockById(this.id,this),this.xy=new Ee(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,s=Wn[t],!s||typeof s!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,s)}e.addTopBlock(this),e.addTypedBlock(this),new.target===jc&&this.doInit_()}doInit_(){const e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);const t=at();try{typeof this.init=="function"&&(r.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),r.setRecordUndo$$module$build$src$core$events$utils(t)),nt()&&Oe(new(ee(z.BLOCK_CREATE))(this))}finally{r.setGroup$$module$build$src$core$events$utils(e),r.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),nt()&&Oe(new(ee(z.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let t=null,s;(s=this.outputConnection)!=null&&s.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e==null||e.onFailedConnect(t))}getOnlyValueConnection(){let e=null;for(let t=0;t<this.inputList.length;t++){const s=this.inputList[t].connection;if(s&&s.type===xe.INPUT_VALUE&&s.targetConnection){if(e)return null;e=s}}return e}unplugFromStack(e){let t=null;var s;if((s=this.previousConnection)!=null&&s.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),s=this.getNextBlock(),e&&s&&!s.isShadow()){let o,u;e=(u=(o=this.nextConnection)==null?void 0:o.targetConnection)!=null?u:null,e==null||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,s;s=this.inputList[t];t++)s.connection&&e.push(s.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const s=t.targetBlock();if(!s||e&&s.isShadow())return t;t=s.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,s;s=this.inputList[t];t++)if(s.connection&&s.connection.targetBlock()===e)return s;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let s=0,o;o=this.inputList[s];s++)if(o.connection){var t=o.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),s=!!t;if(s&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!s&&e)throw Error("Block not connected to new parent.");if(s&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?ts(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],s=this.getChildren(e);for(let o,u=0;o=s[u];u++)t.push(...o.getDescendants(e));return t}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(ds(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(let t=0,s;s=this.inputList[t];t++)for(let o=0,u;u=s.fieldRow[o];o++)u.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,t){const s=this.getConnections_(!0);if(e=e.getConnections_(!0),s.length!==e.length)throw Error("Connection lists did not match in length.");for(let o=0;o<e.length;o++)if(e[o]===t)return s[o];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return wr(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=_l(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let t=0,s;s=this.inputList[t];t++)for(let o=0,u;u=s.fieldRow[o];o++)if(u.name===e)return u;return null}getVars(){const e=[];for(let t=0,s;s=this.inputList[t];t++)for(let o=0,u;u=s.fieldRow[o];o++)u.referencesVariables()&&e.push(u.getValue());return e}getVarModels(){const e=[];for(let t=0,s;s=this.inputList[t];t++)for(let o=0,u;u=s.fieldRow[o];o++)if(u.referencesVariables()){const h=this.workspace.getVariableById(u.getValue());h&&e.push(h)}return e}updateVarName(e){for(let t=0,s;s=this.inputList[t];t++)for(let o=0,u;u=s.fieldRow[o];o++)u.referencesVariables()&&e.getId()===u.getValue()&&u.refreshVariableName()}renameVarById(e,t){for(let s=0,o;o=this.inputList[s];s++)for(let u=0,h;h=o.fieldRow[u];u++)h.referencesVariables()&&e===h.getValue()&&h.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const s=this.getField(t);if(!s)throw Error('Field "'+t+'" not found.');s.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(xe.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(xe.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(xe.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(Oe(new(ee(z.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof Hl&&this.inputList[e]instanceof Hl)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof r.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof Hl)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Ju)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return q("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(Tn)}set disabled(e){q("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,Tn)}setEnabled(e){q("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,Tn)}setDisabledReason(e,t){e||this.workspace.options.disable||!this.hasDisabledReason(Tn)||t==Tn||this.setDisabledReason(!1,Tn),this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(ee(z.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(t),Oe(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(Oe(new(ee(z.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let o=2;o<t.length;o++)t[o-2]==="("&&t[o]===")"&&(t[o-2]=t[o-1],t.splice(o-1,2));let s="";return t=t.reduce((o,u)=>(o=o+(s==="("||u===")"?"":" ")+u,s=u[u.length-1],o),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const o of this.inputList)if(o.name!=ki){for(const u of o.fieldRow)t.push(u.getText());if(o.connection){const u=o.connection.targetBlock();if(u){var s=o.connection;let h=s.getCheck();!h&&s.targetConnection&&(h=s.targetConnection.getCheck()),(s=!!h&&(h.includes("Boolean")||h.includes("Number")))&&t.push("("),t.push(...u.toTokens(e)),s&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new r.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Po(e,this))}appendDummyInput(e=""){return this.appendInput(new Hl(e,this))}appendEndRowInput(e=""){return this.appendInput(new Ju(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=V(ce.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var s=0;e["args"+s];){if(e["message"+s]===void 0)throw Error(t+`args${s} must have a corresponding message (message${s}).`);s++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,t):this.jsonInitColour(e,t),s=0;e["message"+s]!==void 0;)this.interpolate(e["message"+s],e["args"+s]||[],e["implicitAlign"+s]||e["lastDummyAlign"+s],t),s++;if(e.inputsInline!==void 0&&(r.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),r.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(s=At(e.tooltip),this.setTooltip(s)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(s=At(e.helpUrl),this.setHelpUrl(s)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Ut(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)Ut(e[t],this,!1)}jsonInitColour(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const s in e)this[s]!==void 0&&t.push(s);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate(e,t,s,o){e=Yi(e),this.validateTokens(e,t.length),t=this.interpolateArguments(e,t,s),s=[];for(let u=0,h;h=t[u];u++)if(this.isInputKeyword(h.type)){if(e=this.inputFromJson(h,o)){for(let E=0,v;v=s[E];E++)e.appendField(v[0],v[1]);s.length=0}}else(e=this.fieldFromJson(h))&&s.push([e,h.name])}validateTokens(e,t){const s=[];let o=0;for(let u=0;u<e.length;u++){const h=e[u];if(typeof h=="number"){if(1>h||h>t)throw Error('Block "'+this.type+'": Message index %'+h+" out of range.");if(s[h])throw Error('Block "'+this.type+'": Message index %'+h+" duplicated.");s[h]=!0,o++}}if(o!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments(e,t,s){const o=[];for(let h=0;h<e.length;h++){var u=e[h];if(typeof u=="number"&&(u=t[u-1]),typeof u=="string"){if(u===`
`)u={type:"input_end_row"},s&&(u.align=s);else if(u=this.stringToFieldJson(u),!u)continue}o.push(u)}return(e=o.length)&&!this.isInputKeyword(o[e-1].type)&&(e={type:"input_dummy"},s&&(e.align=s),o.push(e)),o}fieldFromJson(e){const t=r.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):t}inputFromJson(e,t){var s={LEFT:r.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:r.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:r.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:r.Align$$module$build$src$core$inputs$align.CENTRE};let o;switch(e.type){case"input_value":o=this.appendValueInput(e.name);break;case"input_statement":o=this.appendStatementInput(e.name);break;case"input_dummy":o=this.appendDummyInput(e.name);break;case"input_end_row":o=this.appendEndRowInput(e.name);break;default:o=this.appendInputFromRegistry(e.type,e.name)}return o?(e.check&&o.setCheck(e.check),e.align&&(s=s[e.align.toUpperCase()],s===void 0?console.warn(t+"Illegal align value: ",e.align):o.setAlign(s)),o):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||j(ce.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var s=-1,o=t?-1:this.inputList.length;for(let u=0,h;h=this.inputList[u];u++)if(h.name===e){if(s=u,o!==-1)break}else if(t&&h.name===t&&(o=u,s!==-1))break;if(s===-1)throw Error('Named input "'+e+'" not found.');if(o===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(s,o)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const s=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,s)}removeInput(e,t){for(let s=0,o;o=this.inputList[s];s++)if(o.name===e)return o instanceof Po&&this.statementInputCount--,o.dispose(),this.inputList.splice(s,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,s;s=this.inputList[t];t++)if(s.name===e)return s;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(zs.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let s;const o=(s=(t=this.getIcon(zs.COMMENT))==null?void 0:t.getText())!=null?s:null;if(o!==e){if(e!==null){if(t=this.getIcon(zs.COMMENT),!t){if(t=V(ce.ICON,zs.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!ct(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}r.disable$$module$build$src$core$events$utils(),t.setText(e),r.enable$$module$build$src$core$events$utils()}else this.removeIcon(zs.COMMENT);Oe(new(ee(z.BLOCK_CHANGE))(this,"comment",null,o,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new bg(e);return this.icons.push(e),this.icons.sort((t,s)=>t.getWeight()-s.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(s=>!s.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof zs?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,t,s){if(this.parentBlock_)throw Error("Block has parent");const o=new(ee(z.BLOCK_MOVE))(this);s&&o.setReason(s),this.xy.translate(e,t),o.recordNew(),Oe(o)}makeConnection_(e){return new xt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let s=0,o;o=this.inputList[s];s++)if(o.connection){var t=o.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};jc.COLLAPSED_INPUT_NAME=ki,jc.COLLAPSED_FIELD_NAME=Pu;var fr=class{constructor(e,t,s,o){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=o,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=s.text,this.position=new Ee(0,0),this.callbackKey=s.callbackKey||s.callbackkey,this.cssClass=s["web-class"]||null,this.info=s}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=K(F.G,{class:e},this.workspace.getCanvas());let t;this.isFlyoutLabel||(t=K(F.RECT,{class:"blocklyFlyoutButtonShadow",rx:fr.BORDER_RADIUS,ry:fr.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=K(F.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:fr.BORDER_RADIUS,ry:fr.BORDER_RADIUS},this.svgGroup);const s=K(F.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var o=At(this.text);this.workspace.RTL&&(o+="‏"),s.textContent=o,this.isFlyoutLabel&&(this.svgText=s,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const u=Le(s,"fontSize"),h=Le(s,"fontWeight"),E=Le(s,"fontFamily");if(this.width=$(s,u,h,E),o=O(o,u,h,E),this.height=o.height,!this.isFlyoutLabel){this.width+=2*fr.TEXT_MARGIN_X,this.height+=2*fr.TEXT_MARGIN_Y;let v;(v=t)==null||v.setAttribute("width",String(this.width));let se;(se=t)==null||se.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),s.setAttribute("x",String(this.width/2)),s.setAttribute("y",String(this.height/2-o.height/2+o.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ue(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&Ot(this.onMouseUpWrapper),this.svgGroup&&B(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};fr.TEXT_MARGIN_X=5,fr.TEXT_MARGIN_Y=2,fr.BORDER_RADIUS=4,Rt(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var ne=class{constructor(e,t,s){if(this.wsCoordinate=null,!t)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=ne.isConnectionType(e),this.location=t,this.processParams(s||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const s=t.inputList[e],o=s.fieldRow;for(let u=0;u<o.length;u++){const h=o[u];if(h.isClickable()||ne.NAVIGATE_ALL_FIELDS)return ne.createFieldNode(h)}if(s.connection)return ne.createInputNode(s)}return null}findNextForField(){var e=this.location,t=e.getParentInput();const s=e.getSourceBlock();if(!s)throw Error("The current AST location is not associated with a block");var o=s.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;o<s.inputList.length;o++){t=s.inputList[o];const u=t.fieldRow;for(;e<u.length;){if(u[e].isClickable()||ne.NAVIGATE_ALL_FIELDS)return ne.createFieldNode(u[e]);e++}if(e=0,t.connection)return ne.createInputNode(t)}return null}findPrevForInput(){const e=this.location.getParentInput(),t=e.getSourceBlock();for(var s=t.inputList.indexOf(e);0<=s;s--){var o=t.inputList[s];if(o.connection&&o!==e)return ne.createInputNode(o);o=o.fieldRow;for(let u=o.length-1;0<=u;u--){const h=o[u];if(h.isClickable()||ne.NAVIGATE_ALL_FIELDS)return ne.createFieldNode(h)}}return null}findPrevForField(){var e=this.location;const t=e.getParentInput(),s=e.getSourceBlock();if(!s)throw Error("The current AST location is not associated with a block");var o=s.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=o;o--){var u=s.inputList[o];if(u.connection&&u!==t)return ne.createInputNode(u);for(u=u.fieldRow;-1<e;){if(u[e].isClickable()||ne.NAVIGATE_ALL_FIELDS)return ne.createFieldNode(u[e]);e--}0<=o-1&&(e=s.inputList[o-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var t=this.getLocation();if(t.getSourceBlock){var s=t.getSourceBlock();s&&(t=s)}if(!t||t.isDeadOrDying())return null;if(t.workspace.isFlyout)return this.navigateFlyoutContents(e);s=t.getRootBlock(),t=s.workspace.getTopBlocks(!0);for(let o=0;o<t.length;o++)if(s.id===t[o].id)return e=o+(e?1:-1),e===-1||e===t.length?null:ne.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let t;switch(this.getType()){case ne.types.STACK:t=this.getLocation();var s=t.workspace.targetWorkspace;break;case ne.types.BUTTON:t=this.getLocation(),s=t.getTargetWorkspace();break;default:return null}return s=s.getFlyout(),s&&(e=this.findNextLocationInFlyout(s.getContents(),t,e))?e.type==="button"&&e.button?ne.createButtonNode(e.button):e.type==="block"&&e.block?ne.createStackNode(e.block):null:null}findNextLocationInFlyout(e,t,s){const o=e.findIndex(u=>t instanceof jc&&u.block===t||t instanceof fr&&u.button===t);return 0>o?null:(s=s?o+1:o-1,s===-1||s===e.length?null:e[s])}findTopASTNodeForBlock(e){const t=dt(e);return t?ne.createConnectionNode(t):ne.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const t=dt(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?ne.createInputNode(t.targetConnection.getParentInput()):ne.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let t=0;t<e.length;t++){const s=e[t],o=s.fieldRow;for(let u=0;u<o.length;u++){const h=o[u];if(h.isClickable()||ne.NAVIGATE_ALL_FIELDS)return ne.createFieldNode(h)}if(s.connection)return ne.createInputNode(s)}return null}getSourceBlock(){return this.getType()===ne.types.BLOCK?this.getLocation():this.getType()===ne.types.STACK?this.getLocation():this.getType()===ne.types.WORKSPACE||this.getType()===ne.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case ne.types.STACK:return this.navigateBetweenStacks(!0);case ne.types.OUTPUT:return ne.createBlockNode(this.location.getSourceBlock());case ne.types.FIELD:return this.findNextForField();case ne.types.INPUT:return this.findNextForInput();case ne.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return ne.createConnectionNode(e);case ne.types.PREVIOUS:return ne.createBlockNode(this.location.getSourceBlock());case ne.types.NEXT:return ne.createConnectionNode(this.location.targetConnection);case ne.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case ne.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return ne.createStackNode(e[0]);break;case ne.types.STACK:return this.findTopASTNodeForBlock(this.location);case ne.types.BLOCK:return this.findFirstFieldOrInput(this.location);case ne.types.INPUT:return ne.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case ne.types.STACK:return this.navigateBetweenStacks(!1);case ne.types.FIELD:return this.findPrevForField();case ne.types.INPUT:return this.findPrevForInput();case ne.types.BLOCK:var e=dt(this.location);if(!e)break;return ne.createConnectionNode(e);case ne.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return ne.createConnectionNode(e);break;case ne.types.NEXT:return ne.createBlockNode(this.location.getSourceBlock());case ne.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case ne.types.STACK:var e=this.location,t=e.getRelativeToSurfaceXY();return t=new Ee(t.x,t.y+ne.DEFAULT_OFFSET_Y),ne.createWorkspaceNode(e.workspace,t);case ne.types.OUTPUT:return e=this.location,(t=e.targetConnection)?ne.createConnectionNode(t):ne.createStackNode(e.getSourceBlock());case ne.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return ne.createBlockNode(e);case ne.types.INPUT:return ne.createBlockNode(this.location.getSourceBlock());case ne.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case ne.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case ne.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case ne.types.PREVIOUS:case ne.types.NEXT:case ne.types.INPUT:case ne.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new ne(ne.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===xe.INPUT_VALUE||t===xe.NEXT_STATEMENT&&e.getParentInput()?ne.createInputNode(e.getParentInput()):t===xe.NEXT_STATEMENT?new ne(ne.types.NEXT,e):t===xe.OUTPUT_VALUE?new ne(ne.types.OUTPUT,e):t===xe.PREVIOUS_STATEMENT?new ne(ne.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new ne(ne.types.INPUT,e.connection):null}static createBlockNode(e){return e?new ne(ne.types.BLOCK,e):null}static createStackNode(e){return e?new ne(ne.types.STACK,e):null}static createButtonNode(e){return e?new ne(ne.types.BUTTON,e):null}static createWorkspaceNode(e,t){return t&&e?new ne(ne.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=dt(e);return t?ne.createConnectionNode(t):ne.createBlockNode(e)}};ne.NAVIGATE_ALL_FIELDS=!1,ne.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"}(ne||(ne={}));var p_=class extends to{constructor(e,t,s,o){let u=e?e.workspace.id:void 0;o&&o.getType()===ne.types.WORKSPACE&&(u=o.getLocation().id),super(u),this.type=z.MARKER_MOVE,this.blockId=e==null?void 0:e.id,this.oldNode=s||void 0,this.newNode=o,this.isCursor=t}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new p_),t.isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};p(ce.EVENT,z.MARKER_MOVE,p_);var Kf="blocklyCursor",Jf="blocklyMarker",qf=.75,__=class{constructor(e,t,s){this.workspace=e,this.marker=s,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=s.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?Kf:Jf;return this.svgGroup_=K(F.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var s=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||s,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent(e,t),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===ne.types.BLOCK?this.showWithBlock_(e):e.getType()===ne.types.OUTPUT?this.showWithOutput_(e):t===xe.INPUT_VALUE?this.showWithInput_(e):t===xe.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===ne.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===ne.types.FIELD?this.showWithField_(e):e.getType()===ne.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===ne.types.STACK?this.showWithStack_(e):e.getType()===ne.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const t=e.width;var s=e.height,o=s*qf;const u=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(s=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,u,o,s)):e.outputConnection?(o=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,s,o)):this.positionBlock_(t,u,o),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const t=e.getSize().width,s=e.getSize().height;this.positionRect_(0,0,t,s),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const t=e.getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let s=0;t=t.getOffsetInBlock().y;const o=e.getHeightWidth().width;this.workspace.RTL&&(s=-o),this.positionLine_(s,t,o),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var t=e.getHeightWidth();const s=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const o=-this.constants_.CURSOR_STACK_PADDING/2,u=-this.constants_.CURSOR_STACK_PADDING/2;let h=o;this.workspace.RTL&&(h=-(s+o)),this.positionRect_(h,u,s,t),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const t=e.width+this.constants_.CURSOR_STACK_PADDING,s=e.height+this.constants_.CURSOR_STACK_PADDING,o=-this.constants_.CURSOR_STACK_PADDING/2,u=-this.constants_.CURSOR_STACK_PADDING/2;let h=o;this.workspace.RTL&&(h=-(t+o)),this.positionRect_(h,u,t,s),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,s){if(e=wt(-t,s)+ve("V",-t)+ve("H",e+2*t)+ve("V",s),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,s=e.getOffsetInBlock().y;e=cs(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+s+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,s){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${s}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,s){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=wt(e,0)+ve("h",-(e-s.width))+ve("v",this.constants_.TAB_OFFSET_FROM_TOP)+s.pathDown+ve("V",t)+ve("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,s,o){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=wt(-t,s)+ve("V",-t)+ve("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+ve("H",e+2*t)+ve("V",s),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,s,o){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${s}`),this.markerSvgRect_.setAttribute("height",`${o}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,t){const s=t.getSourceBlock();e=new(ee(z.MARKER_MOVE))(s,this.isCursor(),e,t),Oe(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=K(F.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=K(F.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=K(F.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=K(F.PATH,{transform:""},this.markerSvg_),this.markerBlock_=K(F.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();K(F.ANIMATE,e,this.markerSvgLine_),K(F.ANIMATE,e,this.markerInput_),K(F.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&B(this.svgGroup_)}},Rp=class{constructor(e,t,s){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=s,this.style=t,this.svgRoot=e,this.svgPath=K(F.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?ye(this.svgRoot,e):b(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,s,o){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,t,s))return;this.removeConnectionHighlight(e)}t=K(F.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:`translate(${s.x}, ${s.y})`+(o?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,t)}currentHighlightMatchesNew(e,t,s){let o;const u=(o=this.connectionHighlights.get(e))==null?void 0:o.getAttribute("d");return e=this.highlightOffsets.get(e),u===t&&Ee.equals(e,s)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(B(t),this.connectionHighlights.delete(e))}},mr=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,r.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){r.disable$$module$build$src$core$events$utils(),this.hidePreview(),r.enable$$module$build$src$core$events$utils();var{local:e,closest:t}=this.activeCandidate;e.connect(t);var s=e.isSuperior()?t:e,o=this.topBlock.getRootBlock();jt().then(()=>{si(s.getSourceBlock()),setTimeout(()=>{o.bringToFront()},0)})}}update(e,t){const s=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!s,t))||this.shouldUpdatePreviews(s,e))&&(r.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(s),this.maybeShowPreview(s),r.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){r.disable$$module$build$src$core$events$utils();let t;try{const s=Js(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!s)throw Error(`Failed to serialize source block. ${e.toDevString()}`);t=_i(s,this.workspace);for(const o of t.getDescendants(!1))o.setInsertionMarker(!0);t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden")}finally{r.enable$$module$build$src$core$events$utils()}return t}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);return t&&t!==this.topBlock.nextConnection&&(e.push(t),this.lastOnStack=t),e}shouldUpdatePreviews(e,t){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:s,closest:o}=this.activeCandidate;if(o===e.closest&&s===e.local)return!1;const u=s.x+t.x-o.x;return t=s.y+t.y-o.y,e.radius<Math.sqrt(u*u+t*t)-r.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),s=null;for(let o=0;o<this.availableConnections.length;o++){const u=this.availableConnections[o],h=u.closest(t,e);h.connection&&(s={closest:h.connection,local:u,radius:h.radius},t=h.radius)}return s}getStartRadius(){return this.activeCandidate?r.config$$module$build$src$core$config.connectingSnapRadius:r.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return t&&this.workspace.getComponentManager().hasCapability(t.id,ns.Capability.DELETE_AREA)?t.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t=e.closest,s;t===((s=this.activeCandidate)==null?void 0:s.closest)||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case mr.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case mr.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case mr.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=(e=this.activeCandidate)==null?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:s}=e;let o=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");let u;try{u=o.getMatchingConnection(t.getSourceBlock(),t)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),o=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),o=this.firstMarker=this.createMarkerBlock(this.topBlock)),!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");u=o.getMatchingConnection(t.getSourceBlock(),t)}if(!u)throw Error("Cannot show the insertion marker because there is no associated connection");if(u===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.queueRender(),Us(),u.connect(s);const h={x:s.x-u.x,y:s.y-u.y},E=u.getOffsetInBlock().clone(),v=u;jt().then(()=>{let se;(se=o)==null||se.positionNearConnection(v,h,E);let Me;(Me=o)==null||Me.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=u}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,t=e.getSourceBlock(),s=t.outputConnection,o;if((o=t.previousConnection)!=null&&o.targetConnection||s!=null&&s.targetConnection)t.unplug(!0);else{let u;(u=e.targetBlock())==null||u.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){r.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{r.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(mr||(mr={})),mr.PREVIEW_TYPE;var Cp=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const s=this.getConstants();s.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=s.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Sp}makeRenderInfo_(e){return new Ud(this,e)}makeDrawer_(e,t){return new Op(e,t)}makeMarkerDrawer(e,t){return new __(e,this.getConstants(),t)}makePathObject(e,t){return new Rp(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,s){return!!xt.getConnectionForOrphanedConnection(e,s===xe.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,s){return q("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===xe.OUTPUT_VALUE||t.type===xe.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(s,e.targetBlock(),t.type)?mr.PREVIEW_TYPE.INSERTION_MARKER:mr.PREVIEW_TYPE.REPLACEMENT_FADE:mr.PREVIEW_TYPE.INSERTION_MARKER}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},Yt={};Yt.BottomRow=r_,Yt.Connection=Ku,Yt.ConstantProvider=Sp,Yt.Drawer=Op,Yt.ExternalValueInput=bp,Yt.Field=Uh,Yt.Hat=l_,Yt.Icon=Cg,Yt.InRowSpacer=Do,Yt.InlineInput=u_,Yt.InputConnection=Yc,Yt.InputRow=c_,Yt.JaggedEdge=yg,Yt.MarkerSvg=__,Yt.Measurable=Ul,Yt.NextConnection=vg,Yt.OutputConnection=Lg,Yt.PathObject=Rp,Yt.PreviousConnection=kg,Yt.RenderInfo=Ud,Yt.Renderer=Cp,Yt.RoundCorner=Bd,Yt.Row=Pd,Yt.SpacerRow=a_,Yt.SquareCorner=Fd,Yt.StatementInput=xd,Yt.TopRow=h_,Yt.Types=N,Yt.init=Dt,Yt.register=gt,Yt.unregister=Mt;var wg=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&b(e,t),(t=this.theme.getClassName())&&ye(e,t));for(let s=0,o;o=this.subscribedWorkspaces[s];s++)o.refreshTheme();for(const[s,o]of this.componentDB)for(const u of o){e=u.element,t=u.propertyName;const h=this.theme&&this.theme.getComponentStyle(s);e.style.setProperty(t,h||"")}for(const s of this.subscribedWorkspaces)s.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!ts(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,s){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:s}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(s,t||"")}unsubscribe(e){if(e)for(const[t,s]of this.componentDB){for(let o=s.length-1;0<=o;o--)s[o].element===e&&s.splice(o,1);s.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},g_="VARIABLE_DYNAMIC",ih={CATEGORY_NAME:g_};ih.flyoutCategory=Ds,ih.flyoutCategoryBlocks=Ps,ih.onCreateVariableButtonClick_Colour=vn,ih.onCreateVariableButtonClick_Number=Gs,ih.onCreateVariableButtonClick_String=Jt;var Ng=30,oh=[];oh[xe.INPUT_VALUE]=xe.OUTPUT_VALUE,oh[xe.OUTPUT_VALUE]=xe.INPUT_VALUE,oh[xe.NEXT_STATEMENT]=xe.PREVIOUS_STATEMENT,oh[xe.PREVIOUS_STATEMENT]=xe.NEXT_STATEMENT;var $_="RENAME_VARIABLE_ID",f_="DELETE_VARIABLE_ID",Mg=class{canConnect(e,t,s,o){return this.canConnectWithReason(e,t,s,o)===xt.CAN_CONNECT}canConnectWithReason(e,t,s,o){const u=this.doSafetyChecks(e,t);return u!==xt.CAN_CONNECT?u:this.doTypeChecks(e,t)?s&&!this.doDragChecks(e,t,o||0)?xt.REASON_DRAG_CHECKS_FAILED:xt.CAN_CONNECT:xt.REASON_CHECKS_FAILED}getErrorMessage(e,t,s){switch(e){case xt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case xt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case xt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case xt.REASON_TARGET_NULL:return"Target connection is null.";case xt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+s.getCheck());case xt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case xt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case xt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return xt.REASON_TARGET_NULL;let s,o,u;return e.isSuperior()?(s=e.getSourceBlock(),o=t.getSourceBlock(),u=t):(o=e.getSourceBlock(),s=t.getSourceBlock(),u=e,e=t),s===o?xt.REASON_SELF_CONNECTION:u.type!==oh[e.type]?xt.REASON_WRONG_TYPE:s.workspace!==o.workspace?xt.REASON_DIFFERENT_WORKSPACES:s.isShadow()&&!o.isShadow()?xt.REASON_SHADOW_PARENT:u.type===xe.OUTPUT_VALUE&&o.previousConnection&&o.previousConnection.isConnected()||u.type===xe.PREVIOUS_STATEMENT&&o.outputConnection&&o.outputConnection.isConnected()?xt.REASON_PREVIOUS_AND_OUTPUT:xt.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let s=0;s<e.length;s++)if(t.includes(e[s]))return!0;return!1}doDragChecks(e,t,s){if(e.distanceFrom(t)>s||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case xe.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case xe.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case xe.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case xe.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!Xn.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||Xn.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};p(ce.CONNECTION_CHECKER,Ri,Mg);var m_=class extends ja{constructor(e){super(e),this.type=z.VAR_DELETE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new m_),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};p(ce.EVENT,z.VAR_DELETE,m_);var T_=class extends ja{constructor(e,t){super(e),this.type=z.VAR_RENAME,e&&(this.oldName=e.name,this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new T_),t.oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};p(ce.EVENT,z.VAR_RENAME,T_);var E_=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.name!==t){var s=this.getVariable(t,e.type),o=this.workspace.getAllBlocks(!1),u=r.getGroup$$module$build$src$core$events$utils();u||r.setGroup$$module$build$src$core$events$utils(!0);try{s&&s.getId()!==e.getId()?this.renameVariableWithConflict(e,t,s,o):this.renameVariableAndUses(e,t,o)}finally{r.setGroup$$module$build$src$core$events$utils(u)}}}renameVariableById(e,t){const s=this.getVariableById(e);if(!s)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(s,t)}renameVariableAndUses(e,t,s){for(Oe(new(ee(z.VAR_RENAME))(e,t)),e.name=t,t=0;t<s.length;t++)s[t].updateVarName(e)}renameVariableWithConflict(e,t,s,o){const u=e.type;for(t!==s.name&&this.renameVariableAndUses(s,t,o),t=0;t<o.length;t++)o[t].renameVarById(e.getId(),s.getId());Oe(new(ee(z.VAR_DELETE))(e)),ts(this.variableMap.get(u),e)}createVariable(e,t,s){var o=this.getVariable(e,t);if(o){if(s&&o.getId()!==s)throw Error('Variable "'+e+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+s+'".');return o}if(s&&this.getVariableById(s))throw Error('Variable id, "'+s+'", is already in use.');return o=s||ie(),t=t||"",o=new Hc(this.workspace,e,t,o),e=this.variableMap.get(t)||[],e.push(o),this.variableMap.delete(t),this.variableMap.set(t,e),Oe(new(ee(z.VAR_CREATE))(o)),o}deleteVariable(e){const t=e.getId(),s=this.variableMap.get(e.type);if(s){for(let o=0;o<s.length;o++)if(s[o].getId()===t){s.splice(o,1),Oe(new(ee(z.VAR_DELETE))(e)),s.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var s=t.name;const o=this.getVariableUsesById(e);for(let u=0,h;h=o[u];u++)if(h.type==="procedures_defnoreturn"||h.type==="procedures_defreturn"){e=String(h.getFieldValue("NAME")),s=r.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",s).replace("%2",e),Hi(s);return}1<o.length?(s=r.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(o.length)).replace("%2",s),Ct(s,u=>{u&&t&&this.deleteVariableInternal(t,o)})):this.deleteVariableInternal(t,o)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const s=r.getGroup$$module$build$src$core$events$utils();s||r.setGroup$$module$build$src$core$events$utils(!0);try{for(let o=0;o<t.length;o++)t[o].dispose(!0);this.deleteVariable(e)}finally{r.setGroup$$module$build$src$core$events$utils(s)}}getVariable(e,t){if(t=this.variableMap.get(t||"")){for(let s=0,o;o=t[s];s++)if(r.Names$$module$build$src$core$names.equals(o.name,e))return o}return null}getVariableById(e){for(const t of this.variableMap.values())for(const s of t)if(s.getId()===e)return s;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const s of e.getPotentialVariableMap().variableMap.keys())t.add(s);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const t=[],s=this.workspace.getAllBlocks(!1);for(let o=0;o<s.length;o++){const u=s[o].getVarModels();if(u)for(let h=0;h<u.length;h++)u[h].getId()===e&&t.push(s[o])}return t}},Gh=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Rg,this.potentialVariableMap=null,this.id=ie(),_e(this),this.options=e||new $r({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(ge(ce.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new E_(this)}dispose(){this.listeners.length=0,this.clear(),it(this)}sortObjects(e,t){const s=Math.sin(Yo(Gh.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+s*e.x-(t.y+s*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!ts(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){ts(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&e.sort(this.sortObjects.bind(this)),e.filter(s=>!s.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!ts(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let s=0;s<t.length;s++)e.push(...t[s].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(s=>!s.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=r.getGroup$$module$build$src$core$events$utils();for(e||r.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();r.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,s){return this.variableMap.createVariable(e,t,s)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const s in e){if(e[s]>this.remainingCapacityOfType(s))return!1;t+=e[s]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,s=e?this.undoStack_:this.redoStack_;const o=t.pop();if(o){for(var u=[o];t.length&&o.group&&o.group===t[t.length-1].group;){const h=t.pop();h&&u.push(h)}for(t=0;t<u.length;t++)s.push(u[t]);r.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(s=0;s<u.length;s++)u[s].run(e)}finally{r.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,os()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){ts(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let s=0;s<t.length;s++)if(!t[s].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new E_(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return W(e)}static getAll(){return H()}};Gh.SCAN_ANGLE=3;var Qf=100,Dg=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var s=new globalThis.Audio}catch{return}for(let u=0;u<e.length;u++){const h=e[u],E=h.match(/\.(\w+)$/);if(E&&s.canPlayType("audio/"+E[1])){var o=new globalThis.Audio(h);break}}o&&this.sounds.set(t,o)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),xa||Td)break}}play(e,t){if(!this.muted){var s=this.sounds.get(e);s?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<Qf||(this.lastSound=e,s=xa||Pa?s:s.cloneNode(),s.volume=t===void 0?1:t,s.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},Zf=20,Tr=class extends Gh{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(ge(ce.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||Tr.setTopLevelWorkspaceMetrics,this.componentManager=new ns,this.connectionDBList=Bh.init(this.connectionChecker),this.audioManager=new Dg(e.parentWorkspace),this.grid=this.options.gridPattern?new s_(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Gu(this),bs&&Go&&this.registerToolboxCategoryCallback(Ka,Go),ih&&Ds&&this.registerToolboxCategoryCallback(g_,Ds),wi&&be&&(this.registerToolboxCategoryCallback(Ip,be),this.addChangeListener(Fe)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new wg(this,this.options.theme||$p),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=Dt(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new Te(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=$p),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(t=>!!t.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(ee(z.THEME_CHANGE))(this.getTheme().name,this.id);Oe(e)}updateBlockStyles(e){for(let t=0,s;s=e[t];t++){const o=s.getStyleName();o&&s.setStyle(o)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let t=0,s=0,o=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(o=this.scale);do{const u=Yl(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(o=1),t+=u.x*o,s+=u.y*o,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new Ee(t,s)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Te(e.width,e.height)}getOriginOffsetInPixels(){return Pi(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=K(F.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=K(F.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new Wf(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Ue(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Ue(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(ge(ce.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=ge(ce.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&B(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&B(e.parentNode)}this.resizeHandlerWrapper&&(Ot(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=Tr.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new ap(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new $r({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(ge(ce.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(ge(ce.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(ns.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),s=[];for(let o=0,u;u=e[o];o++){u.position(t,s);const h=u.getBoundingRectangle();h&&s.push(h)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=uo();Ee.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const s=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,s.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,s.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(nt()){var e=this.scale,t=-this.scrollY,s=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(s-this.oldLeft))){var o=new(ee(z.VIEWPORT_CHANGE))(t,s,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=s,Oe(o)}}}translate(e,t){let s;(s=this.layerManager)==null||s.translateLayers(new Ee(e,t),this.scale);let o;(o=this.grid)==null||o.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;0<=t;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender()),jt().then(()=>void this.markerManager.updateMarkers())}highlightBlock(e,t){if(t===void 0){for(let s=0,o;o=this.highlightedBlocks[s];s++)o.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):ts(this.highlightedBlocks,e),e.setHighlighted(t))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,s){return e=super.createVariable(e,t,s),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(ns.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,s;s=e[t];t++){const o=s.getClientRect();o&&this.dragTargetAreas.push({component:s,clientRect:o})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,s;s=this.dragTargetAreas[t];t++)if(s.clientRect.contains(e.clientX,e.clientY))return s.component;return null}onMouseDown(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){Dr(this,e,t)}moveDrag(e){return nr(this,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(Wu.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,s=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||s){var o=Yn(e);if(Ba)var u=e.metaKey;t&&(e.ctrlKey||u||!s)?(o=-o.y/50,t=k(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)):(t=this.scrollX-o.x,s=this.scrollY-o.y,e.shiftKey&&!o.x&&(t=this.scrollX-o.y,s=this.scrollY),this.scroll(t,s)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new zt(0,0,0,0);const t=e[0].getBoundingRectangle();for(let o=1;o<e.length;o++){var s=e[o];s.isInsertionMarker&&s.isInsertionMarker()||(s=s.getBoundingRectangle(),s.top<t.top&&(t.top=s.top),s.bottom>t.bottom&&(t.bottom=s.bottom),s.left<t.left&&(t.left=s.left),s.right>t.right&&(t.right=s.right))}return t}cleanUp(){this.setResizesEnabled(!1),r.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),t=e.filter(h=>h.isMovable());const s=e.filter(h=>!h.isMovable()).map(h=>h.getBoundingRectangle());e=function(h){for(const E of s)if(h.intersects(E))return E;return null};var o=0;const u=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const h of t){for(t=h.getBoundingRectangle(),h.moveBy(-t.left,o-t.top,["cleanup"]),h.snapToGrid(),t=h.getBoundingRectangle(),o=e(t);o!=null;)o=o.top+o.getHeight()+u,h.moveBy(0,o-t.top,["cleanup"]),h.snapToGrid(),t=h.getBoundingRectangle(),o=e(t);o=h.getRelativeToSurfaceXY().y+h.getHeightWidth().height+u}r.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=w.registry.getContextMenuOptions(w.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),fl(e,t,this.RTL,this)}}updateToolbox(e){if(e=ws(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Ns(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(rt(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,s){s=Math.pow(this.options.zoomOptions.scaleSpeed,s);const o=this.scale*s;if(this.scale!==o){o>this.options.zoomOptions.maxScale?s=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(s=this.options.zoomOptions.minScale/this.scale);var u=this.getCanvas().getCTM(),h=this.getParentSvg().createSVGPoint();h.x=e,h.y=t,h=h.matrixTransform(u.inverse()),e=h.x,t=h.y,u=u.translate(e*(1-s),t*(1-s)).scale(s),this.scrollX=u.e,this.scrollY=u.f,this.setScale(o)}}zoomCenter(e){var t=this.getMetrics();let s;this.flyout?(s=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(s=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(s,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var s=this.getBlocksBoundingBox(),o=2*Zf,u=s.right-s.left+o;if(s=s.bottom-s.top+o,u){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),s+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),u+=this.flyout.getWidth()/this.scale)),t/=u,e/=s,r.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{r.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ye(this.getCanvas(),"blocklyCanvasTransitioning"),ye(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){b(this.getCanvas(),"blocklyCanvasTransitioning"),b(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,s=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,s=-s-e.scrollTop,this.scroll(t,s)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var s=e?this.getBlockById(e):null;if(s){e=s.getRelativeToSurfaceXY(),s=t?{height:s.height,width:s.width}:s.getHeightWidth();var o=this.scale;t=(e.x+(this.RTL?-1:1)*s.width/2)*o,e=(e.y+s.height/2)*o,s=this.getMetrics(),this.scroll(-(t-s.viewWidth/2),-(e-s.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const s=this.getMetrics();e=Math.min(e,-s.scrollLeft),t=Math.min(t,-s.scrollTop);const o=s.scrollTop+Math.max(0,s.scrollHeight-s.viewHeight);e=Math.max(e,-(s.scrollLeft+Math.max(0,s.scrollWidth-s.viewWidth))),t=Math.max(t,-o),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+s.scrollLeft),-(t+s.scrollTop),!1),e+=s.absoluteLeft,t+=s.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){ts(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t=e.type==="pointerdown",s=this.currentGesture_;return s?t&&s.hasStarted()?(console.warn("Tried to start the same gesture twice."),s.cancel(),null):s:t?this.currentGesture_=new Wu(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){zi(),$i(this),Wi(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(ns.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},I_=class extends to{constructor(e,t,s){super(s),this.type=z.SELECTED,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new I_),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};p(ce.EVENT,z.SELECTED,I_);var Hd=class{paste(e,t,s){if(!t.isCapacityAvailable(e.typeCounts))return null;s&&(e.blockState.x=s.x,e.blockState.y=s.y),s=s||new Ee(e.blockState.x||0,e.blockState.y||0),r.disable$$module$build$src$core$events$utils();let o;try{o=_i(e.blockState,t),Ln(o,s)}finally{r.enable$$module$build$src$core$events$utils()}return o&&(nt()&&!o.isShadow()&&Oe(new(ee(z.BLOCK_CREATE))(o)),r.setSelected$$module$build$src$core$common(o),o)}};Hd.TYPE="block",Sn(Hd.TYPE,new Hd);var yp={};yp.bumpIntoBounds=Os,yp.bumpIntoBoundsHandler=Ji,yp.bumpTopObjectsIntoBounds=yt;var Pg=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Ee(0,0),this.inGroup=!1,this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,(this.inGroup=!!r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(ge(ce.CONNECTION_PREVIEWER,this.workspace.options))(this.block),Fs(),this.workspace.setResizesEnabled(!1),bl(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Ee.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,s,o;if(this.startParentConn=(o=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?o:(s=this.block.previousConnection)==null?void 0:s.targetConnection,e){let u;this.startChildConn=(u=this.block.nextConnection)==null?void 0:u.targetConnection}this.block.unplug(e),pu(this.block)}fireDragStartEvent(){const e=new(ee(z.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));Oe(e)}fireDragEndEvent(){const e=new(ee(z.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));Oe(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(ee(z.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),Oe(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(Ee.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,Ee.difference(e,this.startLoc))}updateConnectionPreview(e,t){var s=this.connectionCandidate;const o=this.getConnectionCandidate(e,t);if(o){this.connectionCandidate=t=s&&this.currCandidateIsBetter(s,t,o)?s:o;var{local:u,neighbour:h}=t;t=u.type===xe.OUTPUT_VALUE||u.type===xe.PREVIOUS_STATEMENT,s=h.isConnected()&&!h.targetBlock().isInsertionMarker(),t&&s&&!this.orphanCanConnectAtEnd(e,h.targetBlock(),u.type)?this.connectionPreviewer.previewReplacement(u,h,h.targetBlock()):this.connectionPreviewer.previewConnection(u,h)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,t,s){return!!xt.getConnectionForOrphanedConnection(e,s===xe.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,s){const{local:o,neighbour:u}=e;e=new Ee(o.x,o.y);const h=new Ee(u.x,u.y);return t=Ee.distance(Ee.sum(e,t),h),s.distance>t-r.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let s=this.connectionCandidate?r.config$$module$build$src$core$config.connectingSnapRadius:r.config$$module$build$src$core$config.snapRadius,o=null;for(const u of e){const{connection:h,radius:E}=u.closest(s,t);h&&(o={local:u,neighbour:h,distance:E},s=E)}return o}getLocalConnections(e){const t=e.getConnections_(!1),s=e.lastConnectionInStack(!0);return s&&s!==e.nextConnection&&t.push(s),t}endDrag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),Pn(),bl(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,P),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||r.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(e){const{local:t,neighbour:s}=e;t.connect(s);const o=t.isSuperior()?s:t,u=this.block.getRootBlock();jt().then(()=>{si(o.getSourceBlock()),setTimeout(()=>{u.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case xe.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case xe.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,P),Os(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},xg=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const t=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(t,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},b_=class extends xg{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===ne.types.NEXT||e.getType()===ne.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===ne.types.PREVIOUS||e.getType()===ne.types.OUTPUT)&&(e=e.next());let t,s;return(e=(s=(t=e)==null?void 0:t.in())!=null?s:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===ne.types.NEXT||e.getType()===ne.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===ne.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};p(ce.CURSOR,Ri,b_);var Gd=class extends b_{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const s=e.in()||e.next();return t(s)?s:s?this.getNextNode_(s,t):(e=this.findSiblingOrParent(e.out()),t(e)?e:e?this.getNextNode_(e,t):null)}getPreviousNode_(e,t){if(!e)return null;let s=e.prev();return s=s?this.getRightMostChild(s):e.out(),t(s)?s:s?this.getPreviousNode_(s,t):null}validNode_(e){let t=!1;return e=e&&e.getType(),(e===ne.types.OUTPUT||e===ne.types.INPUT||e===ne.types.FIELD||e===ne.types.NEXT||e===ne.types.PREVIOUS||e===ne.types.WORKSPACE)&&(t=!0),t}findSiblingOrParent(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};Gd.registrationName="basicCursor",p(ce.CURSOR,Gd.registrationName,Gd);var Bg=class extends Gd{validNode_(e){let t=!1;const s=e&&e.getType();return e&&(e=e.getLocation(),s===ne.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},Fg=10,Ni=class extends xt{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[oh[t]],this.offsetInBlock=new Ee(0,0),this.trackedState=Ni.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Ni.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e,t=!1){if(!this.sourceBlock_.workspace.isDragging()){var s=r.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Fg),o=r.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Fg),u=e.sourceBlock_.getRootBlock(),h=this.sourceBlock_.getRootBlock();if(!u.isInFlyout&&!h.isInFlyout){var E=!0;if(h.isMovable())u.isMovable()&&t&&(o=-o);else if(u.isMovable())E=!1,s=-s,o=-o;else return;t=E?e:this,e=E?this:e,u=E?h:u,(h=Xe()===u)||u.addSelect(),u.RTL&&(s=-s),u.moveBy(t.x+s-e.x,t.y+o-e.y,["bump"]),h||u.removeSelect()}}}moveTo(e,t){let s=!1;return this.trackedState===Ni.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=Ni.TrackedState.TRACKED,s=!0):this.trackedState===Ni.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),s=!0),this.x=e,this.y=t,s}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=Ee.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Ni.TrackedState.TRACKED||!e&&this.trackedState===Ni.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Ni.TrackedState.TRACKED):(this.trackedState===Ni.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Ni.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const s=e[t],o=s.getConnections_(!0);for(let u=0;u<o.length;u++)o[u].setTracking(!1);for(const u of s.getIcons())gi(u)&&u.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==xe.INPUT_VALUE&&this.type!==xe.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let s;t.isCollapsed()?(s=[],t.outputConnection&&s.push(t.outputConnection),t.nextConnection&&s.push(t.nextConnection),t.previousConnection&&s.push(t.previousConnection)):s=t.getConnections_(!0);for(let o=0;o<s.length;o++)e.push(...s[o].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(at()){const s=r.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(r.setGroup$$module$build$src$core$events$utils(s),this.bumpAwayFrom(e),r.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),r.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:s}=this.getParentAndChildConnections();if(t&&s){var o=r.getGroup$$module$build$src$core$events$utils();o||r.setGroup$$module$build$src$core$events$utils(!0);var u=t.getSourceBlock(),h=s.getSourceBlock();super.disconnectInternal(e),u.queueRender(),h.updateDisabled(),h.queueRender(),h.getSvgRoot().style.display="block",r.setGroup$$module$build$src$core$events$utils(o)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender(),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Ni||(Ni={})),Ni.TrackedState;var Er=class extends jc{constructor(e,t,s){if(super(e,t,s),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Ee(0,0),this.dragStrategy=new Pg(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=K(F.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,pl(e),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&Ue(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const t=this.parentBlock_;if(e!==t){Fs(),super.setParent(e),Pn();var s=this.getSvgRoot();if(!this.workspace.isClearing&&s){var o=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(s):t&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(s,e):this.workspace.getCanvas().appendChild(s),this.translate(o.x,o.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,s=0,o=this.getSvgRoot();if(o)do{const u=Yl(o);t+=u.x,s+=u.y,o=o.parentNode}while(o&&!e.hasLayer(o));return new Ee(t,s)}moveBy(e,t,s){if(this.parentBlock_)throw Error("Block has parent");const o=nt();let u=null;o&&(u=new(ee(z.BLOCK_MOVE))(this),s&&u.setReason(s)),e=new Ee(e,t),t=this.getRelativeToSurfaceXY(),e=Ee.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),o&&u&&(u.recordNew(),Oe(u)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new Ee(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const s=this.getRelativeToSurfaceXY();this.moveBy(e.x-s.x,e.y-s.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const t=this.getRelativeToSurfaceXY();let s,o;return this.RTL?(s=t.x-e.width,o=t.x):(s=t.x,o=t.x+e.width),new zt(t.y,t.y+e.height,s,o)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}updateCollapsed(){var e=this.isCollapsed();const t=ki,s=Pu;for(let u=0,h;h=this.inputList[u];u++)h.name!==t&&h.setVisible(!e);for(var o of this.getIcons())o.updateCollapsed();e?(e=this.toString(Ng),(o=this.getField(s))?o.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new nh(e),s)):(this.updateDisabled(),this.removeInput(t))}tab(e,t){const s=new Bg;s.setCurNode(ne.createFieldNode(e)),e=s.getCurNode(),t?s.next():s.prev(),(t=s.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=w.registry.getContextMenuOptions(w.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(fl(e,t,this.RTL,this.workspace),uu(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(Ee.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const s of t.fieldRow)s.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",Xn.push(...this.getConnections_(!0)),ye(this.svgGroup,"blocklyDragging")):(Xn.length=0,b(this.svgGroup,"blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,t){if(this.disposing=!0,Xi(),cu(),t&&(this.unplug(e),Vn(this)),t=Xe(),t instanceof jc){let s=t;for(;s!==null;)s===this&&t.unselect(),s=s.getParent()}super.dispose(!!e),B(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),Xe()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(r.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),r.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Hd.TYPE,blockState:Js(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:ds(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t=0,s;s=this.inputList[t];t++)for(let o=0,u;u=s.fieldRow[o];o++)u.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var s of this.warningTextDb.values())clearTimeout(s);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),s=this.getIcon(ju.TYPE),e){let o=this.getSurroundParent(),u=null;for(;o;)o.isCollapsed()&&(u=o),o=o.getSurroundParent();u&&u.setWarningText(r.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Er.COLLAPSED_WARNING_ID),s?s.addMessage(e,t):this.addIcon(new ju(this).addMessage(e,t))}else s&&(t?(s.addMessage("",t),s.getText()||this.removeIcon(ju.TYPE)):this.removeIcon(ju.TYPE))}setMutator(e){this.removeIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof r.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setEnabled(e){q("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const t=this.isEnabled();super.setEnabled(e),this.isEnabled()===t||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,t){const s=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===s||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,t)this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour();else throw Error("Invalid style name: "+e)}bringToFront(e=!1){let t=this;if(!t.isDeadOrDying())do{const s=t.getSvgRoot(),o=s.parentNode,u=o.childNodes;if(u[u.length-1]!==s&&o.appendChild(s),e)break;t=t.getParent()}while(t)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var s=this.inputList[t].connection;s&&(s.setTracking(e),(s=s.targetBlock())&&s.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let s=0,o;o=this.inputList[s];s++)o.connection&&t.push(o.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new Ni(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let s;(s=t.targetBlock())==null||s.bumpNeighbours()}for(const s of t.neighbours(r.config$$module$build$src$core$config.snapRadius))s.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&s.isConnected()||(t.isSuperior()?s.bumpAwayFrom(t,!1):t.bumpAwayFrom(s,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,s){if(e.type===xe.NEXT_STATEMENT||e.type===xe.INPUT_VALUE){let o=t.x;t=t.y,o+=s.x-e.getOffsetInBlock().x,t+=s.y-e.getOffsetInBlock().y,this.moveBy(o,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return pn(this)}render(){this.queueRender(),Us()}renderEfficiently(){Fs(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),Pn(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Gu.LOCAL_MARKER).draw();for(const e of this.inputList)for(const t of e.fieldRow)t.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var s=this.getNextBlock();if(s){s=s.getHeightWidth();const o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=s.height-o,t=Math.max(t,s.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},Js(this)),t=new Set(["id","height","width","pinned","enabled"]),s=function(o){for(const u in o)t.has(u)?delete o[u]:typeof o[u]=="object"&&s(o[u])};return s(e),[e]}};Er.INLINE=-1,Er.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Ug=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},vp=class extends Ug{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof Er?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(Xt(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},S_=class extends to{constructor(e,t){super(t),this.type=z.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new S_),t.isOpen=e.isOpen,t}};p(ce.EVENT,z.TRASHCAN_OPEN,S_);var Hg=class extends vp{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new $r({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===Ze.TOP?Ze.BOTTOM:Ze.TOP,this.flyout=new(ge(ce.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===Ze.RIGHT?Ze.LEFT:Ze.RIGHT,this.flyout=new(ge(ce.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=K(F.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=K(F.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),K(F.RECT,{width:Vh,height:Lp,y:Wh},e);const s=K(F.IMAGE,{width:wn.width,x:-0,height:wn.height,y:-32,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return s.setAttributeNS(oi,"xlink:href",this.workspace.options.pathToMedia+wn.url),e=K(F.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),K(F.RECT,{width:Vh,height:Wh},e),this.svgLid=K(F.IMAGE,{width:wn.width,x:-0,height:wn.height,y:-32,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(oi,"xlink:href",this.workspace.options.pathToMedia+wn.url),Tt(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),Tt(this.svgGroup,"pointerup",this,this.click),Tt(s,"pointerover",this,this.mouseOver),Tt(s,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&($e(this.flyout.createDom(F.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:ns.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[ns.Capability.AUTOHIDEABLE,ns.Capability.DELETE_AREA,ns.Capability.DRAG_TARGET,ns.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&B(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(s){return JSON.parse(s)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let s;(s=this.flyout)==null||s.show(e),t.cursor="";let o;(o=this.workspace.scrollbar)==null||o.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var s=Sr(this.workspace,e);e=ho(s,new Te(Vh,Lp+Wh),em,Gg,e,this.workspace),t=Or(e,Gg,s.vertical===Wr.TOP?Xr.DOWN:Xr.UP,t),this.top=t.top,this.left=t.left;var o;(o=this.svgGroup)==null||o.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new zt(this.top,this.top+Lp+Wh,this.left,this.left+Vh)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+sm-kp;return e=e.left+tm-kp,new zt(t,t+Wh+Lp+2*kp,e,e+Vh+2*kp)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=om;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Wg),t=Vg+this.lidOpen*(rm-Vg),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),im/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===Ze.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let s;(s=this.svgLid)==null||s.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Vh-4)+","+(Wh-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*Wg)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(ee(z.TRASHCAN_OPEN))(e,this.workspace.id),Oe(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||!le(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(nm)}}}cleanBlockJson(e){function t(s){if(s){if(delete s.id,delete s.x,delete s.y,delete s.enabled,delete s.disabledReasons,s.icons&&s.icons.comment){var o=s.icons.comment;delete o.height,delete o.width,delete o.pinned}o=s.inputs;for(var u in o){var h=o[u];const E=h.block;h=h.shadow,E&&t(E),h&&t(h)}s.next&&(u=s.next,s=u.block,u=u.shadow,s&&t(s),u&&t(u))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},Vh=47,Lp=44,Wh=16,Gg=20,em=20,kp=10,tm=0,sm=32,nm=.1,im=80,om=4,Vg=.4,rm=.8,Wg=45,Vt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),t=e.keyCodes,t!=null&&t.length)for(const s of t)this.addKeyMapping(s,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,s){e=`${e}`;const o=this.keyMap.get(e);if(o&&!s)throw Error(`Shortcut named "${t}" collides with shortcuts "${o}"`);o&&s?o.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,s){const o=this.keyMap.get(e);if(!o)return s||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const u=o.indexOf(t);return-1<u?(o.splice(u,1),o.length===0&&this.keyMap.delete(e),!0):(s||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,s]of this.keyMap)e[t]=s;return e}getRegistry(){const e=Object.create(null);for(const[t,s]of this.shortcuts)e[t]=s;return $n(Object.create(null),e)}onKeyDown(e,t){var s=this.serializeKeyEvent(t);if(s=this.getShortcutNamesByKeyCode(s),!s)return!1;for(const o of s){if(s=this.shortcuts.get(o),!s||s.preconditionFn&&!s.preconditionFn(e))continue;let u,h;if((h=(u=s).callback)!=null&&h.call(u,e,t,s))return!0}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[s,o]of this.keyMap)-1<o.indexOf(e)&&t.push(s);return t}serializeKeyEvent(e){let t="";for(const s in Vt.modifierKeys)e.getModifierState(s)&&(t!==""&&(t+="+"),t+=s);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers(e){for(const t of e)if(!(t in Vt.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let s="";if(t){this.checkModifiers(t);for(const o in Vt.modifierKeys)t.includes(Vt.modifierKeys[o])&&(s!==""&&(s+="+"),s+=o)}return s!==""&&e?s+="+"+e:e&&(s=`${e}`),s}};Vt.registry=new Vt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(Vt||(Vt={}));var O_=null,R_=null,lm={duplicateInternal:fu,copyInternal:Vs},Vd={};Vd.BlockPaster=Hd,Vd.TEST_ONLY=lm,Vd.paste=Zt,Vd.registry=wl;var Gl;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(Gl||(Gl={}));var Kc=null,Jc=null,Xh=null;Tu();var Vl={};Vl.names=Gl,Vl.registerCopy=mu,Vl.registerCut=Ol,Vl.registerDefaultShortcuts=Tu,Vl.registerDelete=qi,Vl.registerEscape=An,Vl.registerPaste=Si,Vl.registerRedo=Rl,Vl.registerUndo=Oi;var um=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=kh}save(e){return e=e.getProcedureMap().getProcedures().map(t=>Br(t)),e.length?e:null}load(e,t){const s=t.getProcedureMap();for(const o of e)s.add(Dc(this.procedureModelClass,this.parameterModelClass,o,t))}clear(e){e.getProcedureMap().clear()}},Ap={};Ap.ProcedureSerializer=um,Ap.loadProcedure=Dc,Ap.saveProcedure=Br;var Xg=class{constructor(){this.priority=Va}save(e){const t=[];for(const s of e.getAllVariables())e={name:s.name,id:s.getId()},s.type&&(e.type=s.type),t.push(e);return t.length?t:null}load(e,t){for(const s of e)t.createVariable(s.name,s.type,s.id)}clear(e){e.getVariableMap().clear()}};Bi("variables",new Xg);var zg={};zg.VariableSerializer=Xg;var C_={};C_.load=en,C_.save=Cl;var cm={blocks:wo,exceptions:Pl,priorities:ln,procedures:Ap,registry:Rs,variables:zg,workspaceComments:Nn,workspaces:C_},y_=class{constructor(e,t,s,o,u){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,s=s===void 0?!0:s;const h=t&&s;t&&(this.hScroll=new $s(e,!0,h,o,u)),s&&(this.vScroll=new $s(e,!1,h,o,u)),h&&(this.corner_=K(F.RECT,{height:$s.scrollbarThickness,width:$s.scrollbarThickness,class:"blocklyScrollbarBackground"}),$e(this.corner_,e.getBubbleCanvas()))}dispose(){B(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,s=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(s=!0)):s=t=!0,t||s){try{r.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&s&&this.vScroll.resize(e)}finally{r.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let o;(o=this.corner_)==null||o.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let o;(o=this.corner_)==null||o.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,s){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(s||s===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},v_=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,s=0;return e&&(t=e.getWidth(),s=e.getHeight()),new Te(t,s)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const s=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),u=!!this.workspace_.getToolbox();var h;const E=!((h=this.workspace_.getFlyout())!=null&&h.autoClose);h=u?s.position:o.position;const v=h===Ze.TOP;return h===Ze.LEFT&&(u&&(e+=s.width),E&&(e+=o.width)),v&&(u&&(t+=s.height),E&&(t+=o.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),s=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),u=!!this.workspace_.getToolbox();var h;const E=!((h=this.workspace_.getFlyout())!=null&&h.autoClose);h=u?s.position:o.position;const v=h===Ze.LEFT||h===Ze.RIGHT;return(h===Ze.TOP||h===Ze.BOTTOM)&&(u&&(t.height-=s.height),E&&(t.height-=o.height)),v&&(u&&(t.width-=s.width),E&&(t.width-=o.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),s=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const o={};return s||(o.top=e.top,o.bottom=e.top+e.height),t||(o.left=e.left,o.right=e.left+e.width),o}getPaddedContent_(e,t){const s=t.top+t.height,o=t.left+t.width,u=e.width;e=e.height;const h=u/2,E=e/2;return{top:Math.min(t.top-E,s-e),bottom:Math.max(s+E,t.top+e),left:Math.min(t.left-h,o-u),right:Math.max(o+h,t.left+u)}}getScrollMetrics(e,t,s){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var o=s||this.getContentMetrics();s=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,o),o=s.top!==void 0?s.top:t.top;const u=s.left!==void 0?s.left:t.left;return{top:o/e,left:u/e,width:((s.right!==void 0?s.right:t.right)-u)/e,height:((s.bottom!==void 0?s.bottom:t.bottom)-o)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),s=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),u=this.getViewMetrics(),h=this.getContentMetrics(),E=this.getScrollMetrics(!1,u,h);return{contentHeight:h.height,contentWidth:h.width,contentTop:h.top,contentLeft:h.left,scrollHeight:E.height,scrollWidth:E.width,scrollTop:E.top,scrollLeft:E.left,viewHeight:u.height,viewWidth:u.width,viewTop:u.top,viewLeft:u.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:s.height,svgWidth:s.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};p(ce.METRICS_MANAGER,Ri,v_),"Blockly"in globalThis||(globalThis.Blockly={Msg:wh});var Yg=class extends Sp{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&B(this.selectedGlowFilter),this.replacementGlowFilter&&B(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,s=gs("c",[He(25,-e),He(71,-e),He(t,0)]);return{height:e,width:t,path:s}}makeHexagonal(){function e(s,o,u){var h=s/2;return h=h>t?t:h,u=u?-1:1,s=(o?-1:1)*s/2,yn(-u*h,s)+yn(u*h,s)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(s){return s/=2,s>t?t:s},height(s){return s},connectionOffsetY(s){return s/2},connectionOffsetX(s){return-s},pathDown(s){return e(s,!1,!1)},pathUp(s){return e(s,!0,!1)},pathRightDown(s){return e(s,!1,!0)},pathRightUp(s){return e(s,!1,!0)}}}makeRounded(){function e(o,u,h){const E=o>s?o-s:0;o=(o>s?s:o)/2;const v=h===u?"0":"1";return Nt("a","0 0,"+v,o,He((h?1:-1)*o,(u?-1:1)*o))+ve("v",(u?-1:1)*E)+Nt("a","0 0,"+v,o,He((h?-1:1)*o,(u?-1:1)*o))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,s=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width(o){return o/=2,o>t?t:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeSquared(){function e(s,o,u){s-=2*t;const h=u===o?"0":"1";return Nt("a","0 0,"+h,t,He((u?1:-1)*t,(o?-1:1)*t))+ve("v",(o?-1:1)*s)+Nt("a","0 0,"+h,t,He((u?-1:1)*t,(o?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(s){return t},height(s){return s},connectionOffsetY(s){return s/2},connectionOffsetX(s){return-s},pathDown(s){return e(s,!1,!1)},pathUp(s){return e(s,!0,!1)},pathRightDown(s){return e(s,!1,!0)},pathRightUp(s){return e(s,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case xe.INPUT_VALUE:case xe.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case xe.PREVIOUS_STATEMENT:case xe.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(Me){return gs("c",[He(Me*u/2,0),He(Me*u*3/4,E/2),He(Me*u,E)])+Sl([He(Me*u,h)])+gs("c",[He(Me*u/4,E/2),He(Me*u/2,E),He(Me*u,E)])+ve("h",Me*o)+gs("c",[He(Me*u/2,0),He(Me*u*3/4,-(E/2)),He(Me*u,-E)])+Sl([He(Me*u,-h)])+gs("c",[He(Me*u/4,-(E/2)),He(Me*u/2,-E),He(Me*u,-E)])}const t=this.NOTCH_WIDTH,s=this.NOTCH_HEIGHT,o=t/3,u=o/3,h=s/2,E=h/2,v=e(1),se=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:s,pathLeft:v,pathRight:se}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Nt("a","0 0,0",e,He(-e,e)),s=Nt("a","0 0,1",e,He(-e,e)),o=Nt("a","0 0,0",e,He(e,e)),u=Nt("a","0 0,1",e,He(e,e));return{width:e,height:e,pathTop:t,pathBottom:o,rightWidth:e,rightHeight:e,pathTopRight:s,pathBottomRight:u}}generateSecondaryColour_(e){return Gn("#000",e,.15)||e}generateTertiaryColour_(e){return Gn("#000",e,.25)||e}createDom(e,t,s){super.createDom(e,t,s),e=K(F.DEFS,{},e),t=K(F.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),K(F.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),s=K(F.FECOMPONENTTRANSFER,{result:"outBlur"},t),K(F.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},s),K(F.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),K(F.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=K(F.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),K(F.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=K(F.FECOMPONENTTRANSFER,{result:"outBlur"},e),K(F.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),K(F.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),K(F.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),K(F.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},jg=class extends Op{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(N.isSpacer(e)){const o=e.precedesStatement;var t=e.followsStatement;if(o||t){const u=this.constants_.INSIDE_CORNERS;var s=u.rightHeight;s=e.height-(o?s:0),t=t?u.pathBottomRight:"",e=0<s?ve("V",e.yPos+s):"",this.outlinePath_+=t+e+(o?u.pathTopRight:"");return}}this.outlinePath_+=ve("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=wt(e.xPos,this.info_.startY),this.outlinePath_+=ve("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=ve("V",e.baseline),this.outlinePath_+=ve("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=cs(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-2*e.connectionWidth,s=e.height;return ve("h",t)+e.shape.pathRightDown(s)+ve("h",-t)+e.shape.pathUp(s)+"z"}drawStatementInput_(e){var t=e.getLastInput();const s=t.xPos+t.notchOffset+t.shape.width,o=this.constants_.INSIDE_CORNERS,u=t.shape.pathRight+ve("h",-(t.notchOffset-o.width))+o.pathTop,h=e.height-2*o.height;t=o.pathBottom+ve("h",t.notchOffset-o.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=ve("H",s)+u+ve("v",h)+t+ve("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===xe.NEXT_STATEMENT||t.type===xe.PREVIOUS_STATEMENT||t.type===xe.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=t.type===xe.INPUT_VALUE?cs(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):cs(e.width,-e.height/2)+e.shape.pathDown(e.height);var s=t.getSourceBlock(),o,u;(u=(o=s.pathObject).addConnectionHighlight)==null||u.call(o,t,e,t.getOffsetInBlock(),s.RTL)}}},rh=class extends c{constructor(e,t,s,o,u,h,E){if(super(c.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",s=Number(At(s)),t=Number(At(t)),isNaN(s)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=s||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Te(t,s+rh.Y_PADDING),this.imageHeight=s,typeof u=="function"&&(this.clickHandler=u),e!==c.SKIP_SETUP&&(E?this.configure_(E):(this.flipRtl=!!h,this.altText=At(o)||""),this.setValue(At(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=At(e.alt))}initView(){this.imageElement=K(F.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(oi,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(oi,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};rh.Y_PADDING=1,sn("field_image",rh),rh.prototype.DEFAULT_VALUE="";var wp=class extends c{constructor(e,t,s){super(c.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==c.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new d;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new d;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&nt()&&this.value_!==e&&t&&Oe(new(ee(z.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new d;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.style.colourTertiary)):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(b(e,"blocklyInvalidInput"),Ms(e,Is.INVALID,!1)):(ye(e,"blocklyInvalidInput"),Ms(e,Is.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new d;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(Rh||Pa||xa)?this.showPromptEditor():this.showInlineEditor(t)}showPromptEditor(){Rr(r.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e){const t=this.getSourceBlock();if(!t)throw new d;Eo(this,t.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new d;r.setGroup$$module$build$src$core$events$utils(!0);const t=er();var s=this.getClickTarget_();if(!s)throw Error("A click target has not been set.");ye(s,"editing"),s=document.createElement("input"),s.className="blocklyHtmlInput",s.setAttribute("spellcheck",this.spellcheck_);const o=this.workspace_.getScale();var u=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";return t.style.fontSize=u,s.style.fontSize=u,u=wp.BORDERRADIUS*o+"px",this.isFullBlockField()&&(u=this.getScaledBBox(),u=(u.bottom-u.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,s.style.border=1*o+"px solid "+e,t.style.borderRadius=u,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*o+"px")),s.style.borderRadius=u,t.appendChild(s),s.value=s.defaultValue=this.getEditorText_(this.value_),s.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(s),s}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&nt()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(Oe(new(ee(z.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),r.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=er().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");b(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=Ue(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=Ue(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(Ot(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(Ot(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(ji(this),Wi()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),ji(this),Wi()):e.key==="Tab"&&(ji(this),Wi(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&nt()&&this.value_!==e&&Oe(new(ee(z.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){jt().then(()=>{const e=this.getSourceBlock();if(!e)throw new d;const t=er(),s=this.getScaledBBox();t.style.width=s.right-s.left+"px",t.style.height=s.bottom-s.top+"px";const o=s.top;t.style.left=`${e.RTL?s.right-t.offsetWidth:s.left}px`,t.style.top=`${o}px`})}repositionForWindowResize(){let e;const t=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return t instanceof Er?(Os(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};wp.BORDERRADIUS=4;var Np=class extends wp{constructor(e,t,s){super(e,t,s)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(At(e.text),void 0,e)}};sn("field_input",Np),Np.prototype.DEFAULT_VALUE="";var Kg=class extends r_{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Mp=class extends xd{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},Jg=class extends Ul{constructor(e){super(e),this.width=this.height=0,this.type|=N.getType("RIGHT_CONNECTION")}},qg=class extends h_{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Qg=class extends Ud{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new qg(this.constants_),this.bottomRow=new Kg(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new Jg(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof Ju||e instanceof Po||t instanceof Po?!0:e instanceof r.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Hl||e instanceof Ju?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&N.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&N.isLeftRoundedCorner(e)&&t&&(N.isPreviousConnection(t)||N.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&N.isLeftSquareCorner(e)&&t&&N.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(N.isTopRow(e)&&N.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const s=N.isInputRow(e)&&e.hasStatement,o=N.isInputRow(t)&&t.hasStatement;return o||s?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&s?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):N.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):N.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const s=this.width-this.startX;return N.isInputRow(e)&&e.hasStatement||N.isInputRow(t)&&t.hasStatement?Math.max(s,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):s}getElemCenterline_(e,t){if(e.hasStatement&&!N.isSpacer(t)&&!N.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(N.isInlineInput(t)&&t instanceof Yc){const s=t.connectedBlock;if(s&&s.outputConnection&&s.nextConnection)return e.yPos+s.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof Hl||e instanceof Ju)&&t.hasDummyInput&&t.align===r.Align$$module$build$src$core$inputs$align.LEFT&&e.align===r.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof Po){t.elements.push(new Mp(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let s;for(let o=0;o<e.elements.length;o++){const u=e.elements[o];if(N.isSpacer(u)&&(s=u),N.isField(u)&&u instanceof Uh&&u.parentInput===this.rightAlignedDummyInputs.get(e))break}if(s){s.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let u=2;u<this.rows.length-1;u+=2){var s=this.rows[u-1];const h=this.rows[u];var o=this.rows[u+1];if(s=u===2?!!this.topRow.hasPreviousConnection:!!s.followsStatement,o=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement,N.isInputRow(h)&&h.hasStatement){h.measure();let E,v;t=h.width-((v=(E=h.getLastInput())==null?void 0:E.width)!=null?v:0)+e}else if(s&&(u===2||o)&&N.isInputRow(h)&&!h.hasStatement){o=h.xPos,s=null;for(let E=0;E<h.elements.length;E++){const v=h.elements[E];N.isSpacer(v)&&(s=v),s&&(N.isField(v)||N.isInput(v))&&o<t&&!(N.isField(v)&&v instanceof Uh&&(v.field instanceof nh||v.field instanceof rh))&&(s.width+=t-o),o+=v.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,s=0;s<this.rows.length;s++){const o=this.rows[s];o.yPos=t,t+=o.height}this.height=t,s=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(s),s=e.width(s),this.outputConnection.height=t,this.outputConnection.width=s,this.outputConnection.startX=s,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(s),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=s,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=s,this.width+=s+e,this.widthWithChildren+=s+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var s=this.rows[t];if(!N.isInputRow(s))continue;e=s.elements[s.elements.length-2];let o=this.getNegativeSpacing_(s.elements[1]),u=this.getNegativeSpacing_(e);e=o+u;const h=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<h&&(e=this.width-h,o=e/2,u=e/2),s.elements.unshift(new Do(this.constants_,-o)),s.elements.push(new Do(this.constants_,-u))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)s=this.rows[t],N.isTopOrBottomRow(s)&&(s.elements[1].width-=e),s.width-=e,s.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var s=this.outputConnection.shape.type;const o=this.constants_;if(1<this.inputRows.length)switch(s){case o.SHAPES.ROUND:return s=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,s=this.height/2>s?s:this.height/2,t-s*(1-Math.sin(Math.acos((s-this.constants_.SMALL_PADDING)/s)));default:return 0}if(N.isInlineInput(e)&&e instanceof Yc){const u=e.connectedBlock;return e=u?u.pathObject.outputShapeType:e.shape.type,e==null||u&&u.outputConnection&&(u.statementInputCount||u.nextConnection)||s===o.SHAPES.HEXAGONAL&&s!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[s][e]}return N.isField(e)&&e instanceof Uh?s===o.SHAPES.ROUND&&e.field instanceof Np?t-2.75*o.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[s][0]:N.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let o=2;o<this.rows.length-1;o+=2){const u=this.rows[o-1],h=this.rows[o],E=this.rows[o+1];var e=o===2,t=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!E.precedesStatement;if(e?this.topRow.hasPreviousConnection:u.followsStatement){var s=h.elements[1];if(s=h.elements.length===3&&s instanceof Uh&&(s.field instanceof nh||s.field instanceof rh),!e&&s)u.height-=this.constants_.SMALL_PADDING,E.height-=this.constants_.SMALL_PADDING,h.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)u.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<h.elements.length;t++)if(s=h.elements[t],s instanceof Yc&&N.isInlineInput(s)&&s.connectedBlock&&!s.connectedBlock.isShadow()&&40<=s.connectedBlock.getHeightWidth().height){e=!0;break}e&&(u.height-=this.constants_.SMALL_PADDING,E.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},Zg=class extends __{constructor(e,t,s){super(e,t,s),this.markerCircle=null}showWithInputOutput(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const t=e.getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,t){let s;(s=this.markerCircle)==null||s.setAttribute("cx",`${e}`);let o;(o=this.markerCircle)==null||o.setAttribute("cy",`${t}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=K(F.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();K(F.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let t;(t=this.markerCircle)==null||t.setAttribute("fill",this.colour_);let s;if((s=this.markerCircle)==null||s.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let o;(o=this.markerCircle)==null||o.firstElementChild.setAttribute("values",e)}}},e$=class extends Rp{constructor(e,t,s){super(e,t,s),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=s}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const s of this.outlines.values())s.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,K(F.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,s;(t=this.outlines.get(e))==null||(s=t.parentNode)==null||s.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},L_=class extends Cp{constructor(e){super(e)}makeConstants_(){return new Yg}makeRenderInfo_(e){return new Qg(this,e)}makeDrawer_(e,t){return new jg(e,t)}makeMarkerDrawer(e,t){return new Zg(e,this.getConstants(),t)}makePathObject(e,t){return new e$(e,t,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,t,s){return q("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===xe.OUTPUT_VALUE?e.isConnected()?mr.PREVIEW_TYPE.REPLACEMENT_FADE:mr.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,s)}};gt("zelos",L_);var t$=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,s){r.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=s,s.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{r.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){r.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{r.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===xe.PREVIOUS_STATEMENT||t.type===xe.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof L_)}previewMarker(e,t){const s=e.getSourceBlock(),o=this.createInsertionMarker(s),u=this.getMatchingConnection(s,o,e);if(!u)return null;o.queueRender(),Us(),u.connect(t);const h={x:t.x-u.x,y:t.y-u.y},E=u.getOffsetInBlock().clone();return jt().then(()=>{if(!o.isDeadOrDying()){r.disable$$module$build$src$core$events$utils();try{o==null||o.positionNearConnection(u,h,E),o==null||o.getSvgRoot().setAttribute("visibility","visible")}finally{r.enable$$module$build$src$core$events$utils()}}}),u}createInsertionMarker(e){const t=Js(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=_i(t,this.workspace);for(const s of e.getDescendants(!1))s.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,s){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let o=0;o<e.length;o++)if(e[o]===s)return t[o];return null}hidePreview(){r.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{r.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),s=t.outputConnection;let o;if((o=t.previousConnection)!=null&&o.targetConnection||s!=null&&s.targetConnection)t.unplug(!0);else{let u;(u=e.targetBlock())==null||u.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};p(ce.CONNECTION_PREVIEWER,Ri,t$);var qc={};qc.Align=r.Align$$module$build$src$core$inputs$align,qc.DummyInput=Hl,qc.EndRowInput=Ju,qc.Input=Hh,qc.StatementInput=Po,qc.ValueInput=r.ValueInput$$module$build$src$core$inputs$value_input,qc.inputTypes=r.inputTypes$$module$build$src$core$inputs$input_types;var s$=!1,n$;r.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=Ye());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let s=0,o;o=e[s];s++){let u=this.blockToCode(o);Array.isArray(u)&&(u=u[0]),u&&(o.outputConnection&&(u=this.scrubNakedValue(u),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,o)+u),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,o))),t.push(u))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let s=0;s<e.length;s++){const o=e[s].getCommentText();o&&t.push(o)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var s=this.forBlock[e.type];if(typeof s!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(s=s.call(e,e,this),Array.isArray(s)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,s[0],t),s[1]]}if(typeof s=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(s=this.injectId(this.STATEMENT_PREFIX,e)+s),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(s+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,s,t);if(s===null)return"";throw SyntaxError("Invalid code generated: "+s)}valueToCode(e,t,s){if(isNaN(s))throw TypeError("Expecting valid order from block: "+e.type);var o=e.getInputTargetBlock(t);if(!o&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!o||(t=this.blockToCode(o),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${o.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+o.type);if(!e)return"";o=!1;var u=Math.floor(s);const h=Math.floor(t);if(u<=h&&(u!==h||u!==0&&u!==99)){for(o=!0,u=0;u<this.ORDER_OVERRIDES.length;u++)if(this.ORDER_OVERRIDES[u][0]===s&&this.ORDER_OVERRIDES[u][1]===t){o=!1;break}}return o&&(e="("+e+")"),e}statementToCode(e,t){const s=e.getInputTargetBlock(t);if(!s&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(s),typeof e!="string")throw TypeError("Expecting code from statement block: "+(s&&s.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const s=this.nameDB_.getDistinctName(e,r.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=s,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,s);let o;for(;o!==t;)o=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,r.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,r.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,s){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},n$={},n$.CodeGenerator=r.CodeGenerator$$module$build$src$core$generator;var i$=class extends v_{constructor(e,t){super(e),this.flyout_=t}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,s){return t=s||this.getContentMetrics(),s=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*s)/e,width:(t.width+t.left+s)/e,top:0,left:0}}},zh;(function(e){e.BLOCK="block",e.BUTTON="button"})(zh||(zh={}));var am="WORKSPACE_AT_BLOCK_CAPACITY",Dp=class extends vp{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Tr(e),this.workspace_.setMetricsManager(new i$(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=ie(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=K(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=K(F.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new y_(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ue(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Ue(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:ns.ComponentWeight.FLYOUT_WEIGHT,capabilities:[ns.Capability.AUTOHIDEABLE,ns.Capability.DELETE_AREA,ns.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)Ot(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&B(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const t=e!==this.isVisible();this.visible=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,s,o){let u;(u=this.svgGroup_)==null||u.setAttribute("width",`${e}`);let h;(h=this.svgGroup_)==null||h.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&kt(this.svgGroup_,"translate("+s+"px,"+o+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(s,o),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)Ot(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Ks(e),e=this.createFlyoutInfo(e),Us(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const t=[],s=[];this.permanentlyDisabled.length=0;const o=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const u of e){if("custom"in u){e=this.getDynamicCategoryContents(u.custom),e=Ks(e);const{contents:h,gaps:E}=this.createFlyoutInfo(e);t.push(...h),s.push(...E)}switch(u.kind.toUpperCase()){case"BLOCK":e=u;const h=this.createFlyoutBlock(e);t.push({type:zh.BLOCK,block:h}),this.addBlockGap(e,s,o);break;case"SEP":this.addSeparatorGap(u,s,o);break;case"LABEL":e=this.createButton(u,!0),t.push({type:zh.BUTTON,button:e}),s.push(o);break;case"BUTTON":e=this.createButton(u,!1),t.push({type:zh.BUTTON,button:e}),s.push(o)}}return{contents:t,gaps:s}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,t){return new fr(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock(e){let t;return e.blockxml?(e=typeof e.blockxml=="string"?r.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(t=this.getRecycledBlock(e.getAttribute("type")))||(t=Ti(e,this.workspace_))):(t=this.getRecycledBlock(e.type),t||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[Tn]),t=Hs(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled.push(t),t}getRecycledBlock(e){let t=-1;for(let s=0;s<this.recycledBlocks.length;s++)if(this.recycledBlocks[s].type===e){t=s;break}return t===-1?void 0:this.recycledBlocks.splice(t,1)[0]}addBlockGap(e,t,s){let o;e.gap?o=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?r.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,o=parseInt(e.getAttribute("gap"))),t.push(!o||isNaN(o)?s:o)}addSeparatorGap(e,t,s){e=parseInt(String(e.gap)),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(s)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let s=0,o;o=e[s];s++)this.blockIsRecyclable_(o)?this.recycleBlock(o):o.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const s=this.mats[e];s&&(Tc(s),B(s))}this.mats.length=0;for(let s=0,o;o=this.buttons_[s];s++)o.dispose();this.buttons_.length=0;let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks.push(e)}addBlockListeners_(e,t,s){this.listeners.push(Ue(e,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(Ue(s,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(Tt(e,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(Tt(e,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()})),this.listeners.push(Tt(s,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(Tt(s,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()}))}blockMouseDown(e){return t=>{const s=this.targetWorkspace.getGesture(t);s&&(s.setStartBlock(e),s.handleFlyoutStart(t,this))}}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;r.disable$$module$build$src$core$events$utils();var s=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{r.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Wo(this.targetWorkspace,s),nt()){for(r.setGroup$$module$build$src$core$events$utils(!0),s=0;s<e.length;s++){const o=e[s];Oe(new(ee(z.VAR_CREATE))(o))}Oe(new(ee(z.BLOCK_CREATE))(t))}return this.autoClose?this.hide():this.filterForCapacity(),t}initFlyoutButton_(e,t,s){const o=e.createDom();e.moveTo(t,s),e.show(),this.listeners.push(Ue(o,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,t,s,o,u){return t=K(F.RECT,{"fill-opacity":0,x:t,y:s,height:o.height,width:o.width}),t.tooltip=e,pl(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats[u]=t}moveRectToBlock_(e,t){const s=t.getHeightWidth();e.setAttribute("width",String(s.width)),e.setAttribute("height",String(s.height)),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",String(t.y)),e.setAttribute("x",String(this.RTL?t.x-s.width:t.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let t=0,s;s=e[t];t++)if(!this.permanentlyDisabled.includes(s)){const o=this.targetWorkspace.isCapacityAvailable(ds(s));for(;s;)s.setDisabledReason(!o,am),s=s.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const s=this.serializeBlock(e);return t.setResizesEnabled(!1),t=_i(s,t),this.positionNewBlock(e,t),t}serializeBlock(e){return Js(e)}positionNewBlock(e,t){const s=this.targetWorkspace;var o=s.getOriginOffsetInPixels(),u=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),u=Ee.sum(u,e),o=Ee.difference(u,o),o.scale(1/s.scale),t.moveTo(new Ee(o.x,o.y))}};Dp.FlyoutItemType=zh;var k_=class extends Dp{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),s=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(s.top+(s.height-o.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),s=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Ze.LEFT?e.width:s.width-this.width_:this.toolboxPosition_===Ze.LEFT?0:s.width:this.toolboxPosition_===Ze.LEFT?0:s.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const s=this.toolboxPosition_===Ze.RIGHT;var o=e+this.CORNER_RADIUS;o=["M "+(s?o:0)+",0"],o.push("h",s?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,s?0:1,s?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,t)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,s?0:1,s?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",s?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=Yn(e);if(t.y){const s=this.workspace_.getMetricsManager(),o=s.getScrollMetrics();t=s.getViewMetrics().top-o.top+t.y;let u;(u=this.workspace_.scrollbar)==null||u.setY(t),$i(this.workspace_),Wi()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var s=this.MARGIN;const o=this.RTL?s:s+this.tabWidth_;for(let v=0,se;se=e[v];v++)if(se.type==="block"){var u=se.block;if(!u)continue;var h=u.getDescendants(!1);for(let hs=0,us;us=h[hs];hs++)us.isInFlyout=!0;h=u.getSvgRoot();const Me=u.getHeightWidth();var E=u.outputConnection?o-this.tabWidth_:o;u.moveBy(E,s),E=this.createRect_(u,this.RTL?E-Me.width:E,s,Me,v),this.addBlockListeners_(h,u,E),s+=Me.height+t[v]}else se.type==="button"&&(u=se.button,this.initFlyoutButton_(u,o,s),s+=u.height+t[v])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===Ze.LEFT?new zt(-1e9,1e9,-1e9,t+e.width):new zt(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let o=0,u;u=t[o];o++){var s=u.getHeightWidth().width;u.outputConnection&&(s-=this.tabWidth_),e=Math.max(e,s)}for(let o=0,u;u=this.buttons_[o];o++)e=Math.max(e,u.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=$s.scrollbarThickness,this.width_!==e){for(let o=0,u;u=t[o];o++){if(this.RTL){s=u.getRelativeToSurfaceXY().x;let h=e/this.workspace_.scale-this.MARGIN;u.outputConnection||(h-=this.tabWidth_),u.moveBy(h-s,0)}this.rectMap_.has(u)&&this.moveRectToBlock_(this.rectMap_.get(u),u)}if(this.RTL)for(let o=0,u;u=this.buttons_[o];o++)t=u.getPosition().y,u.moveTo(e/this.workspace_.scale-u.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Ze.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};k_.registryName="verticalFlyout",p(ce.FLYOUTS_VERTICAL_TOOLBOX,Ri,k_);var o$=class extends Dp{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),s=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(s.left+(s.width-o.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),s=e.getViewMetrics();e=e.getToolboxMetrics();const o=this.toolboxPosition_===Ze.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?o?e.height:s.height-this.height_:o?0:s.height:o?0:s.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const s=this.toolboxPosition_===Ze.TOP,o=["M 0,"+(s?0:this.CORNER_RADIUS)];s?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=Yn(e);if(t=t.x||t.y){const s=this.workspace_.getMetricsManager(),o=s.getScrollMetrics();t=s.getViewMetrics().left-o.left+t;let u;(u=this.workspace_.scrollbar)==null||u.setX(t),$i(this.workspace_),Wi()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const s=this.MARGIN;let o=s+this.tabWidth_;this.RTL&&(e=e.reverse());for(let v=0,se;se=e[v];v++)if(se.type==="block"){var u=se.block;if(u==null)continue;var h=u.getDescendants(!1);for(let hs=0,us;us=h[hs];hs++)us.isInFlyout=!0;h=u.getSvgRoot();const Me=u.getHeightWidth();var E=u.outputConnection?this.tabWidth_:0;E=this.RTL?o+Me.width:o-E,u.moveBy(E,s),E=this.createRect_(u,E,s,Me,v),o+=Me.width+t[v],this.addBlockListeners_(h,u,E)}else se.type==="button"&&(u=se.button,this.initFlyoutButton_(u,o,s),o+=u.width+t[v])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===Ze.TOP?new zt(-1e9,t+e.height,-1e9,1e9):new zt(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let o=0,u;u=t[o];o++)e=Math.max(e,u.getHeightWidth().height);const s=this.buttons_;for(let o=0,u;u=s[o];o++)e=Math.max(e,u.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=$s.scrollbarThickness,this.height_!==e){for(let o=0,u;u=t[o];o++)this.rectMap_.has(u)&&this.moveRectToBlock_(this.rectMap_.get(u),u);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Ze.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};p(ce.FLYOUTS_HORIZONTAL_TOOLBOX,Ri,o$);var Wd=class extends io{constructor(e,t,s,o,u){super(c.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Wd.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new Te(0,0),e!==c.SKIP_SETUP&&(u?this.configure_(u):this.setTypes(s,o),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new d;this.variable||(e=r.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new d;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new d;const s=e.getAttribute("id"),o=e.textContent,u=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=r.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,s,o,u),u!==null&&u!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+gn(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var t=this.saveLegacyState(Wd);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.name,t.type=this.variable.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new d;this.loadLegacyState(Wd,e)||(e=r.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new d;return t=r.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.type,this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new d;this.variable=r.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let s=0;s<t.length;s++)if(e===t[s])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,t=""){if(Array.isArray(e)){let s=!1;for(let o=0;o<e.length;o++)e[o]===t&&(s=!0);if(!s)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===$_){r.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===f_){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(At(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var s=this.getVariableTypes(),o=0;o<s.length;o++){const u=this.sourceBlock_.workspace.getVariablesOfType(s[o]);t=t.concat(u)}for(t.sort(Hc.compareByName),s=[],o=0;o<t.length;o++)s[o]=[t[o].name,t[o].getId()];return s.push([r.Msg$$module$build$src$core$msg.RENAME_VARIABLE,$_]),r.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&s.push([r.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),f_]),s}};sn("field_variable",Wd);var A_=class extends wp{constructor(e,t,s,o,u,h){super(c.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==c.SKIP_SETUP&&(h?this.configure_(h):this.setConstraints(t,s,o),this.setValue(e),u&&this.setValidator(u))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,s){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(s),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const s=t.indexOf(".");this.decimalPlaces=s===-1?e?0:null:t.length-s-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,Ms(e,Is.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,Ms(e,Is.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};sn("field_number",A_),A_.prototype.DEFAULT_VALUE=0;var r$=class extends nh{constructor(e,t,s){super(String(e??""),t,s),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(At(e.text),void 0,e)}};sn("field_label_serializable",r$);var lh=class extends c{constructor(e,t,s){super(c.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=lh.CHECK_CHAR,e!==c.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(lh);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();ye(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||lh.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};lh.CHECK_CHAR="✓",sn("field_checkbox",lh),lh.prototype.DEFAULT_VALUE=!1;var l$=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),Xt(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let s;(s=this.dragTarget)==null||s.onDragExit(t),e==null||e.onDragEnter(t)}e==null||e.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=Ee.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,ns.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=r.getGroup$$module$build$src$core$events$utils();var s=this.workspace.getDragTarget(e);const o=this.getRoot(this.draggable);if(s){let u;(u=this.dragTarget)==null||u.onDrop(o)}this.shouldReturnToStart(e,o)&&this.draggable.revertDrag(),(s=Xt(o)&&this.wouldDeleteDraggable(e,o))&&this.draggable instanceof Er&&Vn(this.draggable.getRootBlock()),this.draggable.endDrag(e),s&&Xt(o)&&(e=r.getGroup$$module$build$src$core$events$utils(),r.setGroup$$module$build$src$core$events$utils(t),o.dispose(),r.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof Er?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new Ee(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};p(ce.BLOCK_DRAGGER,Ri,l$);var Xd={};Xd.BlockDragStrategy=Pg,Xd.BubbleDragStrategy=mg,Xd.CommentDragStrategy=je,Xd.Dragger=l$;var w_=class extends to{constructor(e,t,s){super(e?e.workspace.id:void 0),this.type=z.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=t,this.blocks=s)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new w_),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};p(ce.EVENT,z.BLOCK_DRAG,w_);var N_=class extends no{constructor(e,t,s,o){super(e),this.type=z.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=t,this.oldValue=s,this.newValue=o)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new N_),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};p(ce.EVENT,z.BLOCK_FIELD_INTERMEDIATE_CHANGE,N_);var M_=class extends no{constructor(e){super(e),this.type=z.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new M_),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(s=e.oldCoordinate.split(","),t.oldCoordinate=new Ee(Number(s[0]),Number(s[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(s=e.newCoordinate.split(","),t.newCoordinate=new Ee(Number(s[0]),Number(s[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const s=t.getParent();return s?(e.parentId=s.id,(t=s.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Ee.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var s=t.getBlockById(this.blockId);if(s){var o=e?this.newParentId:this.oldParentId,u=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,o){var h=t.getBlockById(o);if(!h){console.warn("Can't connect to non-existent block: "+o);return}}if(s.getParent()&&s.unplug(),e)u=s.getRelativeToSurfaceXY(),s.moveBy(e.x-u.x,e.y-u.y,this.reason);else{t=s.outputConnection,(!t||s.previousConnection&&s.previousConnection.isConnected())&&(t=s.previousConnection);let E,v;s=(v=t)==null?void 0:v.type,u?(s=h.getInput(u))&&(E=s.connection):s===xe.PREVIOUS_STATEMENT&&(E=h.nextConnection),E&&t?t.connect(E):console.warn("Can't connect to non-existent input: "+u)}}else console.warn("Can't move non-existent block: "+this.blockId)}};p(ce.EVENT,z.BLOCK_MOVE,M_);var D_=class extends to{constructor(e,t,s){super(e?e.workspace.id:void 0),this.type=z.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=s)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new D_),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},P_;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(P_||(P_={})),p(ce.EVENT,z.BUBBLE_OPEN,D_);var Wl=class extends yu{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=r.getGroup$$module$build$src$core$events$utils(),this.recordUndo=at())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new Wl),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const s=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");po(e.json,s)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=s.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},x_=class extends Wl{constructor(e,t,s){super(e),this.type=z.COMMENT_CHANGE,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof s>"u"?"":s)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new x_),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var s=e?this.newContents_:this.oldContents_;if(s===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(s)}else console.warn("Can't change non-existent comment: "+this.commentId)}};p(ce.EVENT,z.COMMENT_CHANGE,x_);var B_=class extends Wl{constructor(e,t){super(e),this.newCollapsed=t,this.type=z.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new B_),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};p(ce.EVENT,z.COMMENT_COLLAPSE,B_);var F_=class extends Wl{constructor(e){super(e),this.type=z.COMMENT_CREATE,e&&(this.xml=ir(e),this.json=Bo(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=gn(this.xml),e.json=this.json,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new F_),t.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){Wl.CommentCreateDeleteHelper(this,e)}};p(ce.EVENT,z.COMMENT_CREATE,F_);var U_=class extends Wl{constructor(e){super(e),this.type=z.COMMENT_DELETE,e&&(this.xml=ir(e),this.json=Bo(e,{addCoordinates:!0}))}run(e){Wl.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=gn(this.xml),e.json=this.json,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new U_),t.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};p(ce.EVENT,z.COMMENT_DELETE,U_);var H_=class extends to{constructor(e,t){super(e?e.workspace.id:void 0),this.type=z.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=t)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new H_),t.isStart=e.isStart,t.commentId=e.commentId,t}};p(ce.EVENT,z.COMMENT_DRAG,H_);var G_=class extends Wl{constructor(e){super(e),this.type=z.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new G_),s=e.oldCoordinate.split(","),t.oldCoordinate_=new Ee(Number(s[0]),Number(s[1])),s=e.newCoordinate.split(","),t.newCoordinate_=new Ee(Number(s[0]),Number(s[1])),t}isNull(){return Ee.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};p(ce.EVENT,z.COMMENT_MOVE,G_);var V_=class extends Wl{constructor(e){super(e),this.type=z.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new V_),t.oldSize=new Te(e.oldWidth,e.oldHeight),t.newSize=new Te(e.newWidth,e.newHeight),t}isNull(){return Te.equals(this.oldSize,this.newSize)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");t.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};p(ce.EVENT,z.COMMENT_RESIZE,V_);var W_=class extends to{constructor(e,t,s){super(s),this.type=z.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,s){return t=super.fromJson(e,t,s??new W_),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};p(ce.EVENT,z.TOOLBOX_ITEM_SELECT,W_);var u$=class extends yu{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=z.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};p(ce.EVENT,z.FINISHED_LOADING,u$);var c$,a$,h$,d$,p$,_$,g$,$$,f$,m$,T$,E$,I$,b$,S$,O$,R$,C$,y$,v$,L$,k$,A$,w$,N$,we;r.BLOCK_CHANGE$$module$build$src$core$events$events=z.BLOCK_CHANGE,r.BLOCK_CREATE$$module$build$src$core$events$events=z.BLOCK_CREATE,r.BLOCK_DELETE$$module$build$src$core$events$events=z.BLOCK_DELETE,c$=z.BLOCK_DRAG,r.BLOCK_MOVE$$module$build$src$core$events$events=z.BLOCK_MOVE,a$=z.BLOCK_FIELD_INTERMEDIATE_CHANGE,h$=z.BUBBLE_OPEN,d$=z.BLOCK_CHANGE,p$=z.CLICK,_$=z.COMMENT_CHANGE,g$=z.COMMENT_CREATE,$$=z.COMMENT_DELETE,f$=z.COMMENT_MOVE,m$=z.COMMENT_RESIZE,T$=z.COMMENT_DRAG,E$=z.BLOCK_CREATE,I$=z.BLOCK_DELETE,b$=z.FINISHED_LOADING,S$=z.MARKER_MOVE,O$=z.BLOCK_MOVE,R$=z.SELECTED,C$=z.THEME_CHANGE,y$=z.TOOLBOX_ITEM_SELECT,v$=z.TRASHCAN_OPEN,L$=z.UI,k$=z.VAR_CREATE,A$=z.VAR_DELETE,w$=z.VAR_RENAME,N$=z.VIEWPORT_CHANGE,we={},we.Abstract=yu,we.BLOCK_CHANGE=r.BLOCK_CHANGE$$module$build$src$core$events$events,we.BLOCK_CREATE=r.BLOCK_CREATE$$module$build$src$core$events$events,we.BLOCK_DELETE=r.BLOCK_DELETE$$module$build$src$core$events$events,we.BLOCK_DRAG=c$,we.BLOCK_FIELD_INTERMEDIATE_CHANGE=a$,we.BLOCK_MOVE=r.BLOCK_MOVE$$module$build$src$core$events$events,we.BUBBLE_OPEN=h$,we.BUMP_EVENTS=od,we.BlockBase=no,we.BlockChange=xl,we.BlockCreate=gr,we.BlockDelete=d_,we.BlockDrag=w_,we.BlockFieldIntermediateChange=N_,we.BlockMove=M_,we.BubbleOpen=D_,we.BubbleType=P_,we.CHANGE=d$,we.CLICK=p$,we.COMMENT_CHANGE=_$,we.COMMENT_CREATE=g$,we.COMMENT_DELETE=$$,we.COMMENT_DRAG=T$,we.COMMENT_MOVE=f$,we.COMMENT_RESIZE=m$,we.CREATE=E$,we.Click=Eh,we.ClickTarget=Ma,we.CommentBase=Wl,we.CommentChange=x_,we.CommentCollapse=B_,we.CommentCreate=F_,we.CommentDelete=U_,we.CommentDrag=H_,we.CommentMove=G_,we.CommentResize=V_,we.DELETE=I$,we.FINISHED_LOADING=b$,we.FinishedLoading=u$,we.MARKER_MOVE=S$,we.MOVE=O$,we.MarkerMove=p_,we.SELECTED=R$,we.Selected=I_,we.THEME_CHANGE=C$,we.TOOLBOX_ITEM_SELECT=y$,we.TRASHCAN_OPEN=v$,we.ThemeChange=e_,we.ToolboxItemSelect=W_,we.TrashcanOpen=S_,we.UI=L$,we.UiBase=to,we.VAR_CREATE=k$,we.VAR_DELETE=A$,we.VAR_RENAME=w$,we.VIEWPORT_CHANGE=N$,we.VarBase=ja,we.VarCreate=pr,we.VarDelete=m_,we.VarRename=T_,we.ViewportChange=t_,we.clearPendingUndo=os,we.disable=r.disable$$module$build$src$core$events$utils,we.disableOrphans=Je,we.enable=r.enable$$module$build$src$core$events$utils,we.filter=fs,we.fire=Oe,we.fromJson=Lt,we.get=ee,we.getDescendantIds=Ft,we.getGroup=r.getGroup$$module$build$src$core$events$utils,we.getRecordUndo=at,we.isEnabled=nt,we.setGroup=r.setGroup$$module$build$src$core$events$utils,we.setRecordUndo=r.setRecordUndo$$module$build$src$core$events$utils;var Qr={};Qr.BottomRow=Kg,Qr.ConstantProvider=Yg,Qr.Drawer=jg,Qr.MarkerSvg=Zg,Qr.PathObject=e$,Qr.RenderInfo=Qg,Qr.Renderer=L_,Qr.RightConnectionShape=Jg,Qr.StatementInput=Mp,Qr.TopRow=qg,$h();var bn={};bn.registerCleanup=Iu,bn.registerCollapse=Hr,bn.registerCollapseExpandBlock=nn,bn.registerComment=Su,bn.registerCommentCreate=Ou,bn.registerCommentDelete=Zi,bn.registerCommentDuplicate=ii,bn.registerCommentOptions=Zh,bn.registerDefaultOptions=$h,bn.registerDelete=Aa,bn.registerDeleteAll=Ws,bn.registerDisable=ka,bn.registerDuplicate=bu,bn.registerExpand=va,bn.registerHelp=wa,bn.registerInline=Qh,bn.registerRedo=vl,bn.registerUndo=es;var Pp={};Pp.CommentView=tt,Pp.RenderedWorkspaceComment=Bs,Pp.WorkspaceComment=st;var zd={};zd.Bubble=qt,zd.MiniWorkspaceBubble=Xu,zd.TextBubble=Og,zd.TextInputBubble=Tg;var M$=class extends Sp{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},D$=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=wt(e.xPos,this.info_.startY);for(let t=0,s;s=e.elements[t];t++)N.isLeftSquareCorner(s)?this.steps_+=this.highlightConstants_.START_POINT:N.isLeftRoundedCorner(s)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):N.isPreviousConnection(s)?this.steps_+=this.notchPaths_.pathLeft:N.isHat(s)?this.steps_+=this.startPaths_.path(this.RTL_):N.isSpacer(s)&&s.width!==0&&(this.steps_+=ve("H",s.xPos+s.width-this.highlightOffset));this.steps_+=ve("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+ve("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const s=e.height-t.connectionHeight;this.steps_+=cs(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+ve("v",s)}else this.steps_+=cs(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const s=e.height-2*this.insideCornerPaths_.height;this.steps_+=cs(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+ve("v",s)+this.insideCornerPaths_.pathBottom(this.RTL_)+yn(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=cs(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+yn(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof a_&&e.followsStatement&&(this.steps_+=ve("H",t)),this.RTL_&&(this.steps_+=ve("H",t),e.height>this.highlightOffset&&(this.steps_+=ve("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=ve("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];N.isLeftSquareCorner(t)?this.steps_+=cs(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):N.isLeftRoundedCorner(t)&&(this.steps_+=cs(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=cs(this.info_.startX,e):(this.steps_+=cs(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=ve("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,N.isLeftRoundedCorner(e.elements[0])?this.steps_+=ve("V",this.outsideCornerPaths_.height):this.steps_+=ve("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,s=e.xPos+e.connectionWidth;var o=e.centerline-e.height/2;const u=e.width-e.connectionWidth,h=o+t;this.RTL_?(o=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=cs(s-t,h)+ve("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+ve("v",e)+ve("h",u)):this.inlineSteps_+=cs(e.xPos+e.width+t,h)+ve("v",e.height)+ve("h",-u)+cs(s,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},P$=class extends Op{constructor(e,t){super(e,t),this.highlighter_=new D$(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=ve("H",e.xPos+e.width)+ve("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let s=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(s*=-1),e.connectionModel.setOffsetInBlock(s,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let s=e.xPos+e.statementEdge+t.notchOffset;s=this.info_.RTL?-1*s:s+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(s,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let s=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(s*=-1),t.connectionModel.setOffsetInBlock(s,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,s=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-s:s)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},x$=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=wt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,s=(1-Math.SQRT1_2)*(e+t)-t,o=wt(s,s)+Nt("a","0 0,0",e,He(-s-t,e-s)),u=Nt("a","0 0,0",e+t,He(e+t,e+t)),h=wt(s,-s)+Nt("a","0 0,0",e+t,He(e-s,s+t));return{width:e+t,height:e,pathTop(E){return E?o:""},pathBottom(E){return E?u:h}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,s=(1-Math.SQRT1_2)*(e-t)+t,o=wt(s,s)+Nt("a","0 0,1",e-t,He(e-s,-s+t)),u=wt(t,e)+Nt("a","0 0,1",e-t,He(e,-e+t)),h=-s,E=wt(s,h)+Nt("a","0 0,1",e-t,He(-s+t,-h-e));return{height:e,topLeft(v){return v?o:u},bottomLeft(){return E}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,s=wt(-2,-t+3.4)+yn(-.45*e,-2.1),o=ve("v",2.5)+wt(.97*-e,2.5)+gs("q",[He(.05*-e,10),He(.3*e,9.5)])+wt(.67*e,-1.9)+ve("v",2.5),u=ve("v",-1.5)+wt(-.92*e,-.5)+gs("q",[He(-.19*e,-5.5),He(0,-11)])+wt(.92*e,1),h=wt(-5,t-.7)+yn(.46*e,-2.1);return{width:e,height:t,pathUp(E){return E?s:u},pathDown(E){return E?o:h}}}makeNotch(){return{pathLeft:ve("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:yn(5.1,2.6)+wt(-10.2,6.8)+yn(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=wt(25,-8.7)+gs("c",[He(29.7,-6.2),He(57.2,-.5),He(75,8.7)]),s=gs("c",[He(17.8,-9.2),He(45.3,-14.9),He(75,-8.7)])+cs(100.5,e+.5);return{path(o){return o?t:s}}}},B$=class extends u_{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},F$=class extends xd{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},U$=class extends Ud{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Po||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new B$(this.constants_,e)),t.hasInlineInput=!0):e instanceof Po?(t.elements.push(new F$(this.constants_,e)),t.hasStatement=!0):e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new bp(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Hl||e instanceof Ju)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let s=0,o;o=this.rows[s];s++)o.hasExternalInput&&(e=!0);for(let s=0,o;o=this.rows[s];s++){var t=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Do(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let u=0;u<t.length-1;u++){o.elements.push(t[u]);const h=this.getInRowSpacing_(t[u],t[u+1]);o.elements.push(new Do(this.constants_,h))}o.elements.push(t[t.length-1]),o.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&o.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),o.elements.push(new Do(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&N.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&N.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&N.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!N.isInput(e)&&(!t||N.isStatementInput(t)))return N.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:N.isIcon(e)?2*this.constants_.LARGE_PADDING+1:N.isHat(e)?this.constants_.NO_PADDING:N.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:N.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:N.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(N.isInput(e)&&!t){if(N.isExternalInput(e))return this.constants_.NO_PADDING;if(N.isInlineInput(e))return this.constants_.LARGE_PADDING;if(N.isStatementInput(e))return this.constants_.NO_PADDING}if(!N.isInput(e)&&t&&N.isInput(t)){if(N.isField(e)&&e.isEditable){if(N.isInlineInput(t)||N.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(N.isInlineInput(t)||N.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(N.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(N.isIcon(e)&&t&&!N.isInput(t))return this.constants_.LARGE_PADDING;if(N.isInlineInput(e)&&t&&N.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(N.isLeftSquareCorner(e)&&t){if(N.isHat(t))return this.constants_.NO_PADDING;if(N.isPreviousConnection(t))return t.notchOffset;if(N.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(N.isLeftRoundedCorner(e)&&t){if(N.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(N.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return N.isField(e)&&t&&N.isField(t)&&e.isEditable===t.isEditable||t&&N.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return N.isTopRow(e)&&N.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:N.isTopRow(e)||N.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(N.isSpacer(t))return e.yPos+t.height/2;if(N.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,N.isNextConnection(t)?e+t.height/2:e-t.height/2;if(N.isTopRow(e))return N.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let s=e.yPos;return N.isField(t)||N.isIcon(t)?(s+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(s+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):s=N.isInlineInput(t)?s+t.height/2:s+e.height/2,s}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,s=null;for(let o=this.rows.length-1,u;u=this.rows[o];o--)t.set(u,e),N.isInputRow(u)&&(u.hasStatement&&this.alignStatementRow_(u),s&&s.hasStatement&&u.width<s.width?t.set(u,s.width):e=u.hasStatement?u.width:Math.max(e,u.width),s=u);e=0;for(let o=0,u;u=this.rows[o];o++)u.hasStatement?e=this.getDesiredRowWidth_(u):N.isSpacer(u)?u.width=Math.max(e,t.get(u)):(s=u.width,e=Math.max(e,t.get(u))-s,0<e&&this.addAlignmentPadding_(u,e),e=u.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let o=0,u;u=this.rows[o];o++){u.yPos=t,u.xPos=this.startX,t+=u.height,e=Math.max(e,u.widthWithConnectedBlocks);var s=t-this.topRow.ascenderHeight;u===this.bottomRow&&s<this.constants_.MIN_BLOCK_HEIGHT&&(s=this.constants_.MIN_BLOCK_HEIGHT-s,this.bottomRow.height+=s,t+=s),this.recordElemPositions_(u)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(s=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,s.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},H$=class extends Rp{constructor(e,t,s){super(e,t,s),this.constants=s,this.colourDark="#000000",this.svgPathDark=K(F.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=K(F.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=Gn("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},G$=class extends Cp{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new M$}makeRenderInfo_(e){return new U$(this,e)}makeDrawer_(e,t){return new P$(e,t)}makePathObject(e,t){return new H$(e,t,this.getConstants())}makeHighlightConstants_(){return new x$(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};gt("geras",G$);var Xl={};Xl.ConstantProvider=M$,Xl.Drawer=P$,Xl.HighlightConstantProvider=x$,Xl.Highlighter=D$,Xl.InlineInput=B$,Xl.PathObject=H$,Xl.RenderInfo=U$,Xl.Renderer=G$,Xl.StatementInput=F$;var V$=class extends Ud{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const o=this.rows[t];var s=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Do(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(let u=0;u<s.length-1;u++){o.elements.push(s[u]);const h=this.getInRowSpacing_(s[u],s[u+1]);o.elements.push(new Do(this.constants_,h))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(s=this.getInRowSpacing_(s[s.length-1],null),e&&o.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),o.elements.push(new Do(this.constants_,s)))}}}getInRowSpacing_(e,t){if(!e)return t&&N.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&N.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&N.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!N.isInput(e)&&!t)return N.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:N.isIcon(e)?2*this.constants_.LARGE_PADDING+1:N.isHat(e)?this.constants_.NO_PADDING:N.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:N.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:N.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(N.isInput(e)&&!t){if(N.isExternalInput(e))return this.constants_.NO_PADDING;if(N.isInlineInput(e))return this.constants_.LARGE_PADDING;if(N.isStatementInput(e))return this.constants_.NO_PADDING}if(!N.isInput(e)&&t&&N.isInput(t)){if(N.isField(e)&&e.isEditable){if(N.isInlineInput(t)||N.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(N.isInlineInput(t)||N.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(N.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(N.isIcon(e)&&t&&!N.isInput(t))return this.constants_.LARGE_PADDING;if(N.isInlineInput(e)&&t&&N.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(N.isLeftSquareCorner(e)&&t){if(N.isHat(t))return this.constants_.NO_PADDING;if(N.isPreviousConnection(t)||N.isNextConnection(t))return t.notchOffset}return N.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:N.isField(e)&&t&&N.isField(t)&&e.isEditable===t.isEditable||t&&N.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return N.isTopRow(e)&&N.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:N.isTopRow(e)||N.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(N.isSpacer(t))return e.yPos+t.height/2;if(N.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,N.isNextConnection(t)?e+t.height/2:e-t.height/2;if(N.isTopRow(e))return N.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let s=e.yPos;return s=N.isField(t)&&e.hasStatement?s+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):s+e.height/2}finalize_(){let e=0,t=0;for(var s=0;s<this.rows.length;s++){const u=this.rows[s];u.yPos=t,u.xPos=this.startX,t+=u.height,e=Math.max(e,u.widthWithConnectedBlocks);var o=t-this.topRow.ascenderHeight;u===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,t+=o),this.recordElemPositions_(u)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(s=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,s.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},W$=class extends Cp{constructor(e){super(e)}makeRenderInfo_(e){return new V$(this,e)}};gt("thrasos",W$);var X_={};X_.RenderInfo=V$,X_.Renderer=W$;var hm={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},dm={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},pm=new sh("zelos",hm,dm),_m={Classic:$p,Zelos:pm},z_=class{constructor(e,t,s){this.id_=e.toolboxitemid||Ie(),this.level_=(this.parent_=s||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},Zr=class extends z_{constructor(e,t,s){super(e,t,s),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const s=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(s)}}parseCategoryDef_(e){this.name_="name"in e?At(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),_o(this.htmlDiv_,Li.TREEITEM),Ms(this.htmlDiv_,Is.SELECTED,!1),Ms(this.htmlDiv_,Is.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),_o(this.iconDom_,Li.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&Ms(this.htmlDiv_,Is.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ye(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&ye(e,t),t=`${Zr.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&ye(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ye(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&ye(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Zr.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle(t);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=At(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=Nr(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Rc(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&f(e,t),(t=this.cssConfig_.openicon)&&ye(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&f(e,t),(t=this.cssConfig_.closedicon)&&ye(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const s=this.parseColour(Zr.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||s,t&&ye(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&b(this.rowDiv_,t);Ms(this.htmlDiv_,Is.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Ks(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){B(this.htmlDiv_)}};Zr.registrationName="category",Zr.nestedPadding=19,Zr.borderWidth=8,Zr.defaultBackgroundColour="#57e",Rt(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),p(ce.TOOLBOX_ITEM,Zr.registrationName,Zr);var Yd=class extends z_{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ye(e,t),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){B(this.htmlDiv)}};Yd.registrationName="sep",Rt(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),p(ce.TOOLBOX_ITEM,Yd.registrationName,Yd);var Yh=class extends Zr{constructor(e,t,s){super(e,t,s),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let s=0;s<t.length;s++){const o=t[s];!j(ce.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()===Yd.registrationName&&e?(this.flyoutItems_.push(o),e=!0):(this.createToolboxItem(o),e=!1)}}}}createToolboxItem(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&xi(e)&&(t=Yh.registrationName),e=new(V(ce.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),_o(this.subcategoriesDiv_,Li.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Ms(this.htmlDiv_,Is.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ye(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var s=this.cssConfig_.contents;for(s&&ye(t,s),s=0;s<e.length;s++){const o=e[s];o.init();const u=o.getDiv();if(t.appendChild(u),o.getClickTarget){let h;(h=o.getClickTarget())==null||h.setAttribute("id",o.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Ms(this.htmlDiv_,Is.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let s=0;s<t.length;s++)t[s].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Yh.registrationName="collapsibleCategory",p(ce.TOOLBOX_ITEM,Yh.registrationName,Yh);var X$=class extends vp{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),$e(this.flyout.createDom("svg"),t),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:ns.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[ns.Capability.AUTOHIDEABLE,ns.Capability.DELETE_AREA,ns.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,_o(this.contentsDiv_,Li.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),ye(e,"blocklyToolboxDiv"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return ye(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=Ue(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=Ue(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(As(e)||e.target===this.HtmlDiv)Ye().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),Ye().hideChaff(!0)}ps()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext();break;case"ArrowUp":t=this.selectPrevious();break;case"ArrowLeft":t=this.selectParent();break;case"ArrowRight":t=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new $r({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?ge(ce.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):ge(ce.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const s=this.contents_[t];s&&s.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let s=0;s<e.length;s++)this.createToolboxItem(e[s],t);this.contentsDiv_.appendChild(t)}createToolboxItem(e,t){var s=e.kind;s.toUpperCase()==="CATEGORY"&&xi(e)&&(s=Yh.registrationName),(s=V(ce.TOOLBOX_ITEM,s.toLowerCase()))&&(e=new s(e,this),e.init(),this.addToolboxItem_(e),(s=e.getDiv())&&t.appendChild(s),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&ye(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&b(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,s=t+e.height,o=e.left;return e=o+e.width,this.toolboxPosition===Ze.TOP?new zt(-1e7,s,-1e7,1e7):this.toolboxPosition===Ze.BOTTOM?new zt(t,1e7,-1e7,1e7):this.toolboxPosition===Ze.LEFT?new zt(-1e7,1e7,-1e7,e):new zt(-1e7,1e7,o,1e7)}wouldDelete(e){return e instanceof Er?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(Xt(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===Ze.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===Ze.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===Ze.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===Ze.TOP?e.scrollY+t.height:e.scrollY),_t(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!nd(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),Ms(this.contentsDiv_,Is.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),Ms(this.contentsDiv_,Is.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout.show(t.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,t){const s=e&&e.getName();let o=t&&t.getName();e===t&&(o=null),e=new(ee(z.TOOLBOX_ITEM_SELECT))(s,o,this.workspace_.id),Oe(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)Ot(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),B(this.HtmlDiv))}};Rt(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),p(ce.TOOLBOX,Ri,X$);var gm="11.2.1",$m=xe.INPUT_VALUE,fm=xe.OUTPUT_VALUE,mm=xe.NEXT_STATEMENT,Tm=xe.PREVIOUS_STATEMENT,Em=Ze.TOP,Im=Ze.BOTTOM,bm=Ze.LEFT,Sm=Ze.RIGHT;Gh.prototype.newBlock=function(e,t){return new jc(this,e,t)},Tr.prototype.newBlock=function(e,t){return new Er(this,e,t)},Gh.prototype.newComment=function(e){return new st(this,e)},Tr.prototype.newComment=function(e){return new Bs(this,e)},Tr.newTrashcan=function(e){return new Hg(e)},Xu.prototype.newWorkspaceSvg=function(e){return new Tr(e)},r.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=M(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],r.Names$$module$build$src$core$names.NameType.PROCEDURE)};var te={};return te.ASTNode=ne,te.BasicCursor=Gd,te.Block=jc,te.BlockSvg=Er,te.Blocks=Wn,te.COLLAPSED_FIELD_NAME=Pu,te.COLLAPSED_INPUT_NAME=ki,te.COLLAPSE_CHARS=Ng,te.CodeGenerator=r.CodeGenerator$$module$build$src$core$generator,te.CollapsibleToolboxCategory=Yh,te.ComponentManager=ns,te.Connection=xt,te.ConnectionChecker=Mg,te.ConnectionDB=Bh,te.ConnectionType=xe,te.ContextMenu=is,te.ContextMenuItems=bn,te.ContextMenuRegistry=w,te.Css=Id,te.Cursor=b_,te.DELETE_VARIABLE_ID=f_,te.DeleteArea=vp,te.DragTarget=Ug,te.DropDownDiv=Dn,te.Events=we,te.Extensions=qr,te.Field=c,te.FieldCheckbox=lh,te.FieldDropdown=io,te.FieldImage=rh,te.FieldLabel=nh,te.FieldLabelSerializable=r$,te.FieldNumber=A_,te.FieldTextInput=Np,te.FieldVariable=Wd,te.Flyout=Dp,te.FlyoutButton=fr,te.FlyoutMetricsManager=i$,te.Generator=r.CodeGenerator$$module$build$src$core$generator,te.Gesture=Wu,te.Grid=s_,te.HorizontalFlyout=o$,te.INPUT_VALUE=$m,te.Input=Hh,te.InsertionMarkerManager=mr,te.InsertionMarkerPreviewer=t$,te.Marker=xg,te.MarkerManager=Gu,te.Menu=Wa,te.MenuItem=Nl,te.MetricsManager=v_,te.Msg=r.Msg$$module$build$src$core$msg,te.NEXT_STATEMENT=mm,te.Names=r.Names$$module$build$src$core$names,te.OPPOSITE_TYPE=oh,te.OUTPUT_VALUE=fm,te.Options=$r,te.PREVIOUS_STATEMENT=Tm,te.PROCEDURE_CATEGORY_NAME=Ip,te.Procedures=wi,te.RENAME_VARIABLE_ID=$_,te.RenderedConnection=Ni,te.Scrollbar=$s,te.ScrollbarPair=y_,te.ShortcutItems=Vl,te.ShortcutRegistry=Vt,te.TOOLBOX_AT_BOTTOM=Im,te.TOOLBOX_AT_LEFT=bm,te.TOOLBOX_AT_RIGHT=Sm,te.TOOLBOX_AT_TOP=Em,te.TabNavigateCursor=Bg,te.Theme=sh,te.ThemeManager=wg,te.Themes=_m,te.Toolbox=X$,te.ToolboxCategory=Zr,te.ToolboxItem=z_,te.ToolboxSeparator=Yd,te.Tooltip=In,te.Touch=kl,te.Trashcan=Hg,te.UnattachedFieldError=d,te.VARIABLE_CATEGORY_NAME=Ka,te.VARIABLE_DYNAMIC_CATEGORY_NAME=g_,te.VERSION=gm,te.VariableMap=E_,te.VariableModel=Hc,te.Variables=bs,te.VariablesDynamic=ih,te.VerticalFlyout=k_,te.WidgetDiv=ae,te.Workspace=Gh,te.WorkspaceAudio=Dg,te.WorkspaceDragger=gg,te.WorkspaceSvg=Tr,te.Xml=ut,te.ZoomControls=ap,te.blockAnimations=Dd,te.blockRendering=Yt,te.browserEvents=Vr,te.bubbles=zd,te.bumpObjects=yp,te.clipboard=Vd,te.comments=Pp,te.common=Xs,te.config=r.config$$module$build$src$core$config,te.constants=Ml,te.defineBlocksWithJsonArray=xo,te.dialog=Dl,te.dragging=Xd,te.fieldRegistry=fp,te.geras=Xl,te.getMainWorkspace=Ye,te.getSelected=Xe,te.hasBubble=gi,te.hideChaff=id,te.icons=zc,te.inject=Ro,te.inputs=qc,te.isCopyable=xr,te.isDeletable=Xt,te.isDraggable=Cn,te.isIcon=Et,te.isObservable=S,te.isPaster=ed,te.isRenderedElement=td,te.isSelectable=sd,te.isSerializable=go,te.isVariableBackedParameterModel=Ho,te.layers=Ce,te.procedures=wi,te.registry=yo,te.renderManagement=Bu,te.serialization=cm,te.setLocale=Ya,te.setParentContainer=Re,te.svgResize=_t,te.thrasos=X_,te.uiPosition=Al,te.utils=ys,te.zelos=Qr,te.__namespace__=r,te})}(Gp)),Gp.exports}var pE=Qp();const _E=uh(pE),{ASTNode:Pv,BasicCursor:xv,Block:Bv,BlockSvg:Fv,Blocks:Uv,COLLAPSED_FIELD_NAME:Hv,COLLAPSED_INPUT_NAME:Gv,COLLAPSE_CHARS:Vv,CodeGenerator:Wv,CollapsibleToolboxCategory:Xv,ComponentManager:zv,Connection:Yv,ConnectionChecker:jv,ConnectionDB:Kv,ConnectionType:Jv,ContextMenu:qv,ContextMenuItems:Qv,ContextMenuRegistry:Zv,Css:eL,Cursor:tL,DELETE_VARIABLE_ID:sL,DeleteArea:nL,DragTarget:iL,DropDownDiv:oL,Events:rL,Extensions:lL,Field:uL,FieldCheckbox:cL,FieldDropdown:aL,FieldImage:hL,FieldLabel:dL,FieldLabelSerializable:pL,FieldNumber:_L,FieldTextInput:gL,FieldVariable:$L,Flyout:fL,FlyoutButton:mL,FlyoutMetricsManager:TL,Generator:EL,Gesture:IL,Grid:bL,HorizontalFlyout:SL,INPUT_VALUE:OL,Input:RL,InsertionMarkerManager:CL,InsertionMarkerPreviewer:yL,Marker:vL,MarkerManager:LL,Menu:kL,MenuItem:AL,MetricsManager:wL,Msg:NL,NEXT_STATEMENT:ML,Names:DL,OPPOSITE_TYPE:PL,OUTPUT_VALUE:xL,Options:BL,PREVIOUS_STATEMENT:FL,PROCEDURE_CATEGORY_NAME:UL,Procedures:HL,RENAME_VARIABLE_ID:GL,RenderedConnection:VL,Scrollbar:WL,ScrollbarPair:XL,ShortcutItems:zL,ShortcutRegistry:YL,TOOLBOX_AT_BOTTOM:jL,TOOLBOX_AT_LEFT:KL,TOOLBOX_AT_RIGHT:JL,TOOLBOX_AT_TOP:qL,TabNavigateCursor:QL,Theme:ZL,ThemeManager:ek,Themes:tk,Toolbox:sk,ToolboxCategory:nk,ToolboxItem:ik,ToolboxSeparator:ok,Tooltip:rk,Touch:lk,Trashcan:uk,UnattachedFieldError:ck,VARIABLE_CATEGORY_NAME:ak,VARIABLE_DYNAMIC_CATEGORY_NAME:hk,VERSION:dk,VariableMap:pk,VariableModel:_k,Variables:gk,VariablesDynamic:$k,VerticalFlyout:fk,WidgetDiv:mk,Workspace:Tk,WorkspaceAudio:Ek,WorkspaceDragger:Ik,WorkspaceSvg:bk,Xml:Qd,ZoomControls:Sk,blockAnimations:Ok,blockRendering:Rk,browserEvents:Ck,bubbles:yk,bumpObjects:vk,clipboard:Lk,comments:kk,common:Ak,config:wk,constants:Nk,defineBlocksWithJsonArray:Mk,dialog:Dk,dragging:Pk,fieldRegistry:xk,geras:Bk,getMainWorkspace:Fk,getSelected:Uk,hasBubble:Hk,hideChaff:Gk,icons:Vk,inject:gE,inputs:Wk,isCopyable:Xk,isDeletable:zk,isDraggable:Yk,isIcon:jk,isObservable:Kk,isPaster:Jk,isRenderedElement:qk,isSelectable:Qk,isSerializable:Zk,isVariableBackedParameterModel:eA,layers:tA,procedures:sA,registry:nA,renderManagement:iA,serialization:xf,setLocale:Bf,setParentContainer:oA,svgResize:rA,thrasos:lA,uiPosition:uA,utils:$E,zelos:cA}=_E;function fE(m,R){var r=null,p=null,C=function(){for(var Z=[],j=0;j<arguments.length;j++)Z[j]=arguments[j];p=function(){r=null,m.apply(void 0,Z)},r!=null&&clearTimeout(r),r=window.setTimeout(p,R)},x=function(){r!=null&&(clearTimeout(r),p&&p())};return[C,x]}var Kp=function(){return Kp=Object.assign||function(m){for(var R,r=1,p=arguments.length;r<p;r++){R=arguments[r];for(var C in R)Object.prototype.hasOwnProperty.call(R,C)&&(m[C]=R[C])}return m},Kp.apply(this,arguments)};function mE(m,R,r){try{return R.getAllBlocks(!1).length>0?void 0:(Qd.domToWorkspace($E.xml.textToDom(m),R),!0)}catch(p){return r&&r(p),!1}}function TE(m,R,r){try{return xf.workspaces.load(m,R),!0}catch(p){return r&&r(p),!1}}var EE=function(m){var R=m.ref,r=m.initialXml,p=m.initialJson,C=m.toolboxConfiguration,x=m.workspaceConfiguration,Z=m.onWorkspaceChange,j=m.onImportXmlError,V=m.onImportError,Y=m.onInject,de=m.onDispose;V=V??j;var ge=Ss.useState(null),q=ge[0],Ie=ge[1],ie=Ss.useState(r||null),Se=ie[0],le=ie[1],pe=Ss.useState(p||null),ke=pe[0],Ne=pe[1],ot=Ss.useState(!1),ft=ot[0],bt=ot[1],at=Ss.useState(!1),Oe=at[0],pt=at[1],Bt=Ss.useRef(x);Ss.useEffect(function(){Bt.current=x},[x]);var Ls=Ss.useRef(C);Ss.useEffect(function(){Ls.current=C,C&&q&&!(x!=null&&x.readOnly)&&q.updateToolbox(C)},[C,q,x]);var fs=Ss.useRef(Y),os=Ss.useRef(de);Ss.useEffect(function(){fs.current=Y},[Y]),Ss.useEffect(function(){os.current=de},[de]);var nt=Ss.useCallback(function(St){Z&&Z(St)},[Z]);return Ss.useEffect(function(){if(R.current){var St=gE(R.current,Kp(Kp({},Bt.current),{toolbox:Ls.current}));Ie(St),bt(!1),pt(!1),fs.current&&fs.current(St);var Ft=os.current;return function(){St.dispose(),Ft&&Ft(St)}}},[R]),Ss.useEffect(function(){q&&!Oe&&nt(q)},[nt,Oe,q]),Ss.useEffect(function(){if(q!=null){var St=function(){nt(q)};return q.addChangeListener(St),function(){q.removeChangeListener(St)}}},[q,nt]),Ss.useEffect(function(){if(q!=null){var St=fE(function(){var ee=Qd.domToText(Qd.workspaceToDom(q));if(ee!==Se){var Je=xf.workspaces.save(q);Ne(Je),le(ee)}},200),Ft=St[0],Lt=St[1];return q.addChangeListener(Ft),function(){q.removeChangeListener(Ft),Lt()}}},[q,Se]),Ss.useEffect(function(){if(Se&&q&&!ft){var St=mE(Se,q,V);St||le(null),bt(!0)}else if(ke&&q&&!ft){var St=TE(ke,q,V);St||Ne(null);var Ft=Qd.domToText(Qd.workspaceToDom(q));le(Ft),bt(!0)}},[ke,Se,q,ft,V]),{workspace:q,xml:Se,json:ke}},tg={exports:{}},sg,gf;function IE(){if(gf)return sg;gf=1;var m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sg=m,sg}var ng,$f;function bE(){if($f)return ng;$f=1;var m=IE();function R(){}function r(){}return r.resetWarningCache=R,ng=function(){function p(Z,j,V,Y,de,ge){if(ge!==m){var q=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw q.name="Invariant Violation",q}}p.isRequired=p;function C(){return p}var x={array:p,bigint:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:C,element:p,elementType:p,instanceOf:C,node:p,objectOf:C,oneOf:C,oneOfType:C,shape:C,exact:C,checkPropTypes:r,resetWarningCache:R};return x.PropTypes=x,x},ng}var ff;function SE(){return ff||(ff=1,tg.exports=bE()()),tg.exports}var OE=SE();const Ir=uh(OE);var RE={initialXml:Ir.string,initialJson:Ir.object,toolboxConfiguration:Ir.object,workspaceConfiguration:Ir.object,className:Ir.string,onWorkspaceChange:Ir.func,onImportXmlError:Ir.func,onImportError:Ir.func,onXmlChange:Ir.func,onJsonChange:Ir.func,onInject:Ir.func,onDispose:Ir.func};function _g(m){var R=m.initialXml,r=m.initialJson,p=m.toolboxConfiguration,C=m.workspaceConfiguration,x=m.className,Z=m.onWorkspaceChange,j=m.onXmlChange,V=m.onJsonChange,Y=m.onImportXmlError,de=m.onImportError,ge=m.onInject,q=m.onDispose,Ie=Ss.useRef(null),ie=EE({ref:Ie,initialXml:R,initialJson:r,toolboxConfiguration:p,workspaceConfiguration:C,onWorkspaceChange:Z,onImportXmlError:Y,onImportError:de,onInject:ge,onDispose:q}),Se=ie.xml,le=ie.json,pe=Ss.useRef(j);Ss.useEffect(function(){pe.current=j},[j]);var ke=Ss.useRef(V);return Ss.useEffect(function(){ke.current=V},[V]),Ss.useEffect(function(){pe.current&&Se&&pe.current(Se),ke.current&&le&&ke.current(le)},[Se,le]),Ge.jsx("div",{className:x,ref:Ie})}_g.propTypes=RE;var Vp={exports:{}},Wp={exports:{}},CE=Wp.exports,mf;function yE(){return mf||(mf=1,function(m,R){(function(r,p){m.exports=p()})(CE,function(){var r=r||{Msg:Object.create(null)};return r.Msg.ADD_COMMENT="Add Comment",r.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",r.Msg.CHANGE_VALUE_TITLE="Change value:",r.Msg.CLEAN_UP="Clean up Blocks",r.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",r.Msg.COLLAPSE_ALL="Collapse Blocks",r.Msg.COLLAPSE_BLOCK="Collapse Block",r.Msg.COLOUR_BLEND_COLOUR1="colour 1",r.Msg.COLOUR_BLEND_COLOUR2="colour 2",r.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",r.Msg.COLOUR_BLEND_RATIO="ratio",r.Msg.COLOUR_BLEND_TITLE="blend",r.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",r.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",r.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",r.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",r.Msg.COLOUR_RANDOM_TITLE="random colour",r.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",r.Msg.COLOUR_RGB_BLUE="blue",r.Msg.COLOUR_RGB_GREEN="green",r.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",r.Msg.COLOUR_RGB_RED="red",r.Msg.COLOUR_RGB_TITLE="colour with",r.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",r.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",r.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",r.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",r.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",r.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",r.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",r.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",r.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",r.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",r.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",r.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",r.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",r.Msg.CONTROLS_IF_MSG_ELSE="else",r.Msg.CONTROLS_IF_MSG_ELSEIF="else if",r.Msg.CONTROLS_IF_MSG_IF="if",r.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",r.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",r.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",r.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",r.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",r.Msg.CONTROLS_REPEAT_INPUT_DO="do",r.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",r.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",r.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",r.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",r.Msg.DELETE_BLOCK="Delete Block",r.Msg.DELETE_VARIABLE="Delete the '%1' variable",r.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",r.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",r.Msg.DIALOG_CANCEL="Cancel",r.Msg.DIALOG_OK="OK",r.Msg.DISABLE_BLOCK="Disable Block",r.Msg.DUPLICATE_BLOCK="Duplicate",r.Msg.DUPLICATE_COMMENT="Duplicate Comment",r.Msg.ENABLE_BLOCK="Enable Block",r.Msg.EXPAND_ALL="Expand Blocks",r.Msg.EXPAND_BLOCK="Expand Block",r.Msg.EXTERNAL_INPUTS="External Inputs",r.Msg.HELP="Help",r.Msg.INLINE_INPUTS="Inline Inputs",r.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",r.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",r.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",r.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",r.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",r.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",r.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",r.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",r.Msg.LISTS_GET_INDEX_FIRST="first",r.Msg.LISTS_GET_INDEX_FROM_END="# from end",r.Msg.LISTS_GET_INDEX_FROM_START="#",r.Msg.LISTS_GET_INDEX_GET="get",r.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",r.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",r.Msg.LISTS_GET_INDEX_LAST="last",r.Msg.LISTS_GET_INDEX_RANDOM="random",r.Msg.LISTS_GET_INDEX_REMOVE="remove",r.Msg.LISTS_GET_INDEX_TAIL="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",r.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",r.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",r.Msg.LISTS_GET_SUBLIST_END_LAST="to last",r.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",r.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",r.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",r.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",r.Msg.LISTS_GET_SUBLIST_TAIL="",r.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",r.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",r.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",r.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",r.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",r.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",r.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",r.Msg.LISTS_INLIST="in list",r.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",r.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",r.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",r.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",r.Msg.LISTS_LENGTH_TITLE="length of %1",r.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",r.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",r.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",r.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",r.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",r.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",r.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",r.Msg.LISTS_SET_INDEX_INPUT_TO="as",r.Msg.LISTS_SET_INDEX_INSERT="insert at",r.Msg.LISTS_SET_INDEX_SET="set",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",r.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",r.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",r.Msg.LISTS_SORT_ORDER_DESCENDING="descending",r.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",r.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",r.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",r.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",r.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",r.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",r.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",r.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",r.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",r.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",r.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",r.Msg.LOGIC_BOOLEAN_FALSE="false",r.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",r.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",r.Msg.LOGIC_BOOLEAN_TRUE="true",r.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",r.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",r.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",r.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",r.Msg.LOGIC_NEGATE_TITLE="not %1",r.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",r.Msg.LOGIC_NULL="null",r.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",r.Msg.LOGIC_NULL_TOOLTIP="Returns null.",r.Msg.LOGIC_OPERATION_AND="and",r.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",r.Msg.LOGIC_OPERATION_OR="or",r.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",r.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",r.Msg.LOGIC_TERNARY_CONDITION="test",r.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",r.Msg.LOGIC_TERNARY_IF_FALSE="if false",r.Msg.LOGIC_TERNARY_IF_TRUE="if true",r.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",r.Msg.MATH_ADDITION_SYMBOL="+",r.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",r.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",r.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",r.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",r.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",r.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",r.Msg.MATH_CHANGE_TITLE="change %1 by %2",r.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",r.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",r.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",r.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",r.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",r.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",r.Msg.MATH_DIVISION_SYMBOL="÷",r.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",r.Msg.MATH_IS_EVEN="is even",r.Msg.MATH_IS_NEGATIVE="is negative",r.Msg.MATH_IS_ODD="is odd",r.Msg.MATH_IS_POSITIVE="is positive",r.Msg.MATH_IS_PRIME="is prime",r.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",r.Msg.MATH_IS_WHOLE="is whole",r.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",r.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",r.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",r.Msg.MATH_MULTIPLICATION_SYMBOL="×",r.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",r.Msg.MATH_NUMBER_TOOLTIP="A number.",r.Msg.MATH_ONLIST_HELPURL="",r.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",r.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",r.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",r.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",r.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",r.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",r.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",r.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",r.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",r.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",r.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",r.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",r.Msg.MATH_POWER_SYMBOL="^",r.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",r.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",r.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",r.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",r.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",r.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",r.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",r.Msg.MATH_ROUND_OPERATOR_ROUND="round",r.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",r.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",r.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",r.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",r.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",r.Msg.MATH_SINGLE_OP_ROOT="square root",r.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",r.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",r.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",r.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",r.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",r.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",r.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",r.Msg.MATH_SUBTRACTION_SYMBOL="-",r.Msg.MATH_TRIG_ACOS="acos",r.Msg.MATH_TRIG_ASIN="asin",r.Msg.MATH_TRIG_ATAN="atan",r.Msg.MATH_TRIG_COS="cos",r.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",r.Msg.MATH_TRIG_SIN="sin",r.Msg.MATH_TRIG_TAN="tan",r.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",r.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",r.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",r.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",r.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",r.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",r.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",r.Msg.NEW_NUMBER_VARIABLE="Create number variable...",r.Msg.NEW_STRING_VARIABLE="Create string variable...",r.Msg.NEW_VARIABLE="Create variable...",r.Msg.NEW_VARIABLE_TITLE="New variable name:",r.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",r.Msg.ORDINAL_NUMBER_SUFFIX="",r.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",r.Msg.PROCEDURES_BEFORE_PARAMS="with:",r.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",r.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",r.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",r.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",r.Msg.PROCEDURES_CREATE_DO="Create '%1'",r.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",r.Msg.PROCEDURES_DEFNORETURN_DO="",r.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",r.Msg.PROCEDURES_DEFNORETURN_TITLE="to",r.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",r.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFRETURN_RETURN="return",r.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",r.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",r.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",r.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",r.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",r.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",r.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",r.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",r.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",r.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",r.Msg.REDO="Redo",r.Msg.REMOVE_COMMENT="Remove Comment",r.Msg.RENAME_VARIABLE="Rename variable...",r.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",r.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_APPEND_TITLE="to %1 append text %2",r.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",r.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",r.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",r.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",r.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",r.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",r.Msg.TEXT_CHARAT_FIRST="get first letter",r.Msg.TEXT_CHARAT_FROM_END="get letter # from end",r.Msg.TEXT_CHARAT_FROM_START="get letter #",r.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",r.Msg.TEXT_CHARAT_LAST="get last letter",r.Msg.TEXT_CHARAT_RANDOM="get random letter",r.Msg.TEXT_CHARAT_TAIL="",r.Msg.TEXT_CHARAT_TITLE="in text %1 %2",r.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",r.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",r.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",r.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",r.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",r.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",r.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",r.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",r.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",r.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",r.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",r.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",r.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",r.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",r.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",r.Msg.TEXT_GET_SUBSTRING_TAIL="",r.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",r.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",r.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",r.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",r.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",r.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",r.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",r.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",r.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",r.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",r.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",r.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",r.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_LENGTH_TITLE="length of %1",r.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",r.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",r.Msg.TEXT_PRINT_TITLE="print %1",r.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",r.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",r.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",r.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",r.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",r.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",r.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",r.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",r.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",r.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",r.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",r.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",r.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",r.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",r.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",r.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",r.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",r.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",r.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",r.Msg.TODAY="Today",r.Msg.UNDO="Undo",r.Msg.UNNAMED_KEY="unnamed",r.Msg.VARIABLES_DEFAULT_NAME="item",r.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",r.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",r.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",r.Msg.VARIABLES_SET="set %1 to %2",r.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",r.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",r.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",r.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",r.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",r.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",r.Msg.CONTROLS_FOREACH_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_FOR_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=r.Msg.CONTROLS_IF_MSG_ELSEIF,r.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=r.Msg.CONTROLS_IF_MSG_ELSE,r.Msg.CONTROLS_IF_IF_TITLE_IF=r.Msg.CONTROLS_IF_MSG_IF,r.Msg.CONTROLS_IF_MSG_THEN=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.LISTS_CREATE_WITH_ITEM_TITLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.MATH_CHANGE_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.PROCEDURES_DEFRETURN_COMMENT=r.Msg.PROCEDURES_DEFNORETURN_COMMENT,r.Msg.PROCEDURES_DEFRETURN_DO=r.Msg.PROCEDURES_DEFNORETURN_DO,r.Msg.PROCEDURES_DEFRETURN_PROCEDURE=r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,r.Msg.PROCEDURES_DEFRETURN_TITLE=r.Msg.PROCEDURES_DEFNORETURN_TITLE,r.Msg.TEXT_APPEND_VARIABLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.COLOUR_HUE="20",r.Msg.LISTS_HUE="260",r.Msg.LOGIC_HUE="210",r.Msg.LOOPS_HUE="120",r.Msg.MATH_HUE="230",r.Msg.PROCEDURES_HUE="290",r.Msg.TEXTS_HUE="160",r.Msg.VARIABLES_DYNAMIC_HUE="310",r.Msg.VARIABLES_HUE="330",r.Msg})}(Wp)),Wp.exports}var Xp={exports:{}},vE=Xp.exports,Tf;function Ff(){return Tf||(Tf=1,function(m,R){(function(r,p){m.exports=p(Qp())})(vE,function(r){var p=r.__namespace__,C=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),x={customContextMenu:function(f){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(D={text:p.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:Z(this)},B=this.getField("VAR").getText(),B={text:p.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",B),enabled:!0,callback:j(this)},f.unshift(D),f.unshift(B));else{if(this.type==="variables_get_dynamic")var b="variables_set_dynamic",D=p.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else b="variables_get_dynamic",D=p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var B=this.getField("VAR");b={type:b,fields:{VAR:B.saveState(!0)}},f.push({enabled:0<this.workspace.remainingCapacity(),text:D.replace("%1",B.getText()),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,b)})}},onchange:function(f){f=this.getFieldValue("VAR"),f=p.getVariable$$module$build$src$core$variables(this.workspace,f),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(f.type):this.getInput("VALUE").connection.setCheck(f.type)}},Z=function(f){return function(){const b=f.workspace,D=f.getField("VAR").getVariable();p.renameVariable$$module$build$src$core$variables(b,D)}},j=function(f){return function(){const b=f.workspace,D=f.getField("VAR").getVariable();b.deleteVariableById(D.getId()),b.refreshToolboxSelection()}};p.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",x),p.defineBlocks$$module$build$src$core$common(C);var V={blocks:C},Y=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),de={customContextMenu:function(f){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(D={text:p.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:ge(this)},B=this.getField("VAR").getText(),B={text:p.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",B),enabled:!0,callback:q(this)},f.unshift(D),f.unshift(B));else{if(this.type==="variables_get")var b="variables_set",D=p.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else b="variables_get",D=p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var B=this.getField("VAR");b={type:b,fields:{VAR:B.saveState(!0)}},f.push({enabled:0<this.workspace.remainingCapacity(),text:D.replace("%1",B.getText()),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,b)})}}},ge=function(f){return function(){const b=f.workspace,D=f.getField("VAR").getVariable();p.renameVariable$$module$build$src$core$variables(b,D)}},q=function(f){return function(){const b=f.workspace,D=f.getField("VAR").getVariable();b.deleteVariableById(D.getId()),b.refreshToolboxSelection()}};p.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",de),p.defineBlocks$$module$build$src$core$common(Y);var Ie={blocks:Y},ie=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),Se={init:function(){this.WHERE_OPTIONS_1=[[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const f=b=>{const D=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+b]});return D.setValidator(function(B){const $e=this.getValue();B=B==="FROM_START"||B==="FROM_END",B!==($e==="FROM_START"||$e==="FROM_END")&&this.getSourceBlock().updateAt_(b,B)}),D};this.appendDummyInput("WHERE1_INPUT").appendField(f(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(f(2),"WHERE2"),this.appendDummyInput("AT2"),p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");var b=this.getInput("AT1")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at1",`${b}`),b=this.getInput("AT2")instanceof p.ValueInput$$module$build$src$core$inputs$value_input,f.setAttribute("at2",`${b}`),f},domToMutation:function(f){const b=f.getAttribute("at1")==="true";f=f.getAttribute("at2")==="true",this.updateAt_(1,b),this.updateAt_(2,f)},updateAt_:function(f,b){this.removeInput("AT"+f),this.removeInput("ORDINAL"+f,!0),b?(this.appendValueInput("AT"+f).setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+f).appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+f),f===2&&p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),f===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};ie.text_getSubstring=Se,ie.text_changeCase={init:function(){const f=[[p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},ie.text_trim={init:function(){const f=[[p.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[p.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[p.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(p.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},ie.text_print={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var le={updateType_:function(f){this.outputConnection.setCheck(f==="NUMBER"?"Number":"String")},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("type",this.getFieldValue("TYPE")),f},domToMutation:function(f){this.updateType_(f.getAttribute("type"))}};ie.text_prompt_ext=Object.assign({},le,{init:function(){var f=[[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),f.setValidator(b=>{this.updateType_(b)}),this.appendValueInput("TEXT").appendField(f,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),ie.text_prompt=Object.assign({},le,{init:function(){this.mixin(pe);var f=[[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),f.setValidator(b=>{this.updateType_(b)}),this.appendDummyInput().appendField(f,"TYPE").appendField(this.newQuote_(!0)).appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),ie.text_count={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},ie.text_replace={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},ie.text_reverse={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var pe={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(f){for(let b=0,D;D=this.inputList[b];b++)for(let B=0,$e;$e=D.fieldRow[B];B++)if(f===$e.name){D.insertFieldAt(B,this.newQuote_(!0)),D.insertFieldAt(B+2,this.newQuote_(!1));return}console.warn('field named "'+f+'" not found in '+this.toDevString())},newQuote_:function(f){return f=this.RTL?!f:f,p.fromJson$$module$build$src$core$field_registry({type:"field_image",src:f?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:f?"“":"”"})}},ke=function(){this.mixin(pe),this.quoteField_("TEXT")},Ne={itemCount_:0,mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("items",`${this.itemCount_}`),f},domToMutation:function(f){this.itemCount_=parseInt(f.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(f){this.itemCount_=f.itemCount,this.updateShape_()},decompose:function(f){const b=f.newBlock("text_create_join_container");b.initSvg();let D=b.getInput("STACK").connection;for(let B=0;B<this.itemCount_;B++){const $e=f.newBlock("text_create_join_item");$e.initSvg(),D.connect($e.previousConnection),D=$e.nextConnection}return b},compose:function(f){var b=f.getInputTargetBlock("STACK");for(f=[];b;)b.isInsertionMarker()||f.push(b.valueConnection_),b=b.getNextBlock();for(b=0;b<this.itemCount_;b++){const D=this.getInput("ADD"+b).connection.targetConnection;D&&!f.includes(D)&&D.disconnect()}for(this.itemCount_=f.length,this.updateShape_(),b=0;b<this.itemCount_;b++){let D;(D=f[b])==null||D.reconnect(this,"ADD"+b)}},saveConnections:function(f){f=f.getInputTargetBlock("STACK");let b=0;for(;f;){if(f.isInsertionMarker()){f=f.getNextBlock();continue}const D=this.getInput("ADD"+b);f.valueConnection_=D&&D.connection.targetConnection,f=f.getNextBlock(),b++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var f=0;f<this.itemCount_;f++)if(!this.getInput("ADD"+f)){const b=this.appendValueInput("ADD"+f).setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT);f===0&&b.appendField(p.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(f=this.itemCount_;this.getInput("ADD"+f);f++)this.removeInput("ADD"+f)}},ot=function(){this.mixin(pe),this.itemCount_=2,this.updateShape_(),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};p.register$$module$build$src$core$extensions("text_append_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var ft=function(){this.setTooltip(()=>p.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},bt={isAt_:!1,mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("at",`${this.isAt_}`),f},domToMutation:function(f){f=f.getAttribute("at")!=="false",this.updateAt_(f)},updateAt_:function(f){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),f&&(this.appendValueInput("AT").setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),p.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=f}},at=function(){this.getField("WHERE").setValidator(function(f){f=f==="FROM_START"||f==="FROM_END";const b=this.getSourceBlock();f!==b.isAt_&&b.updateAt_(f)}),this.updateAt_(!0),this.setTooltip(()=>{var f=this.getFieldValue("WHERE");let b=p.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(f==="FROM_START"||f==="FROM_END")&&(f=f==="FROM_START"?p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(b+="  "+f.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),b})};p.register$$module$build$src$core$extensions("text_indexOf_tooltip",ft),p.register$$module$build$src$core$extensions("text_quotes",ke),p.registerMixin$$module$build$src$core$extensions("quote_image_mixin",pe),p.registerMutator$$module$build$src$core$extensions("text_join_mutator",Ne,ot),p.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",bt,at),p.defineBlocks$$module$build$src$core$common(ie);var Oe={blocks:ie},pt={},Bt={setStatements_:function(f){this.hasStatements_!==f&&(f?(this.appendStatementInput("STACK").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=f)},updateParams_:function(){let f="";this.arguments_.length&&(f=p.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),p.disable$$module$build$src$core$events$utils();try{this.setFieldValue(f,"PARAMS")}finally{p.enable$$module$build$src$core$events$utils()}},mutationToDom:function(f){const b=p.createElement$$module$build$src$core$utils$xml("mutation");f&&b.setAttribute("name",this.getFieldValue("NAME"));for(let D=0;D<this.argumentVarModels_.length;D++){const B=p.createElement$$module$build$src$core$utils$xml("arg"),$e=this.argumentVarModels_[D];B.setAttribute("name",$e.name),B.setAttribute("varid",$e.getId()),f&&this.paramIds_&&B.setAttribute("paramId",this.paramIds_[D]),b.appendChild(B)}return this.hasStatements_||b.setAttribute("statements","false"),b},domToMutation:function(f){this.arguments_=[],this.argumentVarModels_=[];for(let D=0,B;B=f.childNodes[D];D++)if(B.nodeName.toLowerCase()==="arg"){var b=B;const $e=b.getAttribute("name");b=b.getAttribute("varid")||b.getAttribute("varId"),this.arguments_.push($e),b=p.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,b,$e,""),b!==null?this.argumentVarModels_.push(b):console.log(`Failed to create a variable named "${$e}", ignoring.`)}this.updateParams_(),p.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(f.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const f=Object.create(null);if(this.argumentVarModels_.length){f.params=[];for(let b=0;b<this.argumentVarModels_.length;b++)f.params.push({name:this.argumentVarModels_[b].name,id:this.argumentVarModels_[b].getId()})}return this.hasStatements_||(f.hasStatements=!1),f},loadExtraState:function(f){if(this.arguments_=[],this.argumentVarModels_=[],f.params)for(let D=0;D<f.params.length;D++){var b=f.params[D];b=p.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,b.id,b.name,""),this.arguments_.push(b.name),this.argumentVarModels_.push(b)}this.updateParams_(),p.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(f.hasStatements!==!1)},decompose:function(f){const b=p.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","procedures_mutatorcontainer");var D=p.createElement$$module$build$src$core$utils$xml("statement");D.setAttribute("name","STACK"),b.appendChild(D);for(let $e=0;$e<this.arguments_.length;$e++){const kt=p.createElement$$module$build$src$core$utils$xml("block");kt.setAttribute("type","procedures_mutatorarg");var B=p.createElement$$module$build$src$core$utils$xml("field");B.setAttribute("name","NAME");const Fs=p.createTextNode$$module$build$src$core$utils$xml(this.arguments_[$e]);B.appendChild(Fs),kt.appendChild(B),B=p.createElement$$module$build$src$core$utils$xml("next"),kt.appendChild(B),D.appendChild(kt),D=B}return f=p.domToBlock$$module$build$src$core$xml(b,f),this.type==="procedures_defreturn"?f.setFieldValue(this.hasStatements_,"STATEMENTS"):f.removeInput("STATEMENT_INPUT"),p.mutateCallers$$module$build$src$core$procedures(this),f},compose:function(f){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let b=f.getInputTargetBlock("STACK");for(;b&&!b.isInsertionMarker();){var D=b.getFieldValue("NAME");this.arguments_.push(D),D=this.workspace.getVariable(D,""),this.argumentVarModels_.push(D),this.paramIds_.push(b.id),b=b.nextConnection&&b.nextConnection.targetBlock()}if(this.updateParams_(),p.mutateCallers$$module$build$src$core$procedures(this),f=f.getFieldValue("STATEMENTS"),f!==null&&(f=f==="TRUE",this.hasStatements_!==f))if(f){this.setStatements_(!0);var B;(B=this.statementConnection_)==null||B.reconnect(this,"STACK"),this.statementConnection_=null}else B=this.getInput("STACK").connection,(this.statementConnection_=B.targetConnection)&&(B=B.targetBlock(),B.unplug(),B.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(f,b){var D=this.workspace.getVariableById(f);if(D.type===""){D=D.name,b=this.workspace.getVariableById(b);var B=!1;for(let $e=0;$e<this.argumentVarModels_.length;$e++)this.argumentVarModels_[$e].getId()===f&&(this.arguments_[$e]=b.name,this.argumentVarModels_[$e]=b,B=!0);B&&(this.displayRenamedVar_(D,b.name),p.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(f){const b=f.name;let D=!1,B;for(let $e=0;$e<this.argumentVarModels_.length;$e++)this.argumentVarModels_[$e].getId()===f.getId()&&(B=this.arguments_[$e],this.arguments_[$e]=b,D=!0);D&&(this.displayRenamedVar_(B,b),p.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(f,b){this.updateParams_();var D=this.getIcon(p.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(D&&D.bubbleIsVisible()){D=D.getWorkspace().getAllBlocks(!1);for(let B=0,$e;$e=D[B];B++)$e.type==="procedures_mutatorarg"&&p.Names$$module$build$src$core$names.equals(f,$e.getFieldValue("NAME"))&&$e.setFieldValue(b,"NAME")}},customContextMenu:function(f){if(!this.isInFlyout){var b=this.getFieldValue("NAME"),D={type:this.callType_,extraState:{name:b,params:this.arguments_}};if(f.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",b),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,D)}),!this.isCollapsed())for(b=0;b<this.argumentVarModels_.length;b++){D=this.argumentVarModels_[b];const B={type:"variables_get",fields:{VAR:{name:D.name,id:D.getId(),type:D.type}}};f.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",D.name),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,B)})}}}};pt.procedures_defnoreturn=Object.assign({},Bt,{init:function(){var f=p.findLegalName$$module$build$src$core$procedures("",this);f=p.fromJson$$module$build$src$core$field_registry({type:"field_input",text:f}),f.setValidator(p.rename$$module$build$src$core$procedures),f.setSpellcheck(!1),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(f,"NAME").appendField("","PARAMS"),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),pt.procedures_defreturn=Object.assign({},Bt,{init:function(){var f=p.findLegalName$$module$build$src$core$procedures("",this);f=p.fromJson$$module$build$src$core$field_registry({type:"field_input",text:f}),f.setValidator(p.rename$$module$build$src$core$procedures),f.setSpellcheck(!1),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(f,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT).appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var Ls={init:function(){this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};pt.procedures_mutatorcontainer=Ls;var fs={init:function(){const f=p.fromJson$$module$build$src$core$field_registry({type:"field_input",text:p.DEFAULT_ARG$$module$build$src$core$procedures});f.setValidator(this.validator_),f.oldShowEditorFn_=f.showEditor_,f.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(f,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,f.onFinishEditing_=this.deleteIntermediateVars_,f.createdVariables_=[],f.onFinishEditing_("x")},validator_:function(f){var b=this.getSourceBlock();const D=b.workspace.getRootWorkspace();if(f=f.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!f)return null;const B=(b.workspace.targetWorkspace||b.workspace).getAllBlocks(!1),$e=f.toLowerCase();for(let kt=0;kt<B.length;kt++){if(B[kt].id===this.getSourceBlock().id)continue;const Fs=B[kt].getFieldValue("NAME");if(Fs&&Fs.toLowerCase()===$e)return null}return b.isInFlyout||((b=D.getVariable(f,""))&&b.name!==f&&D.renameVariableById(b.getId(),f),b||(b=D.createVariable(f,""))&&this.createdVariables_&&this.createdVariables_.push(b)),f},deleteIntermediateVars_:function(f){const b=this.getSourceBlock().workspace.getRootWorkspace();if(b)for(let D=0;D<this.createdVariables_.length;D++){const B=this.createdVariables_[D];B.name!==f&&b.deleteVariableById(B.getId())}}};pt.procedures_mutatorarg=fs;var os="DISABLED_PROCEDURE_DEFINITION",nt={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(f,b){p.Names$$module$build$src$core$names.equals(f,this.getProcedureCall())&&(this.setFieldValue(b,"NAME"),this.setTooltip((this.outputConnection?p.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:p.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",b)))},setProcedureParameters_:function(f,b){var D=p.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((D=(D=D&&D.getIcon(p.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&D.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),f.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=b;else{if(b.length!==f.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let $e=0;$e<this.arguments_.length;$e++){var B=this.getInput("ARG"+$e);B&&(B=B.connection.targetConnection,this.quarkConnections_[this.quarkIds_[$e]]=B,D&&B&&!b.includes(this.quarkIds_[$e])&&(B.disconnect(),B.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(f),this.argumentVarModels_=[],f=0;f<this.arguments_.length;f++)D=p.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[f],""),this.argumentVarModels_.push(D);if(this.updateShape_(),this.quarkIds_=b){for(b=0;b<this.arguments_.length;b++)if(f=this.quarkIds_[b],f in this.quarkConnections_){let $e;($e=this.quarkConnections_[f])!=null&&$e.reconnect(this,"ARG"+b)||delete this.quarkConnections_[f]}}}},updateShape_:function(){for(var f=0;f<this.arguments_.length;f++){var b=this.getField("ARGNAME"+f);if(b){p.disable$$module$build$src$core$events$utils();try{b.setValue(this.arguments_[f])}finally{p.enable$$module$build$src$core$events$utils()}}else b=p.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[f]}),this.appendValueInput("ARG"+f).setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT).appendField(b,"ARGNAME"+f)}for(f=this.arguments_.length;this.getInput("ARG"+f);f++)this.removeInput("ARG"+f);(f=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||f.appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&f.removeField("WITH"))},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");f.setAttribute("name",this.getProcedureCall());for(let b=0;b<this.arguments_.length;b++){const D=p.createElement$$module$build$src$core$utils$xml("arg");D.setAttribute("name",this.arguments_[b]),f.appendChild(D)}return f},domToMutation:function(f){var b=f.getAttribute("name");this.renameProcedure(this.getProcedureCall(),b),b=[];const D=[];for(let B=0,$e;$e=f.childNodes[B];B++)$e.nodeName.toLowerCase()==="arg"&&(b.push($e.getAttribute("name")),D.push($e.getAttribute("paramId")));this.setProcedureParameters_(b,D)},saveExtraState:function(){const f=Object.create(null);return f.name=this.getProcedureCall(),this.arguments_.length&&(f.params=this.arguments_),f},loadExtraState:function(f){if(this.renameProcedure(this.getProcedureCall(),f.name),f=f.params){const b=[];b.length=f.length,b.fill(null),this.setProcedureParameters_(f,b)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(f){if(this.workspace&&!this.workspace.isFlyout&&f.recordUndo)if(f.type===p.BLOCK_CREATE$$module$build$src$core$events$events&&f.ids.includes(this.id)){var b=this.getProcedureCall(),D=p.getDefinition$$module$build$src$core$procedures(b,this.workspace);if(!D||D.type===this.defType_&&JSON.stringify(D.getVars())===JSON.stringify(this.arguments_)||(D=null),D)D.isEnabled()||(this.setDisabledReason(!0,os),this.setWarningText(p.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",b)));else{p.setGroup$$module$build$src$core$events$utils(f.group),f=p.createElement$$module$build$src$core$utils$xml("xml"),b=p.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type",this.defType_),D=this.getRelativeToSurfaceXY();var B=D.y+2*p.config$$module$build$src$core$config.snapRadius;b.setAttribute("x",`${D.x+p.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),b.setAttribute("y",`${B}`),D=this.mutationToDom(),b.appendChild(D),D=p.createElement$$module$build$src$core$utils$xml("field"),D.setAttribute("name","NAME"),B=this.getProcedureCall();const $e=p.findLegalName$$module$build$src$core$procedures(B,this);B!==$e&&this.renameProcedure(B,$e),D.appendChild(p.createTextNode$$module$build$src$core$utils$xml(B)),b.appendChild(D),f.appendChild(b),p.domToWorkspace$$module$build$src$core$xml(f,this.workspace),p.setGroup$$module$build$src$core$events$utils(!1)}}else f.type===p.BLOCK_DELETE$$module$build$src$core$events$events?(b=this.getProcedureCall(),p.getDefinition$$module$build$src$core$procedures(b,this.workspace)||(p.setGroup$$module$build$src$core$events$utils(f.group),this.dispose(!0),p.setGroup$$module$build$src$core$events$utils(!1))):f.type===p.BLOCK_CHANGE$$module$build$src$core$events$events&&f.element==="disabled"&&(b=this.getProcedureCall(),(B=p.getDefinition$$module$build$src$core$procedures(b,this.workspace))&&B.id===f.blockId&&((D=p.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),p.setGroup$$module$build$src$core$events$utils(f.group),f=B.isEnabled(),this.setDisabledReason(!f,os),this.setWarningText(f?null:p.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",b)),p.setGroup$$module$build$src$core$events$utils(D)))},customContextMenu:function(f){if(this.workspace.isMovable()){var b=this.getProcedureCall(),D=this.workspace;f.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const B=p.getDefinition$$module$build$src$core$procedures(b,D);B&&(D.centerOnBlock(B.id),p.setSelected$$module$build$src$core$common(B))}})}}};pt.procedures_callnoreturn=Object.assign({},nt,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),pt.procedures_callreturn=Object.assign({},nt,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var St="UNPARENTED_IFRETURN",Ft={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("value",String(Number(this.hasReturnValue_))),f},domToMutation:function(f){this.hasReturnValue_=f.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(f){if(!(this.workspace.isDragging&&this.workspace.isDragging()||f.type!==p.BLOCK_MOVE$$module$build$src$core$events$events&&f.type!==p.BLOCK_CREATE$$module$build$src$core$events$events)){f=!1;var b=this;do{if(this.FUNCTION_TYPES.includes(b.type)){f=!0;break}b=b.getSurroundParent()}while(b);if(f?(b.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):b.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(p.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{p.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!f,St)}finally{p.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};pt.procedures_ifreturn=Ft,p.defineBlocks$$module$build$src$core$common(pt);var Lt={blocks:pt},ee=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),Je={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};p.register$$module$build$src$core$extensions("math_op_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Je));var W={mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation"),b=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return f.setAttribute("divisor_input",String(b)),f},domToMutation:function(f){f=f.getAttribute("divisor_input")==="true",this.updateShape_(f)},updateShape_:function(f){const b=this.getInput("DIVISOR");f?b||this.appendValueInput("DIVISOR").setCheck("Number"):b&&this.removeInput("DIVISOR")}},H=function(){this.getField("PROPERTY").setValidator(function(f){f=f==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(f)})};p.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",W,H),p.register$$module$build$src$core$extensions("math_change_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var _e={updateType_:function(f){f==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("op",this.getFieldValue("OP")),f},domToMutation:function(f){if(f=f.getAttribute("op"),f===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(f)}},it=function(){this.getField("OP").setValidator((function(f){this.updateType_(f)}).bind(this))};p.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",_e,it),p.defineBlocks$$module$build$src$core$common(ee);var Ye={blocks:ee},rt=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Xe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};p.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Xe));var mt={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};p.register$$module$build$src$core$extensions("controls_flow_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",mt));var Re={customContextMenu:function(f){if(!this.isInFlyout){var b=this.getField("VAR"),D=b.getVariable().name;this.isCollapsed()||D===null||(b={type:"variables_get",fields:{VAR:b.saveState(!0)}},f.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",D),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,b)}))}}};p.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Re),p.register$$module$build$src$core$extensions("controls_for_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),p.register$$module$build$src$core$extensions("controls_forEach_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var _t=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),ds="CONTROL_FLOW_NOT_IN_LOOP",lo={getSurroundLoop:function(){let f=this;do{if(_t.has(f.type))return f;f=f.getSurroundParent()}while(f);return null},onchange:function(f){const b=this.workspace;if(b.isDragging&&!b.isDragging()&&(f.type===p.BLOCK_MOVE$$module$build$src$core$events$events||f.type===p.BLOCK_CREATE$$module$build$src$core$events$events)&&(f=!!this.getSurroundLoop(),this.setWarningText(f?null:p.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{p.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!f,ds)}finally{p.setRecordUndo$$module$build$src$core$events$utils(!0)}}};p.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",lo),p.defineBlocks$$module$build$src$core$common(rt);var xo={blocks:rt,loopTypes:_t},an=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Mi={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};p.register$$module$build$src$core$extensions("logic_op_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Mi));var ks={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const f=p.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&f.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&f.setAttribute("else","1"),f},domToMutation:function(f){this.elseifCount_=parseInt(f.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(f.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const f=Object.create(null);return this.elseifCount_&&(f.elseIfCount=this.elseifCount_),this.elseCount_&&(f.hasElse=!0),f},loadExtraState:function(f){this.elseifCount_=f.elseIfCount||0,this.elseCount_=f.hasElse?1:0,this.updateShape_()},decompose:function(f){const b=f.newBlock("controls_if_if");b.initSvg();let D=b.nextConnection;for(let B=1;B<=this.elseifCount_;B++){const $e=f.newBlock("controls_if_elseif");$e.initSvg(),D.connect($e.previousConnection),D=$e.nextConnection}return this.elseCount_&&(f=f.newBlock("controls_if_else"),f.initSvg(),D.connect(f.previousConnection)),b},compose:function(f){f=f.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const b=[null],D=[null];let B=null;for(;f;){if(!f.isInsertionMarker())switch(f.type){case"controls_if_elseif":this.elseifCount_++,b.push(f.valueConnection_),D.push(f.statementConnection_);break;case"controls_if_else":this.elseCount_++,B=f.statementConnection_;break;default:throw TypeError("Unknown block type: "+f.type)}f=f.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(b,D,B)},saveConnections:function(f){f=f.nextConnection.targetBlock();let b=1;for(;f;){if(!f.isInsertionMarker())switch(f.type){case"controls_if_elseif":var D=this.getInput("IF"+b);const B=this.getInput("DO"+b);f.valueConnection_=D&&D.connection.targetConnection,f.statementConnection_=B&&B.connection.targetConnection,b++;break;case"controls_if_else":D=this.getInput("ELSE"),f.statementConnection_=D&&D.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+f.type)}f=f.getNextBlock()}},rebuildShape_:function(){const f=[null],b=[null];let D=null;this.getInput("ELSE")&&(D=this.getInput("ELSE").connection.targetConnection);for(let B=1;this.getInput("IF"+B);B++){const $e=this.getInput("IF"+B),kt=this.getInput("DO"+B);f.push($e.connection.targetConnection),b.push(kt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(f,b,D)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var f=1;this.getInput("IF"+f);f++)this.removeInput("IF"+f),this.removeInput("DO"+f);for(f=1;f<=this.elseifCount_;f++)this.appendValueInput("IF"+f).setCheck("Boolean").appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+f).appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(f,b,D){for(let B=1;B<=this.elseifCount_;B++){let $e;($e=f[B])==null||$e.reconnect(this,"IF"+B);let kt;(kt=b[B])==null||kt.reconnect(this,"DO"+B)}D==null||D.reconnect(this,"ELSE")}};p.registerMutator$$module$build$src$core$extensions("controls_if_mutator",ks,null,["controls_if_elseif","controls_if_else"]);var ps=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};p.register$$module$build$src$core$extensions("controls_if_tooltip",ps);var li={onchange:function(f){this.prevBlocks_||(this.prevBlocks_=[null,null]);var b=this.getInputTargetBlock("A");const D=this.getInputTargetBlock("B");b&&D&&!this.workspace.connectionChecker.doTypeChecks(b.outputConnection,D.outputConnection)&&(p.setGroup$$module$build$src$core$events$utils(f.group),f=this.prevBlocks_[0],f!==b&&(b.unplug(),!f||f.isDisposed()||f.isShadow()||this.getInput("A").connection.connect(f.outputConnection)),b=this.prevBlocks_[1],b!==D&&(D.unplug(),!b||b.isDisposed()||b.isShadow()||this.getInput("B").connection.connect(b.outputConnection)),this.bumpNeighbours(),p.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ui=function(){this.mixin(li)};p.register$$module$build$src$core$extensions("logic_compare",ui);var Di={prevParentConnection_:null,onchange:function(f){const b=this.getInputTargetBlock("THEN"),D=this.getInputTargetBlock("ELSE"),B=this.outputConnection.targetConnection;if((b||D)&&B)for(let $e=0;2>$e;$e++){const kt=$e===1?b:D;kt&&!kt.workspace.connectionChecker.doTypeChecks(kt.outputConnection,B)&&(p.setGroup$$module$build$src$core$events$utils(f.group),B===this.prevParentConnection_?(this.unplug(),B.getSourceBlock().bumpNeighbours()):(kt.unplug(),kt.bumpNeighbours()),p.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=B}};p.registerMixin$$module$build$src$core$extensions("logic_ternary",Di),p.defineBlocks$$module$build$src$core$common(an);var Ue={blocks:an},Tt=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ot={init:function(){this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("items",String(this.itemCount_)),f},domToMutation:function(f){if(f=f.getAttribute("items"),!f)throw new TypeError("element did not have items");this.itemCount_=parseInt(f,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(f){this.itemCount_=f.itemCount,this.updateShape_()},decompose:function(f){const b=f.newBlock("lists_create_with_container");b.initSvg();let D=b.getInput("STACK").connection;for(let B=0;B<this.itemCount_;B++){const $e=f.newBlock("lists_create_with_item");if($e.initSvg(),!$e.previousConnection)throw Error("itemBlock has no previousConnection");D.connect($e.previousConnection),D=$e.nextConnection}return b},compose:function(f){var b=f.getInputTargetBlock("STACK");for(f=[];b;)b.isInsertionMarker()||f.push(b.valueConnection_),b=b.getNextBlock();for(b=0;b<this.itemCount_;b++){const D=this.getInput("ADD"+b).connection.targetConnection;D&&!f.includes(D)&&D.disconnect()}for(this.itemCount_=f.length,this.updateShape_(),b=0;b<this.itemCount_;b++){let D;(D=f[b])==null||D.reconnect(this,"ADD"+b)}},saveConnections:function(f){f=f.getInputTargetBlock("STACK");let b=0;for(;f;){if(f.isInsertionMarker()){f=f.getNextBlock();continue}const D=this.getInput("ADD"+b);let B;f.valueConnection_=(B=D)==null?void 0:B.connection.targetConnection,f=f.getNextBlock(),b++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var f=0;f<this.itemCount_;f++)if(!this.getInput("ADD"+f)){const b=this.appendValueInput("ADD"+f).setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT);f===0&&b.appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(f=this.itemCount_;this.getInput("ADD"+f);f++)this.removeInput("ADD"+f)}};Tt.lists_create_with=Ot;var ci={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};Tt.lists_create_with_container=ci;var As={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};Tt.lists_create_with_item=As;var k={init:function(){var f=[[p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),!f)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(f,"END"),this.setInputsInline(!0),this.setTooltip(()=>p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};Tt.lists_indexOf=k;var Yn={init:function(){var f=[[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),f.setValidator(function(b){b=b==="REMOVE",this.getSourceBlock().updateStatement_(b)}),this.appendValueInput("VALUE").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(f,"MODE").appendField("","SPACE"),f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),f.setValidator(function(b){const D=this.getValue();b=b==="FROM_START"||b==="FROM_END",b!==(D==="FROM_START"||D==="FROM_END")&&this.getSourceBlock().updateAt_(b)}),this.appendDummyInput().appendField(f,"WHERE"),this.appendDummyInput("AT"),p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const b=this.getFieldValue("MODE"),D=this.getFieldValue("WHERE");let B="";switch(b+" "+D){case"GET FROM_START":case"GET FROM_END":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":B=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(D==="FROM_START"||D==="FROM_END")&&(B+="  "+(D==="FROM_START"?p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),B})},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");f.setAttribute("statement",String(!this.outputConnection));const b=this.getInput("AT")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at",String(b)),f},domToMutation:function(f){const b=f.getAttribute("statement")==="true";this.updateStatement_(b),f=f.getAttribute("at")!=="false",this.updateAt_(f)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(f){f.isStatement?this.updateStatement_(!0):typeof f=="string"&&this.domToMutation(p.textToDom$$module$build$src$core$utils$xml(f))},updateStatement_:function(f){f!==!this.outputConnection&&(this.unplug(!0,!0),f?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(f){this.removeInput("AT"),this.removeInput("ORDINAL",!0),f?(this.appendValueInput("AT").setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};Tt.lists_getIndex=Yn;var ts={init:function(){var f=[[p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),this.appendDummyInput().appendField(f,"MODE").appendField("","SPACE"),f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),f.setValidator(function(b){const D=this.getValue();b=b==="FROM_START"||b==="FROM_END",b!==(D==="FROM_START"||D==="FROM_END")&&this.getSourceBlock().updateAt_(b)}),this.appendDummyInput().appendField(f,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const b=this.getFieldValue("MODE"),D=this.getFieldValue("WHERE");let B="";switch(b+" "+D){case"SET FROM_START":case"SET FROM_END":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":B=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(D==="FROM_START"||D==="FROM_END")&&(B+="  "+p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),B})},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation"),b=this.getInput("AT")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at",String(b)),f},domToMutation:function(f){f=f.getAttribute("at")!=="false",this.updateAt_(f)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(f){this.removeInput("AT"),this.removeInput("ORDINAL",!0),f?(this.appendValueInput("AT").setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};Tt.lists_setIndex=ts;var Rt={init:function(){this.WHERE_OPTIONS_1=[[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const f=b=>{const D=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+b]});return D.setValidator(function(B){const $e=this.getValue();B=B==="FROM_START"||B==="FROM_END",B!==($e==="FROM_START"||$e==="FROM_END")&&this.getSourceBlock().updateAt_(b,B)}),D};this.appendDummyInput("WHERE1_INPUT").appendField(f(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(f(2),"WHERE2"),this.appendDummyInput("AT2"),p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");var b=this.getInput("AT1")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at1",String(b)),b=this.getInput("AT2")instanceof p.ValueInput$$module$build$src$core$inputs$value_input,f.setAttribute("at2",String(b)),f},domToMutation:function(f){const b=f.getAttribute("at1")==="true";f=f.getAttribute("at2")==="true",this.updateAt_(1,b),this.updateAt_(2,f)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(f,b){this.removeInput("AT"+f),this.removeInput("ORDINAL"+f,!0),b?(this.appendValueInput("AT"+f).setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+f).appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+f),f===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};Tt.lists_getSublist=Rt,Tt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Tt.lists_split={init:function(){const f=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[p.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[p.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!f)throw Error("field_dropdown not found");f.setValidator(b=>{this.updateType_(b)}),this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(f,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(p.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const b=this.getFieldValue("MODE");if(b==="SPLIT")return p.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(b==="JOIN")return p.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+b)})},updateType_:function(f){if(this.getFieldValue("MODE")!==f){const b=this.getInput("INPUT").connection;b.setShadowDom(null);const D=b.targetBlock();D&&(b.disconnect(),D.isShadow()?D.dispose(!1):this.bumpNeighbours())}f==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const f=p.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("mode",this.getFieldValue("MODE")),f},domToMutation:function(f){this.updateType_(f.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},p.defineBlocks$$module$build$src$core$common(Tt);var ms={blocks:Tt},K=Object.assign({},Tt,an,rt,ee,pt,ie,Y,C),ye={blocks:K,lists:ms,logic:Ue,loops:xo,math:Ye,procedures:Lt,texts:Oe,variables:Ie,variablesDynamic:V};return ye.__namespace__=p,ye})}(Xp)),Xp.exports}var LE=Vp.exports,Ef;function kE(){return Ef||(Ef=1,function(m,R){(function(r,p){m.exports=p(Qp(),yE(),Ff())})(LE,function(r,p,C){return r.setLocale(p),r})}(Vp)),Vp.exports}var AE=kE();const wE=uh(AE),{ASTNode:aA,BasicCursor:hA,Block:dA,BlockSvg:pA,Blocks:_A,COLLAPSED_FIELD_NAME:gA,COLLAPSED_INPUT_NAME:$A,COLLAPSE_CHARS:fA,CodeGenerator:mA,CollapsibleToolboxCategory:TA,ComponentManager:EA,Connection:IA,ConnectionChecker:bA,ConnectionDB:SA,ConnectionType:OA,ContextMenu:RA,ContextMenuItems:CA,ContextMenuRegistry:yA,Css:vA,Cursor:LA,DELETE_VARIABLE_ID:kA,DeleteArea:AA,DragTarget:wA,DropDownDiv:NA,Events:MA,Extensions:DA,Field:PA,FieldCheckbox:xA,FieldDropdown:BA,FieldImage:FA,FieldLabel:UA,FieldLabelSerializable:HA,FieldNumber:GA,FieldTextInput:VA,FieldVariable:WA,Flyout:XA,FlyoutButton:zA,FlyoutMetricsManager:YA,Generator:jA,Gesture:KA,Grid:JA,HorizontalFlyout:qA,INPUT_VALUE:QA,Input:ZA,InsertionMarkerManager:ew,InsertionMarkerPreviewer:tw,Marker:sw,MarkerManager:nw,Menu:iw,MenuItem:ow,MetricsManager:rw,Msg:lw,NEXT_STATEMENT:uw,Names:cw,OPPOSITE_TYPE:aw,OUTPUT_VALUE:hw,Options:dw,PREVIOUS_STATEMENT:pw,PROCEDURE_CATEGORY_NAME:_w,Procedures:gw,RENAME_VARIABLE_ID:$w,RenderedConnection:fw,Scrollbar:mw,ScrollbarPair:Tw,ShortcutItems:Ew,ShortcutRegistry:Iw,TOOLBOX_AT_BOTTOM:bw,TOOLBOX_AT_LEFT:Sw,TOOLBOX_AT_RIGHT:Ow,TOOLBOX_AT_TOP:Rw,TabNavigateCursor:Cw,Theme:yw,ThemeManager:vw,Themes:Lw,Toolbox:kw,ToolboxCategory:Aw,ToolboxItem:ww,ToolboxSeparator:Nw,Tooltip:Mw,Touch:Dw,Trashcan:Pw,UnattachedFieldError:xw,VARIABLE_CATEGORY_NAME:Bw,VARIABLE_DYNAMIC_CATEGORY_NAME:Fw,VERSION:Uw,VariableMap:Hw,VariableModel:Gw,Variables:Vw,VariablesDynamic:Ww,VerticalFlyout:Xw,WidgetDiv:zw,Workspace:Yw,WorkspaceAudio:jw,WorkspaceDragger:Kw,WorkspaceSvg:Jw,Xml:qw,ZoomControls:Qw,blockAnimations:Zw,blockRendering:eN,browserEvents:tN,bubbles:sN,bumpObjects:nN,clipboard:iN,comments:oN,common:rN,config:lN,constants:uN,defineBlocksWithJsonArray:cN,dialog:aN,dragging:hN,fieldRegistry:dN,geras:pN,getMainWorkspace:_N,getSelected:gN,hasBubble:$N,hideChaff:fN,icons:mN,inject:TN,inputs:EN,isCopyable:IN,isDeletable:bN,isDraggable:SN,isIcon:ON,isObservable:RN,isPaster:CN,isRenderedElement:yN,isSelectable:vN,isSerializable:LN,isVariableBackedParameterModel:kN,layers:AN,procedures:wN,registry:NN,renderManagement:MN,serialization:DN,setLocale:PN,setParentContainer:xN,svgResize:BN,thrasos:FN,uiPosition:UN,utils:HN,zelos:GN}=wE;var NE=Ff();const ME=uh(NE),{blocks:VN,lists:WN,logic:XN,loops:zN,math:YN,procedures:jN,texts:KN,variables:JN,variablesDynamic:qN}=ME;var zp={exports:{}},DE=zp.exports,If;function PE(){return If||(If=1,function(m,R){(function(r,p){m.exports=p(Qp())})(DE,function(r){var p=r.__namespace__,C=function($,O){return["[]",k.ATOMIC]},x=function($,O){const L=Array($.itemCount_);for(let G=0;G<$.itemCount_;G++)L[G]=O.valueToCode($,"ADD"+G,k.NONE)||"null";return["["+L.join(", ")+"]",k.ATOMIC]},Z=function($,O){const L=O.provideFunction_("listsRepeat",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),G=O.valueToCode($,"ITEM",k.NONE)||"null";return $=O.valueToCode($,"NUM",k.NONE)||"0",[L+"("+G+", "+$+")",k.FUNCTION_CALL]},j=function($,O){return[(O.valueToCode($,"VALUE",k.MEMBER)||"[]")+".length",k.MEMBER]},V=function($,O){return["!"+(O.valueToCode($,"VALUE",k.MEMBER)||"[]")+".length",k.LOGICAL_NOT]},Y=function($,O){const L=$.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",G=O.valueToCode($,"FIND",k.NONE)||"''";return O=(O.valueToCode($,"VALUE",k.MEMBER)||"[]")+"."+L+"("+G+")",$.workspace.options.oneBasedIndex?[O+" + 1",k.ADDITION]:[O,k.FUNCTION_CALL]},de=function($,O){const L=$.getFieldValue("MODE")||"GET",G=$.getFieldValue("WHERE")||"FROM_START";var ue=O.valueToCode($,"VALUE",G==="RANDOM"?k.NONE:k.MEMBER)||"[]";switch(G){case"FIRST":if(L==="GET")return[ue+"[0]",k.MEMBER];if(L==="GET_REMOVE")return[ue+".shift()",k.MEMBER];if(L==="REMOVE")return ue+`.shift();
`;break;case"LAST":if(L==="GET")return[ue+".slice(-1)[0]",k.MEMBER];if(L==="GET_REMOVE")return[ue+".pop()",k.MEMBER];if(L==="REMOVE")return ue+`.pop();
`;break;case"FROM_START":if($=O.getAdjusted($,"AT"),L==="GET")return[ue+"["+$+"]",k.MEMBER];if(L==="GET_REMOVE")return[ue+".splice("+$+", 1)[0]",k.FUNCTION_CALL];if(L==="REMOVE")return ue+".splice("+$+`, 1);
`;break;case"FROM_END":if($=O.getAdjusted($,"AT",1,!0),L==="GET")return[ue+".slice("+$+")[0]",k.FUNCTION_CALL];if(L==="GET_REMOVE")return[ue+".splice("+$+", 1)[0]",k.FUNCTION_CALL];if(L==="REMOVE")return ue+".splice("+$+", 1);";break;case"RANDOM":if(ue=O.provideFunction_("listsGetRandomItem",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+ue+", "+(L!=="GET")+")",L==="GET"||L==="GET_REMOVE")return[ue,k.FUNCTION_CALL];if(L==="REMOVE")return ue+`;
`}throw Error("Unhandled combination (lists_getIndex).")},ge=function($,O){function L(){if(G.match(/^\w+$/))return"";const hn=O.nameDB_.getDistinctName("tmpList",p.NameType$$module$build$src$core$names.VARIABLE),jn="var "+hn+" = "+G+`;
`;return G=hn,jn}let G=O.valueToCode($,"LIST",k.MEMBER)||"[]";const ue=$.getFieldValue("MODE")||"GET";var Le=$.getFieldValue("WHERE")||"FROM_START";const Ke=O.valueToCode($,"TO",k.ASSIGNMENT)||"null";switch(Le){case"FIRST":if(ue==="SET")return G+"[0] = "+Ke+`;
`;if(ue==="INSERT")return G+".unshift("+Ke+`);
`;break;case"LAST":if(ue==="SET")return L()+(G+"["+G+".length - 1] = "+Ke+`;
`);if(ue==="INSERT")return G+".push("+Ke+`);
`;break;case"FROM_START":if($=O.getAdjusted($,"AT"),ue==="SET")return G+"["+$+"] = "+Ke+`;
`;if(ue==="INSERT")return G+".splice("+$+", 0, "+Ke+`);
`;break;case"FROM_END":if($=O.getAdjusted($,"AT",1,!1,k.SUBTRACTION),Le=L(),ue==="SET")return Le+(G+"["+G+".length - "+$+"] = "+Ke+`;
`);if(ue==="INSERT")return Le+(G+".splice("+G+".length - "+$+", 0, "+Ke+`);
`);break;case"RANDOM":if($=L(),Le=O.nameDB_.getDistinctName("tmpX",p.NameType$$module$build$src$core$names.VARIABLE),$+="var "+Le+" = Math.floor(Math.random() * "+G+`.length);
`,ue==="SET")return $+(G+"["+Le+"] = "+Ke+`;
`);if(ue==="INSERT")return $+(G+".splice("+Le+", 0, "+Ke+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},q=function($,O){var L={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},G=O.valueToCode($,"LIST",k.MEMBER)||"[]";const ue=$.getFieldValue("WHERE1"),Le=$.getFieldValue("WHERE2");if(ue==="FIRST"&&Le==="LAST")G+=".slice(0)";else if(G.match(/^\w+$/)||ue!=="FROM_END"&&Le==="FROM_START"){switch(ue){case"FROM_START":L=O.getAdjusted($,"AT1");break;case"FROM_END":L=O.getAdjusted($,"AT1",1,!1,k.SUBTRACTION),L=G+".length - "+L;break;case"FIRST":L="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Le){case"FROM_START":O=O.getAdjusted($,"AT2",1);break;case"FROM_END":O=O.getAdjusted($,"AT2",0,!1,k.SUBTRACTION),O=G+".length - "+O;break;case"LAST":O=G+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}G=G+".slice("+L+", "+O+")"}else{const Ke=O.getAdjusted($,"AT1");$=O.getAdjusted($,"AT2"),G=O.provideFunction_("subsequence"+L[ue]+L[Le],`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(sequence${ue==="FROM_END"||ue==="FROM_START"?", at1":""}${Le==="FROM_END"||Le==="FROM_START"?", at2":""}) {
  var start = ${ts("sequence",ue,"at1")};
  var end = ${ts("sequence",Le,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+G+(ue==="FROM_END"||ue==="FROM_START"?", "+Ke:"")+(Le==="FROM_END"||Le==="FROM_START"?", "+$:"")+")"}return[G,k.FUNCTION_CALL]},Ie=function($,O){const L=O.valueToCode($,"LIST",k.FUNCTION_CALL)||"[]",G=$.getFieldValue("DIRECTION")==="1"?1:-1;return $=$.getFieldValue("TYPE"),O=O.provideFunction_("listsGetSortCompare",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[L+".slice().sort("+O+'("'+$+'", '+G+"))",k.FUNCTION_CALL]},ie=function($,O){let L=O.valueToCode($,"INPUT",k.MEMBER);if(O=O.valueToCode($,"DELIM",k.NONE)||"''",$=$.getFieldValue("MODE"),$==="SPLIT")L||(L="''"),$="split";else if($==="JOIN")L||(L="[]"),$="join";else throw Error("Unknown mode: "+$);return[L+"."+$+"("+O+")",k.FUNCTION_CALL]},Se=function($,O){return[(O.valueToCode($,"LIST",k.FUNCTION_CALL)||"[]")+".slice().reverse()",k.FUNCTION_CALL]},le=function($,O){var L=0;let G="";O.STATEMENT_PREFIX&&(G+=O.injectId(O.STATEMENT_PREFIX,$));do{const ue=O.valueToCode($,"IF"+L,k.NONE)||"false";let Le=O.statementToCode($,"DO"+L);O.STATEMENT_SUFFIX&&(Le=O.prefixLines(O.injectId(O.STATEMENT_SUFFIX,$),O.INDENT)+Le),G+=(0<L?" else ":"")+"if ("+ue+`) {
`+Le+"}",L++}while($.getInput("IF"+L));return($.getInput("ELSE")||O.STATEMENT_SUFFIX)&&(L=O.statementToCode($,"ELSE"),O.STATEMENT_SUFFIX&&(L=O.prefixLines(O.injectId(O.STATEMENT_SUFFIX,$),O.INDENT)+L),G+=` else {
`+L+"}"),G+`
`},pe=function($,O){const L={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[$.getFieldValue("OP")],G=L==="=="||L==="!="?k.EQUALITY:k.RELATIONAL,ue=O.valueToCode($,"A",G)||"0";return $=O.valueToCode($,"B",G)||"0",[ue+" "+L+" "+$,G]},ke=function($,O){const L=$.getFieldValue("OP")==="AND"?"&&":"||",G=L==="&&"?k.LOGICAL_AND:k.LOGICAL_OR;let ue=O.valueToCode($,"A",G);return $=O.valueToCode($,"B",G),ue||$?(O=L==="&&"?"true":"false",ue||(ue=O),$||($=O)):$=ue="false",[ue+" "+L+" "+$,G]},Ne=function($,O){const L=k.LOGICAL_NOT;return["!"+(O.valueToCode($,"BOOL",L)||"true"),L]},ot=function($,O){return[$.getFieldValue("BOOL")==="TRUE"?"true":"false",k.ATOMIC]},ft=function($,O){return["null",k.ATOMIC]},bt=function($,O){const L=O.valueToCode($,"IF",k.CONDITIONAL)||"false",G=O.valueToCode($,"THEN",k.CONDITIONAL)||"null";return $=O.valueToCode($,"ELSE",k.CONDITIONAL)||"null",[L+" ? "+G+" : "+$,k.CONDITIONAL]},at=function($,O){let L;L=$.getField("TIMES")?String(Number($.getFieldValue("TIMES"))):O.valueToCode($,"TIMES",k.ASSIGNMENT)||"0";let G=O.statementToCode($,"DO");G=O.addLoopTrap(G,$),$="";const ue=O.nameDB_.getDistinctName("count",p.NameType$$module$build$src$core$names.VARIABLE);let Le=L;return L.match(/^\w+$/)||p.isNumber$$module$build$src$core$utils$string(L)||(Le=O.nameDB_.getDistinctName("repeat_end",p.NameType$$module$build$src$core$names.VARIABLE),$+="var "+Le+" = "+L+`;
`),$+("for (var "+ue+" = 0; "+ue+" < "+Le+"; "+ue+`++) {
`+G+`}
`)},Oe=function($,O){const L=$.getFieldValue("MODE")==="UNTIL";let G=O.valueToCode($,"BOOL",L?k.LOGICAL_NOT:k.NONE)||"false",ue=O.statementToCode($,"DO");return ue=O.addLoopTrap(ue,$),L&&(G="!"+G),"while ("+G+`) {
`+ue+`}
`},pt=function($,O){var L=O.getVariableName($.getFieldValue("VAR")),G=O.valueToCode($,"FROM",k.ASSIGNMENT)||"0",ue=O.valueToCode($,"TO",k.ASSIGNMENT)||"0";const Le=O.valueToCode($,"BY",k.ASSIGNMENT)||"1";let Ke=O.statementToCode($,"DO");if(Ke=O.addLoopTrap(Ke,$),p.isNumber$$module$build$src$core$utils$string(G)&&p.isNumber$$module$build$src$core$utils$string(ue)&&p.isNumber$$module$build$src$core$utils$string(Le))O=Number(G)<=Number(ue),$="for ("+L+" = "+G+"; "+L+(O?" <= ":" >= ")+ue+"; "+L,L=Math.abs(Number(Le)),$=L===1?$+(O?"++":"--"):$+((O?" += ":" -= ")+L),$+=`) {
`+Ke+`}
`;else{$="";let hn=G;G.match(/^\w+$/)||p.isNumber$$module$build$src$core$utils$string(G)||(hn=O.nameDB_.getDistinctName(L+"_start",p.NameType$$module$build$src$core$names.VARIABLE),$+="var "+hn+" = "+G+`;
`),G=ue,ue.match(/^\w+$/)||p.isNumber$$module$build$src$core$utils$string(ue)||(G=O.nameDB_.getDistinctName(L+"_end",p.NameType$$module$build$src$core$names.VARIABLE),$+="var "+G+" = "+ue+`;
`),ue=O.nameDB_.getDistinctName(L+"_inc",p.NameType$$module$build$src$core$names.VARIABLE),$+="var "+ue+" = ",$=p.isNumber$$module$build$src$core$utils$string(Le)?$+(Math.abs(Number(Le))+`;
`):$+("Math.abs("+Le+`);
`),$+="if ("+hn+" > "+G+`) {
`,$+=O.INDENT+ue+" = -"+ue+`;
`,$=$+`}
for (`+(L+" = "+hn+"; "+ue+" >= 0 ? "+L+" <= "+G+" : "+L+" >= "+G+"; "+L+" += "+ue+`) {
`+Ke+`}
`)}return $},Bt=function($,O){const L=O.getVariableName($.getFieldValue("VAR"));var G=O.valueToCode($,"LIST",k.ASSIGNMENT)||"[]";let ue=O.statementToCode($,"DO");ue=O.addLoopTrap(ue,$),$="";let Le=G;return G.match(/^\w+$/)||(Le=O.nameDB_.getDistinctName(L+"_list",p.NameType$$module$build$src$core$names.VARIABLE),$+="var "+Le+" = "+G+`;
`),G=O.nameDB_.getDistinctName(L+"_index",p.NameType$$module$build$src$core$names.VARIABLE),ue=O.INDENT+L+" = "+Le+"["+G+`];
`+ue,$+("for (var "+G+" in "+Le+`) {
`+ue+`}
`)},Ls=function($,O){let L="";if(O.STATEMENT_PREFIX&&(L+=O.injectId(O.STATEMENT_PREFIX,$)),O.STATEMENT_SUFFIX&&(L+=O.injectId(O.STATEMENT_SUFFIX,$)),O.STATEMENT_PREFIX){const G=$.getSurroundLoop();G&&!G.suppressPrefixSuffix&&(L+=O.injectId(O.STATEMENT_PREFIX,G))}switch($.getFieldValue("FLOW")){case"BREAK":return L+`break;
`;case"CONTINUE":return L+`continue;
`}throw Error("Unknown flow statement.")},fs=function($,O){return $=Number($.getFieldValue("NUM")),[String($),0<=$?k.ATOMIC:k.UNARY_NEGATION]},os=function($,O){var L={ADD:[" + ",k.ADDITION],MINUS:[" - ",k.SUBTRACTION],MULTIPLY:[" * ",k.MULTIPLICATION],DIVIDE:[" / ",k.DIVISION],POWER:[null,k.NONE]}[$.getFieldValue("OP")];const G=L[0];L=L[1];const ue=O.valueToCode($,"A",L)||"0";return $=O.valueToCode($,"B",L)||"0",G?[ue+G+$,L]:["Math.pow("+ue+", "+$+")",k.FUNCTION_CALL]},nt=function($,O){const L=$.getFieldValue("OP");let G;if(L==="NEG")return $=O.valueToCode($,"NUM",k.UNARY_NEGATION)||"0",$[0]==="-"&&($=" "+$),["-"+$,k.UNARY_NEGATION];switch($=L==="SIN"||L==="COS"||L==="TAN"?O.valueToCode($,"NUM",k.DIVISION)||"0":O.valueToCode($,"NUM",k.NONE)||"0",L){case"ABS":G="Math.abs("+$+")";break;case"ROOT":G="Math.sqrt("+$+")";break;case"LN":G="Math.log("+$+")";break;case"EXP":G="Math.exp("+$+")";break;case"POW10":G="Math.pow(10,"+$+")";break;case"ROUND":G="Math.round("+$+")";break;case"ROUNDUP":G="Math.ceil("+$+")";break;case"ROUNDDOWN":G="Math.floor("+$+")";break;case"SIN":G="Math.sin("+$+" / 180 * Math.PI)";break;case"COS":G="Math.cos("+$+" / 180 * Math.PI)";break;case"TAN":G="Math.tan("+$+" / 180 * Math.PI)"}if(G)return[G,k.FUNCTION_CALL];switch(L){case"LOG10":G="Math.log("+$+") / Math.log(10)";break;case"ASIN":G="Math.asin("+$+") / Math.PI * 180";break;case"ACOS":G="Math.acos("+$+") / Math.PI * 180";break;case"ATAN":G="Math.atan("+$+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+L)}return[G,k.DIVISION]},St=function($,O){return{PI:["Math.PI",k.MEMBER],E:["Math.E",k.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",k.DIVISION],SQRT2:["Math.SQRT2",k.MEMBER],SQRT1_2:["Math.SQRT1_2",k.MEMBER],INFINITY:["Infinity",k.ATOMIC]}[$.getFieldValue("CONSTANT")]},Ft=function($,O){var L={EVEN:[" % 2 === 0",k.MODULUS,k.EQUALITY],ODD:[" % 2 === 1",k.MODULUS,k.EQUALITY],WHOLE:[" % 1 === 0",k.MODULUS,k.EQUALITY],POSITIVE:[" > 0",k.RELATIONAL,k.RELATIONAL],NEGATIVE:[" < 0",k.RELATIONAL,k.RELATIONAL],DIVISIBLE_BY:[null,k.MODULUS,k.EQUALITY],PRIME:[null,k.NONE,k.FUNCTION_CALL]};const G=$.getFieldValue("PROPERTY"),[ue,Le,Ke]=L[G];return L=O.valueToCode($,"NUMBER_TO_CHECK",Le)||"0",G==="PRIME"?$=O.provideFunction_("mathIsPrime",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+L+")":G==="DIVISIBLE_BY"?($=O.valueToCode($,"DIVISOR",k.MODULUS)||"0",$=L+" % "+$+" === 0"):$=L+ue,[$,Ke]},Lt=function($,O){const L=O.valueToCode($,"DELTA",k.ADDITION)||"0";return $=O.getVariableName($.getFieldValue("VAR")),$+" = (typeof "+$+" === 'number' ? "+$+" : 0) + "+L+`;
`},ee=function($,O){var L=$.getFieldValue("OP");switch(L){case"SUM":$=O.valueToCode($,"LIST",k.MEMBER)||"[]",$+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":$=O.valueToCode($,"LIST",k.NONE)||"[]",$="Math.min.apply(null, "+$+")";break;case"MAX":$=O.valueToCode($,"LIST",k.NONE)||"[]",$="Math.max.apply(null, "+$+")";break;case"AVERAGE":L=O.provideFunction_("mathMean",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),$=O.valueToCode($,"LIST",k.NONE)||"[]",$=L+"("+$+")";break;case"MEDIAN":L=O.provideFunction_("mathMedian",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),$=O.valueToCode($,"LIST",k.NONE)||"[]",$=L+"("+$+")";break;case"MODE":L=O.provideFunction_("mathModes",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),$=O.valueToCode($,"LIST",k.NONE)||"[]",$=L+"("+$+")";break;case"STD_DEV":L=O.provideFunction_("mathStandardDeviation",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),$=O.valueToCode($,"LIST",k.NONE)||"[]",$=L+"("+$+")";break;case"RANDOM":L=O.provideFunction_("mathRandomList",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),$=O.valueToCode($,"LIST",k.NONE)||"[]",$=L+"("+$+")";break;default:throw Error("Unknown operator: "+L)}return[$,k.FUNCTION_CALL]},Je=function($,O){const L=O.valueToCode($,"DIVIDEND",k.MODULUS)||"0";return $=O.valueToCode($,"DIVISOR",k.MODULUS)||"0",[L+" % "+$,k.MODULUS]},W=function($,O){const L=O.valueToCode($,"VALUE",k.NONE)||"0",G=O.valueToCode($,"LOW",k.NONE)||"0";return $=O.valueToCode($,"HIGH",k.NONE)||"Infinity",["Math.min(Math.max("+L+", "+G+"), "+$+")",k.FUNCTION_CALL]},H=function($,O){const L=O.valueToCode($,"FROM",k.NONE)||"0";return $=O.valueToCode($,"TO",k.NONE)||"0",[O.provideFunction_("mathRandomInt",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+L+", "+$+")",k.FUNCTION_CALL]},_e=function($,O){return["Math.random()",k.FUNCTION_CALL]},it=function($,O){const L=O.valueToCode($,"X",k.NONE)||"0";return["Math.atan2("+(O.valueToCode($,"Y",k.NONE)||"0")+", "+L+") / Math.PI * 180",k.DIVISION]},Ye=function($,O){const L=O.getProcedureName($.getFieldValue("NAME"));var G="";O.STATEMENT_PREFIX&&(G+=O.injectId(O.STATEMENT_PREFIX,$)),O.STATEMENT_SUFFIX&&(G+=O.injectId(O.STATEMENT_SUFFIX,$)),G&&(G=O.prefixLines(G,O.INDENT));let ue="";O.INFINITE_LOOP_TRAP&&(ue=O.prefixLines(O.injectId(O.INFINITE_LOOP_TRAP,$),O.INDENT));let Le="";$.getInput("STACK")&&(Le=O.statementToCode($,"STACK"));let Ke="";$.getInput("RETURN")&&(Ke=O.valueToCode($,"RETURN",k.NONE)||"");let hn="";Le&&Ke&&(hn=G),Ke&&(Ke=O.INDENT+"return "+Ke+`;
`);const jn=[],br=$.getVars();for(let Kn=0;Kn<br.length;Kn++)jn[Kn]=O.getVariableName(br[Kn]);return G="function "+L+"("+jn.join(", ")+`) {
`+G+ue+Le+hn+Ke+"}",G=O.scrub_($,G),O.definitions_["%"+L]=G,null},rt=function($,O){const L=O.getProcedureName($.getFieldValue("NAME")),G=[],ue=$.getVars();for(let Le=0;Le<ue.length;Le++)G[Le]=O.valueToCode($,"ARG"+Le,k.NONE)||"null";return[L+"("+G.join(", ")+")",k.FUNCTION_CALL]},Xe=function($,O){return O.forBlock.procedures_callreturn($,O)[0]+`;
`},mt=function($,O){let L="if ("+(O.valueToCode($,"CONDITION",k.NONE)||"false")+`) {
`;return O.STATEMENT_SUFFIX&&(L+=O.prefixLines(O.injectId(O.STATEMENT_SUFFIX,$),O.INDENT)),$.hasReturnValue_?($=O.valueToCode($,"VALUE",k.NONE)||"null",L+=O.INDENT+"return "+$+`;
`):L+=O.INDENT+`return;
`,L+`}
`},Re=function($,O){return[O.quote_($.getFieldValue("TEXT")),k.ATOMIC]},_t=function($,O){switch($.itemCount_){case 0:return["''",k.ATOMIC];case 1:return $=O.valueToCode($,"ADD0",k.NONE)||"''",D($);case 2:var L=O.valueToCode($,"ADD0",k.NONE)||"''";return $=O.valueToCode($,"ADD1",k.NONE)||"''",[D(L)[0]+" + "+D($)[0],k.ADDITION];default:L=Array($.itemCount_);for(let G=0;G<$.itemCount_;G++)L[G]=O.valueToCode($,"ADD"+G,k.NONE)||"''";return["["+L.join(",")+"].join('')",k.FUNCTION_CALL]}},ds=function($,O){const L=O.getVariableName($.getFieldValue("VAR"));return $=O.valueToCode($,"TEXT",k.NONE)||"''",L+" += "+D($)[0]+`;
`},lo=function($,O){return[(O.valueToCode($,"VALUE",k.MEMBER)||"''")+".length",k.MEMBER]},xo=function($,O){return["!"+(O.valueToCode($,"VALUE",k.MEMBER)||"''")+".length",k.LOGICAL_NOT]},an=function($,O){const L=$.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",G=O.valueToCode($,"FIND",k.NONE)||"''";return O=(O.valueToCode($,"VALUE",k.MEMBER)||"''")+"."+L+"("+G+")",$.workspace.options.oneBasedIndex?[O+" + 1",k.ADDITION]:[O,k.FUNCTION_CALL]},Mi=function($,O){const L=$.getFieldValue("WHERE")||"FROM_START",G=O.valueToCode($,"VALUE",L==="RANDOM"?k.NONE:k.MEMBER)||"''";switch(L){case"FIRST":return[G+".charAt(0)",k.FUNCTION_CALL];case"LAST":return[G+".slice(-1)",k.FUNCTION_CALL];case"FROM_START":return $=O.getAdjusted($,"AT"),[G+".charAt("+$+")",k.FUNCTION_CALL];case"FROM_END":return $=O.getAdjusted($,"AT",1,!0),[G+".slice("+$+").charAt(0)",k.FUNCTION_CALL];case"RANDOM":return[O.provideFunction_("textRandomLetter",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+G+")",k.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},ks=function($,O){var L={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const G=$.getFieldValue("WHERE1"),ue=$.getFieldValue("WHERE2");var Le=G!=="FROM_END"&&G!=="LAST"&&ue!=="FROM_END"&&ue!=="LAST",Ke=O.valueToCode($,"STRING",Le?k.MEMBER:k.NONE)||"''";if(G==="FIRST"&&ue==="LAST")return[Ke,k.NONE];if(Ke.match(/^'?\w+'?$/)||Le){switch(G){case"FROM_START":L=O.getAdjusted($,"AT1");break;case"FROM_END":L=O.getAdjusted($,"AT1",1,!1,k.SUBTRACTION),L=Ke+".length - "+L;break;case"FIRST":L="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(ue){case"FROM_START":O=O.getAdjusted($,"AT2",1);break;case"FROM_END":O=O.getAdjusted($,"AT2",0,!1,k.SUBTRACTION),O=Ke+".length - "+O;break;case"LAST":O=Ke+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Ke=Ke+".slice("+L+", "+O+")"}else Le=O.getAdjusted($,"AT1"),$=O.getAdjusted($,"AT2"),Ke=O.provideFunction_("subsequence"+L[G]+L[ue],`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(sequence${G==="FROM_END"||G==="FROM_START"?", at1":""}${ue==="FROM_END"||ue==="FROM_START"?", at2":""}) {
  var start = ${B("sequence",G,"at1")};
  var end = ${B("sequence",ue,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Ke+(G==="FROM_END"||G==="FROM_START"?", "+Le:"")+(ue==="FROM_END"||ue==="FROM_START"?", "+$:"")+")";return[Ke,k.FUNCTION_CALL]},ps=function($,O){const L={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[$.getFieldValue("CASE")];return $=O.valueToCode($,"TEXT",L?k.MEMBER:k.NONE)||"''",[L?$+L:O.provideFunction_("textToTitleCase",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+$+")",k.FUNCTION_CALL]},li=function($,O){const L={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[$.getFieldValue("MODE")];return[(O.valueToCode($,"TEXT",k.MEMBER)||"''")+L,k.FUNCTION_CALL]},ui=function($,O){return"window.alert("+(O.valueToCode($,"TEXT",k.NONE)||"''")+`);
`},Di=function($,O){return O="window.prompt("+($.getField("TEXT")?O.quote_($.getFieldValue("TEXT")):O.valueToCode($,"TEXT",k.NONE)||"''")+")",$.getFieldValue("TYPE")==="NUMBER"&&(O="Number("+O+")"),[O,k.FUNCTION_CALL]},Ue=function($,O){const L=O.valueToCode($,"TEXT",k.NONE)||"''";return $=O.valueToCode($,"SUB",k.NONE)||"''",[O.provideFunction_("textCount",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+L+", "+$+")",k.FUNCTION_CALL]},Tt=function($,O){const L=O.valueToCode($,"TEXT",k.NONE)||"''",G=O.valueToCode($,"FROM",k.NONE)||"''";return $=O.valueToCode($,"TO",k.NONE)||"''",[O.provideFunction_("textReplace",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+L+", "+G+", "+$+")",k.FUNCTION_CALL]},Ot=function($,O){return[(O.valueToCode($,"TEXT",k.MEMBER)||"''")+".split('').reverse().join('')",k.FUNCTION_CALL]},ci=function($,O){return[O.getVariableName($.getFieldValue("VAR")),k.ATOMIC]},As=function($,O){const L=O.valueToCode($,"VALUE",k.ASSIGNMENT)||"0";return O.getVariableName($.getFieldValue("VAR"))+" = "+L+`;
`},k;(function($){$[$.ATOMIC=0]="ATOMIC",$[$.NEW=1.1]="NEW",$[$.MEMBER=1.2]="MEMBER",$[$.FUNCTION_CALL=2]="FUNCTION_CALL",$[$.INCREMENT=3]="INCREMENT",$[$.DECREMENT=3]="DECREMENT",$[$.BITWISE_NOT=4.1]="BITWISE_NOT",$[$.UNARY_PLUS=4.2]="UNARY_PLUS",$[$.UNARY_NEGATION=4.3]="UNARY_NEGATION",$[$.LOGICAL_NOT=4.4]="LOGICAL_NOT",$[$.TYPEOF=4.5]="TYPEOF",$[$.VOID=4.6]="VOID",$[$.DELETE=4.7]="DELETE",$[$.AWAIT=4.8]="AWAIT",$[$.EXPONENTIATION=5]="EXPONENTIATION",$[$.MULTIPLICATION=5.1]="MULTIPLICATION",$[$.DIVISION=5.2]="DIVISION",$[$.MODULUS=5.3]="MODULUS",$[$.SUBTRACTION=6.1]="SUBTRACTION",$[$.ADDITION=6.2]="ADDITION",$[$.BITWISE_SHIFT=7]="BITWISE_SHIFT",$[$.RELATIONAL=8]="RELATIONAL",$[$.IN=8]="IN",$[$.INSTANCEOF=8]="INSTANCEOF",$[$.EQUALITY=9]="EQUALITY",$[$.BITWISE_AND=10]="BITWISE_AND",$[$.BITWISE_XOR=11]="BITWISE_XOR",$[$.BITWISE_OR=12]="BITWISE_OR",$[$.LOGICAL_AND=13]="LOGICAL_AND",$[$.LOGICAL_OR=14]="LOGICAL_OR",$[$.CONDITIONAL=15]="CONDITIONAL",$[$.ASSIGNMENT=16]="ASSIGNMENT",$[$.YIELD=17]="YIELD",$[$.COMMA=18]="COMMA",$[$.NONE=99]="NONE"})(k||(k={}));var Yn=class extends p.CodeGenerator$$module$build$src$core$generator{constructor($="JavaScript"){super($),this.ORDER_OVERRIDES=[[k.FUNCTION_CALL,k.MEMBER],[k.FUNCTION_CALL,k.FUNCTION_CALL],[k.MEMBER,k.MEMBER],[k.MEMBER,k.FUNCTION_CALL],[k.LOGICAL_NOT,k.LOGICAL_NOT],[k.MULTIPLICATION,k.MULTIPLICATION],[k.ADDITION,k.ADDITION],[k.LOGICAL_AND,k.LOGICAL_AND],[k.LOGICAL_OR,k.LOGICAL_OR]],this.isInitialized=!1;for(const O in k)$=k[O],typeof $!="string"&&(this["ORDER_"+O]=$);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init($){super.init($),this.nameDB_?this.nameDB_.reset():this.nameDB_=new p.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap($.getVariableMap()),this.nameDB_.populateVariables($),this.nameDB_.populateProcedures($);const O=[];var L=p.allDeveloperVariables$$module$build$src$core$variables($);for(let G=0;G<L.length;G++)O.push(this.nameDB_.getName(L[G],p.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for($=p.allUsedVarModels$$module$build$src$core$variables($),L=0;L<$.length;L++)O.push(this.nameDB_.getName($[L].getId(),p.NameType$$module$build$src$core$names.VARIABLE));O.length&&(this.definitions_.variables="var "+O.join(", ")+";"),this.isInitialized=!0}finish($){const O=Object.values(this.definitions_);return super.finish($),this.isInitialized=!1,this.nameDB_.reset(),O.join(`

`)+`


`+$}scrubNakedValue($){return $+`;
`}quote_($){return $=$.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+$+"'"}multiline_quote_($){return $.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_($,O,L=!1){let G="";if(!$.outputConnection||!$.outputConnection.targetConnection){var ue=$.getCommentText();ue&&(ue=p.wrap$$module$build$src$core$utils$string(ue,this.COMMENT_WRAP-3),G+=this.prefixLines(ue+`
`,"// "));for(let Le=0;Le<$.inputList.length;Le++)$.inputList[Le].type===p.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(ue=$.inputList[Le].connection.targetBlock())&&(ue=this.allNestedComments(ue))&&(G+=this.prefixLines(ue,"// "))}return $=$.nextConnection&&$.nextConnection.targetBlock(),L=L?"":this.blockToCode($),G+O+L}getAdjusted($,O,L=0,G=!1,ue=k.NONE){$.workspace.options.oneBasedIndex&&L--;const Le=$.workspace.options.oneBasedIndex?"1":"0";let Ke=ue;return 0<L?Ke=k.ADDITION:0>L?Ke=k.SUBTRACTION:G&&(Ke=k.UNARY_NEGATION),$=this.valueToCode($,O,Ke)||Le,L===0&&!G?$:p.isNumber$$module$build$src$core$utils$string($)?($=String(Number($)+L),G&&($=String(-Number($))),$):(0<L?$=`${$} + ${L}`:0>L&&($=`${$} - ${-L}`),G&&($=L?`-(${$})`:`-${$}`),Math.floor(ue)>=Math.floor(Ke)&&($=`(${$})`),$)}},ts=function($,O,L){return O==="FIRST"?"0":O==="FROM_END"?$+".length - 1 - "+L:O==="LAST"?$+".length - 1":L},Rt={};Rt.lists_create_empty=C,Rt.lists_create_with=x,Rt.lists_getIndex=de,Rt.lists_getSublist=q,Rt.lists_indexOf=Y,Rt.lists_isEmpty=V,Rt.lists_length=j,Rt.lists_repeat=Z,Rt.lists_reverse=Se,Rt.lists_setIndex=ge,Rt.lists_sort=Ie,Rt.lists_split=ie;var ms={};ms.controls_if=le,ms.controls_ifelse=le,ms.logic_boolean=ot,ms.logic_compare=pe,ms.logic_negate=Ne,ms.logic_null=ft,ms.logic_operation=ke,ms.logic_ternary=bt;var K={};K.controls_flow_statements=Ls,K.controls_for=pt,K.controls_forEach=Bt,K.controls_repeat=at,K.controls_repeat_ext=at,K.controls_whileUntil=Oe;var ye={};ye.math_arithmetic=os,ye.math_atan2=it,ye.math_change=Lt,ye.math_constant=St,ye.math_constrain=W,ye.math_modulo=Je,ye.math_number=fs,ye.math_number_property=Ft,ye.math_on_list=ee,ye.math_random_float=_e,ye.math_random_int=H,ye.math_round=nt,ye.math_single=nt,ye.math_trig=nt;var f={};f.procedures_callnoreturn=Xe,f.procedures_callreturn=rt,f.procedures_defnoreturn=Ye,f.procedures_defreturn=Ye,f.procedures_ifreturn=mt;var b=/^\s*'([^']|\\')*'\s*$/,D=function($){return b.test($)?[$,k.ATOMIC]:["String("+$+")",k.FUNCTION_CALL]},B=function($,O,L){return O==="FIRST"?"0":O==="FROM_END"?$+".length - 1 - "+L:O==="LAST"?$+".length - 1":L},$e={};$e.text=Re,$e.text_append=ds,$e.text_changeCase=ps,$e.text_charAt=Mi,$e.text_count=Ue,$e.text_getSubstring=ks,$e.text_indexOf=an,$e.text_isEmpty=xo,$e.text_join=_t,$e.text_length=lo,$e.text_print=ui,$e.text_prompt=Di,$e.text_prompt_ext=Di,$e.text_replace=Tt,$e.text_reverse=Ot,$e.text_trim=li;var kt={};kt.variables_get=ci,kt.variables_set=As;var Fs={};Fs.variables_get_dynamic=ci,Fs.variables_set_dynamic=As;var Pn=new Yn,ai=Object.assign({},Rt,ms,K,ye,f,$e,kt,Fs);for(const $ in ai)Pn.forBlock[$]=ai[$];var js={};return js.JavascriptGenerator=Yn,js.Order=k,js.javascriptGenerator=Pn,js.__namespace__=p,js})}(zp)),zp.exports}var xE=PE();const BE=uh(xE),{JavascriptGenerator:QN,Order:ZN,javascriptGenerator:eM}=BE;var Yp={exports:{}},FE=Yp.exports,bf;function UE(){return bf||(bf=1,function(m,R){(function(r,p){m.exports=p()})(FE,function(){var r=r||{Msg:Object.create(null)};return r.Msg.ADD_COMMENT="添加評論",r.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="無法刪除變數「%1」，因為這是功能「%2」定義的一部份內容",r.Msg.CHANGE_VALUE_TITLE="修改值：",r.Msg.CLEAN_UP="清理區塊",r.Msg.COLLAPSED_WARNINGS_WARNING="收合含有警告的區塊。",r.Msg.COLLAPSE_ALL="收合區塊",r.Msg.COLLAPSE_BLOCK="收合區塊",r.Msg.COLOUR_BLEND_COLOUR1="顏色 1",r.Msg.COLOUR_BLEND_COLOUR2="顏色 2",r.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",r.Msg.COLOUR_BLEND_RATIO="比例",r.Msg.COLOUR_BLEND_TITLE="混合",r.Msg.COLOUR_BLEND_TOOLTIP="用一個給定的比率（0.0-1.0）混合兩種顏色。",r.Msg.COLOUR_PICKER_HELPURL="https://zh.wikipedia.org/wiki/顏色",r.Msg.COLOUR_PICKER_TOOLTIP="從調色板中選擇一種顏色。",r.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",r.Msg.COLOUR_RANDOM_TITLE="隨機顏色",r.Msg.COLOUR_RANDOM_TOOLTIP="隨機選擇一種顏色。",r.Msg.COLOUR_RGB_BLUE="藍",r.Msg.COLOUR_RGB_GREEN="綠",r.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",r.Msg.COLOUR_RGB_RED="紅",r.Msg.COLOUR_RGB_TITLE="顏色",r.Msg.COLOUR_RGB_TOOLTIP="透過指定紅、綠、 藍色的值來建立一種顏色。所有的值必須介於 0 和 100 之間。",r.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="中斷循環",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="繼續下一個循環",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="中斷當前的循環。",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="跳過這個循環的其餘步驟，並繼續下一次的循環。",r.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="警告：此區塊僅可用於循環內。",r.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",r.Msg.CONTROLS_FOREACH_TITLE="為列表 %2 裡的每一項 %1",r.Msg.CONTROLS_FOREACH_TOOLTIP="遍歷每個清單中的項目，將變數「%1」設定到該項目中，然後執行某些陳述式。",r.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",r.Msg.CONTROLS_FOR_TITLE="循環計數 %1 從 %2 到 %3 每次增加 %4",r.Msg.CONTROLS_FOR_TOOLTIP="從起始數到結尾數中取出變數「%1」的值，按指定的時間間隔，執行指定的區塊。",r.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="添加條件到「如果」區塊。",r.Msg.CONTROLS_IF_ELSE_TOOLTIP="添加一個最終、所有條件都執行的部份到「如果」區塊中。",r.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",r.Msg.CONTROLS_IF_IF_TOOLTIP="添加、刪除或重新排列各部份以重新配置這個「如果」區塊。",r.Msg.CONTROLS_IF_MSG_ELSE="否則",r.Msg.CONTROLS_IF_MSG_ELSEIF="否則，如果",r.Msg.CONTROLS_IF_MSG_IF="如果",r.Msg.CONTROLS_IF_TOOLTIP_1="當值為 true 時，執行一些陳述式。",r.Msg.CONTROLS_IF_TOOLTIP_2="如果值為 true 就執行第一塊陳述式，否則執行第二塊。",r.Msg.CONTROLS_IF_TOOLTIP_3="如果第一個值為 true，則執行第一塊陳述式。否則，當第二個值為 true 時，則執行第二塊陳述式。",r.Msg.CONTROLS_IF_TOOLTIP_4="如果第一個值為 true，則執行第一塊陳述式。否則當第二個值為 true 時，則執行第二塊陳述式。如果前幾個敘述都不為 true，則執行最後一塊陳述式。",r.Msg.CONTROLS_REPEAT_HELPURL="https://zh.wikipedia.org/wiki/For迴圈",r.Msg.CONTROLS_REPEAT_INPUT_DO="執行",r.Msg.CONTROLS_REPEAT_TITLE="重複%1次",r.Msg.CONTROLS_REPEAT_TOOLTIP="重複執行某些陳述式多次。",r.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="重複直到",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="重複，當",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="當值為 false 時，執行一些陳述式。",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="當值為 true 時，執行一些陳述式。",r.Msg.DELETE_ALL_BLOCKS="刪除全部 %1 個區塊？",r.Msg.DELETE_BLOCK="刪除區塊",r.Msg.DELETE_VARIABLE="刪除變數「%1」",r.Msg.DELETE_VARIABLE_CONFIRMATION="刪除使用%1次的「%2」變數？",r.Msg.DELETE_X_BLOCKS="刪除%1個區塊",r.Msg.DIALOG_CANCEL="取消",r.Msg.DIALOG_OK="確定",r.Msg.DISABLE_BLOCK="停用區塊",r.Msg.DUPLICATE_BLOCK="再製",r.Msg.DUPLICATE_COMMENT="複製註解",r.Msg.ENABLE_BLOCK="啟用區塊",r.Msg.EXPAND_ALL="展開區塊",r.Msg.EXPAND_BLOCK="展開區塊",r.Msg.EXTERNAL_INPUTS="外部輸入",r.Msg.HELP="說明",r.Msg.INLINE_INPUTS="單行輸入",r.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",r.Msg.LISTS_CREATE_EMPTY_TITLE="建立空的清單",r.Msg.LISTS_CREATE_EMPTY_TOOLTIP="返回一個長度（項目數量）為 0 的清單，不包含任何資料記錄",r.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="清單",r.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="添加、刪除或重新排列各部份以重新配置這個清單區塊。",r.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_CREATE_WITH_INPUT_WITH="使用這些值建立清單",r.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="添加一個項目到清單裡。",r.Msg.LISTS_CREATE_WITH_TOOLTIP="建立一個具備任意數量項目的清單。",r.Msg.LISTS_GET_INDEX_FIRST="第一筆",r.Msg.LISTS_GET_INDEX_FROM_END="倒數第 # 筆",r.Msg.LISTS_GET_INDEX_FROM_START="#",r.Msg.LISTS_GET_INDEX_GET="取得",r.Msg.LISTS_GET_INDEX_GET_REMOVE="取得並移除",r.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",r.Msg.LISTS_GET_INDEX_LAST="最後一筆",r.Msg.LISTS_GET_INDEX_RANDOM="隨機",r.Msg.LISTS_GET_INDEX_REMOVE="移除",r.Msg.LISTS_GET_INDEX_TAIL="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="返回清單中的第一個項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="返回在清單中指定位置的項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="返回清單中的最後一個項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="返回清單中隨機一個項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="移除並返回清單中的第一個項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="移除並返回清單中的指定位置的項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="移除並返回清單中的最後一個項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="移除並返回清單中的隨機項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="移除清單中的第一個項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="移除在清單中指定位置的項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="移除清單中的最後一個項目。",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="移除清單中隨機一個項目。",r.Msg.LISTS_GET_SUBLIST_END_FROM_END="到倒數 #",r.Msg.LISTS_GET_SUBLIST_END_FROM_START="到 #",r.Msg.LISTS_GET_SUBLIST_END_LAST="到 最後面",r.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",r.Msg.LISTS_GET_SUBLIST_START_FIRST="從最前面取得子清單",r.Msg.LISTS_GET_SUBLIST_START_FROM_END="從倒數# 取得子清單",r.Msg.LISTS_GET_SUBLIST_START_FROM_START="從 #取得子清單",r.Msg.LISTS_GET_SUBLIST_TAIL="",r.Msg.LISTS_GET_SUBLIST_TOOLTIP="複製清單中指定的部分。",r.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 是最後一個項目。",r.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 是第一個項目。",r.Msg.LISTS_INDEX_OF_FIRST="從 最前面 索引項目",r.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",r.Msg.LISTS_INDEX_OF_LAST="從 最後面 索引項目",r.Msg.LISTS_INDEX_OF_TOOLTIP="在清單中檢索是否有包含項目，如果有，返回從頭/倒數算起的索引值。如果沒有則返回 %1。",r.Msg.LISTS_INLIST="自清單",r.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",r.Msg.LISTS_ISEMPTY_TITLE="%1 值為空",r.Msg.LISTS_ISEMPTY_TOOLTIP="如果該清單為空，則返回 true。",r.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",r.Msg.LISTS_LENGTH_TITLE="長度 %1",r.Msg.LISTS_LENGTH_TOOLTIP="返回清單的長度（項目數）。",r.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_REPEAT_TITLE="使用項目 %1 重複 %2 次建立清單",r.Msg.LISTS_REPEAT_TOOLTIP="建立一個清單，項目中包含指定重複次數的值。",r.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",r.Msg.LISTS_REVERSE_MESSAGE0="反轉%1",r.Msg.LISTS_REVERSE_TOOLTIP="反轉清單的複製內容。",r.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",r.Msg.LISTS_SET_INDEX_INPUT_TO="為",r.Msg.LISTS_SET_INDEX_INSERT="添加",r.Msg.LISTS_SET_INDEX_SET="設定",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="添加一個項目到清單中的第一個位置。",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="添加一個項目到清單中的指定位置。",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="添加一個項目到清單中的最後一個位置。",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="添加一個項目到清單中的隨機位置。",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="設定清單中的第一個項目。",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="設定清單中指定位置的項目。",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="設定清單中的最後一個項目。",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="設定清單中隨機一個項目。",r.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",r.Msg.LISTS_SORT_ORDER_ASCENDING="升序",r.Msg.LISTS_SORT_ORDER_DESCENDING="降序",r.Msg.LISTS_SORT_TITLE="排列 %1 %2 %3",r.Msg.LISTS_SORT_TOOLTIP="排序清單的複製內容。",r.Msg.LISTS_SORT_TYPE_IGNORECASE="依字母排序，忽略大小寫",r.Msg.LISTS_SORT_TYPE_NUMERIC="依數字",r.Msg.LISTS_SORT_TYPE_TEXT="依字母",r.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",r.Msg.LISTS_SPLIT_LIST_FROM_TEXT="從文本製作清單",r.Msg.LISTS_SPLIT_TEXT_FROM_LIST="從清單拆出文本",r.Msg.LISTS_SPLIT_TOOLTIP_JOIN="串起清單項目成一個文本，並用分隔符號分開。",r.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="將文本變成清單項目，按分隔符號拆分。",r.Msg.LISTS_SPLIT_WITH_DELIMITER="用分隔符",r.Msg.LOGIC_BOOLEAN_FALSE="假",r.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",r.Msg.LOGIC_BOOLEAN_TOOLTIP="返回真或假。",r.Msg.LOGIC_BOOLEAN_TRUE="真",r.Msg.LOGIC_COMPARE_HELPURL="https://zh.wikipedia.org/wiki/不等",r.Msg.LOGIC_COMPARE_TOOLTIP_EQ="如果兩個輸入的結果相等，返回 true。",r.Msg.LOGIC_COMPARE_TOOLTIP_GT="如果第一個輸入結果大於第二個，返回 true。",r.Msg.LOGIC_COMPARE_TOOLTIP_GTE="如果第一個輸入結果大於或等於第二個，返回 true。",r.Msg.LOGIC_COMPARE_TOOLTIP_LT="如果第一個輸入結果比第二個小，返回 true。",r.Msg.LOGIC_COMPARE_TOOLTIP_LTE="如果第一個輸入結果小於或等於第二個，返回 true。",r.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="如果兩個輸入的結果不相等，返回 true。",r.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",r.Msg.LOGIC_NEGATE_TITLE="%1 不成立",r.Msg.LOGIC_NEGATE_TOOLTIP="如果輸入結果是 false，則返回 true；如果輸入結果是 true，則返回 false。",r.Msg.LOGIC_NULL="空",r.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",r.Msg.LOGIC_NULL_TOOLTIP="返回空值。",r.Msg.LOGIC_OPERATION_AND="且",r.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",r.Msg.LOGIC_OPERATION_OR="或",r.Msg.LOGIC_OPERATION_TOOLTIP_AND="如果兩個輸入結果都為 true，則返回 true。",r.Msg.LOGIC_OPERATION_TOOLTIP_OR="如果至少一個輸入結果為 true，返回 true。",r.Msg.LOGIC_TERNARY_CONDITION="測試",r.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",r.Msg.LOGIC_TERNARY_IF_FALSE="如果為假",r.Msg.LOGIC_TERNARY_IF_TRUE="如果為真",r.Msg.LOGIC_TERNARY_TOOLTIP="檢查「測試」中的條件。如果條件為真，將返回「如果為真」的值；否則，返回「如果為假」的值。",r.Msg.MATH_ADDITION_SYMBOL="+",r.Msg.MATH_ARITHMETIC_HELPURL="https://zh.wikipedia.org/wiki/算術",r.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="返回兩個數字的總和。",r.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="傳回兩數之商。",r.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="傳回兩數之差。",r.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="返回兩個數字的乘積。",r.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="返回以第一個數值為底數，以第二個數值為冪的結果。",r.Msg.MATH_ATAN2_HELPURL="https://zh.wikipedia.org/wiki/Atan2",r.Msg.MATH_ATAN2_TITLE="X:%1 Y:%2 的 Atan2",r.Msg.MATH_ATAN2_TOOLTIP="回傳點（X，Y）從 -180 至 180 度的反正切值。",r.Msg.MATH_CHANGE_HELPURL="https://zh.wikipedia.org/wiki/加法",r.Msg.MATH_CHANGE_TITLE="修改 %1 自 %2",r.Msg.MATH_CHANGE_TOOLTIP="將數字加到變數「%1」。",r.Msg.MATH_CONSTANT_HELPURL="https://zh.wikipedia.org/wiki/數學常數",r.Msg.MATH_CONSTANT_TOOLTIP="返回一個的常見常量： π (3.141......)，e (2.718...)、 φ (1.618...)、 開方(2) (1.414......)、 開方(½) (0.707......) 或 ∞ （無窮大）。",r.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",r.Msg.MATH_CONSTRAIN_TITLE="限制數字 %1 介於（低）%2 到（高）%3",r.Msg.MATH_CONSTRAIN_TOOLTIP="限制數字介於兩個指定的數字之間（包含）。",r.Msg.MATH_DIVISION_SYMBOL="÷",r.Msg.MATH_IS_DIVISIBLE_BY="可被整除",r.Msg.MATH_IS_EVEN="是偶數",r.Msg.MATH_IS_NEGATIVE="是負數",r.Msg.MATH_IS_ODD="是奇數",r.Msg.MATH_IS_POSITIVE="是正值",r.Msg.MATH_IS_PRIME="是質數",r.Msg.MATH_IS_TOOLTIP="如果數字是偶數，奇數，非負整數，正數、 負數，或如果它是可被某數字整除，則返回 true 或 false。",r.Msg.MATH_IS_WHOLE="是整數",r.Msg.MATH_MODULO_HELPURL="https://zh.wikipedia.org/wiki/模除",r.Msg.MATH_MODULO_TITLE="%1 除以 %2 的餘數",r.Msg.MATH_MODULO_TOOLTIP="返回兩個數字相除的餘數。",r.Msg.MATH_MULTIPLICATION_SYMBOL="×",r.Msg.MATH_NUMBER_HELPURL="https://zh.wikipedia.org/wiki/數",r.Msg.MATH_NUMBER_TOOLTIP="數字",r.Msg.MATH_ONLIST_HELPURL="",r.Msg.MATH_ONLIST_OPERATOR_AVERAGE="清單的平均數",r.Msg.MATH_ONLIST_OPERATOR_MAX="清單的最大數字",r.Msg.MATH_ONLIST_OPERATOR_MEDIAN="清單的中位數",r.Msg.MATH_ONLIST_OPERATOR_MIN="清單的最小數字",r.Msg.MATH_ONLIST_OPERATOR_MODE="清單中的眾數",r.Msg.MATH_ONLIST_OPERATOR_RANDOM="清單中的隨機一項",r.Msg.MATH_ONLIST_OPERATOR_STD_DEV="清單的標準差",r.Msg.MATH_ONLIST_OPERATOR_SUM="清單中數值的和",r.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="返回清單中數值的平均值（算術平均值）。",r.Msg.MATH_ONLIST_TOOLTIP_MAX="返回清單中最大的數字。",r.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="返回清單中數值的中位數。",r.Msg.MATH_ONLIST_TOOLTIP_MIN="返回清單中最小的數字。",r.Msg.MATH_ONLIST_TOOLTIP_MODE="返回一個清單中的最常見的項目列表。",r.Msg.MATH_ONLIST_TOOLTIP_RANDOM="從清單中返回一個隨機的項目。",r.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="返回清單中數字的標準差。",r.Msg.MATH_ONLIST_TOOLTIP_SUM="返回清單中的所有數字的總和。",r.Msg.MATH_POWER_SYMBOL="^",r.Msg.MATH_RANDOM_FLOAT_HELPURL="https://zh.wikipedia.org/wiki/隨機數生成器",r.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="隨機取分數",r.Msg.MATH_RANDOM_FLOAT_TOOLTIP="在 0.0（包含）和 1.0（不包含）之間隨機取一個分數。",r.Msg.MATH_RANDOM_INT_HELPURL="https://zh.wikipedia.org/wiki/隨機數生成器",r.Msg.MATH_RANDOM_INT_TITLE="隨機取整數 %1 到 %2",r.Msg.MATH_RANDOM_INT_TOOLTIP="在指定二個數之間隨機取一個整數（包含）。",r.Msg.MATH_ROUND_HELPURL="https://zh.wikipedia.org/wiki/數值簡化",r.Msg.MATH_ROUND_OPERATOR_ROUND="四捨五入",r.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="無條件捨去",r.Msg.MATH_ROUND_OPERATOR_ROUNDUP="無條件進位",r.Msg.MATH_ROUND_TOOLTIP="上捨入或下捨入數字",r.Msg.MATH_SINGLE_HELPURL="https://zh.wikipedia.org/wiki/平方根",r.Msg.MATH_SINGLE_OP_ABSOLUTE="絕對值",r.Msg.MATH_SINGLE_OP_ROOT="開根號",r.Msg.MATH_SINGLE_TOOLTIP_ABS="返回指定數字的絕對值。",r.Msg.MATH_SINGLE_TOOLTIP_EXP="返回e的指定數字次冪。",r.Msg.MATH_SINGLE_TOOLTIP_LN="返回指定數字的自然對數。",r.Msg.MATH_SINGLE_TOOLTIP_LOG10="返回指定數字的對數。",r.Msg.MATH_SINGLE_TOOLTIP_NEG="返回指定數字的相反數。",r.Msg.MATH_SINGLE_TOOLTIP_POW10="返回10的指定數字次冪。",r.Msg.MATH_SINGLE_TOOLTIP_ROOT="返回指定數字的平方根。",r.Msg.MATH_SUBTRACTION_SYMBOL="-",r.Msg.MATH_TRIG_ACOS="反餘弦",r.Msg.MATH_TRIG_ASIN="反正弦",r.Msg.MATH_TRIG_ATAN="反正切",r.Msg.MATH_TRIG_COS="餘弦",r.Msg.MATH_TRIG_HELPURL="https://zh.wikipedia.org/wiki/三角函數",r.Msg.MATH_TRIG_SIN="正弦",r.Msg.MATH_TRIG_TAN="正切",r.Msg.MATH_TRIG_TOOLTIP_ACOS="返回指定數字的反餘弦值。",r.Msg.MATH_TRIG_TOOLTIP_ASIN="返回指定角度的反正弦值(非弧度）。",r.Msg.MATH_TRIG_TOOLTIP_ATAN="返回指定數字的反正切值。",r.Msg.MATH_TRIG_TOOLTIP_COS="返回指定角度的餘弦值(非弧度）。",r.Msg.MATH_TRIG_TOOLTIP_SIN="返回指定角度的正弦值(非弧度）。",r.Msg.MATH_TRIG_TOOLTIP_TAN="返回指定角度的正切值(非弧度）。",r.Msg.NEW_COLOUR_VARIABLE="建立顏色變數…",r.Msg.NEW_NUMBER_VARIABLE="建立數值變數……",r.Msg.NEW_STRING_VARIABLE="建立字串變數……",r.Msg.NEW_VARIABLE="建立變數…",r.Msg.NEW_VARIABLE_TITLE="新變數名稱：",r.Msg.NEW_VARIABLE_TYPE_TITLE="新變數類型：",r.Msg.ORDINAL_NUMBER_SUFFIX="",r.Msg.PROCEDURES_ALLOW_STATEMENTS="允許陳述式",r.Msg.PROCEDURES_BEFORE_PARAMS="與：",r.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://zh.wikipedia.org/wiki/子程式",r.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="執行使用者定義的函式「%1」。",r.Msg.PROCEDURES_CALLRETURN_HELPURL="https://zh.wikipedia.org/wiki/%E5%AD%90%E7%A8%8B%E5%BA%8F",r.Msg.PROCEDURES_CALLRETURN_TOOLTIP="執行使用者定義的函式「%1」，並使用它的回傳值。",r.Msg.PROCEDURES_CALL_BEFORE_PARAMS="與：",r.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="無法執行使用者定義的函式「%1」，因為定義區塊已停用。",r.Msg.PROCEDURES_CREATE_DO="建立「%1」",r.Msg.PROCEDURES_DEFNORETURN_COMMENT="描述此函式...",r.Msg.PROCEDURES_DEFNORETURN_DO="",r.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://zh.wikipedia.org/wiki/子程式",r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="做些什麼",r.Msg.PROCEDURES_DEFNORETURN_TITLE="到",r.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="創建一個無回傳值的函式。",r.Msg.PROCEDURES_DEFRETURN_HELPURL="https://zh.wikipedia.org/wiki/子程式",r.Msg.PROCEDURES_DEFRETURN_RETURN="返回",r.Msg.PROCEDURES_DEFRETURN_TOOLTIP="創建一個有回傳值的的函式。",r.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="警告: 此函式中有重複的參數。",r.Msg.PROCEDURES_HIGHLIGHT_DEF="反白顯示函式定義",r.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",r.Msg.PROCEDURES_IFRETURN_TOOLTIP="如果值為 true，則返回第二個值。",r.Msg.PROCEDURES_IFRETURN_WARNING="警告：這個區塊只可以在定義函式時使用。",r.Msg.PROCEDURES_MUTATORARG_TITLE="輸入名稱：",r.Msg.PROCEDURES_MUTATORARG_TOOLTIP="添加一個輸入區塊到函式。",r.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="輸入",r.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="添加、刪除或重新排列此函式的輸入。",r.Msg.REDO="重做",r.Msg.REMOVE_COMMENT="移除註解",r.Msg.RENAME_VARIABLE="重新命名變數...",r.Msg.RENAME_VARIABLE_TITLE="將所有「%1」變數重新命名為：",r.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_APPEND_TITLE="至 %1 套用文字 %2",r.Msg.TEXT_APPEND_TOOLTIP="添加一些文字到變數「%1」之後。",r.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",r.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="轉成英文小寫",r.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="轉成英文首字大寫",r.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="轉成英文大寫",r.Msg.TEXT_CHANGECASE_TOOLTIP="使用不同的大小寫複製這段文字。",r.Msg.TEXT_CHARAT_FIRST="取得第一個字母",r.Msg.TEXT_CHARAT_FROM_END="取得倒數第 # 個字母",r.Msg.TEXT_CHARAT_FROM_START="取得第 # 個字母",r.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",r.Msg.TEXT_CHARAT_LAST="取得最後一個字母",r.Msg.TEXT_CHARAT_RANDOM="取得隨機字母",r.Msg.TEXT_CHARAT_TAIL="",r.Msg.TEXT_CHARAT_TITLE="在文字 %1 %2",r.Msg.TEXT_CHARAT_TOOLTIP="回傳位於指定位置的字母。",r.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",r.Msg.TEXT_COUNT_MESSAGE0="計算%1在%2裡出現的次數",r.Msg.TEXT_COUNT_TOOLTIP="計算在一段文本中，某個部分文本重複出現了多少次。",r.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="添加一個項目到字串中。",r.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="串連",r.Msg.TEXT_CREATE_JOIN_TOOLTIP="添加、刪除或重新排列各部份以重新配置這個文字區塊。",r.Msg.TEXT_GET_SUBSTRING_END_FROM_END="到倒數第 # 個字母",r.Msg.TEXT_GET_SUBSTRING_END_FROM_START="到第 # 個字母",r.Msg.TEXT_GET_SUBSTRING_END_LAST="到最後一個字母",r.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",r.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="在字串",r.Msg.TEXT_GET_SUBSTRING_START_FIRST="取得子字串從第一個字母",r.Msg.TEXT_GET_SUBSTRING_START_FROM_END="取得子字串從倒數第 # 個字母",r.Msg.TEXT_GET_SUBSTRING_START_FROM_START="取得子字串從第 # 個字母",r.Msg.TEXT_GET_SUBSTRING_TAIL="",r.Msg.TEXT_GET_SUBSTRING_TOOLTIP="返回指定的部分文字。",r.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",r.Msg.TEXT_INDEXOF_OPERATOR_FIRST="從 最前面 索引字串",r.Msg.TEXT_INDEXOF_OPERATOR_LAST="從 最後面 索引字串",r.Msg.TEXT_INDEXOF_TITLE="在文字 %1 %2 %3",r.Msg.TEXT_INDEXOF_TOOLTIP="在字串1中檢索是否有包含字串2，如果有，返回從頭/倒數算起的索引值。如果沒有則返回 %1。",r.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",r.Msg.TEXT_ISEMPTY_TITLE="%1 為空",r.Msg.TEXT_ISEMPTY_TOOLTIP="如果提供的字串為空，則返回 true。",r.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",r.Msg.TEXT_JOIN_TITLE_CREATEWITH="字串組合",r.Msg.TEXT_JOIN_TOOLTIP="通過連接任意數量的項目來建立一串文字。",r.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_LENGTH_TITLE="%1的長度",r.Msg.TEXT_LENGTH_TOOLTIP="返回這串文字的字母數（包含空格）。",r.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",r.Msg.TEXT_PRINT_TITLE="輸出 %1",r.Msg.TEXT_PRINT_TOOLTIP="輸出指定的文字、 數字或其他值。",r.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",r.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="要求用戶輸入數字",r.Msg.TEXT_PROMPT_TOOLTIP_TEXT="要求用戶輸入文字",r.Msg.TEXT_PROMPT_TYPE_NUMBER="要求輸入數字，並顯示提示訊息",r.Msg.TEXT_PROMPT_TYPE_TEXT="要求輸入文字，並顯示提示訊息",r.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",r.Msg.TEXT_REPLACE_MESSAGE0="在%3以%2取代%1",r.Msg.TEXT_REPLACE_TOOLTIP="取代在內容裡的全部某些文字。",r.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",r.Msg.TEXT_REVERSE_MESSAGE0="反轉%1",r.Msg.TEXT_REVERSE_TOOLTIP="反轉排序在文字裡的字元。",r.Msg.TEXT_TEXT_HELPURL="https://zh.wikipedia.org/wiki/字串",r.Msg.TEXT_TEXT_TOOLTIP="一個字母、一個字詞或一行字",r.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",r.Msg.TEXT_TRIM_OPERATOR_BOTH="消除兩側空格",r.Msg.TEXT_TRIM_OPERATOR_LEFT="消除左側空格",r.Msg.TEXT_TRIM_OPERATOR_RIGHT="消除右側空格",r.Msg.TEXT_TRIM_TOOLTIP="複製這段文字，同時刪除兩端多餘的空格。",r.Msg.TODAY="今天",r.Msg.UNDO="還原",r.Msg.UNNAMED_KEY="未命名",r.Msg.VARIABLES_DEFAULT_NAME="項目",r.Msg.VARIABLES_GET_CREATE_SET="建立「賦值 %1」",r.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",r.Msg.VARIABLES_GET_TOOLTIP="返回此變數的值。",r.Msg.VARIABLES_SET="賦值 %1 成 %2",r.Msg.VARIABLES_SET_CREATE_GET="建立「取得 %1」",r.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",r.Msg.VARIABLES_SET_TOOLTIP="設定此變數，好和輸入結果相等。",r.Msg.VARIABLE_ALREADY_EXISTS="已存在變數「%1」。",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="已存在名為「%1」，且用於其它類型「%2」的變數。",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="已存在名為「%1」的變數，該變數作為程序「%2」的參數使用。",r.Msg.WORKSPACE_ARIA_LABEL="Blockly工作區",r.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="來說些事情...",r.Msg.CONTROLS_FOREACH_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_FOR_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=r.Msg.CONTROLS_IF_MSG_ELSEIF,r.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=r.Msg.CONTROLS_IF_MSG_ELSE,r.Msg.CONTROLS_IF_IF_TITLE_IF=r.Msg.CONTROLS_IF_MSG_IF,r.Msg.CONTROLS_IF_MSG_THEN=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.LISTS_CREATE_WITH_ITEM_TITLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.MATH_CHANGE_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.PROCEDURES_DEFRETURN_COMMENT=r.Msg.PROCEDURES_DEFNORETURN_COMMENT,r.Msg.PROCEDURES_DEFRETURN_DO=r.Msg.PROCEDURES_DEFNORETURN_DO,r.Msg.PROCEDURES_DEFRETURN_PROCEDURE=r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,r.Msg.PROCEDURES_DEFRETURN_TITLE=r.Msg.PROCEDURES_DEFNORETURN_TITLE,r.Msg.TEXT_APPEND_VARIABLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.COLOUR_HUE="20",r.Msg.LISTS_HUE="260",r.Msg.LOGIC_HUE="210",r.Msg.LOOPS_HUE="120",r.Msg.MATH_HUE="230",r.Msg.PROCEDURES_HUE="290",r.Msg.TEXTS_HUE="160",r.Msg.VARIABLES_DYNAMIC_HUE="310",r.Msg.VARIABLES_HUE="330",r.Msg})}(Yp)),Yp.exports}var HE=UE();const GE=uh(HE),{LOGIC_HUE:VE,LOOPS_HUE:WE,MATH_HUE:XE,TEXTS_HUE:zE,LISTS_HUE:YE,COLOUR_HUE:jE,VARIABLES_HUE:KE,VARIABLES_DYNAMIC_HUE:JE,PROCEDURES_HUE:qE,VARIABLES_DEFAULT_NAME:QE,UNNAMED_KEY:ZE,TODAY:eI,DUPLICATE_BLOCK:tI,ADD_COMMENT:sI,REMOVE_COMMENT:nI,DUPLICATE_COMMENT:iI,EXTERNAL_INPUTS:oI,INLINE_INPUTS:rI,DELETE_BLOCK:lI,DELETE_X_BLOCKS:uI,DELETE_ALL_BLOCKS:cI,CLEAN_UP:aI,COLLAPSE_BLOCK:hI,COLLAPSE_ALL:dI,EXPAND_BLOCK:pI,EXPAND_ALL:_I,DISABLE_BLOCK:gI,ENABLE_BLOCK:$I,HELP:fI,UNDO:mI,REDO:TI,CHANGE_VALUE_TITLE:EI,RENAME_VARIABLE:II,RENAME_VARIABLE_TITLE:bI,NEW_VARIABLE:SI,NEW_STRING_VARIABLE:OI,NEW_NUMBER_VARIABLE:RI,NEW_COLOUR_VARIABLE:CI,NEW_VARIABLE_TYPE_TITLE:yI,NEW_VARIABLE_TITLE:vI,VARIABLE_ALREADY_EXISTS:LI,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:kI,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:AI,DELETE_VARIABLE_CONFIRMATION:wI,CANNOT_DELETE_VARIABLE_PROCEDURE:NI,DELETE_VARIABLE:MI,COLOUR_PICKER_HELPURL:DI,COLOUR_PICKER_TOOLTIP:PI,COLOUR_RANDOM_HELPURL:xI,COLOUR_RANDOM_TITLE:BI,COLOUR_RANDOM_TOOLTIP:FI,COLOUR_RGB_HELPURL:UI,COLOUR_RGB_TITLE:HI,COLOUR_RGB_RED:GI,COLOUR_RGB_GREEN:VI,COLOUR_RGB_BLUE:WI,COLOUR_RGB_TOOLTIP:XI,COLOUR_BLEND_HELPURL:zI,COLOUR_BLEND_TITLE:YI,COLOUR_BLEND_COLOUR1:jI,COLOUR_BLEND_COLOUR2:KI,COLOUR_BLEND_RATIO:JI,COLOUR_BLEND_TOOLTIP:qI,CONTROLS_REPEAT_HELPURL:QI,CONTROLS_REPEAT_TITLE:ZI,CONTROLS_REPEAT_INPUT_DO:eb,CONTROLS_REPEAT_TOOLTIP:tb,CONTROLS_WHILEUNTIL_HELPURL:sb,CONTROLS_WHILEUNTIL_INPUT_DO:nb,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:ib,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:ob,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:rb,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:lb,CONTROLS_FOR_HELPURL:ub,CONTROLS_FOR_TOOLTIP:cb,CONTROLS_FOR_TITLE:ab,CONTROLS_FOR_INPUT_DO:hb,CONTROLS_FOREACH_HELPURL:db,CONTROLS_FOREACH_TITLE:pb,CONTROLS_FOREACH_INPUT_DO:_b,CONTROLS_FOREACH_TOOLTIP:gb,CONTROLS_FLOW_STATEMENTS_HELPURL:$b,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:fb,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:mb,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:Tb,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:Eb,CONTROLS_FLOW_STATEMENTS_WARNING:Ib,CONTROLS_IF_HELPURL:bb,CONTROLS_IF_TOOLTIP_1:Sb,CONTROLS_IF_TOOLTIP_2:Ob,CONTROLS_IF_TOOLTIP_3:Rb,CONTROLS_IF_TOOLTIP_4:Cb,CONTROLS_IF_MSG_IF:yb,CONTROLS_IF_MSG_ELSEIF:vb,CONTROLS_IF_MSG_ELSE:Lb,CONTROLS_IF_MSG_THEN:kb,CONTROLS_IF_IF_TITLE_IF:Ab,CONTROLS_IF_IF_TOOLTIP:wb,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:Nb,CONTROLS_IF_ELSEIF_TOOLTIP:Mb,CONTROLS_IF_ELSE_TITLE_ELSE:Db,CONTROLS_IF_ELSE_TOOLTIP:Pb,LOGIC_COMPARE_HELPURL:xb,LOGIC_COMPARE_TOOLTIP_EQ:Bb,LOGIC_COMPARE_TOOLTIP_NEQ:Fb,LOGIC_COMPARE_TOOLTIP_LT:Ub,LOGIC_COMPARE_TOOLTIP_LTE:Hb,LOGIC_COMPARE_TOOLTIP_GT:Gb,LOGIC_COMPARE_TOOLTIP_GTE:Vb,LOGIC_OPERATION_HELPURL:Wb,LOGIC_OPERATION_TOOLTIP_AND:Xb,LOGIC_OPERATION_AND:zb,LOGIC_OPERATION_TOOLTIP_OR:Yb,LOGIC_OPERATION_OR:jb,LOGIC_NEGATE_HELPURL:Kb,LOGIC_NEGATE_TITLE:Jb,LOGIC_NEGATE_TOOLTIP:qb,LOGIC_BOOLEAN_HELPURL:Qb,LOGIC_BOOLEAN_TRUE:Zb,LOGIC_BOOLEAN_FALSE:eS,LOGIC_BOOLEAN_TOOLTIP:tS,LOGIC_NULL_HELPURL:sS,LOGIC_NULL:nS,LOGIC_NULL_TOOLTIP:iS,LOGIC_TERNARY_HELPURL:oS,LOGIC_TERNARY_CONDITION:rS,LOGIC_TERNARY_IF_TRUE:lS,LOGIC_TERNARY_IF_FALSE:uS,LOGIC_TERNARY_TOOLTIP:cS,MATH_NUMBER_HELPURL:aS,MATH_NUMBER_TOOLTIP:hS,MATH_ADDITION_SYMBOL:dS,MATH_SUBTRACTION_SYMBOL:pS,MATH_DIVISION_SYMBOL:_S,MATH_MULTIPLICATION_SYMBOL:gS,MATH_POWER_SYMBOL:$S,MATH_TRIG_SIN:fS,MATH_TRIG_COS:mS,MATH_TRIG_TAN:TS,MATH_TRIG_ASIN:ES,MATH_TRIG_ACOS:IS,MATH_TRIG_ATAN:bS,MATH_ARITHMETIC_HELPURL:SS,MATH_ARITHMETIC_TOOLTIP_ADD:OS,MATH_ARITHMETIC_TOOLTIP_MINUS:RS,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:CS,MATH_ARITHMETIC_TOOLTIP_DIVIDE:yS,MATH_ARITHMETIC_TOOLTIP_POWER:vS,MATH_SINGLE_HELPURL:LS,MATH_SINGLE_OP_ROOT:kS,MATH_SINGLE_TOOLTIP_ROOT:AS,MATH_SINGLE_OP_ABSOLUTE:wS,MATH_SINGLE_TOOLTIP_ABS:NS,MATH_SINGLE_TOOLTIP_NEG:MS,MATH_SINGLE_TOOLTIP_LN:DS,MATH_SINGLE_TOOLTIP_LOG10:PS,MATH_SINGLE_TOOLTIP_EXP:xS,MATH_SINGLE_TOOLTIP_POW10:BS,MATH_TRIG_HELPURL:FS,MATH_TRIG_TOOLTIP_SIN:US,MATH_TRIG_TOOLTIP_COS:HS,MATH_TRIG_TOOLTIP_TAN:GS,MATH_TRIG_TOOLTIP_ASIN:VS,MATH_TRIG_TOOLTIP_ACOS:WS,MATH_TRIG_TOOLTIP_ATAN:XS,MATH_CONSTANT_HELPURL:zS,MATH_CONSTANT_TOOLTIP:YS,MATH_IS_EVEN:jS,MATH_IS_ODD:KS,MATH_IS_PRIME:JS,MATH_IS_WHOLE:qS,MATH_IS_POSITIVE:QS,MATH_IS_NEGATIVE:ZS,MATH_IS_DIVISIBLE_BY:eO,MATH_IS_TOOLTIP:tO,MATH_CHANGE_HELPURL:sO,MATH_CHANGE_TITLE:nO,MATH_CHANGE_TITLE_ITEM:iO,MATH_CHANGE_TOOLTIP:oO,MATH_ROUND_HELPURL:rO,MATH_ROUND_TOOLTIP:lO,MATH_ROUND_OPERATOR_ROUND:uO,MATH_ROUND_OPERATOR_ROUNDUP:cO,MATH_ROUND_OPERATOR_ROUNDDOWN:aO,MATH_ONLIST_HELPURL:hO,MATH_ONLIST_OPERATOR_SUM:dO,MATH_ONLIST_TOOLTIP_SUM:pO,MATH_ONLIST_OPERATOR_MIN:_O,MATH_ONLIST_TOOLTIP_MIN:gO,MATH_ONLIST_OPERATOR_MAX:$O,MATH_ONLIST_TOOLTIP_MAX:fO,MATH_ONLIST_OPERATOR_AVERAGE:mO,MATH_ONLIST_TOOLTIP_AVERAGE:TO,MATH_ONLIST_OPERATOR_MEDIAN:EO,MATH_ONLIST_TOOLTIP_MEDIAN:IO,MATH_ONLIST_OPERATOR_MODE:bO,MATH_ONLIST_TOOLTIP_MODE:SO,MATH_ONLIST_OPERATOR_STD_DEV:OO,MATH_ONLIST_TOOLTIP_STD_DEV:RO,MATH_ONLIST_OPERATOR_RANDOM:CO,MATH_ONLIST_TOOLTIP_RANDOM:yO,MATH_MODULO_HELPURL:vO,MATH_MODULO_TITLE:LO,MATH_MODULO_TOOLTIP:kO,MATH_CONSTRAIN_HELPURL:AO,MATH_CONSTRAIN_TITLE:wO,MATH_CONSTRAIN_TOOLTIP:NO,MATH_RANDOM_INT_HELPURL:MO,MATH_RANDOM_INT_TITLE:DO,MATH_RANDOM_INT_TOOLTIP:PO,MATH_RANDOM_FLOAT_HELPURL:xO,MATH_RANDOM_FLOAT_TITLE_RANDOM:BO,MATH_RANDOM_FLOAT_TOOLTIP:FO,MATH_ATAN2_HELPURL:UO,MATH_ATAN2_TITLE:HO,MATH_ATAN2_TOOLTIP:GO,TEXT_TEXT_HELPURL:VO,TEXT_TEXT_TOOLTIP:WO,TEXT_JOIN_HELPURL:XO,TEXT_JOIN_TITLE_CREATEWITH:zO,TEXT_JOIN_TOOLTIP:YO,TEXT_CREATE_JOIN_TITLE_JOIN:jO,TEXT_CREATE_JOIN_TOOLTIP:KO,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:JO,TEXT_CREATE_JOIN_ITEM_TOOLTIP:qO,TEXT_APPEND_HELPURL:QO,TEXT_APPEND_TITLE:ZO,TEXT_APPEND_VARIABLE:eR,TEXT_APPEND_TOOLTIP:tR,TEXT_LENGTH_HELPURL:sR,TEXT_LENGTH_TITLE:nR,TEXT_LENGTH_TOOLTIP:iR,TEXT_ISEMPTY_HELPURL:oR,TEXT_ISEMPTY_TITLE:rR,TEXT_ISEMPTY_TOOLTIP:lR,TEXT_INDEXOF_HELPURL:uR,TEXT_INDEXOF_TOOLTIP:cR,TEXT_INDEXOF_TITLE:aR,TEXT_INDEXOF_OPERATOR_FIRST:hR,TEXT_INDEXOF_OPERATOR_LAST:dR,TEXT_CHARAT_HELPURL:pR,TEXT_CHARAT_TITLE:_R,TEXT_CHARAT_FROM_START:gR,TEXT_CHARAT_FROM_END:$R,TEXT_CHARAT_FIRST:fR,TEXT_CHARAT_LAST:mR,TEXT_CHARAT_RANDOM:TR,TEXT_CHARAT_TAIL:ER,TEXT_CHARAT_TOOLTIP:IR,TEXT_GET_SUBSTRING_TOOLTIP:bR,TEXT_GET_SUBSTRING_HELPURL:SR,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:OR,TEXT_GET_SUBSTRING_START_FROM_START:RR,TEXT_GET_SUBSTRING_START_FROM_END:CR,TEXT_GET_SUBSTRING_START_FIRST:yR,TEXT_GET_SUBSTRING_END_FROM_START:vR,TEXT_GET_SUBSTRING_END_FROM_END:LR,TEXT_GET_SUBSTRING_END_LAST:kR,TEXT_GET_SUBSTRING_TAIL:AR,TEXT_CHANGECASE_HELPURL:wR,TEXT_CHANGECASE_TOOLTIP:NR,TEXT_CHANGECASE_OPERATOR_UPPERCASE:MR,TEXT_CHANGECASE_OPERATOR_LOWERCASE:DR,TEXT_CHANGECASE_OPERATOR_TITLECASE:PR,TEXT_TRIM_HELPURL:xR,TEXT_TRIM_TOOLTIP:BR,TEXT_TRIM_OPERATOR_BOTH:FR,TEXT_TRIM_OPERATOR_LEFT:UR,TEXT_TRIM_OPERATOR_RIGHT:HR,TEXT_PRINT_HELPURL:GR,TEXT_PRINT_TITLE:VR,TEXT_PRINT_TOOLTIP:WR,TEXT_PROMPT_HELPURL:XR,TEXT_PROMPT_TYPE_TEXT:zR,TEXT_PROMPT_TYPE_NUMBER:YR,TEXT_PROMPT_TOOLTIP_NUMBER:jR,TEXT_PROMPT_TOOLTIP_TEXT:KR,TEXT_COUNT_MESSAGE0:JR,TEXT_COUNT_HELPURL:qR,TEXT_COUNT_TOOLTIP:QR,TEXT_REPLACE_MESSAGE0:ZR,TEXT_REPLACE_HELPURL:eC,TEXT_REPLACE_TOOLTIP:tC,TEXT_REVERSE_MESSAGE0:sC,TEXT_REVERSE_HELPURL:nC,TEXT_REVERSE_TOOLTIP:iC,LISTS_CREATE_EMPTY_HELPURL:oC,LISTS_CREATE_EMPTY_TITLE:rC,LISTS_CREATE_EMPTY_TOOLTIP:lC,LISTS_CREATE_WITH_HELPURL:uC,LISTS_CREATE_WITH_TOOLTIP:cC,LISTS_CREATE_WITH_INPUT_WITH:aC,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:hC,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:dC,LISTS_CREATE_WITH_ITEM_TITLE:pC,LISTS_CREATE_WITH_ITEM_TOOLTIP:_C,LISTS_REPEAT_HELPURL:gC,LISTS_REPEAT_TOOLTIP:$C,LISTS_REPEAT_TITLE:fC,LISTS_LENGTH_HELPURL:mC,LISTS_LENGTH_TITLE:TC,LISTS_LENGTH_TOOLTIP:EC,LISTS_ISEMPTY_HELPURL:IC,LISTS_ISEMPTY_TITLE:bC,LISTS_ISEMPTY_TOOLTIP:SC,LISTS_INLIST:OC,LISTS_INDEX_OF_HELPURL:RC,LISTS_INDEX_OF_INPUT_IN_LIST:CC,LISTS_INDEX_OF_FIRST:yC,LISTS_INDEX_OF_LAST:vC,LISTS_INDEX_OF_TOOLTIP:LC,LISTS_GET_INDEX_HELPURL:kC,LISTS_GET_INDEX_GET:AC,LISTS_GET_INDEX_GET_REMOVE:wC,LISTS_GET_INDEX_REMOVE:NC,LISTS_GET_INDEX_FROM_START:MC,LISTS_GET_INDEX_FROM_END:DC,LISTS_GET_INDEX_FIRST:PC,LISTS_GET_INDEX_LAST:xC,LISTS_GET_INDEX_RANDOM:BC,LISTS_GET_INDEX_TAIL:FC,LISTS_GET_INDEX_INPUT_IN_LIST:UC,LISTS_INDEX_FROM_START_TOOLTIP:HC,LISTS_INDEX_FROM_END_TOOLTIP:GC,LISTS_GET_INDEX_TOOLTIP_GET_FROM:VC,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:WC,LISTS_GET_INDEX_TOOLTIP_GET_LAST:XC,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:zC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:YC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:jC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:KC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:JC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:qC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:QC,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:ZC,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:ey,LISTS_SET_INDEX_HELPURL:ty,LISTS_SET_INDEX_INPUT_IN_LIST:sy,LISTS_SET_INDEX_SET:ny,LISTS_SET_INDEX_INSERT:iy,LISTS_SET_INDEX_INPUT_TO:oy,LISTS_SET_INDEX_TOOLTIP_SET_FROM:ry,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:ly,LISTS_SET_INDEX_TOOLTIP_SET_LAST:uy,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:cy,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:ay,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:hy,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:dy,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:py,LISTS_GET_SUBLIST_HELPURL:_y,LISTS_GET_SUBLIST_INPUT_IN_LIST:gy,LISTS_GET_SUBLIST_START_FROM_START:$y,LISTS_GET_SUBLIST_START_FROM_END:fy,LISTS_GET_SUBLIST_START_FIRST:my,LISTS_GET_SUBLIST_END_FROM_START:Ty,LISTS_GET_SUBLIST_END_FROM_END:Ey,LISTS_GET_SUBLIST_END_LAST:Iy,LISTS_GET_SUBLIST_TAIL:by,LISTS_GET_SUBLIST_TOOLTIP:Sy,LISTS_SORT_HELPURL:Oy,LISTS_SORT_TITLE:Ry,LISTS_SORT_TOOLTIP:Cy,LISTS_SORT_ORDER_ASCENDING:yy,LISTS_SORT_ORDER_DESCENDING:vy,LISTS_SORT_TYPE_NUMERIC:Ly,LISTS_SORT_TYPE_TEXT:ky,LISTS_SORT_TYPE_IGNORECASE:Ay,LISTS_SPLIT_HELPURL:wy,LISTS_SPLIT_LIST_FROM_TEXT:Ny,LISTS_SPLIT_TEXT_FROM_LIST:My,LISTS_SPLIT_WITH_DELIMITER:Dy,LISTS_SPLIT_TOOLTIP_SPLIT:Py,LISTS_SPLIT_TOOLTIP_JOIN:xy,LISTS_REVERSE_HELPURL:By,LISTS_REVERSE_MESSAGE0:Fy,LISTS_REVERSE_TOOLTIP:Uy,ORDINAL_NUMBER_SUFFIX:Hy,VARIABLES_GET_HELPURL:Gy,VARIABLES_GET_TOOLTIP:Vy,VARIABLES_GET_CREATE_SET:Wy,VARIABLES_SET_HELPURL:Xy,VARIABLES_SET:zy,VARIABLES_SET_TOOLTIP:Yy,VARIABLES_SET_CREATE_GET:jy,PROCEDURES_DEFNORETURN_HELPURL:Ky,PROCEDURES_DEFNORETURN_TITLE:Jy,PROCEDURES_DEFNORETURN_PROCEDURE:qy,PROCEDURES_BEFORE_PARAMS:Qy,PROCEDURES_CALL_BEFORE_PARAMS:Zy,PROCEDURES_CALL_DISABLED_DEF_WARNING:ev,PROCEDURES_DEFNORETURN_DO:tv,PROCEDURES_DEFNORETURN_TOOLTIP:sv,PROCEDURES_DEFNORETURN_COMMENT:nv,PROCEDURES_DEFRETURN_HELPURL:iv,PROCEDURES_DEFRETURN_TITLE:ov,PROCEDURES_DEFRETURN_PROCEDURE:rv,PROCEDURES_DEFRETURN_DO:lv,PROCEDURES_DEFRETURN_COMMENT:uv,PROCEDURES_DEFRETURN_RETURN:cv,PROCEDURES_DEFRETURN_TOOLTIP:av,PROCEDURES_ALLOW_STATEMENTS:hv,PROCEDURES_DEF_DUPLICATE_WARNING:dv,PROCEDURES_CALLNORETURN_HELPURL:pv,PROCEDURES_CALLNORETURN_TOOLTIP:_v,PROCEDURES_CALLRETURN_HELPURL:gv,PROCEDURES_CALLRETURN_TOOLTIP:$v,PROCEDURES_MUTATORCONTAINER_TITLE:fv,PROCEDURES_MUTATORCONTAINER_TOOLTIP:mv,PROCEDURES_MUTATORARG_TITLE:Tv,PROCEDURES_MUTATORARG_TOOLTIP:Ev,PROCEDURES_HIGHLIGHT_DEF:Iv,PROCEDURES_CREATE_DO:bv,PROCEDURES_IFRETURN_TOOLTIP:Sv,PROCEDURES_IFRETURN_HELPURL:Ov,PROCEDURES_IFRETURN_WARNING:Rv,WORKSPACE_COMMENT_DEFAULT_TEXT:Cv,WORKSPACE_ARIA_LABEL:yv,COLLAPSED_WARNINGS_WARNING:vv,DIALOG_OK:Lv,DIALOG_CANCEL:kv}=GE,Uf=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:sI,CANNOT_DELETE_VARIABLE_PROCEDURE:NI,CHANGE_VALUE_TITLE:EI,CLEAN_UP:aI,COLLAPSED_WARNINGS_WARNING:vv,COLLAPSE_ALL:dI,COLLAPSE_BLOCK:hI,COLOUR_BLEND_COLOUR1:jI,COLOUR_BLEND_COLOUR2:KI,COLOUR_BLEND_HELPURL:zI,COLOUR_BLEND_RATIO:JI,COLOUR_BLEND_TITLE:YI,COLOUR_BLEND_TOOLTIP:qI,COLOUR_HUE:jE,COLOUR_PICKER_HELPURL:DI,COLOUR_PICKER_TOOLTIP:PI,COLOUR_RANDOM_HELPURL:xI,COLOUR_RANDOM_TITLE:BI,COLOUR_RANDOM_TOOLTIP:FI,COLOUR_RGB_BLUE:WI,COLOUR_RGB_GREEN:VI,COLOUR_RGB_HELPURL:UI,COLOUR_RGB_RED:GI,COLOUR_RGB_TITLE:HI,COLOUR_RGB_TOOLTIP:XI,CONTROLS_FLOW_STATEMENTS_HELPURL:$b,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:fb,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:mb,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:Tb,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:Eb,CONTROLS_FLOW_STATEMENTS_WARNING:Ib,CONTROLS_FOREACH_HELPURL:db,CONTROLS_FOREACH_INPUT_DO:_b,CONTROLS_FOREACH_TITLE:pb,CONTROLS_FOREACH_TOOLTIP:gb,CONTROLS_FOR_HELPURL:ub,CONTROLS_FOR_INPUT_DO:hb,CONTROLS_FOR_TITLE:ab,CONTROLS_FOR_TOOLTIP:cb,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:Nb,CONTROLS_IF_ELSEIF_TOOLTIP:Mb,CONTROLS_IF_ELSE_TITLE_ELSE:Db,CONTROLS_IF_ELSE_TOOLTIP:Pb,CONTROLS_IF_HELPURL:bb,CONTROLS_IF_IF_TITLE_IF:Ab,CONTROLS_IF_IF_TOOLTIP:wb,CONTROLS_IF_MSG_ELSE:Lb,CONTROLS_IF_MSG_ELSEIF:vb,CONTROLS_IF_MSG_IF:yb,CONTROLS_IF_MSG_THEN:kb,CONTROLS_IF_TOOLTIP_1:Sb,CONTROLS_IF_TOOLTIP_2:Ob,CONTROLS_IF_TOOLTIP_3:Rb,CONTROLS_IF_TOOLTIP_4:Cb,CONTROLS_REPEAT_HELPURL:QI,CONTROLS_REPEAT_INPUT_DO:eb,CONTROLS_REPEAT_TITLE:ZI,CONTROLS_REPEAT_TOOLTIP:tb,CONTROLS_WHILEUNTIL_HELPURL:sb,CONTROLS_WHILEUNTIL_INPUT_DO:nb,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:ob,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:ib,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:lb,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:rb,DELETE_ALL_BLOCKS:cI,DELETE_BLOCK:lI,DELETE_VARIABLE:MI,DELETE_VARIABLE_CONFIRMATION:wI,DELETE_X_BLOCKS:uI,DIALOG_CANCEL:kv,DIALOG_OK:Lv,DISABLE_BLOCK:gI,DUPLICATE_BLOCK:tI,DUPLICATE_COMMENT:iI,ENABLE_BLOCK:$I,EXPAND_ALL:_I,EXPAND_BLOCK:pI,EXTERNAL_INPUTS:oI,HELP:fI,INLINE_INPUTS:rI,LISTS_CREATE_EMPTY_HELPURL:oC,LISTS_CREATE_EMPTY_TITLE:rC,LISTS_CREATE_EMPTY_TOOLTIP:lC,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:hC,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:dC,LISTS_CREATE_WITH_HELPURL:uC,LISTS_CREATE_WITH_INPUT_WITH:aC,LISTS_CREATE_WITH_ITEM_TITLE:pC,LISTS_CREATE_WITH_ITEM_TOOLTIP:_C,LISTS_CREATE_WITH_TOOLTIP:cC,LISTS_GET_INDEX_FIRST:PC,LISTS_GET_INDEX_FROM_END:DC,LISTS_GET_INDEX_FROM_START:MC,LISTS_GET_INDEX_GET:AC,LISTS_GET_INDEX_GET_REMOVE:wC,LISTS_GET_INDEX_HELPURL:kC,LISTS_GET_INDEX_INPUT_IN_LIST:UC,LISTS_GET_INDEX_LAST:xC,LISTS_GET_INDEX_RANDOM:BC,LISTS_GET_INDEX_REMOVE:NC,LISTS_GET_INDEX_TAIL:FC,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:WC,LISTS_GET_INDEX_TOOLTIP_GET_FROM:VC,LISTS_GET_INDEX_TOOLTIP_GET_LAST:XC,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:zC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:jC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:YC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:KC,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:JC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:QC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:qC,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:ZC,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:ey,LISTS_GET_SUBLIST_END_FROM_END:Ey,LISTS_GET_SUBLIST_END_FROM_START:Ty,LISTS_GET_SUBLIST_END_LAST:Iy,LISTS_GET_SUBLIST_HELPURL:_y,LISTS_GET_SUBLIST_INPUT_IN_LIST:gy,LISTS_GET_SUBLIST_START_FIRST:my,LISTS_GET_SUBLIST_START_FROM_END:fy,LISTS_GET_SUBLIST_START_FROM_START:$y,LISTS_GET_SUBLIST_TAIL:by,LISTS_GET_SUBLIST_TOOLTIP:Sy,LISTS_HUE:YE,LISTS_INDEX_FROM_END_TOOLTIP:GC,LISTS_INDEX_FROM_START_TOOLTIP:HC,LISTS_INDEX_OF_FIRST:yC,LISTS_INDEX_OF_HELPURL:RC,LISTS_INDEX_OF_INPUT_IN_LIST:CC,LISTS_INDEX_OF_LAST:vC,LISTS_INDEX_OF_TOOLTIP:LC,LISTS_INLIST:OC,LISTS_ISEMPTY_HELPURL:IC,LISTS_ISEMPTY_TITLE:bC,LISTS_ISEMPTY_TOOLTIP:SC,LISTS_LENGTH_HELPURL:mC,LISTS_LENGTH_TITLE:TC,LISTS_LENGTH_TOOLTIP:EC,LISTS_REPEAT_HELPURL:gC,LISTS_REPEAT_TITLE:fC,LISTS_REPEAT_TOOLTIP:$C,LISTS_REVERSE_HELPURL:By,LISTS_REVERSE_MESSAGE0:Fy,LISTS_REVERSE_TOOLTIP:Uy,LISTS_SET_INDEX_HELPURL:ty,LISTS_SET_INDEX_INPUT_IN_LIST:sy,LISTS_SET_INDEX_INPUT_TO:oy,LISTS_SET_INDEX_INSERT:iy,LISTS_SET_INDEX_SET:ny,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:hy,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:ay,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:dy,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:py,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:ly,LISTS_SET_INDEX_TOOLTIP_SET_FROM:ry,LISTS_SET_INDEX_TOOLTIP_SET_LAST:uy,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:cy,LISTS_SORT_HELPURL:Oy,LISTS_SORT_ORDER_ASCENDING:yy,LISTS_SORT_ORDER_DESCENDING:vy,LISTS_SORT_TITLE:Ry,LISTS_SORT_TOOLTIP:Cy,LISTS_SORT_TYPE_IGNORECASE:Ay,LISTS_SORT_TYPE_NUMERIC:Ly,LISTS_SORT_TYPE_TEXT:ky,LISTS_SPLIT_HELPURL:wy,LISTS_SPLIT_LIST_FROM_TEXT:Ny,LISTS_SPLIT_TEXT_FROM_LIST:My,LISTS_SPLIT_TOOLTIP_JOIN:xy,LISTS_SPLIT_TOOLTIP_SPLIT:Py,LISTS_SPLIT_WITH_DELIMITER:Dy,LOGIC_BOOLEAN_FALSE:eS,LOGIC_BOOLEAN_HELPURL:Qb,LOGIC_BOOLEAN_TOOLTIP:tS,LOGIC_BOOLEAN_TRUE:Zb,LOGIC_COMPARE_HELPURL:xb,LOGIC_COMPARE_TOOLTIP_EQ:Bb,LOGIC_COMPARE_TOOLTIP_GT:Gb,LOGIC_COMPARE_TOOLTIP_GTE:Vb,LOGIC_COMPARE_TOOLTIP_LT:Ub,LOGIC_COMPARE_TOOLTIP_LTE:Hb,LOGIC_COMPARE_TOOLTIP_NEQ:Fb,LOGIC_HUE:VE,LOGIC_NEGATE_HELPURL:Kb,LOGIC_NEGATE_TITLE:Jb,LOGIC_NEGATE_TOOLTIP:qb,LOGIC_NULL:nS,LOGIC_NULL_HELPURL:sS,LOGIC_NULL_TOOLTIP:iS,LOGIC_OPERATION_AND:zb,LOGIC_OPERATION_HELPURL:Wb,LOGIC_OPERATION_OR:jb,LOGIC_OPERATION_TOOLTIP_AND:Xb,LOGIC_OPERATION_TOOLTIP_OR:Yb,LOGIC_TERNARY_CONDITION:rS,LOGIC_TERNARY_HELPURL:oS,LOGIC_TERNARY_IF_FALSE:uS,LOGIC_TERNARY_IF_TRUE:lS,LOGIC_TERNARY_TOOLTIP:cS,LOOPS_HUE:WE,MATH_ADDITION_SYMBOL:dS,MATH_ARITHMETIC_HELPURL:SS,MATH_ARITHMETIC_TOOLTIP_ADD:OS,MATH_ARITHMETIC_TOOLTIP_DIVIDE:yS,MATH_ARITHMETIC_TOOLTIP_MINUS:RS,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:CS,MATH_ARITHMETIC_TOOLTIP_POWER:vS,MATH_ATAN2_HELPURL:UO,MATH_ATAN2_TITLE:HO,MATH_ATAN2_TOOLTIP:GO,MATH_CHANGE_HELPURL:sO,MATH_CHANGE_TITLE:nO,MATH_CHANGE_TITLE_ITEM:iO,MATH_CHANGE_TOOLTIP:oO,MATH_CONSTANT_HELPURL:zS,MATH_CONSTANT_TOOLTIP:YS,MATH_CONSTRAIN_HELPURL:AO,MATH_CONSTRAIN_TITLE:wO,MATH_CONSTRAIN_TOOLTIP:NO,MATH_DIVISION_SYMBOL:_S,MATH_HUE:XE,MATH_IS_DIVISIBLE_BY:eO,MATH_IS_EVEN:jS,MATH_IS_NEGATIVE:ZS,MATH_IS_ODD:KS,MATH_IS_POSITIVE:QS,MATH_IS_PRIME:JS,MATH_IS_TOOLTIP:tO,MATH_IS_WHOLE:qS,MATH_MODULO_HELPURL:vO,MATH_MODULO_TITLE:LO,MATH_MODULO_TOOLTIP:kO,MATH_MULTIPLICATION_SYMBOL:gS,MATH_NUMBER_HELPURL:aS,MATH_NUMBER_TOOLTIP:hS,MATH_ONLIST_HELPURL:hO,MATH_ONLIST_OPERATOR_AVERAGE:mO,MATH_ONLIST_OPERATOR_MAX:$O,MATH_ONLIST_OPERATOR_MEDIAN:EO,MATH_ONLIST_OPERATOR_MIN:_O,MATH_ONLIST_OPERATOR_MODE:bO,MATH_ONLIST_OPERATOR_RANDOM:CO,MATH_ONLIST_OPERATOR_STD_DEV:OO,MATH_ONLIST_OPERATOR_SUM:dO,MATH_ONLIST_TOOLTIP_AVERAGE:TO,MATH_ONLIST_TOOLTIP_MAX:fO,MATH_ONLIST_TOOLTIP_MEDIAN:IO,MATH_ONLIST_TOOLTIP_MIN:gO,MATH_ONLIST_TOOLTIP_MODE:SO,MATH_ONLIST_TOOLTIP_RANDOM:yO,MATH_ONLIST_TOOLTIP_STD_DEV:RO,MATH_ONLIST_TOOLTIP_SUM:pO,MATH_POWER_SYMBOL:$S,MATH_RANDOM_FLOAT_HELPURL:xO,MATH_RANDOM_FLOAT_TITLE_RANDOM:BO,MATH_RANDOM_FLOAT_TOOLTIP:FO,MATH_RANDOM_INT_HELPURL:MO,MATH_RANDOM_INT_TITLE:DO,MATH_RANDOM_INT_TOOLTIP:PO,MATH_ROUND_HELPURL:rO,MATH_ROUND_OPERATOR_ROUND:uO,MATH_ROUND_OPERATOR_ROUNDDOWN:aO,MATH_ROUND_OPERATOR_ROUNDUP:cO,MATH_ROUND_TOOLTIP:lO,MATH_SINGLE_HELPURL:LS,MATH_SINGLE_OP_ABSOLUTE:wS,MATH_SINGLE_OP_ROOT:kS,MATH_SINGLE_TOOLTIP_ABS:NS,MATH_SINGLE_TOOLTIP_EXP:xS,MATH_SINGLE_TOOLTIP_LN:DS,MATH_SINGLE_TOOLTIP_LOG10:PS,MATH_SINGLE_TOOLTIP_NEG:MS,MATH_SINGLE_TOOLTIP_POW10:BS,MATH_SINGLE_TOOLTIP_ROOT:AS,MATH_SUBTRACTION_SYMBOL:pS,MATH_TRIG_ACOS:IS,MATH_TRIG_ASIN:ES,MATH_TRIG_ATAN:bS,MATH_TRIG_COS:mS,MATH_TRIG_HELPURL:FS,MATH_TRIG_SIN:fS,MATH_TRIG_TAN:TS,MATH_TRIG_TOOLTIP_ACOS:WS,MATH_TRIG_TOOLTIP_ASIN:VS,MATH_TRIG_TOOLTIP_ATAN:XS,MATH_TRIG_TOOLTIP_COS:HS,MATH_TRIG_TOOLTIP_SIN:US,MATH_TRIG_TOOLTIP_TAN:GS,NEW_COLOUR_VARIABLE:CI,NEW_NUMBER_VARIABLE:RI,NEW_STRING_VARIABLE:OI,NEW_VARIABLE:SI,NEW_VARIABLE_TITLE:vI,NEW_VARIABLE_TYPE_TITLE:yI,ORDINAL_NUMBER_SUFFIX:Hy,PROCEDURES_ALLOW_STATEMENTS:hv,PROCEDURES_BEFORE_PARAMS:Qy,PROCEDURES_CALLNORETURN_HELPURL:pv,PROCEDURES_CALLNORETURN_TOOLTIP:_v,PROCEDURES_CALLRETURN_HELPURL:gv,PROCEDURES_CALLRETURN_TOOLTIP:$v,PROCEDURES_CALL_BEFORE_PARAMS:Zy,PROCEDURES_CALL_DISABLED_DEF_WARNING:ev,PROCEDURES_CREATE_DO:bv,PROCEDURES_DEFNORETURN_COMMENT:nv,PROCEDURES_DEFNORETURN_DO:tv,PROCEDURES_DEFNORETURN_HELPURL:Ky,PROCEDURES_DEFNORETURN_PROCEDURE:qy,PROCEDURES_DEFNORETURN_TITLE:Jy,PROCEDURES_DEFNORETURN_TOOLTIP:sv,PROCEDURES_DEFRETURN_COMMENT:uv,PROCEDURES_DEFRETURN_DO:lv,PROCEDURES_DEFRETURN_HELPURL:iv,PROCEDURES_DEFRETURN_PROCEDURE:rv,PROCEDURES_DEFRETURN_RETURN:cv,PROCEDURES_DEFRETURN_TITLE:ov,PROCEDURES_DEFRETURN_TOOLTIP:av,PROCEDURES_DEF_DUPLICATE_WARNING:dv,PROCEDURES_HIGHLIGHT_DEF:Iv,PROCEDURES_HUE:qE,PROCEDURES_IFRETURN_HELPURL:Ov,PROCEDURES_IFRETURN_TOOLTIP:Sv,PROCEDURES_IFRETURN_WARNING:Rv,PROCEDURES_MUTATORARG_TITLE:Tv,PROCEDURES_MUTATORARG_TOOLTIP:Ev,PROCEDURES_MUTATORCONTAINER_TITLE:fv,PROCEDURES_MUTATORCONTAINER_TOOLTIP:mv,REDO:TI,REMOVE_COMMENT:nI,RENAME_VARIABLE:II,RENAME_VARIABLE_TITLE:bI,TEXTS_HUE:zE,TEXT_APPEND_HELPURL:QO,TEXT_APPEND_TITLE:ZO,TEXT_APPEND_TOOLTIP:tR,TEXT_APPEND_VARIABLE:eR,TEXT_CHANGECASE_HELPURL:wR,TEXT_CHANGECASE_OPERATOR_LOWERCASE:DR,TEXT_CHANGECASE_OPERATOR_TITLECASE:PR,TEXT_CHANGECASE_OPERATOR_UPPERCASE:MR,TEXT_CHANGECASE_TOOLTIP:NR,TEXT_CHARAT_FIRST:fR,TEXT_CHARAT_FROM_END:$R,TEXT_CHARAT_FROM_START:gR,TEXT_CHARAT_HELPURL:pR,TEXT_CHARAT_LAST:mR,TEXT_CHARAT_RANDOM:TR,TEXT_CHARAT_TAIL:ER,TEXT_CHARAT_TITLE:_R,TEXT_CHARAT_TOOLTIP:IR,TEXT_COUNT_HELPURL:qR,TEXT_COUNT_MESSAGE0:JR,TEXT_COUNT_TOOLTIP:QR,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:JO,TEXT_CREATE_JOIN_ITEM_TOOLTIP:qO,TEXT_CREATE_JOIN_TITLE_JOIN:jO,TEXT_CREATE_JOIN_TOOLTIP:KO,TEXT_GET_SUBSTRING_END_FROM_END:LR,TEXT_GET_SUBSTRING_END_FROM_START:vR,TEXT_GET_SUBSTRING_END_LAST:kR,TEXT_GET_SUBSTRING_HELPURL:SR,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:OR,TEXT_GET_SUBSTRING_START_FIRST:yR,TEXT_GET_SUBSTRING_START_FROM_END:CR,TEXT_GET_SUBSTRING_START_FROM_START:RR,TEXT_GET_SUBSTRING_TAIL:AR,TEXT_GET_SUBSTRING_TOOLTIP:bR,TEXT_INDEXOF_HELPURL:uR,TEXT_INDEXOF_OPERATOR_FIRST:hR,TEXT_INDEXOF_OPERATOR_LAST:dR,TEXT_INDEXOF_TITLE:aR,TEXT_INDEXOF_TOOLTIP:cR,TEXT_ISEMPTY_HELPURL:oR,TEXT_ISEMPTY_TITLE:rR,TEXT_ISEMPTY_TOOLTIP:lR,TEXT_JOIN_HELPURL:XO,TEXT_JOIN_TITLE_CREATEWITH:zO,TEXT_JOIN_TOOLTIP:YO,TEXT_LENGTH_HELPURL:sR,TEXT_LENGTH_TITLE:nR,TEXT_LENGTH_TOOLTIP:iR,TEXT_PRINT_HELPURL:GR,TEXT_PRINT_TITLE:VR,TEXT_PRINT_TOOLTIP:WR,TEXT_PROMPT_HELPURL:XR,TEXT_PROMPT_TOOLTIP_NUMBER:jR,TEXT_PROMPT_TOOLTIP_TEXT:KR,TEXT_PROMPT_TYPE_NUMBER:YR,TEXT_PROMPT_TYPE_TEXT:zR,TEXT_REPLACE_HELPURL:eC,TEXT_REPLACE_MESSAGE0:ZR,TEXT_REPLACE_TOOLTIP:tC,TEXT_REVERSE_HELPURL:nC,TEXT_REVERSE_MESSAGE0:sC,TEXT_REVERSE_TOOLTIP:iC,TEXT_TEXT_HELPURL:VO,TEXT_TEXT_TOOLTIP:WO,TEXT_TRIM_HELPURL:xR,TEXT_TRIM_OPERATOR_BOTH:FR,TEXT_TRIM_OPERATOR_LEFT:UR,TEXT_TRIM_OPERATOR_RIGHT:HR,TEXT_TRIM_TOOLTIP:BR,TODAY:eI,UNDO:mI,UNNAMED_KEY:ZE,VARIABLES_DEFAULT_NAME:QE,VARIABLES_DYNAMIC_HUE:JE,VARIABLES_GET_CREATE_SET:Wy,VARIABLES_GET_HELPURL:Gy,VARIABLES_GET_TOOLTIP:Vy,VARIABLES_HUE:KE,VARIABLES_SET:zy,VARIABLES_SET_CREATE_GET:jy,VARIABLES_SET_HELPURL:Xy,VARIABLES_SET_TOOLTIP:Yy,VARIABLE_ALREADY_EXISTS:LI,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:kI,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:AI,WORKSPACE_ARIA_LABEL:yv,WORKSPACE_COMMENT_DEFAULT_TEXT:Cv},Symbol.toStringTag,{value:"Module"})),Hf={kind:"categoryToolbox",contents:[{kind:"category",name:"邏輯",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"迴圈",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext"},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for"},{kind:"block",type:"controls_forEach"},{kind:"block",type:"controls_flow_statements"}]},{kind:"category",name:"數學",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",gap:"32"},{kind:"block",type:"math_arithmetic"},{kind:"block",type:"math_single"},{kind:"block",type:"math_trig"},{kind:"block",type:"math_atan2"},{kind:"block",type:"math_constant"},{kind:"block",type:"math_number_property"},{kind:"block",type:"math_round"},{kind:"block",type:"math_on_list"},{kind:"block",type:"math_modulo"},{kind:"block",type:"math_constrain"},{kind:"block",type:"math_random_int"},{kind:"block",type:"math_random_float"}]},{kind:"category",name:"文字",categorystyle:"text_category",contents:[{kind:"block",type:"text"},{kind:"block",type:"text_join"},{kind:"block",type:"text_append"},{kind:"block",type:"text_length"},{kind:"block",type:"text_isEmpty"},{kind:"block",type:"text_indexOf"},{kind:"block",type:"text_charAt"},{kind:"block",type:"text_getSubstring"},{kind:"block",type:"text_changeCase"},{kind:"block",type:"text_trim"},{kind:"block",type:"text_count"},{kind:"block",type:"text_replace"},{kind:"block",type:"text_reverse"},{kind:"block",type:"text_print"},{kind:"block",type:"text_prompt_ext"}]},{kind:"category",name:"列表",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_create_with"},{kind:"block",type:"lists_repeat"},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_indexOf"},{kind:"block",type:"lists_getIndex"},{kind:"block",type:"lists_setIndex"},{kind:"block",type:"lists_getSublist"},{kind:"block",type:"lists_split"},{kind:"block",type:"lists_sort"},{kind:"block",type:"lists_reverse"}]},{kind:"category",name:"變數",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"函數",categorystyle:"procedure_category",custom:"PROCEDURE"}]};Bf(Uf);function Av(){const[m,R]=he.useState("");return Ge.jsx("div",{className:"container mt-4",children:Ge.jsxs("div",{className:"card bg-dark text-white",children:[Ge.jsx("div",{className:"card-header",children:"Blockly Workspace"}),Ge.jsx("div",{className:"card-body",style:{height:"500px",width:"100%"},children:Ge.jsx(_g,{toolboxConfiguration:Hf,initialXml:m,onXmlChange:r=>R(r),className:"blockly-workspace"})})]})})}Bf(Uf);function wv(){const[m,R]=he.useState("");return Ge.jsx("div",{className:"container mt-4",children:Ge.jsxs("div",{className:"card bg-dark text-white",children:[Ge.jsx("div",{className:"card-header",children:"Blockly Workspace"}),Ge.jsx("div",{className:"card-body",style:{height:"500px",width:"100%"},children:Ge.jsx(_g,{toolboxConfiguration:Hf,initialXml:m,onXmlChange:r=>R(r),className:"blockly-workspace"})})]})})}const Nv="data:image/svg+xml,%3csvg%20viewBox='0%200%20192%20192'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20定義遮罩，使背景區域具有圓角%20--%3e%3cmask%20id='rounded-mask'%3e%3crect%20x='0'%20y='0'%20width='192'%20height='192'%20rx='50'%20ry='50'%20fill='white'/%3e%3c/mask%3e%3c!--%20應用遮罩，使白色區域變透明%20--%3e%3cg%20mask='url(%23rounded-mask)'%3e%3crect%20x='0'%20y='0'%20width='192'%20height='192'%20fill='white'/%3e%3c!--%20背景填充白色%20--%3e%3cg%20transform='translate(23.500002%20-7.912111)'%3e%3c!--%20獨立的藍色形狀%20--%3e%3cg%20id='blue_shape'%3e%3cpath%20d='m20.140625%2032c-6.707027-.005532-12.1461566%205.433598-12.140625%2012.140625v104.718755c-.00553%206.70703%205.433598%2012.14615%2012.140625%2012.14062h4.726563c2.330826%208.74182%2010.245751%2014.82585%2019.292968%2014.83008%209.041406-.0113%2016.94802-6.09387%2019.277344-14.83008h4.841797%2015.726562c4.418278%200%208-3.58172%208-8v-113l-8-8z'%20fill='%23346C99'%20/%3e%3c/g%3e%3c!--%20獨立的黃色形狀%20--%3e%3cg%20id='yellow_shape'%3e%3cpath%20d='m80.007812%2031.994141c-.010665%2017.702746-.007812%2035.402384-.007812%2053.115234l-16.630859-9.398437c-2.397357-1.352749-5.36425.37623-5.369141%203.128906v40.621096c.0049%202.75267%202.971786%204.48165%205.369141%203.1289l16.630859-9.40039v37.5918%202.21875%208h8%201.425781%2036.054689c6.36195-.00026%2011.51927-5.15758%2011.51953-11.51953v-106.000001c-.02178-6.346694-5.1728-11.480247-11.51953-11.480469z'%20fill='%23FFCE3D'%20/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c!--%20旋轉135度後延伸10px的位置，繪製白色圓點%20--%3e%3ccircle%20cx='45'%20cy='38'%20r='7'%20fill='white'/%3e%3crect%20x='30'%20y='50'%20width='50'%20height='5'%20fill='white'/%3e%3ccircle%20cx='147'%20cy='139'%20r='7'%20fill='white'/%3e%3crect%20x='112'%20y='122'%20width='50'%20height='5'%20fill='white'/%3e%3c/svg%3e",Mv=()=>Ge.jsx("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark",children:Ge.jsxs("div",{className:"container-fluid",children:[Ge.jsxs(Qc,{className:"navbar-brand",to:"/",children:[Ge.jsx("img",{src:Nv,style:{width:"40px",marginRight:"10px"}}),Ge.jsx("span",{className:"navbar-title",children:"PyBlocks 積木式編程"})]}),Ge.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Ge.jsx("span",{className:"navbar-toggler-icon"})}),Ge.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Ge.jsxs("div",{className:"navbar-nav",children:[Ge.jsx("div",{className:"nav-item-left",children:Ge.jsx(Qc,{className:"nav-link",to:"/",children:"首頁"})}),Ge.jsx("div",{className:"nav-item-left",children:Ge.jsx(Qc,{className:"nav-link",to:"/course",children:"課程"})}),Ge.jsx("div",{className:"nav-item-left",children:Ge.jsx(Qc,{className:"nav-link",to:"/support",children:"申請"})})]}),Ge.jsxs("div",{className:"navbar-nav",children:[Ge.jsx("div",{className:"nav-item-right",children:Ge.jsx(Qc,{className:"nav-link",to:"/login",children:"登入"})}),Ge.jsx("div",{className:"nav-item-right",children:Ge.jsx(Qc,{className:"nav-link",to:"/signup",children:"註冊"})})]})]})]})});function Dv(){return Ge.jsxs("div",{className:"App",children:[Ge.jsx(Mv,{}),Ge.jsxs(yT,{children:[Ge.jsx(qu,{path:"/",element:Ge.jsx(lE,{})}),Ge.jsx(qu,{path:"/course",element:Ge.jsx(uE,{})}),Ge.jsx(qu,{path:"/support",element:Ge.jsx(cE,{})}),Ge.jsx(qu,{path:"/login",element:Ge.jsx(aE,{})}),Ge.jsx(qu,{path:"/signup",element:Ge.jsx(hE,{})}),Ge.jsx(qu,{path:"/student",element:Ge.jsx(Av,{})}),Ge.jsx(qu,{path:"/teacher",element:Ge.jsx(wv,{})}),Ge.jsx(qu,{path:"/*",element:Ge.jsx(RT,{to:"/"})})]})]})}Pm.createRoot(document.getElementById("root")).render(Ge.jsx(he.StrictMode,{children:Ge.jsx(qT,{basename:"/Project-41041225-React",children:Ge.jsx(Dv,{})})}));
