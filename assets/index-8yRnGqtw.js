(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const I of f)if(I.type==="childList")for(const C of I.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&u(C)}).observe(document,{childList:!0,subtree:!0});function i(f){const I={};return f.integrity&&(I.integrity=f.integrity),f.referrerPolicy&&(I.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?I.credentials="include":f.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function u(f){if(f.ep)return;f.ep=!0;const I=i(f);fetch(f.href,I)}})();var A$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nh(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Q_={exports:{}},Cp={},Z_={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k$;function bI(){if(k$)return St;k$=1;var h=Symbol.for("react.element"),l=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),se=Symbol.iterator;function Y(z){return z===null||typeof z!="object"?null:(z=se&&z[se]||z["@@iterator"],typeof z=="function"?z:null)}var fe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},re=Object.assign,be={};function oe(z,_e,rt){this.props=z,this.context=_e,this.refs=be,this.updater=rt||fe}oe.prototype.isReactComponent={},oe.prototype.setState=function(z,_e){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,_e,"setState")},oe.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function de(){}de.prototype=oe.prototype;function Le(z,_e,rt){this.props=z,this.context=_e,this.refs=be,this.updater=rt||fe}var ke=Le.prototype=new de;ke.constructor=Le,re(ke,oe.prototype),ke.isPureReactComponent=!0;var nt=Array.isArray,_t=Object.prototype.hasOwnProperty,$t={current:null},ot={key:!0,ref:!0,__self:!0,__source:!0};function Oe(z,_e,rt){var je,lt={},ze=null,Et=null;if(_e!=null)for(je in _e.ref!==void 0&&(Et=_e.ref),_e.key!==void 0&&(ze=""+_e.key),_e)_t.call(_e,je)&&!ot.hasOwnProperty(je)&&(lt[je]=_e[je]);var Re=arguments.length-2;if(Re===1)lt.children=rt;else if(1<Re){for(var ft=Array(Re),_n=0;_n<Re;_n++)ft[_n]=arguments[_n+2];lt.children=ft}if(z&&z.defaultProps)for(je in Re=z.defaultProps,Re)lt[je]===void 0&&(lt[je]=Re[je]);return{$$typeof:h,type:z,key:ze,ref:Et,props:lt,_owner:$t.current}}function ht(z,_e){return{$$typeof:h,type:z.type,key:_e,ref:z.ref,props:z.props,_owner:z._owner}}function Ct(z){return typeof z=="object"&&z!==null&&z.$$typeof===h}function wn(z){var _e={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(rt){return _e[rt]})}var En=/\/+/g;function ln(z,_e){return typeof z=="object"&&z!==null&&z.key!=null?wn(""+z.key):_e.toString(36)}function it(z,_e,rt,je,lt){var ze=typeof z;(ze==="undefined"||ze==="boolean")&&(z=null);var Et=!1;if(z===null)Et=!0;else switch(ze){case"string":case"number":Et=!0;break;case"object":switch(z.$$typeof){case h:case l:Et=!0}}if(Et)return Et=z,lt=lt(Et),z=je===""?"."+ln(Et,0):je,nt(lt)?(rt="",z!=null&&(rt=z.replace(En,"$&/")+"/"),it(lt,_e,rt,"",function(_n){return _n})):lt!=null&&(Ct(lt)&&(lt=ht(lt,rt+(!lt.key||Et&&Et.key===lt.key?"":(""+lt.key).replace(En,"$&/")+"/")+z)),_e.push(lt)),1;if(Et=0,je=je===""?".":je+":",nt(z))for(var Re=0;Re<z.length;Re++){ze=z[Re];var ft=je+ln(ze,Re);Et+=it(ze,_e,rt,ft,lt)}else if(ft=Y(z),typeof ft=="function")for(z=ft.call(z),Re=0;!(ze=z.next()).done;)ze=ze.value,ft=je+ln(ze,Re++),Et+=it(ze,_e,rt,ft,lt);else if(ze==="object")throw _e=String(z),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return Et}function Ot(z,_e,rt){if(z==null)return z;var je=[],lt=0;return it(z,je,"","",function(ze){return _e.call(rt,ze,lt++)}),je}function Ft(z){if(z._status===-1){var _e=z._result;_e=_e(),_e.then(function(rt){(z._status===0||z._status===-1)&&(z._status=1,z._result=rt)},function(rt){(z._status===0||z._status===-1)&&(z._status=2,z._result=rt)}),z._status===-1&&(z._status=0,z._result=_e)}if(z._status===1)return z._result.default;throw z._result}var kt={current:null},ee={transition:null},Je={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:ee,ReactCurrentOwner:$t};function j(){throw Error("act(...) is not supported in production builds of React.")}return St.Children={map:Ot,forEach:function(z,_e,rt){Ot(z,function(){_e.apply(this,arguments)},rt)},count:function(z){var _e=0;return Ot(z,function(){_e++}),_e},toArray:function(z){return Ot(z,function(_e){return _e})||[]},only:function(z){if(!Ct(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},St.Component=oe,St.Fragment=i,St.Profiler=f,St.PureComponent=Le,St.StrictMode=u,St.Suspense=L,St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Je,St.act=j,St.cloneElement=function(z,_e,rt){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var je=re({},z.props),lt=z.key,ze=z.ref,Et=z._owner;if(_e!=null){if(_e.ref!==void 0&&(ze=_e.ref,Et=$t.current),_e.key!==void 0&&(lt=""+_e.key),z.type&&z.type.defaultProps)var Re=z.type.defaultProps;for(ft in _e)_t.call(_e,ft)&&!ot.hasOwnProperty(ft)&&(je[ft]=_e[ft]===void 0&&Re!==void 0?Re[ft]:_e[ft])}var ft=arguments.length-2;if(ft===1)je.children=rt;else if(1<ft){Re=Array(ft);for(var _n=0;_n<ft;_n++)Re[_n]=arguments[_n+2];je.children=Re}return{$$typeof:h,type:z.type,key:lt,ref:ze,props:je,_owner:Et}},St.createContext=function(z){return z={$$typeof:C,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:I,_context:z},z.Consumer=z},St.createElement=Oe,St.createFactory=function(z){var _e=Oe.bind(null,z);return _e.type=z,_e},St.createRef=function(){return{current:null}},St.forwardRef=function(z){return{$$typeof:A,render:z}},St.isValidElement=Ct,St.lazy=function(z){return{$$typeof:te,_payload:{_status:-1,_result:z},_init:Ft}},St.memo=function(z,_e){return{$$typeof:D,type:z,compare:_e===void 0?null:_e}},St.startTransition=function(z){var _e=ee.transition;ee.transition={};try{z()}finally{ee.transition=_e}},St.unstable_act=j,St.useCallback=function(z,_e){return kt.current.useCallback(z,_e)},St.useContext=function(z){return kt.current.useContext(z)},St.useDebugValue=function(){},St.useDeferredValue=function(z){return kt.current.useDeferredValue(z)},St.useEffect=function(z,_e){return kt.current.useEffect(z,_e)},St.useId=function(){return kt.current.useId()},St.useImperativeHandle=function(z,_e,rt){return kt.current.useImperativeHandle(z,_e,rt)},St.useInsertionEffect=function(z,_e){return kt.current.useInsertionEffect(z,_e)},St.useLayoutEffect=function(z,_e){return kt.current.useLayoutEffect(z,_e)},St.useMemo=function(z,_e){return kt.current.useMemo(z,_e)},St.useReducer=function(z,_e,rt){return kt.current.useReducer(z,_e,rt)},St.useRef=function(z){return kt.current.useRef(z)},St.useState=function(z){return kt.current.useState(z)},St.useSyncExternalStore=function(z,_e,rt){return kt.current.useSyncExternalStore(z,_e,rt)},St.useTransition=function(){return kt.current.useTransition()},St.version="18.3.1",St}var w$;function yf(){return w$||(w$=1,Z_.exports=bI()),Z_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N$;function SI(){if(N$)return Cp;N$=1;var h=yf(),l=Symbol.for("react.element"),i=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,f=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I={key:!0,ref:!0,__self:!0,__source:!0};function C(A,L,D){var te,se={},Y=null,fe=null;D!==void 0&&(Y=""+D),L.key!==void 0&&(Y=""+L.key),L.ref!==void 0&&(fe=L.ref);for(te in L)u.call(L,te)&&!I.hasOwnProperty(te)&&(se[te]=L[te]);if(A&&A.defaultProps)for(te in L=A.defaultProps,L)se[te]===void 0&&(se[te]=L[te]);return{$$typeof:l,type:A,key:Y,ref:fe,props:se,_owner:f.current}}return Cp.Fragment=i,Cp.jsx=C,Cp.jsxs=C,Cp}var M$;function OI(){return M$||(M$=1,Q_.exports=SI()),Q_.exports}var Ae=OI(),Lg={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var RI=Lg.exports,D$;function yI(){return D$||(D$=1,function(h,l){(function(i,u){h.exports=u()})(RI,function(){const i=new Map,u={set(b,p,$){i.has(b)||i.set(b,new Map);const y=i.get(b);y.has(p)||y.size===0?y.set(p,$):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(y.keys())[0]}.`)},get:(b,p)=>i.has(b)&&i.get(b).get(p)||null,remove(b,p){if(!i.has(b))return;const $=i.get(b);$.delete(p),$.size===0&&i.delete(b)}},f="transitionend",I=b=>(b&&window.CSS&&window.CSS.escape&&(b=b.replace(/#([^\s"#']+)/g,(p,$)=>`#${CSS.escape($)}`)),b),C=b=>{b.dispatchEvent(new Event(f))},A=b=>!(!b||typeof b!="object")&&(b.jquery!==void 0&&(b=b[0]),b.nodeType!==void 0),L=b=>A(b)?b.jquery?b[0]:b:typeof b=="string"&&b.length>0?document.querySelector(I(b)):null,D=b=>{if(!A(b)||b.getClientRects().length===0)return!1;const p=getComputedStyle(b).getPropertyValue("visibility")==="visible",$=b.closest("details:not([open])");if(!$)return p;if($!==b){const y=b.closest("summary");if(y&&y.parentNode!==$||y===null)return!1}return p},te=b=>!b||b.nodeType!==Node.ELEMENT_NODE||!!b.classList.contains("disabled")||(b.disabled!==void 0?b.disabled:b.hasAttribute("disabled")&&b.getAttribute("disabled")!=="false"),se=b=>{if(!document.documentElement.attachShadow)return null;if(typeof b.getRootNode=="function"){const p=b.getRootNode();return p instanceof ShadowRoot?p:null}return b instanceof ShadowRoot?b:b.parentNode?se(b.parentNode):null},Y=()=>{},fe=b=>{b.offsetHeight},re=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,be=[],oe=()=>document.documentElement.dir==="rtl",de=b=>{var p;p=()=>{const $=re();if($){const y=b.NAME,U=$.fn[y];$.fn[y]=b.jQueryInterface,$.fn[y].Constructor=b,$.fn[y].noConflict=()=>($.fn[y]=U,b.jQueryInterface)}},document.readyState==="loading"?(be.length||document.addEventListener("DOMContentLoaded",()=>{for(const $ of be)$()}),be.push(p)):p()},Le=(b,p=[],$=b)=>typeof b=="function"?b(...p):$,ke=(b,p,$=!0)=>{if(!$)return void Le(b);const y=(Z=>{if(!Z)return 0;let{transitionDuration:ae,transitionDelay:Se}=window.getComputedStyle(Z);const Ue=Number.parseFloat(ae),Fe=Number.parseFloat(Se);return Ue||Fe?(ae=ae.split(",")[0],Se=Se.split(",")[0],1e3*(Number.parseFloat(ae)+Number.parseFloat(Se))):0})(p)+5;let U=!1;const W=({target:Z})=>{Z===p&&(U=!0,p.removeEventListener(f,W),Le(b))};p.addEventListener(f,W),setTimeout(()=>{U||C(p)},y)},nt=(b,p,$,y)=>{const U=b.length;let W=b.indexOf(p);return W===-1?!$&&y?b[U-1]:b[0]:(W+=$?1:-1,y&&(W=(W+U)%U),b[Math.max(0,Math.min(W,U-1))])},_t=/[^.]*(?=\..*)\.|.*/,$t=/\..*/,ot=/::\d+$/,Oe={};let ht=1;const Ct={mouseenter:"mouseover",mouseleave:"mouseout"},wn=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function En(b,p){return p&&`${p}::${ht++}`||b.uidEvent||ht++}function ln(b){const p=En(b);return b.uidEvent=p,Oe[p]=Oe[p]||{},Oe[p]}function it(b,p,$=null){return Object.values(b).find(y=>y.callable===p&&y.delegationSelector===$)}function Ot(b,p,$){const y=typeof p=="string",U=y?$:p||$;let W=Je(b);return wn.has(W)||(W=b),[y,U,W]}function Ft(b,p,$,y,U){if(typeof p!="string"||!b)return;let[W,Z,ae]=Ot(p,$,y);p in Ct&&(Z=(xe=>function(qe){if(!qe.relatedTarget||qe.relatedTarget!==qe.delegateTarget&&!qe.delegateTarget.contains(qe.relatedTarget))return xe.call(this,qe)})(Z));const Se=ln(b),Ue=Se[ae]||(Se[ae]={}),Fe=it(Ue,Z,W?$:null);if(Fe)return void(Fe.oneOff=Fe.oneOff&&U);const Ne=En(Z,p.replace(_t,"")),Qe=W?function(Xe,xe,qe){return function at(Gt){const Vt=Xe.querySelectorAll(xe);for(let{target:pt}=Gt;pt&&pt!==this;pt=pt.parentNode)for(const bt of Vt)if(bt===pt)return z(Gt,{delegateTarget:pt}),at.oneOff&&j.off(Xe,Gt.type,xe,qe),qe.apply(pt,[Gt])}}(b,$,Z):function(Xe,xe){return function qe(at){return z(at,{delegateTarget:Xe}),qe.oneOff&&j.off(Xe,at.type,xe),xe.apply(Xe,[at])}}(b,Z);Qe.delegationSelector=W?$:null,Qe.callable=Z,Qe.oneOff=U,Qe.uidEvent=Ne,Ue[Ne]=Qe,b.addEventListener(ae,Qe,W)}function kt(b,p,$,y,U){const W=it(p[$],y,U);W&&(b.removeEventListener($,W,!!U),delete p[$][W.uidEvent])}function ee(b,p,$,y){const U=p[$]||{};for(const[W,Z]of Object.entries(U))W.includes(y)&&kt(b,p,$,Z.callable,Z.delegationSelector)}function Je(b){return b=b.replace($t,""),Ct[b]||b}const j={on(b,p,$,y){Ft(b,p,$,y,!1)},one(b,p,$,y){Ft(b,p,$,y,!0)},off(b,p,$,y){if(typeof p!="string"||!b)return;const[U,W,Z]=Ot(p,$,y),ae=Z!==p,Se=ln(b),Ue=Se[Z]||{},Fe=p.startsWith(".");if(W===void 0){if(Fe)for(const Ne of Object.keys(Se))ee(b,Se,Ne,p.slice(1));for(const[Ne,Qe]of Object.entries(Ue)){const Xe=Ne.replace(ot,"");ae&&!p.includes(Xe)||kt(b,Se,Z,Qe.callable,Qe.delegationSelector)}}else{if(!Object.keys(Ue).length)return;kt(b,Se,Z,W,U?$:null)}},trigger(b,p,$){if(typeof p!="string"||!b)return null;const y=re();let U=null,W=!0,Z=!0,ae=!1;p!==Je(p)&&y&&(U=y.Event(p,$),y(b).trigger(U),W=!U.isPropagationStopped(),Z=!U.isImmediatePropagationStopped(),ae=U.isDefaultPrevented());const Se=z(new Event(p,{bubbles:W,cancelable:!0}),$);return ae&&Se.preventDefault(),Z&&b.dispatchEvent(Se),Se.defaultPrevented&&U&&U.preventDefault(),Se}};function z(b,p={}){for(const[$,y]of Object.entries(p))try{b[$]=y}catch{Object.defineProperty(b,$,{configurable:!0,get:()=>y})}return b}function _e(b){if(b==="true")return!0;if(b==="false")return!1;if(b===Number(b).toString())return Number(b);if(b===""||b==="null")return null;if(typeof b!="string")return b;try{return JSON.parse(decodeURIComponent(b))}catch{return b}}function rt(b){return b.replace(/[A-Z]/g,p=>`-${p.toLowerCase()}`)}const je={setDataAttribute(b,p,$){b.setAttribute(`data-bs-${rt(p)}`,$)},removeDataAttribute(b,p){b.removeAttribute(`data-bs-${rt(p)}`)},getDataAttributes(b){if(!b)return{};const p={},$=Object.keys(b.dataset).filter(y=>y.startsWith("bs")&&!y.startsWith("bsConfig"));for(const y of $){let U=y.replace(/^bs/,"");U=U.charAt(0).toLowerCase()+U.slice(1,U.length),p[U]=_e(b.dataset[y])}return p},getDataAttribute:(b,p)=>_e(b.getAttribute(`data-bs-${rt(p)}`))};class lt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(p){return p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p}_mergeConfigObj(p,$){const y=A($)?je.getDataAttribute($,"config"):{};return{...this.constructor.Default,...typeof y=="object"?y:{},...A($)?je.getDataAttributes($):{},...typeof p=="object"?p:{}}}_typeCheckConfig(p,$=this.constructor.DefaultType){for(const[U,W]of Object.entries($)){const Z=p[U],ae=A(Z)?"element":(y=Z)==null?`${y}`:Object.prototype.toString.call(y).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(W).test(ae))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${U}" provided type "${ae}" but expected type "${W}".`)}var y}}class ze extends lt{constructor(p,$){super(),(p=L(p))&&(this._element=p,this._config=this._getConfig($),u.set(this._element,this.constructor.DATA_KEY,this))}dispose(){u.remove(this._element,this.constructor.DATA_KEY),j.off(this._element,this.constructor.EVENT_KEY);for(const p of Object.getOwnPropertyNames(this))this[p]=null}_queueCallback(p,$,y=!0){ke(p,$,y)}_getConfig(p){return p=this._mergeConfigObj(p,this._element),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}static getInstance(p){return u.get(L(p),this.DATA_KEY)}static getOrCreateInstance(p,$={}){return this.getInstance(p)||new this(p,typeof $=="object"?$:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(p){return`${p}${this.EVENT_KEY}`}}const Et=b=>{let p=b.getAttribute("data-bs-target");if(!p||p==="#"){let $=b.getAttribute("href");if(!$||!$.includes("#")&&!$.startsWith("."))return null;$.includes("#")&&!$.startsWith("#")&&($=`#${$.split("#")[1]}`),p=$&&$!=="#"?$.trim():null}return p?p.split(",").map($=>I($)).join(","):null},Re={find:(b,p=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(p,b)),findOne:(b,p=document.documentElement)=>Element.prototype.querySelector.call(p,b),children:(b,p)=>[].concat(...b.children).filter($=>$.matches(p)),parents(b,p){const $=[];let y=b.parentNode.closest(p);for(;y;)$.push(y),y=y.parentNode.closest(p);return $},prev(b,p){let $=b.previousElementSibling;for(;$;){if($.matches(p))return[$];$=$.previousElementSibling}return[]},next(b,p){let $=b.nextElementSibling;for(;$;){if($.matches(p))return[$];$=$.nextElementSibling}return[]},focusableChildren(b){const p=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map($=>`${$}:not([tabindex^="-"])`).join(",");return this.find(p,b).filter($=>!te($)&&D($))},getSelectorFromElement(b){const p=Et(b);return p&&Re.findOne(p)?p:null},getElementFromSelector(b){const p=Et(b);return p?Re.findOne(p):null},getMultipleElementsFromSelector(b){const p=Et(b);return p?Re.find(p):[]}},ft=(b,p="hide")=>{const $=`click.dismiss${b.EVENT_KEY}`,y=b.NAME;j.on(document,$,`[data-bs-dismiss="${y}"]`,function(U){if(["A","AREA"].includes(this.tagName)&&U.preventDefault(),te(this))return;const W=Re.getElementFromSelector(this)||this.closest(`.${y}`);b.getOrCreateInstance(W)[p]()})},_n=".bs.alert",hr=`close${_n}`,Fr=`closed${_n}`;class ds extends ze{static get NAME(){return"alert"}close(){if(j.trigger(this._element,hr).defaultPrevented)return;this._element.classList.remove("show");const p=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,p)}_destroyElement(){this._element.remove(),j.trigger(this._element,Fr),this.dispose()}static jQueryInterface(p){return this.each(function(){const $=ds.getOrCreateInstance(this);if(typeof p=="string"){if($[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);$[p](this)}})}}ft(ds,"close"),de(ds);const xi='[data-bs-toggle="button"]';class Nn extends ze{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(p){return this.each(function(){const $=Nn.getOrCreateInstance(this);p==="toggle"&&$[p]()})}}j.on(document,"click.bs.button.data-api",xi,b=>{b.preventDefault();const p=b.target.closest(xi);Nn.getOrCreateInstance(p).toggle()}),de(Nn);const fn=".bs.swipe",ci=`touchstart${fn}`,ui=`touchmove${fn}`,Bi=`touchend${fn}`,He=`pointerdown${fn}`,It=`pointerup${fn}`,Rt={endCallback:null,leftCallback:null,rightCallback:null},hi={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Mn extends lt{constructor(p,$){super(),this._element=p,p&&Mn.isSupported()&&(this._config=this._getConfig($),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Rt}static get DefaultType(){return hi}static get NAME(){return"swipe"}dispose(){j.off(this._element,fn)}_start(p){this._supportPointerEvents?this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX):this._deltaX=p.touches[0].clientX}_end(p){this._eventIsPointerPenTouch(p)&&(this._deltaX=p.clientX-this._deltaX),this._handleSwipe(),Le(this._config.endCallback)}_move(p){this._deltaX=p.touches&&p.touches.length>1?0:p.touches[0].clientX-this._deltaX}_handleSwipe(){const p=Math.abs(this._deltaX);if(p<=40)return;const $=p/this._deltaX;this._deltaX=0,$&&Le($>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(j.on(this._element,He,p=>this._start(p)),j.on(this._element,It,p=>this._end(p)),this._element.classList.add("pointer-event")):(j.on(this._element,ci,p=>this._start(p)),j.on(this._element,ui,p=>this._move(p)),j.on(this._element,Bi,p=>this._end(p)))}_eventIsPointerPenTouch(p){return this._supportPointerEvents&&(p.pointerType==="pen"||p.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const M=".bs.carousel",Ks=".data-api",nn="next",yt="prev",In="left",q="right",ve=`slide${M}`,E=`slid${M}`,R=`keydown${M}`,F=`mouseenter${M}`,G=`mouseleave${M}`,me=`dragstart${M}`,wt=`load${M}${Ks}`,Gn=`click${M}${Ks}`,Bs="carousel",di="active",qn=".active",T=".carousel-item",v=qn+T,N={ArrowLeft:q,ArrowRight:In},X={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ue={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class we extends ze{constructor(p,$){super(p,$),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Bs&&this.cycle()}static get Default(){return X}static get DefaultType(){return ue}static get NAME(){return"carousel"}next(){this._slide(nn)}nextWhenVisible(){!document.hidden&&D(this._element)&&this.next()}prev(){this._slide(yt)}pause(){this._isSliding&&C(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?j.one(this._element,E,()=>this.cycle()):this.cycle())}to(p){const $=this._getItems();if(p>$.length-1||p<0)return;if(this._isSliding)return void j.one(this._element,E,()=>this.to(p));const y=this._getItemIndex(this._getActive());if(y===p)return;const U=p>y?nn:yt;this._slide(U,$[p])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(p){return p.defaultInterval=p.interval,p}_addEventListeners(){this._config.keyboard&&j.on(this._element,R,p=>this._keydown(p)),this._config.pause==="hover"&&(j.on(this._element,F,()=>this.pause()),j.on(this._element,G,()=>this._maybeEnableCycle())),this._config.touch&&Mn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const $ of Re.find(".carousel-item img",this._element))j.on($,me,y=>y.preventDefault());const p={leftCallback:()=>this._slide(this._directionToOrder(In)),rightCallback:()=>this._slide(this._directionToOrder(q)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Mn(this._element,p)}_keydown(p){if(/input|textarea/i.test(p.target.tagName))return;const $=N[p.key];$&&(p.preventDefault(),this._slide(this._directionToOrder($)))}_getItemIndex(p){return this._getItems().indexOf(p)}_setActiveIndicatorElement(p){if(!this._indicatorsElement)return;const $=Re.findOne(qn,this._indicatorsElement);$.classList.remove(di),$.removeAttribute("aria-current");const y=Re.findOne(`[data-bs-slide-to="${p}"]`,this._indicatorsElement);y&&(y.classList.add(di),y.setAttribute("aria-current","true"))}_updateInterval(){const p=this._activeElement||this._getActive();if(!p)return;const $=Number.parseInt(p.getAttribute("data-bs-interval"),10);this._config.interval=$||this._config.defaultInterval}_slide(p,$=null){if(this._isSliding)return;const y=this._getActive(),U=p===nn,W=$||nt(this._getItems(),y,U,this._config.wrap);if(W===y)return;const Z=this._getItemIndex(W),ae=Ne=>j.trigger(this._element,Ne,{relatedTarget:W,direction:this._orderToDirection(p),from:this._getItemIndex(y),to:Z});if(ae(ve).defaultPrevented||!y||!W)return;const Se=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Z),this._activeElement=W;const Ue=U?"carousel-item-start":"carousel-item-end",Fe=U?"carousel-item-next":"carousel-item-prev";W.classList.add(Fe),fe(W),y.classList.add(Ue),W.classList.add(Ue),this._queueCallback(()=>{W.classList.remove(Ue,Fe),W.classList.add(di),y.classList.remove(di,Fe,Ue),this._isSliding=!1,ae(E)},y,this._isAnimated()),Se&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Re.findOne(v,this._element)}_getItems(){return Re.find(T,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(p){return oe()?p===In?yt:nn:p===In?nn:yt}_orderToDirection(p){return oe()?p===yt?In:q:p===yt?q:In}static jQueryInterface(p){return this.each(function(){const $=we.getOrCreateInstance(this,p);if(typeof p!="number"){if(typeof p=="string"){if($[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);$[p]()}}else $.to(p)})}}j.on(document,Gn,"[data-bs-slide], [data-bs-slide-to]",function(b){const p=Re.getElementFromSelector(this);if(!p||!p.classList.contains(Bs))return;b.preventDefault();const $=we.getOrCreateInstance(p),y=this.getAttribute("data-bs-slide-to");return y?($.to(y),void $._maybeEnableCycle()):je.getDataAttribute(this,"slide")==="next"?($.next(),void $._maybeEnableCycle()):($.prev(),void $._maybeEnableCycle())}),j.on(window,wt,()=>{const b=Re.find('[data-bs-ride="carousel"]');for(const p of b)we.getOrCreateInstance(p)}),de(we);const Ke=".bs.collapse",ps=`show${Ke}`,Js=`shown${Ke}`,yo=`hide${Ke}`,qs=`hidden${Ke}`,ta=`click${Ke}.data-api`,Ui="show",pi="collapse",dr="collapsing",pc=`:scope .${pi} .${pi}`,gc='[data-bs-toggle="collapse"]',Mh={parent:null,toggle:!0},cl={parent:"(null|element)",toggle:"boolean"};class Us extends ze{constructor(p,$){super(p,$),this._isTransitioning=!1,this._triggerArray=[];const y=Re.find(gc);for(const U of y){const W=Re.getSelectorFromElement(U),Z=Re.find(W).filter(ae=>ae===this._element);W!==null&&Z.length&&this._triggerArray.push(U)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Mh}static get DefaultType(){return cl}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let p=[];if(this._config.parent&&(p=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(U=>U!==this._element).map(U=>Us.getOrCreateInstance(U,{toggle:!1}))),p.length&&p[0]._isTransitioning||j.trigger(this._element,ps).defaultPrevented)return;for(const U of p)U.hide();const $=this._getDimension();this._element.classList.remove(pi),this._element.classList.add(dr),this._element.style[$]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const y=`scroll${$[0].toUpperCase()+$.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(dr),this._element.classList.add(pi,Ui),this._element.style[$]="",j.trigger(this._element,Js)},this._element,!0),this._element.style[$]=`${this._element[y]}px`}hide(){if(this._isTransitioning||!this._isShown()||j.trigger(this._element,yo).defaultPrevented)return;const p=this._getDimension();this._element.style[p]=`${this._element.getBoundingClientRect()[p]}px`,fe(this._element),this._element.classList.add(dr),this._element.classList.remove(pi,Ui);for(const $ of this._triggerArray){const y=Re.getElementFromSelector($);y&&!this._isShown(y)&&this._addAriaAndCollapsedClass([$],!1)}this._isTransitioning=!0,this._element.style[p]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(dr),this._element.classList.add(pi),j.trigger(this._element,qs)},this._element,!0)}_isShown(p=this._element){return p.classList.contains(Ui)}_configAfterMerge(p){return p.toggle=!!p.toggle,p.parent=L(p.parent),p}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const p=this._getFirstLevelChildren(gc);for(const $ of p){const y=Re.getElementFromSelector($);y&&this._addAriaAndCollapsedClass([$],this._isShown(y))}}_getFirstLevelChildren(p){const $=Re.find(pc,this._config.parent);return Re.find(p,this._config.parent).filter(y=>!$.includes(y))}_addAriaAndCollapsedClass(p,$){if(p.length)for(const y of p)y.classList.toggle("collapsed",!$),y.setAttribute("aria-expanded",$)}static jQueryInterface(p){const $={};return typeof p=="string"&&/show|hide/.test(p)&&($.toggle=!1),this.each(function(){const y=Us.getOrCreateInstance(this,$);if(typeof p=="string"){if(y[p]===void 0)throw new TypeError(`No method named "${p}"`);y[p]()}})}}j.on(document,ta,gc,function(b){(b.target.tagName==="A"||b.delegateTarget&&b.delegateTarget.tagName==="A")&&b.preventDefault();for(const p of Re.getMultipleElementsFromSelector(this))Us.getOrCreateInstance(p,{toggle:!1}).toggle()}),de(Us);var Dn="top",gs="bottom",Qn="right",Pn="left",ul="auto",Fi=[Dn,gs,Qn,Pn],pr="start",gr="end",_c="clippingParents",sn="viewport",_r="popper",vo="reference",Co=Fi.reduce(function(b,p){return b.concat([p+"-"+pr,p+"-"+gr])},[]),Hi=[].concat(Fi,[ul]).reduce(function(b,p){return b.concat([p,p+"-"+pr,p+"-"+gr])},[]),bu="beforeRead",Hr="read",fr="afterRead",Rs="beforeMain",Su="main",Fs="afterMain",Ou="beforeWrite",mr="write",xn="afterWrite",$r=[bu,Hr,fr,Rs,Su,Fs,Ou,mr,xn];function _s(b){return b?(b.nodeName||"").toLowerCase():null}function Kt(b){if(b==null)return window;if(b.toString()!=="[object Window]"){var p=b.ownerDocument;return p&&p.defaultView||window}return b}function Vn(b){return b instanceof Kt(b).Element||b instanceof Element}function Hs(b){return b instanceof Kt(b).HTMLElement||b instanceof HTMLElement}function na(b){return typeof ShadowRoot<"u"&&(b instanceof Kt(b).ShadowRoot||b instanceof ShadowRoot)}const Gr={name:"applyStyles",enabled:!0,phase:"write",fn:function(b){var p=b.state;Object.keys(p.elements).forEach(function($){var y=p.styles[$]||{},U=p.attributes[$]||{},W=p.elements[$];Hs(W)&&_s(W)&&(Object.assign(W.style,y),Object.keys(U).forEach(function(Z){var ae=U[Z];ae===!1?W.removeAttribute(Z):W.setAttribute(Z,ae===!0?"":ae)}))})},effect:function(b){var p=b.state,$={popper:{position:p.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(p.elements.popper.style,$.popper),p.styles=$,p.elements.arrow&&Object.assign(p.elements.arrow.style,$.arrow),function(){Object.keys(p.elements).forEach(function(y){var U=p.elements[y],W=p.attributes[y]||{},Z=Object.keys(p.styles.hasOwnProperty(y)?p.styles[y]:$[y]).reduce(function(ae,Se){return ae[Se]="",ae},{});Hs(U)&&_s(U)&&(Object.assign(U.style,Z),Object.keys(W).forEach(function(ae){U.removeAttribute(ae)}))})}},requires:["computeStyles"]};function Gs(b){return b.split("-")[0]}var Gi=Math.max,Vi=Math.min,Wi=Math.round;function hl(){var b=navigator.userAgentData;return b!=null&&b.brands&&Array.isArray(b.brands)?b.brands.map(function(p){return p.brand+"/"+p.version}).join(" "):navigator.userAgent}function vt(){return!/^((?!chrome|android).)*safari/i.test(hl())}function Vr(b,p,$){p===void 0&&(p=!1),$===void 0&&($=!1);var y=b.getBoundingClientRect(),U=1,W=1;p&&Hs(b)&&(U=b.offsetWidth>0&&Wi(y.width)/b.offsetWidth||1,W=b.offsetHeight>0&&Wi(y.height)/b.offsetHeight||1);var Z=(Vn(b)?Kt(b):window).visualViewport,ae=!vt()&&$,Se=(y.left+(ae&&Z?Z.offsetLeft:0))/U,Ue=(y.top+(ae&&Z?Z.offsetTop:0))/W,Fe=y.width/U,Ne=y.height/W;return{width:Fe,height:Ne,top:Ue,right:Se+Fe,bottom:Ue+Ne,left:Se,x:Se,y:Ue}}function sa(b){var p=Vr(b),$=b.offsetWidth,y=b.offsetHeight;return Math.abs(p.width-$)<=1&&($=p.width),Math.abs(p.height-y)<=1&&(y=p.height),{x:b.offsetLeft,y:b.offsetTop,width:$,height:y}}function Lo(b,p){var $=p.getRootNode&&p.getRootNode();if(b.contains(p))return!0;if($&&na($)){var y=p;do{if(y&&b.isSameNode(y))return!0;y=y.parentNode||y.host}while(y)}return!1}function gi(b){return Kt(b).getComputedStyle(b)}function Ao(b){return["table","td","th"].indexOf(_s(b))>=0}function zi(b){return((Vn(b)?b.ownerDocument:b.document)||window.document).documentElement}function Wr(b){return _s(b)==="html"?b:b.assignedSlot||b.parentNode||(na(b)?b.host:null)||zi(b)}function zr(b){return Hs(b)&&gi(b).position!=="fixed"?b.offsetParent:null}function ys(b){for(var p=Kt(b),$=zr(b);$&&Ao($)&&gi($).position==="static";)$=zr($);return $&&(_s($)==="html"||_s($)==="body"&&gi($).position==="static")?p:$||function(y){var U=/firefox/i.test(hl());if(/Trident/i.test(hl())&&Hs(y)&&gi(y).position==="fixed")return null;var W=Wr(y);for(na(W)&&(W=W.host);Hs(W)&&["html","body"].indexOf(_s(W))<0;){var Z=gi(W);if(Z.transform!=="none"||Z.perspective!=="none"||Z.contain==="paint"||["transform","perspective"].indexOf(Z.willChange)!==-1||U&&Z.willChange==="filter"||U&&Z.filter&&Z.filter!=="none")return W;W=W.parentNode}return null}(b)||p}function Qs(b){return["top","bottom"].indexOf(b)>=0?"x":"y"}function Vs(b,p,$){return Gi(b,Vi(p,$))}function Tr(b){return Object.assign({},{top:0,right:0,bottom:0,left:0},b)}function _i(b,p){return p.reduce(function($,y){return $[y]=b,$},{})}const Zs={name:"arrow",enabled:!0,phase:"main",fn:function(b){var p,$=b.state,y=b.name,U=b.options,W=$.elements.arrow,Z=$.modifiersData.popperOffsets,ae=Gs($.placement),Se=Qs(ae),Ue=[Pn,Qn].indexOf(ae)>=0?"height":"width";if(W&&Z){var Fe=function(Pt,xt){return Tr(typeof(Pt=typeof Pt=="function"?Pt(Object.assign({},xt.rects,{placement:xt.placement})):Pt)!="number"?Pt:_i(Pt,Fi))}(U.padding,$),Ne=sa(W),Qe=Se==="y"?Dn:Pn,Xe=Se==="y"?gs:Qn,xe=$.rects.reference[Ue]+$.rects.reference[Se]-Z[Se]-$.rects.popper[Ue],qe=Z[Se]-$.rects.reference[Se],at=ys(W),Gt=at?Se==="y"?at.clientHeight||0:at.clientWidth||0:0,Vt=xe/2-qe/2,pt=Fe[Qe],bt=Gt-Ne[Ue]-Fe[Xe],ut=Gt/2-Ne[Ue]/2+Vt,gt=Vs(pt,ut,bt),mt=Se;$.modifiersData[y]=((p={})[mt]=gt,p.centerOffset=gt-ut,p)}},effect:function(b){var p=b.state,$=b.options.element,y=$===void 0?"[data-popper-arrow]":$;y!=null&&(typeof y!="string"||(y=p.elements.popper.querySelector(y)))&&Lo(p.elements.popper,y)&&(p.elements.arrow=y)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ko(b){return b.split("-")[1]}var fc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xr(b){var p,$=b.popper,y=b.popperRect,U=b.placement,W=b.variation,Z=b.offsets,ae=b.position,Se=b.gpuAcceleration,Ue=b.adaptive,Fe=b.roundOffsets,Ne=b.isFixed,Qe=Z.x,Xe=Qe===void 0?0:Qe,xe=Z.y,qe=xe===void 0?0:xe,at=typeof Fe=="function"?Fe({x:Xe,y:qe}):{x:Xe,y:qe};Xe=at.x,qe=at.y;var Gt=Z.hasOwnProperty("x"),Vt=Z.hasOwnProperty("y"),pt=Pn,bt=Dn,ut=window;if(Ue){var gt=ys($),mt="clientHeight",Pt="clientWidth";gt===Kt($)&&gi(gt=zi($)).position!=="static"&&ae==="absolute"&&(mt="scrollHeight",Pt="scrollWidth"),(U===Dn||(U===Pn||U===Qn)&&W===gr)&&(bt=gs,qe-=(Ne&&gt===ut&&ut.visualViewport?ut.visualViewport.height:gt[mt])-y.height,qe*=Se?1:-1),U!==Pn&&(U!==Dn&&U!==gs||W!==gr)||(pt=Qn,Xe-=(Ne&&gt===ut&&ut.visualViewport?ut.visualViewport.width:gt[Pt])-y.width,Xe*=Se?1:-1)}var xt,qt=Object.assign({position:ae},Ue&&fc),zn=Fe===!0?function(As,Bn){var Un=As.x,ks=As.y,Zt=Bn.devicePixelRatio||1;return{x:Wi(Un*Zt)/Zt||0,y:Wi(ks*Zt)/Zt||0}}({x:Xe,y:qe},Kt($)):{x:Xe,y:qe};return Xe=zn.x,qe=zn.y,Se?Object.assign({},qt,((xt={})[bt]=Vt?"0":"",xt[pt]=Gt?"0":"",xt.transform=(ut.devicePixelRatio||1)<=1?"translate("+Xe+"px, "+qe+"px)":"translate3d("+Xe+"px, "+qe+"px, 0)",xt)):Object.assign({},qt,((p={})[bt]=Vt?qe+"px":"",p[pt]=Gt?Xe+"px":"",p.transform="",p))}const mc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(b){var p=b.state,$=b.options,y=$.gpuAcceleration,U=y===void 0||y,W=$.adaptive,Z=W===void 0||W,ae=$.roundOffsets,Se=ae===void 0||ae,Ue={placement:Gs(p.placement),variation:ko(p.placement),popper:p.elements.popper,popperRect:p.rects.popper,gpuAcceleration:U,isFixed:p.options.strategy==="fixed"};p.modifiersData.popperOffsets!=null&&(p.styles.popper=Object.assign({},p.styles.popper,Xr(Object.assign({},Ue,{offsets:p.modifiersData.popperOffsets,position:p.options.strategy,adaptive:Z,roundOffsets:Se})))),p.modifiersData.arrow!=null&&(p.styles.arrow=Object.assign({},p.styles.arrow,Xr(Object.assign({},Ue,{offsets:p.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Se})))),p.attributes.popper=Object.assign({},p.attributes.popper,{"data-popper-placement":p.placement})},data:{}};var dl={passive:!0};const ei={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(b){var p=b.state,$=b.instance,y=b.options,U=y.scroll,W=U===void 0||U,Z=y.resize,ae=Z===void 0||Z,Se=Kt(p.elements.popper),Ue=[].concat(p.scrollParents.reference,p.scrollParents.popper);return W&&Ue.forEach(function(Fe){Fe.addEventListener("scroll",$.update,dl)}),ae&&Se.addEventListener("resize",$.update,dl),function(){W&&Ue.forEach(function(Fe){Fe.removeEventListener("scroll",$.update,dl)}),ae&&Se.removeEventListener("resize",$.update,dl)}},data:{}};var Ru={left:"right",right:"left",bottom:"top",top:"bottom"};function jr(b){return b.replace(/left|right|bottom|top/g,function(p){return Ru[p]})}var Zn={start:"end",end:"start"};function wo(b){return b.replace(/start|end/g,function(p){return Zn[p]})}function Er(b){var p=Kt(b);return{scrollLeft:p.pageXOffset,scrollTop:p.pageYOffset}}function No(b){return Vr(zi(b)).left+Er(b).scrollLeft}function $c(b){var p=gi(b),$=p.overflow,y=p.overflowX,U=p.overflowY;return/auto|scroll|overlay|hidden/.test($+U+y)}function yu(b){return["html","body","#document"].indexOf(_s(b))>=0?b.ownerDocument.body:Hs(b)&&$c(b)?b:yu(Wr(b))}function Yr(b,p){var $;p===void 0&&(p=[]);var y=yu(b),U=y===(($=b.ownerDocument)==null?void 0:$.body),W=Kt(y),Z=U?[W].concat(W.visualViewport||[],$c(y)?y:[]):y,ae=p.concat(Z);return U?ae:ae.concat(Yr(Wr(Z)))}function Mo(b){return Object.assign({},b,{left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height})}function pl(b,p,$){return p===sn?Mo(function(y,U){var W=Kt(y),Z=zi(y),ae=W.visualViewport,Se=Z.clientWidth,Ue=Z.clientHeight,Fe=0,Ne=0;if(ae){Se=ae.width,Ue=ae.height;var Qe=vt();(Qe||!Qe&&U==="fixed")&&(Fe=ae.offsetLeft,Ne=ae.offsetTop)}return{width:Se,height:Ue,x:Fe+No(y),y:Ne}}(b,$)):Vn(p)?function(y,U){var W=Vr(y,!1,U==="fixed");return W.top=W.top+y.clientTop,W.left=W.left+y.clientLeft,W.bottom=W.top+y.clientHeight,W.right=W.left+y.clientWidth,W.width=y.clientWidth,W.height=y.clientHeight,W.x=W.left,W.y=W.top,W}(p,$):Mo(function(y){var U,W=zi(y),Z=Er(y),ae=(U=y.ownerDocument)==null?void 0:U.body,Se=Gi(W.scrollWidth,W.clientWidth,ae?ae.scrollWidth:0,ae?ae.clientWidth:0),Ue=Gi(W.scrollHeight,W.clientHeight,ae?ae.scrollHeight:0,ae?ae.clientHeight:0),Fe=-Z.scrollLeft+No(y),Ne=-Z.scrollTop;return gi(ae||W).direction==="rtl"&&(Fe+=Gi(W.clientWidth,ae?ae.clientWidth:0)-Se),{width:Se,height:Ue,x:Fe,y:Ne}}(zi(b)))}function fi(b){var p,$=b.reference,y=b.element,U=b.placement,W=U?Gs(U):null,Z=U?ko(U):null,ae=$.x+$.width/2-y.width/2,Se=$.y+$.height/2-y.height/2;switch(W){case Dn:p={x:ae,y:$.y-y.height};break;case gs:p={x:ae,y:$.y+$.height};break;case Qn:p={x:$.x+$.width,y:Se};break;case Pn:p={x:$.x-y.width,y:Se};break;default:p={x:$.x,y:$.y}}var Ue=W?Qs(W):null;if(Ue!=null){var Fe=Ue==="y"?"height":"width";switch(Z){case pr:p[Ue]=p[Ue]-($[Fe]/2-y[Fe]/2);break;case gr:p[Ue]=p[Ue]+($[Fe]/2-y[Fe]/2)}}return p}function Wn(b,p){p===void 0&&(p={});var $=p,y=$.placement,U=y===void 0?b.placement:y,W=$.strategy,Z=W===void 0?b.strategy:W,ae=$.boundary,Se=ae===void 0?_c:ae,Ue=$.rootBoundary,Fe=Ue===void 0?sn:Ue,Ne=$.elementContext,Qe=Ne===void 0?_r:Ne,Xe=$.altBoundary,xe=Xe!==void 0&&Xe,qe=$.padding,at=qe===void 0?0:qe,Gt=Tr(typeof at!="number"?at:_i(at,Fi)),Vt=Qe===_r?vo:_r,pt=b.rects.popper,bt=b.elements[xe?Vt:Qe],ut=function(Bn,Un,ks,Zt){var ws=Un==="clippingParents"?function(Lt){var Xt=Yr(Wr(Lt)),Xn=["absolute","fixed"].indexOf(gi(Lt).position)>=0&&Hs(Lt)?ys(Lt):Lt;return Vn(Xn)?Xt.filter(function(en){return Vn(en)&&Lo(en,Xn)&&_s(en)!=="body"}):[]}(Bn):[].concat(Un),vn=[].concat(ws,[ks]),Zi=vn[0],bn=vn.reduce(function(Lt,Xt){var Xn=pl(Bn,Xt,Zt);return Lt.top=Gi(Xn.top,Lt.top),Lt.right=Vi(Xn.right,Lt.right),Lt.bottom=Vi(Xn.bottom,Lt.bottom),Lt.left=Gi(Xn.left,Lt.left),Lt},pl(Bn,Zi,Zt));return bn.width=bn.right-bn.left,bn.height=bn.bottom-bn.top,bn.x=bn.left,bn.y=bn.top,bn}(Vn(bt)?bt:bt.contextElement||zi(b.elements.popper),Se,Fe,Z),gt=Vr(b.elements.reference),mt=fi({reference:gt,element:pt,placement:U}),Pt=Mo(Object.assign({},pt,mt)),xt=Qe===_r?Pt:gt,qt={top:ut.top-xt.top+Gt.top,bottom:xt.bottom-ut.bottom+Gt.bottom,left:ut.left-xt.left+Gt.left,right:xt.right-ut.right+Gt.right},zn=b.modifiersData.offset;if(Qe===_r&&zn){var As=zn[U];Object.keys(qt).forEach(function(Bn){var Un=[Qn,gs].indexOf(Bn)>=0?1:-1,ks=[Dn,gs].indexOf(Bn)>=0?"y":"x";qt[Bn]+=As[ks]*Un})}return qt}function ia(b,p){p===void 0&&(p={});var $=p,y=$.placement,U=$.boundary,W=$.rootBoundary,Z=$.padding,ae=$.flipVariations,Se=$.allowedAutoPlacements,Ue=Se===void 0?Hi:Se,Fe=ko(y),Ne=Fe?ae?Co:Co.filter(function(xe){return ko(xe)===Fe}):Fi,Qe=Ne.filter(function(xe){return Ue.indexOf(xe)>=0});Qe.length===0&&(Qe=Ne);var Xe=Qe.reduce(function(xe,qe){return xe[qe]=Wn(b,{placement:qe,boundary:U,rootBoundary:W,padding:Z})[Gs(qe)],xe},{});return Object.keys(Xe).sort(function(xe,qe){return Xe[xe]-Xe[qe]})}const gl={name:"flip",enabled:!0,phase:"main",fn:function(b){var p=b.state,$=b.options,y=b.name;if(!p.modifiersData[y]._skip){for(var U=$.mainAxis,W=U===void 0||U,Z=$.altAxis,ae=Z===void 0||Z,Se=$.fallbackPlacements,Ue=$.padding,Fe=$.boundary,Ne=$.rootBoundary,Qe=$.altBoundary,Xe=$.flipVariations,xe=Xe===void 0||Xe,qe=$.allowedAutoPlacements,at=p.options.placement,Gt=Gs(at),Vt=Se||(Gt!==at&&xe?function(Lt){if(Gs(Lt)===ul)return[];var Xt=jr(Lt);return[wo(Lt),Xt,wo(Xt)]}(at):[jr(at)]),pt=[at].concat(Vt).reduce(function(Lt,Xt){return Lt.concat(Gs(Xt)===ul?ia(p,{placement:Xt,boundary:Fe,rootBoundary:Ne,padding:Ue,flipVariations:xe,allowedAutoPlacements:qe}):Xt)},[]),bt=p.rects.reference,ut=p.rects.popper,gt=new Map,mt=!0,Pt=pt[0],xt=0;xt<pt.length;xt++){var qt=pt[xt],zn=Gs(qt),As=ko(qt)===pr,Bn=[Dn,gs].indexOf(zn)>=0,Un=Bn?"width":"height",ks=Wn(p,{placement:qt,boundary:Fe,rootBoundary:Ne,altBoundary:Qe,padding:Ue}),Zt=Bn?As?Qn:Pn:As?gs:Dn;bt[Un]>ut[Un]&&(Zt=jr(Zt));var ws=jr(Zt),vn=[];if(W&&vn.push(ks[zn]<=0),ae&&vn.push(ks[Zt]<=0,ks[ws]<=0),vn.every(function(Lt){return Lt})){Pt=qt,mt=!1;break}gt.set(qt,vn)}if(mt)for(var Zi=function(Lt){var Xt=pt.find(function(Xn){var en=gt.get(Xn);if(en)return en.slice(0,Lt).every(function(ri){return ri})});if(Xt)return Pt=Xt,"break"},bn=xe?3:1;bn>0&&Zi(bn)!=="break";bn--);p.placement!==Pt&&(p.modifiersData[y]._skip=!0,p.placement=Pt,p.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Tc(b,p,$){return $===void 0&&($={x:0,y:0}),{top:b.top-p.height-$.y,right:b.right-p.width+$.x,bottom:b.bottom-p.height+$.y,left:b.left-p.width-$.x}}function _l(b){return[Dn,Qn,gs,Pn].some(function(p){return b[p]>=0})}const fl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(b){var p=b.state,$=b.name,y=p.rects.reference,U=p.rects.popper,W=p.modifiersData.preventOverflow,Z=Wn(p,{elementContext:"reference"}),ae=Wn(p,{altBoundary:!0}),Se=Tc(Z,y),Ue=Tc(ae,U,W),Fe=_l(Se),Ne=_l(Ue);p.modifiersData[$]={referenceClippingOffsets:Se,popperEscapeOffsets:Ue,isReferenceHidden:Fe,hasPopperEscaped:Ne},p.attributes.popper=Object.assign({},p.attributes.popper,{"data-popper-reference-hidden":Fe,"data-popper-escaped":Ne})}},Ec={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(b){var p=b.state,$=b.options,y=b.name,U=$.offset,W=U===void 0?[0,0]:U,Z=Hi.reduce(function(Fe,Ne){return Fe[Ne]=function(Qe,Xe,xe){var qe=Gs(Qe),at=[Pn,Dn].indexOf(qe)>=0?-1:1,Gt=typeof xe=="function"?xe(Object.assign({},Xe,{placement:Qe})):xe,Vt=Gt[0],pt=Gt[1];return Vt=Vt||0,pt=(pt||0)*at,[Pn,Qn].indexOf(qe)>=0?{x:pt,y:Vt}:{x:Vt,y:pt}}(Ne,p.rects,W),Fe},{}),ae=Z[p.placement],Se=ae.x,Ue=ae.y;p.modifiersData.popperOffsets!=null&&(p.modifiersData.popperOffsets.x+=Se,p.modifiersData.popperOffsets.y+=Ue),p.modifiersData[y]=Z}},is={name:"popperOffsets",enabled:!0,phase:"read",fn:function(b){var p=b.state,$=b.name;p.modifiersData[$]=fi({reference:p.rects.reference,element:p.rects.popper,placement:p.placement})},data:{}},Kr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(b){var p=b.state,$=b.options,y=b.name,U=$.mainAxis,W=U===void 0||U,Z=$.altAxis,ae=Z!==void 0&&Z,Se=$.boundary,Ue=$.rootBoundary,Fe=$.altBoundary,Ne=$.padding,Qe=$.tether,Xe=Qe===void 0||Qe,xe=$.tetherOffset,qe=xe===void 0?0:xe,at=Wn(p,{boundary:Se,rootBoundary:Ue,padding:Ne,altBoundary:Fe}),Gt=Gs(p.placement),Vt=ko(p.placement),pt=!Vt,bt=Qs(Gt),ut=bt==="x"?"y":"x",gt=p.modifiersData.popperOffsets,mt=p.rects.reference,Pt=p.rects.popper,xt=typeof qe=="function"?qe(Object.assign({},p.rects,{placement:p.placement})):qe,qt=typeof xt=="number"?{mainAxis:xt,altAxis:xt}:Object.assign({mainAxis:0,altAxis:0},xt),zn=p.modifiersData.offset?p.modifiersData.offset[p.placement]:null,As={x:0,y:0};if(gt){if(W){var Bn,Un=bt==="y"?Dn:Pn,ks=bt==="y"?gs:Qn,Zt=bt==="y"?"height":"width",ws=gt[bt],vn=ws+at[Un],Zi=ws-at[ks],bn=Xe?-Pt[Zt]/2:0,Lt=Vt===pr?mt[Zt]:Pt[Zt],Xt=Vt===pr?-Pt[Zt]:-mt[Zt],Xn=p.elements.arrow,en=Xe&&Xn?sa(Xn):{width:0,height:0},ri=p.modifiersData["arrow#persistent"]?p.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ra=ri[Un],Ho=ri[ks],Ns=Vs(0,mt[Zt],en[Zt]),er=pt?mt[Zt]/2-bn-Ns-Ra-qt.mainAxis:Lt-Ns-Ra-qt.mainAxis,ya=pt?-mt[Zt]/2+bn+Ns+Ho+qt.mainAxis:Xt+Ns+Ho+qt.mainAxis,kl=p.elements.arrow&&ys(p.elements.arrow),Ri=kl?bt==="y"?kl.clientTop||0:kl.clientLeft||0:0,yi=(Bn=zn==null?void 0:zn[bt])!=null?Bn:0,wl=ws+ya-yi,va=Vs(Xe?Vi(vn,ws+er-yi-Ri):vn,ws,Xe?Gi(Zi,wl):Zi);gt[bt]=va,As[bt]=va-ws}if(ae){var Go,Kc=bt==="x"?Dn:Pn,Nl=bt==="x"?gs:Qn,ss=gt[ut],Cr=ut==="y"?"height":"width",Vo=ss+at[Kc],Lr=ss-at[Nl],Ml=[Dn,Pn].indexOf(Gt)!==-1,tr=(Go=zn==null?void 0:zn[ut])!=null?Go:0,Jc=Ml?Vo:ss-mt[Cr]-Pt[Cr]-tr+qt.altAxis,Ca=Ml?ss+mt[Cr]+Pt[Cr]-tr-qt.altAxis:Lr,tn=Xe&&Ml?function(Dl,La,Wo){var zo=Vs(Dl,La,Wo);return zo>Wo?Wo:zo}(Jc,ss,Ca):Vs(Xe?Jc:Vo,ss,Xe?Ca:Lr);gt[ut]=tn,As[ut]=tn-ss}p.modifiersData[y]=As}},requiresIfExists:["offset"]};function Ic(b,p,$){$===void 0&&($=!1);var y,U,W=Hs(p),Z=Hs(p)&&function(Ne){var Qe=Ne.getBoundingClientRect(),Xe=Wi(Qe.width)/Ne.offsetWidth||1,xe=Wi(Qe.height)/Ne.offsetHeight||1;return Xe!==1||xe!==1}(p),ae=zi(p),Se=Vr(b,Z,$),Ue={scrollLeft:0,scrollTop:0},Fe={x:0,y:0};return(W||!W&&!$)&&((_s(p)!=="body"||$c(ae))&&(Ue=(y=p)!==Kt(y)&&Hs(y)?{scrollLeft:(U=y).scrollLeft,scrollTop:U.scrollTop}:Er(y)),Hs(p)?((Fe=Vr(p,!0)).x+=p.clientLeft,Fe.y+=p.clientTop):ae&&(Fe.x=No(ae))),{x:Se.left+Ue.scrollLeft-Fe.x,y:Se.top+Ue.scrollTop-Fe.y,width:Se.width,height:Se.height}}function ml(b){var p=new Map,$=new Set,y=[];function U(W){$.add(W.name),[].concat(W.requires||[],W.requiresIfExists||[]).forEach(function(Z){if(!$.has(Z)){var ae=p.get(Z);ae&&U(ae)}}),y.push(W)}return b.forEach(function(W){p.set(W.name,W)}),b.forEach(function(W){$.has(W.name)||U(W)}),y}var bc={placement:"bottom",modifiers:[],strategy:"absolute"};function ra(){for(var b=arguments.length,p=new Array(b),$=0;$<b;$++)p[$]=arguments[$];return!p.some(function(y){return!(y&&typeof y.getBoundingClientRect=="function")})}function mi(b){b===void 0&&(b={});var p=b,$=p.defaultModifiers,y=$===void 0?[]:$,U=p.defaultOptions,W=U===void 0?bc:U;return function(Z,ae,Se){Se===void 0&&(Se=W);var Ue,Fe,Ne={placement:"bottom",orderedModifiers:[],options:Object.assign({},bc,W),modifiersData:{},elements:{reference:Z,popper:ae},attributes:{},styles:{}},Qe=[],Xe=!1,xe={state:Ne,setOptions:function(at){var Gt=typeof at=="function"?at(Ne.options):at;qe(),Ne.options=Object.assign({},W,Ne.options,Gt),Ne.scrollParents={reference:Vn(Z)?Yr(Z):Z.contextElement?Yr(Z.contextElement):[],popper:Yr(ae)};var Vt,pt,bt=function(ut){var gt=ml(ut);return $r.reduce(function(mt,Pt){return mt.concat(gt.filter(function(xt){return xt.phase===Pt}))},[])}((Vt=[].concat(y,Ne.options.modifiers),pt=Vt.reduce(function(ut,gt){var mt=ut[gt.name];return ut[gt.name]=mt?Object.assign({},mt,gt,{options:Object.assign({},mt.options,gt.options),data:Object.assign({},mt.data,gt.data)}):gt,ut},{}),Object.keys(pt).map(function(ut){return pt[ut]})));return Ne.orderedModifiers=bt.filter(function(ut){return ut.enabled}),Ne.orderedModifiers.forEach(function(ut){var gt=ut.name,mt=ut.options,Pt=mt===void 0?{}:mt,xt=ut.effect;if(typeof xt=="function"){var qt=xt({state:Ne,name:gt,instance:xe,options:Pt});Qe.push(qt||function(){})}}),xe.update()},forceUpdate:function(){if(!Xe){var at=Ne.elements,Gt=at.reference,Vt=at.popper;if(ra(Gt,Vt)){Ne.rects={reference:Ic(Gt,ys(Vt),Ne.options.strategy==="fixed"),popper:sa(Vt)},Ne.reset=!1,Ne.placement=Ne.options.placement,Ne.orderedModifiers.forEach(function(xt){return Ne.modifiersData[xt.name]=Object.assign({},xt.data)});for(var pt=0;pt<Ne.orderedModifiers.length;pt++)if(Ne.reset!==!0){var bt=Ne.orderedModifiers[pt],ut=bt.fn,gt=bt.options,mt=gt===void 0?{}:gt,Pt=bt.name;typeof ut=="function"&&(Ne=ut({state:Ne,options:mt,name:Pt,instance:xe})||Ne)}else Ne.reset=!1,pt=-1}}},update:(Ue=function(){return new Promise(function(at){xe.forceUpdate(),at(Ne)})},function(){return Fe||(Fe=new Promise(function(at){Promise.resolve().then(function(){Fe=void 0,at(Ue())})})),Fe}),destroy:function(){qe(),Xe=!0}};if(!ra(Z,ae))return xe;function qe(){Qe.forEach(function(at){return at()}),Qe=[]}return xe.setOptions(Se).then(function(at){!Xe&&Se.onFirstUpdate&&Se.onFirstUpdate(at)}),xe}}var Jr=mi(),oa=mi({defaultModifiers:[ei,is,mc,Gr]}),Ir=mi({defaultModifiers:[ei,is,mc,Gr,Ec,gl,Kr,Zs,fl]});const Sc=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Fs,afterRead:fr,afterWrite:xn,applyStyles:Gr,arrow:Zs,auto:ul,basePlacements:Fi,beforeMain:Rs,beforeRead:bu,beforeWrite:Ou,bottom:gs,clippingParents:_c,computeStyles:mc,createPopper:Ir,createPopperBase:Jr,createPopperLite:oa,detectOverflow:Wn,end:gr,eventListeners:ei,flip:gl,hide:fl,left:Pn,main:Su,modifierPhases:$r,offset:Ec,placements:Hi,popper:_r,popperGenerator:mi,popperOffsets:is,preventOverflow:Kr,read:Hr,reference:vo,right:Qn,start:pr,top:Dn,variationPlacements:Co,viewport:sn,write:mr},Symbol.toStringTag,{value:"Module"})),Oc="dropdown",br=".bs.dropdown",qr=".data-api",Rc="ArrowUp",yc="ArrowDown",Dh=`hide${br}`,vu=`hidden${br}`,Cu=`show${br}`,vc=`shown${br}`,Cc=`click${br}${qr}`,Lc=`keydown${br}${qr}`,Lu=`keyup${br}${qr}`,Qr="show",Xi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',la=`${Xi}.${Qr}`,$l=".dropdown-menu",Ac=oe()?"top-end":"top-start",aa=oe()?"top-start":"top-end",ji=oe()?"bottom-end":"bottom-start",Au=oe()?"bottom-start":"bottom-end",ku=oe()?"left-start":"right-start",ca=oe()?"right-start":"left-start",wu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Nu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ti extends ze{constructor(p,$){super(p,$),this._popper=null,this._parent=this._element.parentNode,this._menu=Re.next(this._element,$l)[0]||Re.prev(this._element,$l)[0]||Re.findOne($l,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return wu}static get DefaultType(){return Nu}static get NAME(){return Oc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(te(this._element)||this._isShown())return;const p={relatedTarget:this._element};if(!j.trigger(this._element,Cu,p).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const $ of[].concat(...document.body.children))j.on($,"mouseover",Y);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Qr),this._element.classList.add(Qr),j.trigger(this._element,vc,p)}}hide(){if(te(this._element)||!this._isShown())return;const p={relatedTarget:this._element};this._completeHide(p)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(p){if(!j.trigger(this._element,Dh,p).defaultPrevented){if("ontouchstart"in document.documentElement)for(const $ of[].concat(...document.body.children))j.off($,"mouseover",Y);this._popper&&this._popper.destroy(),this._menu.classList.remove(Qr),this._element.classList.remove(Qr),this._element.setAttribute("aria-expanded","false"),je.removeDataAttribute(this._menu,"popper"),j.trigger(this._element,vu,p)}}_getConfig(p){if(typeof(p=super._getConfig(p)).reference=="object"&&!A(p.reference)&&typeof p.reference.getBoundingClientRect!="function")throw new TypeError(`${Oc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return p}_createPopper(){if(Sc===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let p=this._element;this._config.reference==="parent"?p=this._parent:A(this._config.reference)?p=L(this._config.reference):typeof this._config.reference=="object"&&(p=this._config.reference);const $=this._getPopperConfig();this._popper=Ir(p,this._menu,$)}_isShown(){return this._menu.classList.contains(Qr)}_getPlacement(){const p=this._parent;if(p.classList.contains("dropend"))return ku;if(p.classList.contains("dropstart"))return ca;if(p.classList.contains("dropup-center"))return"top";if(p.classList.contains("dropdown-center"))return"bottom";const $=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return p.classList.contains("dropup")?$?aa:Ac:$?Au:ji}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:p}=this._config;return typeof p=="string"?p.split(",").map($=>Number.parseInt($,10)):typeof p=="function"?$=>p($,this._element):p}_getPopperConfig(){const p={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(je.setDataAttribute(this._menu,"popper","static"),p.modifiers=[{name:"applyStyles",enabled:!1}]),{...p,...Le(this._config.popperConfig,[p])}}_selectMenuItem({key:p,target:$}){const y=Re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(U=>D(U));y.length&&nt(y,$,p===yc,!y.includes($)).focus()}static jQueryInterface(p){return this.each(function(){const $=ti.getOrCreateInstance(this,p);if(typeof p=="string"){if($[p]===void 0)throw new TypeError(`No method named "${p}"`);$[p]()}})}static clearMenus(p){if(p.button===2||p.type==="keyup"&&p.key!=="Tab")return;const $=Re.find(la);for(const y of $){const U=ti.getInstance(y);if(!U||U._config.autoClose===!1)continue;const W=p.composedPath(),Z=W.includes(U._menu);if(W.includes(U._element)||U._config.autoClose==="inside"&&!Z||U._config.autoClose==="outside"&&Z||U._menu.contains(p.target)&&(p.type==="keyup"&&p.key==="Tab"||/input|select|option|textarea|form/i.test(p.target.tagName)))continue;const ae={relatedTarget:U._element};p.type==="click"&&(ae.clickEvent=p),U._completeHide(ae)}}static dataApiKeydownHandler(p){const $=/input|textarea/i.test(p.target.tagName),y=p.key==="Escape",U=[Rc,yc].includes(p.key);if(!U&&!y||$&&!y)return;p.preventDefault();const W=this.matches(Xi)?this:Re.prev(this,Xi)[0]||Re.next(this,Xi)[0]||Re.findOne(Xi,p.delegateTarget.parentNode),Z=ti.getOrCreateInstance(W);if(U)return p.stopPropagation(),Z.show(),void Z._selectMenuItem(p);Z._isShown()&&(p.stopPropagation(),Z.hide(),W.focus())}}j.on(document,Lc,Xi,ti.dataApiKeydownHandler),j.on(document,Lc,$l,ti.dataApiKeydownHandler),j.on(document,Cc,ti.clearMenus),j.on(document,Lu,ti.clearMenus),j.on(document,Cc,Xi,function(b){b.preventDefault(),ti.getOrCreateInstance(this).toggle()}),de(ti);const Do="backdrop",Zr="show",Mu=`mousedown.bs.${Do}`,Du={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Pu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class kc extends lt{constructor(p){super(),this._config=this._getConfig(p),this._isAppended=!1,this._element=null}static get Default(){return Du}static get DefaultType(){return Pu}static get NAME(){return Do}show(p){if(!this._config.isVisible)return void Le(p);this._append();const $=this._getElement();this._config.isAnimated&&fe($),$.classList.add(Zr),this._emulateAnimation(()=>{Le(p)})}hide(p){this._config.isVisible?(this._getElement().classList.remove(Zr),this._emulateAnimation(()=>{this.dispose(),Le(p)})):Le(p)}dispose(){this._isAppended&&(j.off(this._element,Mu),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const p=document.createElement("div");p.className=this._config.className,this._config.isAnimated&&p.classList.add("fade"),this._element=p}return this._element}_configAfterMerge(p){return p.rootElement=L(p.rootElement),p}_append(){if(this._isAppended)return;const p=this._getElement();this._config.rootElement.append(p),j.on(p,Mu,()=>{Le(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(p){ke(p,this._getElement(),this._config.isAnimated)}}const Tl=".bs.focustrap",Po=`focusin${Tl}`,eo=`keydown.tab${Tl}`,wc="backward",El={autofocus:!0,trapElement:null},Nc={autofocus:"boolean",trapElement:"element"};class Mc extends lt{constructor(p){super(),this._config=this._getConfig(p),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return El}static get DefaultType(){return Nc}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),j.off(document,Tl),j.on(document,Po,p=>this._handleFocusin(p)),j.on(document,eo,p=>this._handleKeydown(p)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,j.off(document,Tl))}_handleFocusin(p){const{trapElement:$}=this._config;if(p.target===document||p.target===$||$.contains(p.target))return;const y=Re.focusableChildren($);y.length===0?$.focus():this._lastTabNavDirection===wc?y[y.length-1].focus():y[0].focus()}_handleKeydown(p){p.key==="Tab"&&(this._lastTabNavDirection=p.shiftKey?wc:"forward")}}const Dc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",to=".sticky-top",Yi="padding-right",Ki="margin-right";class no{constructor(){this._element=document.body}getWidth(){const p=document.documentElement.clientWidth;return Math.abs(window.innerWidth-p)}hide(){const p=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yi,$=>$+p),this._setElementAttributes(Dc,Yi,$=>$+p),this._setElementAttributes(to,Ki,$=>$-p)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yi),this._resetElementAttributes(Dc,Yi),this._resetElementAttributes(to,Ki)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(p,$,y){const U=this.getWidth();this._applyManipulationCallback(p,W=>{if(W!==this._element&&window.innerWidth>W.clientWidth+U)return;this._saveInitialAttribute(W,$);const Z=window.getComputedStyle(W).getPropertyValue($);W.style.setProperty($,`${y(Number.parseFloat(Z))}px`)})}_saveInitialAttribute(p,$){const y=p.style.getPropertyValue($);y&&je.setDataAttribute(p,$,y)}_resetElementAttributes(p,$){this._applyManipulationCallback(p,y=>{const U=je.getDataAttribute(y,$);U!==null?(je.removeDataAttribute(y,$),y.style.setProperty($,U)):y.style.removeProperty($)})}_applyManipulationCallback(p,$){if(A(p))$(p);else for(const y of Re.find(p,this._element))$(y)}}const vs=".bs.modal",xu=`hide${vs}`,Pc=`hidePrevented${vs}`,ua=`hidden${vs}`,xc=`show${vs}`,Bc=`shown${vs}`,Bu=`resize${vs}`,Uu=`click.dismiss${vs}`,Ph=`mousedown.dismiss${vs}`,xo=`keydown.dismiss${vs}`,ha=`click${vs}.data-api`,da="modal-open",fs="show",Ws="modal-static",Uc={backdrop:!0,focus:!0,keyboard:!0},pa={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ji extends ze{constructor(p,$){super(p,$),this._dialog=Re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new no,this._addEventListeners()}static get Default(){return Uc}static get DefaultType(){return pa}static get NAME(){return"modal"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||this._isTransitioning||j.trigger(this._element,xc,{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(da),this._adjustDialog(),this._backdrop.show(()=>this._showElement(p)))}hide(){this._isShown&&!this._isTransitioning&&(j.trigger(this._element,xu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(fs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){j.off(window,vs),j.off(this._dialog,vs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new kc({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Mc({trapElement:this._element})}_showElement(p){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const $=Re.findOne(".modal-body",this._dialog);$&&($.scrollTop=0),fe(this._element),this._element.classList.add(fs),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,j.trigger(this._element,Bc,{relatedTarget:p})},this._dialog,this._isAnimated())}_addEventListeners(){j.on(this._element,xo,p=>{p.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),j.on(window,Bu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),j.on(this._element,Ph,p=>{j.one(this._element,Uu,$=>{this._element===p.target&&this._element===$.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(da),this._resetAdjustments(),this._scrollBar.reset(),j.trigger(this._element,ua)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(j.trigger(this._element,Pc).defaultPrevented)return;const p=this._element.scrollHeight>document.documentElement.clientHeight,$=this._element.style.overflowY;$==="hidden"||this._element.classList.contains(Ws)||(p||(this._element.style.overflowY="hidden"),this._element.classList.add(Ws),this._queueCallback(()=>{this._element.classList.remove(Ws),this._queueCallback(()=>{this._element.style.overflowY=$},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const p=this._element.scrollHeight>document.documentElement.clientHeight,$=this._scrollBar.getWidth(),y=$>0;if(y&&!p){const U=oe()?"paddingLeft":"paddingRight";this._element.style[U]=`${$}px`}if(!y&&p){const U=oe()?"paddingRight":"paddingLeft";this._element.style[U]=`${$}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(p,$){return this.each(function(){const y=Ji.getOrCreateInstance(this,p);if(typeof p=="string"){if(y[p]===void 0)throw new TypeError(`No method named "${p}"`);y[p]($)}})}}j.on(document,ha,'[data-bs-toggle="modal"]',function(b){const p=Re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&b.preventDefault(),j.one(p,xc,y=>{y.defaultPrevented||j.one(p,ua,()=>{D(this)&&this.focus()})});const $=Re.findOne(".modal.show");$&&Ji.getInstance($).hide(),Ji.getOrCreateInstance(p).toggle(this)}),ft(Ji),de(Ji);const Nt=".bs.offcanvas",ga=".data-api",Il=`load${Nt}${ga}`,so="show",io="showing",bl="hiding",Sr=".offcanvas.show",ro=`show${Nt}`,Fc=`shown${Nt}`,qi=`hide${Nt}`,$i=`hidePrevented${Nt}`,Sl=`hidden${Nt}`,Hc=`resize${Nt}`,_a=`click${Nt}${ga}`,Fu=`keydown.dismiss${Nt}`,Hu={backdrop:!0,keyboard:!0,scroll:!1},Gc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ti extends ze{constructor(p,$){super(p,$),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Hu}static get DefaultType(){return Gc}static get NAME(){return"offcanvas"}toggle(p){return this._isShown?this.hide():this.show(p)}show(p){this._isShown||j.trigger(this._element,ro,{relatedTarget:p}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new no().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(io),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(so),this._element.classList.remove(io),j.trigger(this._element,Fc,{relatedTarget:p})},this._element,!0))}hide(){this._isShown&&(j.trigger(this._element,qi).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(bl),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(so,bl),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new no().reset(),j.trigger(this._element,Sl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const p=!!this._config.backdrop;return new kc({className:"offcanvas-backdrop",isVisible:p,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:p?()=>{this._config.backdrop!=="static"?this.hide():j.trigger(this._element,$i)}:null})}_initializeFocusTrap(){return new Mc({trapElement:this._element})}_addEventListeners(){j.on(this._element,Fu,p=>{p.key==="Escape"&&(this._config.keyboard?this.hide():j.trigger(this._element,$i))})}static jQueryInterface(p){return this.each(function(){const $=Ti.getOrCreateInstance(this,p);if(typeof p=="string"){if($[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);$[p](this)}})}}j.on(document,_a,'[data-bs-toggle="offcanvas"]',function(b){const p=Re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&b.preventDefault(),te(this))return;j.one(p,Sl,()=>{D(this)&&this.focus()});const $=Re.findOne(Sr);$&&$!==p&&Ti.getInstance($).hide(),Ti.getOrCreateInstance(p).toggle(this)}),j.on(window,Il,()=>{for(const b of Re.find(Sr))Ti.getOrCreateInstance(b).show()}),j.on(window,Hc,()=>{for(const b of Re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(b).position!=="fixed"&&Ti.getOrCreateInstance(b).hide()}),ft(Ti),de(Ti);const fa={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ol=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Or=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Vc=(b,p)=>{const $=b.nodeName.toLowerCase();return p.includes($)?!Ol.has($)||!!Or.test(b.nodeValue):p.filter(y=>y instanceof RegExp).some(y=>y.test($))},Wc={allowList:fa,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},xh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ma={entry:"(string|element|function|null)",selector:"(string|element)"};class Bo extends lt{constructor(p){super(),this._config=this._getConfig(p)}static get Default(){return Wc}static get DefaultType(){return xh}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(p=>this._resolvePossibleFunction(p)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(p){return this._checkContent(p),this._config.content={...this._config.content,...p},this}toHtml(){const p=document.createElement("div");p.innerHTML=this._maybeSanitize(this._config.template);for(const[U,W]of Object.entries(this._config.content))this._setContent(p,W,U);const $=p.children[0],y=this._resolvePossibleFunction(this._config.extraClass);return y&&$.classList.add(...y.split(" ")),$}_typeCheckConfig(p){super._typeCheckConfig(p),this._checkContent(p.content)}_checkContent(p){for(const[$,y]of Object.entries(p))super._typeCheckConfig({selector:$,entry:y},ma)}_setContent(p,$,y){const U=Re.findOne(y,p);U&&(($=this._resolvePossibleFunction($))?A($)?this._putElementInTemplate(L($),U):this._config.html?U.innerHTML=this._maybeSanitize($):U.textContent=$:U.remove())}_maybeSanitize(p){return this._config.sanitize?function($,y,U){if(!$.length)return $;if(U&&typeof U=="function")return U($);const W=new window.DOMParser().parseFromString($,"text/html"),Z=[].concat(...W.body.querySelectorAll("*"));for(const ae of Z){const Se=ae.nodeName.toLowerCase();if(!Object.keys(y).includes(Se)){ae.remove();continue}const Ue=[].concat(...ae.attributes),Fe=[].concat(y["*"]||[],y[Se]||[]);for(const Ne of Ue)Vc(Ne,Fe)||ae.removeAttribute(Ne.nodeName)}return W.body.innerHTML}(p,this._config.allowList,this._config.sanitizeFn):p}_resolvePossibleFunction(p){return Le(p,[this])}_putElementInTemplate(p,$){if(this._config.html)return $.innerHTML="",void $.append(p);$.textContent=p.textContent}}const Gu=new Set(["sanitize","allowList","sanitizeFn"]),Uo="fade",oo="show",Jt=".modal",lo="hide.bs.modal",Qi="hover",Ei="focus",Vu={AUTO:"auto",TOP:"top",RIGHT:oe()?"left":"right",BOTTOM:"bottom",LEFT:oe()?"right":"left"},zc={allowList:fa,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ni={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class si extends ze{constructor(p,$){if(Sc===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(p,$),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zc}static get DefaultType(){return ni}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),j.off(this._element.closest(Jt),lo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const p=j.trigger(this._element,this.constructor.eventName("show")),$=(se(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(p.defaultPrevented||!$)return;this._disposePopper();const y=this._getTipElement();this._element.setAttribute("aria-describedby",y.getAttribute("id"));const{container:U}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(U.append(y),j.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(y),y.classList.add(oo),"ontouchstart"in document.documentElement)for(const W of[].concat(...document.body.children))j.on(W,"mouseover",Y);this._queueCallback(()=>{j.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!j.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(oo),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))j.off(p,"mouseover",Y);this._activeTrigger.click=!1,this._activeTrigger[Ei]=!1,this._activeTrigger[Qi]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),j.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(p){const $=this._getTemplateFactory(p).toHtml();if(!$)return null;$.classList.remove(Uo,oo),$.classList.add(`bs-${this.constructor.NAME}-auto`);const y=(U=>{do U+=Math.floor(1e6*Math.random());while(document.getElementById(U));return U})(this.constructor.NAME).toString();return $.setAttribute("id",y),this._isAnimated()&&$.classList.add(Uo),$}setContent(p){this._newContent=p,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(p){return this._templateFactory?this._templateFactory.changeContent(p):this._templateFactory=new Bo({...this._config,content:p,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(p){return this.constructor.getOrCreateInstance(p.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Uo)}_isShown(){return this.tip&&this.tip.classList.contains(oo)}_createPopper(p){const $=Le(this._config.placement,[this,p,this._element]),y=Vu[$.toUpperCase()];return Ir(this._element,p,this._getPopperConfig(y))}_getOffset(){const{offset:p}=this._config;return typeof p=="string"?p.split(",").map($=>Number.parseInt($,10)):typeof p=="function"?$=>p($,this._element):p}_resolvePossibleFunction(p){return Le(p,[this._element])}_getPopperConfig(p){const $={placement:p,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:y=>{this._getTipElement().setAttribute("data-popper-placement",y.state.placement)}}]};return{...$,...Le(this._config.popperConfig,[$])}}_setListeners(){const p=this._config.trigger.split(" ");for(const $ of p)if($==="click")j.on(this._element,this.constructor.eventName("click"),this._config.selector,y=>{this._initializeOnDelegatedTarget(y).toggle()});else if($!=="manual"){const y=$===Qi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),U=$===Qi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");j.on(this._element,y,this._config.selector,W=>{const Z=this._initializeOnDelegatedTarget(W);Z._activeTrigger[W.type==="focusin"?Ei:Qi]=!0,Z._enter()}),j.on(this._element,U,this._config.selector,W=>{const Z=this._initializeOnDelegatedTarget(W);Z._activeTrigger[W.type==="focusout"?Ei:Qi]=Z._element.contains(W.relatedTarget),Z._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},j.on(this._element.closest(Jt),lo,this._hideModalHandler)}_fixTitle(){const p=this._element.getAttribute("title");p&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",p),this._element.setAttribute("data-bs-original-title",p),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(p,$){clearTimeout(this._timeout),this._timeout=setTimeout(p,$)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(p){const $=je.getDataAttributes(this._element);for(const y of Object.keys($))Gu.has(y)&&delete $[y];return p={...$,...typeof p=="object"&&p?p:{}},p=this._mergeConfigObj(p),p=this._configAfterMerge(p),this._typeCheckConfig(p),p}_configAfterMerge(p){return p.container=p.container===!1?document.body:L(p.container),typeof p.delay=="number"&&(p.delay={show:p.delay,hide:p.delay}),typeof p.title=="number"&&(p.title=p.title.toString()),typeof p.content=="number"&&(p.content=p.content.toString()),p}_getDelegateConfig(){const p={};for(const[$,y]of Object.entries(this._config))this.constructor.Default[$]!==y&&(p[$]=y);return p.selector=!1,p.trigger="manual",p}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(p){return this.each(function(){const $=si.getOrCreateInstance(this,p);if(typeof p=="string"){if($[p]===void 0)throw new TypeError(`No method named "${p}"`);$[p]()}})}}de(si);const ms={...si.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Wu={...si.DefaultType,content:"(null|string|element|function)"};class $a extends si{static get Default(){return ms}static get DefaultType(){return Wu}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(p){return this.each(function(){const $=$a.getOrCreateInstance(this,p);if(typeof p=="string"){if($[p]===void 0)throw new TypeError(`No method named "${p}"`);$[p]()}})}}de($a);const Ta=".bs.scrollspy",zu=`activate${Ta}`,Ii=`click${Ta}`,Rl=`load${Ta}.data-api`,Rr="active",yl="[href]",Ea=".nav-link",Xc=`${Ea}, .nav-item > ${Ea}, .list-group-item`,Bh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},jc={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class vl extends ze{constructor(p,$){super(p,$),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Bh}static get DefaultType(){return jc}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const p of this._observableSections.values())this._observer.observe(p)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(p){return p.target=L(p.target)||document.body,p.rootMargin=p.offset?`${p.offset}px 0px -30%`:p.rootMargin,typeof p.threshold=="string"&&(p.threshold=p.threshold.split(",").map($=>Number.parseFloat($))),p}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(j.off(this._config.target,Ii),j.on(this._config.target,Ii,yl,p=>{const $=this._observableSections.get(p.target.hash);if($){p.preventDefault();const y=this._rootElement||window,U=$.offsetTop-this._element.offsetTop;if(y.scrollTo)return void y.scrollTo({top:U,behavior:"smooth"});y.scrollTop=U}}))}_getNewObserver(){const p={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver($=>this._observerCallback($),p)}_observerCallback(p){const $=Z=>this._targetLinks.get(`#${Z.target.id}`),y=Z=>{this._previousScrollData.visibleEntryTop=Z.target.offsetTop,this._process($(Z))},U=(this._rootElement||document.documentElement).scrollTop,W=U>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=U;for(const Z of p){if(!Z.isIntersecting){this._activeTarget=null,this._clearActiveClass($(Z));continue}const ae=Z.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(W&&ae){if(y(Z),!U)return}else W||ae||y(Z)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const p=Re.find(yl,this._config.target);for(const $ of p){if(!$.hash||te($))continue;const y=Re.findOne(decodeURI($.hash),this._element);D(y)&&(this._targetLinks.set(decodeURI($.hash),$),this._observableSections.set($.hash,y))}}_process(p){this._activeTarget!==p&&(this._clearActiveClass(this._config.target),this._activeTarget=p,p.classList.add(Rr),this._activateParents(p),j.trigger(this._element,zu,{relatedTarget:p}))}_activateParents(p){if(p.classList.contains("dropdown-item"))Re.findOne(".dropdown-toggle",p.closest(".dropdown")).classList.add(Rr);else for(const $ of Re.parents(p,".nav, .list-group"))for(const y of Re.prev($,Xc))y.classList.add(Rr)}_clearActiveClass(p){p.classList.remove(Rr);const $=Re.find(`${yl}.${Rr}`,p);for(const y of $)y.classList.remove(Rr)}static jQueryInterface(p){return this.each(function(){const $=vl.getOrCreateInstance(this,p);if(typeof p=="string"){if($[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);$[p]()}})}}j.on(window,Rl,()=>{for(const b of Re.find('[data-bs-spy="scroll"]'))vl.getOrCreateInstance(b)}),de(vl);const ao=".bs.tab",Cl=`hide${ao}`,yr=`hidden${ao}`,Xu=`show${ao}`,co=`shown${ao}`,zs=`click${ao}`,Fo=`keydown${ao}`,ii=`load${ao}`,Ia="ArrowLeft",Yc="ArrowRight",Ll="ArrowUp",Cs="ArrowDown",$s="Home",rs="End",bi="active",ba="fade",vr="show",Si=".dropdown-toggle",Ht=`:not(${Si})`,zt='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Oi=`.nav-link${Ht}, .list-group-item${Ht}, [role="tab"]${Ht}, ${zt}`,es=`.${bi}[data-bs-toggle="tab"], .${bi}[data-bs-toggle="pill"], .${bi}[data-bs-toggle="list"]`;class mn extends ze{constructor(p){super(p),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),j.on(this._element,Fo,$=>this._keydown($)))}static get NAME(){return"tab"}show(){const p=this._element;if(this._elemIsActive(p))return;const $=this._getActiveElem(),y=$?j.trigger($,Cl,{relatedTarget:p}):null;j.trigger(p,Xu,{relatedTarget:$}).defaultPrevented||y&&y.defaultPrevented||(this._deactivate($,p),this._activate(p,$))}_activate(p,$){p&&(p.classList.add(bi),this._activate(Re.getElementFromSelector(p)),this._queueCallback(()=>{p.getAttribute("role")==="tab"?(p.removeAttribute("tabindex"),p.setAttribute("aria-selected",!0),this._toggleDropDown(p,!0),j.trigger(p,co,{relatedTarget:$})):p.classList.add(vr)},p,p.classList.contains(ba)))}_deactivate(p,$){p&&(p.classList.remove(bi),p.blur(),this._deactivate(Re.getElementFromSelector(p)),this._queueCallback(()=>{p.getAttribute("role")==="tab"?(p.setAttribute("aria-selected",!1),p.setAttribute("tabindex","-1"),this._toggleDropDown(p,!1),j.trigger(p,yr,{relatedTarget:$})):p.classList.remove(vr)},p,p.classList.contains(ba)))}_keydown(p){if(![Ia,Yc,Ll,Cs,$s,rs].includes(p.key))return;p.stopPropagation(),p.preventDefault();const $=this._getChildren().filter(U=>!te(U));let y;if([$s,rs].includes(p.key))y=$[p.key===$s?0:$.length-1];else{const U=[Yc,Cs].includes(p.key);y=nt($,p.target,U,!0)}y&&(y.focus({preventScroll:!0}),mn.getOrCreateInstance(y).show())}_getChildren(){return Re.find(Oi,this._parent)}_getActiveElem(){return this._getChildren().find(p=>this._elemIsActive(p))||null}_setInitialAttributes(p,$){this._setAttributeIfNotExists(p,"role","tablist");for(const y of $)this._setInitialAttributesOnChild(y)}_setInitialAttributesOnChild(p){p=this._getInnerElement(p);const $=this._elemIsActive(p),y=this._getOuterElement(p);p.setAttribute("aria-selected",$),y!==p&&this._setAttributeIfNotExists(y,"role","presentation"),$||p.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(p,"role","tab"),this._setInitialAttributesOnTargetPanel(p)}_setInitialAttributesOnTargetPanel(p){const $=Re.getElementFromSelector(p);$&&(this._setAttributeIfNotExists($,"role","tabpanel"),p.id&&this._setAttributeIfNotExists($,"aria-labelledby",`${p.id}`))}_toggleDropDown(p,$){const y=this._getOuterElement(p);if(!y.classList.contains("dropdown"))return;const U=(W,Z)=>{const ae=Re.findOne(W,y);ae&&ae.classList.toggle(Z,$)};U(Si,bi),U(".dropdown-menu",vr),y.setAttribute("aria-expanded",$)}_setAttributeIfNotExists(p,$,y){p.hasAttribute($)||p.setAttribute($,y)}_elemIsActive(p){return p.classList.contains(bi)}_getInnerElement(p){return p.matches(Oi)?p:Re.findOne(Oi,p)}_getOuterElement(p){return p.closest(".nav-item, .list-group-item")||p}static jQueryInterface(p){return this.each(function(){const $=mn.getOrCreateInstance(this);if(typeof p=="string"){if($[p]===void 0||p.startsWith("_")||p==="constructor")throw new TypeError(`No method named "${p}"`);$[p]()}})}}j.on(document,zs,zt,function(b){["A","AREA"].includes(this.tagName)&&b.preventDefault(),te(this)||mn.getOrCreateInstance(this).show()}),j.on(window,ii,()=>{for(const b of Re.find(es))mn.getOrCreateInstance(b)}),de(mn);const ts=".bs.toast",uo=`mouseover${ts}`,ns=`mouseout${ts}`,Sa=`focusin${ts}`,ju=`focusout${ts}`,Yu=`hide${ts}`,Oa=`hidden${ts}`,Ge=`show${ts}`,$n=`shown${ts}`,hn="hide",Mt="show",Ls="showing",Al={animation:"boolean",autohide:"boolean",delay:"number"},Ce={animation:!0,autohide:!0,delay:5e3};class Dt extends ze{constructor(p,$){super(p,$),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ce}static get DefaultType(){return Al}static get NAME(){return"toast"}show(){j.trigger(this._element,Ge).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(hn),fe(this._element),this._element.classList.add(Mt,Ls),this._queueCallback(()=>{this._element.classList.remove(Ls),j.trigger(this._element,$n),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(j.trigger(this._element,Yu).defaultPrevented||(this._element.classList.add(Ls),this._queueCallback(()=>{this._element.classList.add(hn),this._element.classList.remove(Ls,Mt),j.trigger(this._element,Oa)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Mt),super.dispose()}isShown(){return this._element.classList.contains(Mt)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(p,$){switch(p.type){case"mouseover":case"mouseout":this._hasMouseInteraction=$;break;case"focusin":case"focusout":this._hasKeyboardInteraction=$}if($)return void this._clearTimeout();const y=p.relatedTarget;this._element===y||this._element.contains(y)||this._maybeScheduleHide()}_setListeners(){j.on(this._element,uo,p=>this._onInteraction(p,!0)),j.on(this._element,ns,p=>this._onInteraction(p,!1)),j.on(this._element,Sa,p=>this._onInteraction(p,!0)),j.on(this._element,ju,p=>this._onInteraction(p,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(p){return this.each(function(){const $=Dt.getOrCreateInstance(this,p);if(typeof p=="string"){if($[p]===void 0)throw new TypeError(`No method named "${p}"`);$[p](this)}})}}return ft(Dt),de(Dt),{Alert:ds,Button:Nn,Carousel:we,Collapse:Us,Dropdown:ti,Modal:Ji,Offcanvas:Ti,Popover:$a,ScrollSpy:vl,Tab:mn,Toast:Dt,Tooltip:si}})}(Lg)),Lg.exports}yI();var he=yf();const yn=Nh(he);var yg={},ef={exports:{}},cr={},tf={exports:{}},nf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P$;function vI(){return P$||(P$=1,function(h){function l(ee,Je){var j=ee.length;ee.push(Je);e:for(;0<j;){var z=j-1>>>1,_e=ee[z];if(0<f(_e,Je))ee[z]=Je,ee[j]=_e,j=z;else break e}}function i(ee){return ee.length===0?null:ee[0]}function u(ee){if(ee.length===0)return null;var Je=ee[0],j=ee.pop();if(j!==Je){ee[0]=j;e:for(var z=0,_e=ee.length,rt=_e>>>1;z<rt;){var je=2*(z+1)-1,lt=ee[je],ze=je+1,Et=ee[ze];if(0>f(lt,j))ze<_e&&0>f(Et,lt)?(ee[z]=Et,ee[ze]=j,z=ze):(ee[z]=lt,ee[je]=j,z=je);else if(ze<_e&&0>f(Et,j))ee[z]=Et,ee[ze]=j,z=ze;else break e}}return Je}function f(ee,Je){var j=ee.sortIndex-Je.sortIndex;return j!==0?j:ee.id-Je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var I=performance;h.unstable_now=function(){return I.now()}}else{var C=Date,A=C.now();h.unstable_now=function(){return C.now()-A}}var L=[],D=[],te=1,se=null,Y=3,fe=!1,re=!1,be=!1,oe=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,Le=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ke(ee){for(var Je=i(D);Je!==null;){if(Je.callback===null)u(D);else if(Je.startTime<=ee)u(D),Je.sortIndex=Je.expirationTime,l(L,Je);else break;Je=i(D)}}function nt(ee){if(be=!1,ke(ee),!re)if(i(L)!==null)re=!0,Ft(_t);else{var Je=i(D);Je!==null&&kt(nt,Je.startTime-ee)}}function _t(ee,Je){re=!1,be&&(be=!1,de(Oe),Oe=-1),fe=!0;var j=Y;try{for(ke(Je),se=i(L);se!==null&&(!(se.expirationTime>Je)||ee&&!wn());){var z=se.callback;if(typeof z=="function"){se.callback=null,Y=se.priorityLevel;var _e=z(se.expirationTime<=Je);Je=h.unstable_now(),typeof _e=="function"?se.callback=_e:se===i(L)&&u(L),ke(Je)}else u(L);se=i(L)}if(se!==null)var rt=!0;else{var je=i(D);je!==null&&kt(nt,je.startTime-Je),rt=!1}return rt}finally{se=null,Y=j,fe=!1}}var $t=!1,ot=null,Oe=-1,ht=5,Ct=-1;function wn(){return!(h.unstable_now()-Ct<ht)}function En(){if(ot!==null){var ee=h.unstable_now();Ct=ee;var Je=!0;try{Je=ot(!0,ee)}finally{Je?ln():($t=!1,ot=null)}}else $t=!1}var ln;if(typeof Le=="function")ln=function(){Le(En)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,Ot=it.port2;it.port1.onmessage=En,ln=function(){Ot.postMessage(null)}}else ln=function(){oe(En,0)};function Ft(ee){ot=ee,$t||($t=!0,ln())}function kt(ee,Je){Oe=oe(function(){ee(h.unstable_now())},Je)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(ee){ee.callback=null},h.unstable_continueExecution=function(){re||fe||(re=!0,Ft(_t))},h.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<ee?Math.floor(1e3/ee):5},h.unstable_getCurrentPriorityLevel=function(){return Y},h.unstable_getFirstCallbackNode=function(){return i(L)},h.unstable_next=function(ee){switch(Y){case 1:case 2:case 3:var Je=3;break;default:Je=Y}var j=Y;Y=Je;try{return ee()}finally{Y=j}},h.unstable_pauseExecution=function(){},h.unstable_requestPaint=function(){},h.unstable_runWithPriority=function(ee,Je){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var j=Y;Y=ee;try{return Je()}finally{Y=j}},h.unstable_scheduleCallback=function(ee,Je,j){var z=h.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?z+j:z):j=z,ee){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=j+_e,ee={id:te++,callback:Je,priorityLevel:ee,startTime:j,expirationTime:_e,sortIndex:-1},j>z?(ee.sortIndex=j,l(D,ee),i(L)===null&&ee===i(D)&&(be?(de(Oe),Oe=-1):be=!0,kt(nt,j-z))):(ee.sortIndex=_e,l(L,ee),re||fe||(re=!0,Ft(_t))),ee},h.unstable_shouldYield=wn,h.unstable_wrapCallback=function(ee){var Je=Y;return function(){var j=Y;Y=Je;try{return ee.apply(this,arguments)}finally{Y=j}}}}(nf)),nf}var x$;function CI(){return x$||(x$=1,tf.exports=vI()),tf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B$;function LI(){if(B$)return cr;B$=1;var h=yf(),l=CI();function i(s){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+s,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,f={};function I(s,r){C(s,r),C(s+"Capture",r)}function C(s,r){for(f[s]=r,s=0;s<r.length;s++)u.add(r[s])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L=Object.prototype.hasOwnProperty,D=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,te={},se={};function Y(s){return L.call(se,s)?!0:L.call(te,s)?!1:D.test(s)?se[s]=!0:(te[s]=!0,!1)}function fe(s,r,a,d){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function re(s,r,a,d){if(r===null||typeof r>"u"||fe(s,r,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function be(s,r,a,d,_,m,O){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=_,this.mustUseProperty=a,this.propertyName=s,this.type=r,this.sanitizeURL=m,this.removeEmptyString=O}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){oe[s]=new be(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var r=s[0];oe[r]=new be(r,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){oe[s]=new be(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){oe[s]=new be(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){oe[s]=new be(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){oe[s]=new be(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){oe[s]=new be(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){oe[s]=new be(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){oe[s]=new be(s,5,!1,s.toLowerCase(),null,!1,!1)});var de=/[\-:]([a-z])/g;function Le(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var r=s.replace(de,Le);oe[r]=new be(r,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var r=s.replace(de,Le);oe[r]=new be(r,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var r=s.replace(de,Le);oe[r]=new be(r,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){oe[s]=new be(s,1,!1,s.toLowerCase(),null,!1,!1)}),oe.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){oe[s]=new be(s,1,!1,s.toLowerCase(),null,!0,!0)});function ke(s,r,a,d){var _=oe.hasOwnProperty(r)?oe[r]:null;(_!==null?_.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(re(r,a,_,d)&&(a=null),d||_===null?Y(r)&&(a===null?s.removeAttribute(r):s.setAttribute(r,""+a)):_.mustUseProperty?s[_.propertyName]=a===null?_.type===3?!1:"":a:(r=_.attributeName,d=_.attributeNamespace,a===null?s.removeAttribute(r):(_=_.type,a=_===3||_===4&&a===!0?"":""+a,d?s.setAttributeNS(d,r,a):s.setAttribute(r,a))))}var nt=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_t=Symbol.for("react.element"),$t=Symbol.for("react.portal"),ot=Symbol.for("react.fragment"),Oe=Symbol.for("react.strict_mode"),ht=Symbol.for("react.profiler"),Ct=Symbol.for("react.provider"),wn=Symbol.for("react.context"),En=Symbol.for("react.forward_ref"),ln=Symbol.for("react.suspense"),it=Symbol.for("react.suspense_list"),Ot=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),kt=Symbol.for("react.offscreen"),ee=Symbol.iterator;function Je(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var j=Object.assign,z;function _e(s){if(z===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);z=r&&r[1]||""}return`
`+z+s}var rt=!1;function je(s,r){if(!s||rt)return"";rt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(Q){var d=Q}Reflect.construct(s,[],r)}else{try{r.call()}catch(Q){d=Q}s.call(r.prototype)}else{try{throw Error()}catch(Q){d=Q}s()}}catch(Q){if(Q&&d&&typeof Q.stack=="string"){for(var _=Q.stack.split(`
`),m=d.stack.split(`
`),O=_.length-1,k=m.length-1;1<=O&&0<=k&&_[O]!==m[k];)k--;for(;1<=O&&0<=k;O--,k--)if(_[O]!==m[k]){if(O!==1||k!==1)do if(O--,k--,0>k||_[O]!==m[k]){var P=`
`+_[O].replace(" at new "," at ");return s.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",s.displayName)),P}while(1<=O&&0<=k);break}}}finally{rt=!1,Error.prepareStackTrace=a}return(s=s?s.displayName||s.name:"")?_e(s):""}function lt(s){switch(s.tag){case 5:return _e(s.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return s=je(s.type,!1),s;case 11:return s=je(s.type.render,!1),s;case 1:return s=je(s.type,!0),s;default:return""}}function ze(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ot:return"Fragment";case $t:return"Portal";case ht:return"Profiler";case Oe:return"StrictMode";case ln:return"Suspense";case it:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case wn:return(s.displayName||"Context")+".Consumer";case Ct:return(s._context.displayName||"Context")+".Provider";case En:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ot:return r=s.displayName||null,r!==null?r:ze(s.type)||"Memo";case Ft:r=s._payload,s=s._init;try{return ze(s(r))}catch{}}return null}function Et(s){var r=s.type;switch(s.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=r.render,s=s.displayName||s.name||"",r.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(r);case 8:return r===Oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Re(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ft(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _n(s){var r=ft(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),d=""+s[r];if(!s.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var _=a.get,m=a.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return _.call(this)},set:function(O){d=""+O,m.call(this,O)}}),Object.defineProperty(s,r,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(O){d=""+O},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function hr(s){s._valueTracker||(s._valueTracker=_n(s))}function Fr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var a=r.getValue(),d="";return s&&(d=ft(s)?s.checked?"true":"false":s.value),s=d,s!==a?(r.setValue(s),!0):!1}function ds(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function xi(s,r){var a=r.checked;return j({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??s._wrapperState.initialChecked})}function Nn(s,r){var a=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;a=Re(r.value!=null?r.value:a),s._wrapperState={initialChecked:d,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function fn(s,r){r=r.checked,r!=null&&ke(s,"checked",r,!1)}function ci(s,r){fn(s,r);var a=Re(r.value),d=r.type;if(a!=null)d==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+a):s.value!==""+a&&(s.value=""+a);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}r.hasOwnProperty("value")?Bi(s,r.type,a):r.hasOwnProperty("defaultValue")&&Bi(s,r.type,Re(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(s.defaultChecked=!!r.defaultChecked)}function ui(s,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+s._wrapperState.initialValue,a||r===s.value||(s.value=r),s.defaultValue=r}a=s.name,a!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,a!==""&&(s.name=a)}function Bi(s,r,a){(r!=="number"||ds(s.ownerDocument)!==s)&&(a==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+a&&(s.defaultValue=""+a))}var He=Array.isArray;function It(s,r,a,d){if(s=s.options,r){r={};for(var _=0;_<a.length;_++)r["$"+a[_]]=!0;for(a=0;a<s.length;a++)_=r.hasOwnProperty("$"+s[a].value),s[a].selected!==_&&(s[a].selected=_),_&&d&&(s[a].defaultSelected=!0)}else{for(a=""+Re(a),r=null,_=0;_<s.length;_++){if(s[_].value===a){s[_].selected=!0,d&&(s[_].defaultSelected=!0);return}r!==null||s[_].disabled||(r=s[_])}r!==null&&(r.selected=!0)}}function Rt(s,r){if(r.dangerouslySetInnerHTML!=null)throw Error(i(91));return j({},r,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hi(s,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(i(92));if(He(a)){if(1<a.length)throw Error(i(93));a=a[0]}r=a}r==null&&(r=""),a=r}s._wrapperState={initialValue:Re(a)}}function Mn(s,r){var a=Re(r.value),d=Re(r.defaultValue);a!=null&&(a=""+a,a!==s.value&&(s.value=a),r.defaultValue==null&&s.defaultValue!==a&&(s.defaultValue=a)),d!=null&&(s.defaultValue=""+d)}function M(s){var r=s.textContent;r===s._wrapperState.initialValue&&r!==""&&r!==null&&(s.value=r)}function Ks(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nn(s,r){return s==null||s==="http://www.w3.org/1999/xhtml"?Ks(r):s==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var yt,In=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,d,_){MSApp.execUnsafeLocalFunction(function(){return s(r,a,d,_)})}:s}(function(s,r){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=r;else{for(yt=yt||document.createElement("div"),yt.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=yt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;r.firstChild;)s.appendChild(r.firstChild)}});function q(s,r){if(r){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=r;return}}s.textContent=r}var ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E=["Webkit","ms","Moz","O"];Object.keys(ve).forEach(function(s){E.forEach(function(r){r=r+s.charAt(0).toUpperCase()+s.substring(1),ve[r]=ve[s]})});function R(s,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||ve.hasOwnProperty(s)&&ve[s]?(""+r).trim():r+"px"}function F(s,r){s=s.style;for(var a in r)if(r.hasOwnProperty(a)){var d=a.indexOf("--")===0,_=R(a,r[a],d);a==="float"&&(a="cssFloat"),d?s.setProperty(a,_):s[a]=_}}var G=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(s,r){if(r){if(G[s]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(i(137,s));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(i(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(i(61))}if(r.style!=null&&typeof r.style!="object")throw Error(i(62))}}function wt(s,r){if(s.indexOf("-")===-1)return typeof r.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gn=null;function Bs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var di=null,qn=null,T=null;function v(s){if(s=$s(s)){if(typeof di!="function")throw Error(i(280));var r=s.stateNode;r&&(r=bi(r),di(s.stateNode,s.type,r))}}function N(s){qn?T?T.push(s):T=[s]:qn=s}function X(){if(qn){var s=qn,r=T;if(T=qn=null,v(s),r)for(s=0;s<r.length;s++)v(r[s])}}function ue(s,r){return s(r)}function we(){}var Ke=!1;function ps(s,r,a){if(Ke)return s(r,a);Ke=!0;try{return ue(s,r,a)}finally{Ke=!1,(qn!==null||T!==null)&&(we(),X())}}function Js(s,r){var a=s.stateNode;if(a===null)return null;var d=bi(a);if(d===null)return null;a=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var yo=!1;if(A)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){yo=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{yo=!1}function ta(s,r,a,d,_,m,O,k,P){var Q=Array.prototype.slice.call(arguments,3);try{r.apply(a,Q)}catch($e){this.onError($e)}}var Ui=!1,pi=null,dr=!1,pc=null,gc={onError:function(s){Ui=!0,pi=s}};function Mh(s,r,a,d,_,m,O,k,P){Ui=!1,pi=null,ta.apply(gc,arguments)}function cl(s,r,a,d,_,m,O,k,P){if(Mh.apply(this,arguments),Ui){if(Ui){var Q=pi;Ui=!1,pi=null}else throw Error(i(198));dr||(dr=!0,pc=Q)}}function Us(s){var r=s,a=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,r.flags&4098&&(a=r.return),s=r.return;while(s)}return r.tag===3?a:null}function Dn(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function gs(s){if(Us(s)!==s)throw Error(i(188))}function Qn(s){var r=s.alternate;if(!r){if(r=Us(s),r===null)throw Error(i(188));return r!==s?null:s}for(var a=s,d=r;;){var _=a.return;if(_===null)break;var m=_.alternate;if(m===null){if(d=_.return,d!==null){a=d;continue}break}if(_.child===m.child){for(m=_.child;m;){if(m===a)return gs(_),s;if(m===d)return gs(_),r;m=m.sibling}throw Error(i(188))}if(a.return!==d.return)a=_,d=m;else{for(var O=!1,k=_.child;k;){if(k===a){O=!0,a=_,d=m;break}if(k===d){O=!0,d=_,a=m;break}k=k.sibling}if(!O){for(k=m.child;k;){if(k===a){O=!0,a=m,d=_;break}if(k===d){O=!0,d=m,a=_;break}k=k.sibling}if(!O)throw Error(i(189))}}if(a.alternate!==d)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:r}function Pn(s){return s=Qn(s),s!==null?ul(s):null}function ul(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var r=ul(s);if(r!==null)return r;s=s.sibling}return null}var Fi=l.unstable_scheduleCallback,pr=l.unstable_cancelCallback,gr=l.unstable_shouldYield,_c=l.unstable_requestPaint,sn=l.unstable_now,_r=l.unstable_getCurrentPriorityLevel,vo=l.unstable_ImmediatePriority,Co=l.unstable_UserBlockingPriority,Hi=l.unstable_NormalPriority,bu=l.unstable_LowPriority,Hr=l.unstable_IdlePriority,fr=null,Rs=null;function Su(s){if(Rs&&typeof Rs.onCommitFiberRoot=="function")try{Rs.onCommitFiberRoot(fr,s,void 0,(s.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:xn,Ou=Math.log,mr=Math.LN2;function xn(s){return s>>>=0,s===0?32:31-(Ou(s)/mr|0)|0}var $r=64,_s=4194304;function Kt(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Vn(s,r){var a=s.pendingLanes;if(a===0)return 0;var d=0,_=s.suspendedLanes,m=s.pingedLanes,O=a&268435455;if(O!==0){var k=O&~_;k!==0?d=Kt(k):(m&=O,m!==0&&(d=Kt(m)))}else O=a&~_,O!==0?d=Kt(O):m!==0&&(d=Kt(m));if(d===0)return 0;if(r!==0&&r!==d&&!(r&_)&&(_=d&-d,m=r&-r,_>=m||_===16&&(m&4194240)!==0))return r;if(d&4&&(d|=a&16),r=s.entangledLanes,r!==0)for(s=s.entanglements,r&=d;0<r;)a=31-Fs(r),_=1<<a,d|=s[a],r&=~_;return d}function Hs(s,r){switch(s){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function na(s,r){for(var a=s.suspendedLanes,d=s.pingedLanes,_=s.expirationTimes,m=s.pendingLanes;0<m;){var O=31-Fs(m),k=1<<O,P=_[O];P===-1?(!(k&a)||k&d)&&(_[O]=Hs(k,r)):P<=r&&(s.expiredLanes|=k),m&=~k}}function Gr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Gs(){var s=$r;return $r<<=1,!($r&4194240)&&($r=64),s}function Gi(s){for(var r=[],a=0;31>a;a++)r.push(s);return r}function Vi(s,r,a){s.pendingLanes|=r,r!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,r=31-Fs(r),s[r]=a}function Wi(s,r){var a=s.pendingLanes&~r;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=r,s.mutableReadLanes&=r,s.entangledLanes&=r,r=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<a;){var _=31-Fs(a),m=1<<_;r[_]=0,d[_]=-1,s[_]=-1,a&=~m}}function hl(s,r){var a=s.entangledLanes|=r;for(s=s.entanglements;a;){var d=31-Fs(a),_=1<<d;_&r|s[d]&r&&(s[d]|=r),a&=~_}}var vt=0;function Vr(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var sa,Lo,gi,Ao,zi,Wr=!1,zr=[],ys=null,Qs=null,Vs=null,Tr=new Map,_i=new Map,Zs=[],ko="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(s,r){switch(s){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Tr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(r.pointerId)}}function Xr(s,r,a,d,_,m){return s===null||s.nativeEvent!==m?(s={blockedOn:r,domEventName:a,eventSystemFlags:d,nativeEvent:m,targetContainers:[_]},r!==null&&(r=$s(r),r!==null&&Lo(r)),s):(s.eventSystemFlags|=d,r=s.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),s)}function mc(s,r,a,d,_){switch(r){case"focusin":return ys=Xr(ys,s,r,a,d,_),!0;case"dragenter":return Qs=Xr(Qs,s,r,a,d,_),!0;case"mouseover":return Vs=Xr(Vs,s,r,a,d,_),!0;case"pointerover":var m=_.pointerId;return Tr.set(m,Xr(Tr.get(m)||null,s,r,a,d,_)),!0;case"gotpointercapture":return m=_.pointerId,_i.set(m,Xr(_i.get(m)||null,s,r,a,d,_)),!0}return!1}function dl(s){var r=Cs(s.target);if(r!==null){var a=Us(r);if(a!==null){if(r=a.tag,r===13){if(r=Dn(a),r!==null){s.blockedOn=r,zi(s.priority,function(){gi(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ei(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var a=pl(s.domEventName,s.eventSystemFlags,r[0],s.nativeEvent);if(a===null){a=s.nativeEvent;var d=new a.constructor(a.type,a);Gn=d,a.target.dispatchEvent(d),Gn=null}else return r=$s(a),r!==null&&Lo(r),s.blockedOn=a,!1;r.shift()}return!0}function Ru(s,r,a){ei(s)&&a.delete(r)}function jr(){Wr=!1,ys!==null&&ei(ys)&&(ys=null),Qs!==null&&ei(Qs)&&(Qs=null),Vs!==null&&ei(Vs)&&(Vs=null),Tr.forEach(Ru),_i.forEach(Ru)}function Zn(s,r){s.blockedOn===r&&(s.blockedOn=null,Wr||(Wr=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,jr)))}function wo(s){function r(_){return Zn(_,s)}if(0<zr.length){Zn(zr[0],s);for(var a=1;a<zr.length;a++){var d=zr[a];d.blockedOn===s&&(d.blockedOn=null)}}for(ys!==null&&Zn(ys,s),Qs!==null&&Zn(Qs,s),Vs!==null&&Zn(Vs,s),Tr.forEach(r),_i.forEach(r),a=0;a<Zs.length;a++)d=Zs[a],d.blockedOn===s&&(d.blockedOn=null);for(;0<Zs.length&&(a=Zs[0],a.blockedOn===null);)dl(a),a.blockedOn===null&&Zs.shift()}var Er=nt.ReactCurrentBatchConfig,No=!0;function $c(s,r,a,d){var _=vt,m=Er.transition;Er.transition=null;try{vt=1,Yr(s,r,a,d)}finally{vt=_,Er.transition=m}}function yu(s,r,a,d){var _=vt,m=Er.transition;Er.transition=null;try{vt=4,Yr(s,r,a,d)}finally{vt=_,Er.transition=m}}function Yr(s,r,a,d){if(No){var _=pl(s,r,a,d);if(_===null)zc(s,r,d,Mo,a),fc(s,d);else if(mc(_,s,r,a,d))d.stopPropagation();else if(fc(s,d),r&4&&-1<ko.indexOf(s)){for(;_!==null;){var m=$s(_);if(m!==null&&sa(m),m=pl(s,r,a,d),m===null&&zc(s,r,d,Mo,a),m===_)break;_=m}_!==null&&d.stopPropagation()}else zc(s,r,d,null,a)}}var Mo=null;function pl(s,r,a,d){if(Mo=null,s=Bs(d),s=Cs(s),s!==null)if(r=Us(s),r===null)s=null;else if(a=r.tag,a===13){if(s=Dn(r),s!==null)return s;s=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null);return Mo=s,null}function fi(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_r()){case vo:return 1;case Co:return 4;case Hi:case bu:return 16;case Hr:return 536870912;default:return 16}default:return 16}}var Wn=null,ia=null,gl=null;function Tc(){if(gl)return gl;var s,r=ia,a=r.length,d,_="value"in Wn?Wn.value:Wn.textContent,m=_.length;for(s=0;s<a&&r[s]===_[s];s++);var O=a-s;for(d=1;d<=O&&r[a-d]===_[m-d];d++);return gl=_.slice(s,1<d?1-d:void 0)}function _l(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function fl(){return!0}function Ec(){return!1}function is(s){function r(a,d,_,m,O){this._reactName=a,this._targetInst=_,this.type=d,this.nativeEvent=m,this.target=O,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(a=s[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?fl:Ec,this.isPropagationStopped=Ec,this}return j(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),r}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=is(Kr),ml=j({},Kr,{view:0,detail:0}),bc=is(ml),ra,mi,Jr,oa=j({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Jr&&(Jr&&s.type==="mousemove"?(ra=s.screenX-Jr.screenX,mi=s.screenY-Jr.screenY):mi=ra=0,Jr=s),ra)},movementY:function(s){return"movementY"in s?s.movementY:mi}}),Ir=is(oa),Sc=j({},oa,{dataTransfer:0}),Oc=is(Sc),br=j({},ml,{relatedTarget:0}),qr=is(br),Rc=j({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),yc=is(Rc),Dh=j({},Kr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),vu=is(Dh),Cu=j({},Kr,{data:0}),vc=is(Cu),Cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qr(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Lu[s])?!!r[s]:!1}function Xi(){return Qr}var la=j({},ml,{key:function(s){if(s.key){var r=Cc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=_l(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Lc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(s){return s.type==="keypress"?_l(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_l(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),$l=is(la),Ac=j({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=is(Ac),ji=j({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),Au=is(ji),ku=j({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ca=is(ku),wu=j({},oa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Nu=is(wu),ti=[9,13,27,32],Do=A&&"CompositionEvent"in window,Zr=null;A&&"documentMode"in document&&(Zr=document.documentMode);var Mu=A&&"TextEvent"in window&&!Zr,Du=A&&(!Do||Zr&&8<Zr&&11>=Zr),Pu=" ",kc=!1;function Tl(s,r){switch(s){case"keyup":return ti.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var eo=!1;function wc(s,r){switch(s){case"compositionend":return Po(r);case"keypress":return r.which!==32?null:(kc=!0,Pu);case"textInput":return s=r.data,s===Pu&&kc?null:s;default:return null}}function El(s,r){if(eo)return s==="compositionend"||!Do&&Tl(s,r)?(s=Tc(),gl=ia=Wn=null,eo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Du&&r.locale!=="ko"?null:r.data;default:return null}}var Nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mc(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Nc[s.type]:r==="textarea"}function Dc(s,r,a,d){N(d),r=si(r,"onChange"),0<r.length&&(a=new Ic("onChange","change",null,a,d),s.push({event:a,listeners:r}))}var to=null,Yi=null;function Ki(s){oo(s,0)}function no(s){var r=rs(s);if(Fr(r))return s}function vs(s,r){if(s==="change")return r}var xu=!1;if(A){var Pc;if(A){var ua="oninput"in document;if(!ua){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),ua=typeof xc.oninput=="function"}Pc=ua}else Pc=!1;xu=Pc&&(!document.documentMode||9<document.documentMode)}function Bc(){to&&(to.detachEvent("onpropertychange",Bu),Yi=to=null)}function Bu(s){if(s.propertyName==="value"&&no(Yi)){var r=[];Dc(r,Yi,s,Bs(s)),ps(Ki,r)}}function Uu(s,r,a){s==="focusin"?(Bc(),to=r,Yi=a,to.attachEvent("onpropertychange",Bu)):s==="focusout"&&Bc()}function Ph(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return no(Yi)}function xo(s,r){if(s==="click")return no(r)}function ha(s,r){if(s==="input"||s==="change")return no(r)}function da(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var fs=typeof Object.is=="function"?Object.is:da;function Ws(s,r){if(fs(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var a=Object.keys(s),d=Object.keys(r);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var _=a[d];if(!L.call(r,_)||!fs(s[_],r[_]))return!1}return!0}function Uc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function pa(s,r){var a=Uc(s);s=0;for(var d;a;){if(a.nodeType===3){if(d=s+a.textContent.length,s<=r&&d>=r)return{node:a,offset:r-s};s=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Uc(a)}}function Ji(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ji(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Nt(){for(var s=window,r=ds();r instanceof s.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)s=r.contentWindow;else break;r=ds(s.document)}return r}function ga(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}function Il(s){var r=Nt(),a=s.focusedElem,d=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&Ji(a.ownerDocument.documentElement,a)){if(d!==null&&ga(a)){if(r=d.start,s=d.end,s===void 0&&(s=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(s,a.value.length);else if(s=(r=a.ownerDocument||document)&&r.defaultView||window,s.getSelection){s=s.getSelection();var _=a.textContent.length,m=Math.min(d.start,_);d=d.end===void 0?m:Math.min(d.end,_),!s.extend&&m>d&&(_=d,d=m,m=_),_=pa(a,m);var O=pa(a,d);_&&O&&(s.rangeCount!==1||s.anchorNode!==_.node||s.anchorOffset!==_.offset||s.focusNode!==O.node||s.focusOffset!==O.offset)&&(r=r.createRange(),r.setStart(_.node,_.offset),s.removeAllRanges(),m>d?(s.addRange(r),s.extend(O.node,O.offset)):(r.setEnd(O.node,O.offset),s.addRange(r)))}}for(r=[],s=a;s=s.parentNode;)s.nodeType===1&&r.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)s=r[a],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var so=A&&"documentMode"in document&&11>=document.documentMode,io=null,bl=null,Sr=null,ro=!1;function Fc(s,r,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ro||io==null||io!==ds(d)||(d=io,"selectionStart"in d&&ga(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Sr&&Ws(Sr,d)||(Sr=d,d=si(bl,"onSelect"),0<d.length&&(r=new Ic("onSelect","select",null,r,a),s.push({event:r,listeners:d}),r.target=io)))}function qi(s,r){var a={};return a[s.toLowerCase()]=r.toLowerCase(),a["Webkit"+s]="webkit"+r,a["Moz"+s]="moz"+r,a}var $i={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},Sl={},Hc={};A&&(Hc=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function _a(s){if(Sl[s])return Sl[s];if(!$i[s])return s;var r=$i[s],a;for(a in r)if(r.hasOwnProperty(a)&&a in Hc)return Sl[s]=r[a];return s}var Fu=_a("animationend"),Hu=_a("animationiteration"),Gc=_a("animationstart"),Ti=_a("transitionend"),fa=new Map,Ol="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(s,r){fa.set(s,r),I(r,[s])}for(var Vc=0;Vc<Ol.length;Vc++){var Wc=Ol[Vc],xh=Wc.toLowerCase(),ma=Wc[0].toUpperCase()+Wc.slice(1);Or(xh,"on"+ma)}Or(Fu,"onAnimationEnd"),Or(Hu,"onAnimationIteration"),Or(Gc,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ti,"onTransitionEnd"),C("onMouseEnter",["mouseout","mouseover"]),C("onMouseLeave",["mouseout","mouseover"]),C("onPointerEnter",["pointerout","pointerover"]),C("onPointerLeave",["pointerout","pointerover"]),I("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),I("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),I("onBeforeInput",["compositionend","keypress","textInput","paste"]),I("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),I("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),I("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function Uo(s,r,a){var d=s.type||"unknown-event";s.currentTarget=a,cl(d,r,void 0,s),s.currentTarget=null}function oo(s,r){r=(r&4)!==0;for(var a=0;a<s.length;a++){var d=s[a],_=d.event;d=d.listeners;e:{var m=void 0;if(r)for(var O=d.length-1;0<=O;O--){var k=d[O],P=k.instance,Q=k.currentTarget;if(k=k.listener,P!==m&&_.isPropagationStopped())break e;Uo(_,k,Q),m=P}else for(O=0;O<d.length;O++){if(k=d[O],P=k.instance,Q=k.currentTarget,k=k.listener,P!==m&&_.isPropagationStopped())break e;Uo(_,k,Q),m=P}}}if(dr)throw s=pc,dr=!1,pc=null,s}function Jt(s,r){var a=r[Ia];a===void 0&&(a=r[Ia]=new Set);var d=s+"__bubble";a.has(d)||(Vu(r,s,2,!1),a.add(d))}function lo(s,r,a){var d=0;r&&(d|=4),Vu(a,s,d,r)}var Qi="_reactListening"+Math.random().toString(36).slice(2);function Ei(s){if(!s[Qi]){s[Qi]=!0,u.forEach(function(a){a!=="selectionchange"&&(Gu.has(a)||lo(a,!1,s),lo(a,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Qi]||(r[Qi]=!0,lo("selectionchange",!1,r))}}function Vu(s,r,a,d){switch(fi(r)){case 1:var _=$c;break;case 4:_=yu;break;default:_=Yr}a=_.bind(null,r,a,s),_=void 0,!yo||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),d?_!==void 0?s.addEventListener(r,a,{capture:!0,passive:_}):s.addEventListener(r,a,!0):_!==void 0?s.addEventListener(r,a,{passive:_}):s.addEventListener(r,a,!1)}function zc(s,r,a,d,_){var m=d;if(!(r&1)&&!(r&2)&&d!==null)e:for(;;){if(d===null)return;var O=d.tag;if(O===3||O===4){var k=d.stateNode.containerInfo;if(k===_||k.nodeType===8&&k.parentNode===_)break;if(O===4)for(O=d.return;O!==null;){var P=O.tag;if((P===3||P===4)&&(P=O.stateNode.containerInfo,P===_||P.nodeType===8&&P.parentNode===_))return;O=O.return}for(;k!==null;){if(O=Cs(k),O===null)return;if(P=O.tag,P===5||P===6){d=m=O;continue e}k=k.parentNode}}d=d.return}ps(function(){var Q=m,$e=Bs(a),Te=[];e:{var ge=fa.get(s);if(ge!==void 0){var Pe=Ic,Ve=s;switch(s){case"keypress":if(_l(a)===0)break e;case"keydown":case"keyup":Pe=$l;break;case"focusin":Ve="focus",Pe=qr;break;case"focusout":Ve="blur",Pe=qr;break;case"beforeblur":case"afterblur":Pe=qr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=Au;break;case Fu:case Hu:case Gc:Pe=yc;break;case Ti:Pe=ca;break;case"scroll":Pe=bc;break;case"wheel":Pe=Nu;break;case"copy":case"cut":case"paste":Pe=vu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=aa}var We=(r&4)!==0,on=!We&&s==="scroll",x=We?ge!==null?ge+"Capture":null:ge;We=[];for(var H=Q,K;H!==null;){K=H;var ye=K.stateNode;if(K.tag===5&&ye!==null&&(K=ye,x!==null&&(ye=Js(H,x),ye!=null&&We.push(ni(H,ye,K)))),on)break;H=H.return}0<We.length&&(ge=new Pe(ge,Ve,null,a,$e),Te.push({event:ge,listeners:We}))}}if(!(r&7)){e:{if(ge=s==="mouseover"||s==="pointerover",Pe=s==="mouseout"||s==="pointerout",ge&&a!==Gn&&(Ve=a.relatedTarget||a.fromElement)&&(Cs(Ve)||Ve[ii]))break e;if((Pe||ge)&&(ge=$e.window===$e?$e:(ge=$e.ownerDocument)?ge.defaultView||ge.parentWindow:window,Pe?(Ve=a.relatedTarget||a.toElement,Pe=Q,Ve=Ve?Cs(Ve):null,Ve!==null&&(on=Us(Ve),Ve!==on||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Pe=null,Ve=Q),Pe!==Ve)){if(We=Ir,ye="onMouseLeave",x="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(We=aa,ye="onPointerLeave",x="onPointerEnter",H="pointer"),on=Pe==null?ge:rs(Pe),K=Ve==null?ge:rs(Ve),ge=new We(ye,H+"leave",Pe,a,$e),ge.target=on,ge.relatedTarget=K,ye=null,Cs($e)===Q&&(We=new We(x,H+"enter",Ve,a,$e),We.target=K,We.relatedTarget=on,ye=We),on=ye,Pe&&Ve)t:{for(We=Pe,x=Ve,H=0,K=We;K;K=ms(K))H++;for(K=0,ye=x;ye;ye=ms(ye))K++;for(;0<H-K;)We=ms(We),H--;for(;0<K-H;)x=ms(x),K--;for(;H--;){if(We===x||x!==null&&We===x.alternate)break t;We=ms(We),x=ms(x)}We=null}else We=null;Pe!==null&&Wu(Te,ge,Pe,We,!1),Ve!==null&&on!==null&&Wu(Te,on,Ve,We,!0)}}e:{if(ge=Q?rs(Q):window,Pe=ge.nodeName&&ge.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&ge.type==="file")var Ye=vs;else if(Mc(ge))if(xu)Ye=ha;else{Ye=Ph;var et=Uu}else(Pe=ge.nodeName)&&Pe.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(Ye=xo);if(Ye&&(Ye=Ye(s,Q))){Dc(Te,Ye,a,$e);break e}et&&et(s,ge,Q),s==="focusout"&&(et=ge._wrapperState)&&et.controlled&&ge.type==="number"&&Bi(ge,"number",ge.value)}switch(et=Q?rs(Q):window,s){case"focusin":(Mc(et)||et.contentEditable==="true")&&(io=et,bl=Q,Sr=null);break;case"focusout":Sr=bl=io=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,Fc(Te,a,$e);break;case"selectionchange":if(so)break;case"keydown":case"keyup":Fc(Te,a,$e)}var tt;if(Do)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else eo?Tl(s,a)&&(st="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(st="onCompositionStart");st&&(Du&&a.locale!=="ko"&&(eo||st!=="onCompositionStart"?st==="onCompositionEnd"&&eo&&(tt=Tc()):(Wn=$e,ia="value"in Wn?Wn.value:Wn.textContent,eo=!0)),et=si(Q,st),0<et.length&&(st=new vc(st,s,null,a,$e),Te.push({event:st,listeners:et}),tt?st.data=tt:(tt=Po(a),tt!==null&&(st.data=tt)))),(tt=Mu?wc(s,a):El(s,a))&&(Q=si(Q,"onBeforeInput"),0<Q.length&&($e=new vc("onBeforeInput","beforeinput",null,a,$e),Te.push({event:$e,listeners:Q}),$e.data=tt))}oo(Te,r)})}function ni(s,r,a){return{instance:s,listener:r,currentTarget:a}}function si(s,r){for(var a=r+"Capture",d=[];s!==null;){var _=s,m=_.stateNode;_.tag===5&&m!==null&&(_=m,m=Js(s,a),m!=null&&d.unshift(ni(s,m,_)),m=Js(s,r),m!=null&&d.push(ni(s,m,_))),s=s.return}return d}function ms(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Wu(s,r,a,d,_){for(var m=r._reactName,O=[];a!==null&&a!==d;){var k=a,P=k.alternate,Q=k.stateNode;if(P!==null&&P===d)break;k.tag===5&&Q!==null&&(k=Q,_?(P=Js(a,m),P!=null&&O.unshift(ni(a,P,k))):_||(P=Js(a,m),P!=null&&O.push(ni(a,P,k)))),a=a.return}O.length!==0&&s.push({event:r,listeners:O})}var $a=/\r\n?/g,Ta=/\u0000|\uFFFD/g;function zu(s){return(typeof s=="string"?s:""+s).replace($a,`
`).replace(Ta,"")}function Ii(s,r,a){if(r=zu(r),zu(s)!==r&&a)throw Error(i(425))}function Rl(){}var Rr=null,yl=null;function Ea(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Xc=typeof setTimeout=="function"?setTimeout:void 0,Bh=typeof clearTimeout=="function"?clearTimeout:void 0,jc=typeof Promise=="function"?Promise:void 0,vl=typeof queueMicrotask=="function"?queueMicrotask:typeof jc<"u"?function(s){return jc.resolve(null).then(s).catch(ao)}:Xc;function ao(s){setTimeout(function(){throw s})}function Cl(s,r){var a=r,d=0;do{var _=a.nextSibling;if(s.removeChild(a),_&&_.nodeType===8)if(a=_.data,a==="/$"){if(d===0){s.removeChild(_),wo(r);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=_}while(a);wo(r)}function yr(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return s}function Xu(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return s;r--}else a==="/$"&&r++}s=s.previousSibling}return null}var co=Math.random().toString(36).slice(2),zs="__reactFiber$"+co,Fo="__reactProps$"+co,ii="__reactContainer$"+co,Ia="__reactEvents$"+co,Yc="__reactListeners$"+co,Ll="__reactHandles$"+co;function Cs(s){var r=s[zs];if(r)return r;for(var a=s.parentNode;a;){if(r=a[ii]||a[zs]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(s=Xu(s);s!==null;){if(a=s[zs])return a;s=Xu(s)}return r}s=a,a=s.parentNode}return null}function $s(s){return s=s[zs]||s[ii],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function rs(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(i(33))}function bi(s){return s[Fo]||null}var ba=[],vr=-1;function Si(s){return{current:s}}function Ht(s){0>vr||(s.current=ba[vr],ba[vr]=null,vr--)}function zt(s,r){vr++,ba[vr]=s.current,s.current=r}var Oi={},es=Si(Oi),mn=Si(!1),ts=Oi;function uo(s,r){var a=s.type.contextTypes;if(!a)return Oi;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var _={},m;for(m in a)_[m]=r[m];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=_),_}function ns(s){return s=s.childContextTypes,s!=null}function Sa(){Ht(mn),Ht(es)}function ju(s,r,a){if(es.current!==Oi)throw Error(i(168));zt(es,r),zt(mn,a)}function Yu(s,r,a){var d=s.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var _ in d)if(!(_ in r))throw Error(i(108,Et(s)||"Unknown",_));return j({},a,d)}function Oa(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Oi,ts=es.current,zt(es,s),zt(mn,mn.current),!0}function Ge(s,r,a){var d=s.stateNode;if(!d)throw Error(i(169));a?(s=Yu(s,r,ts),d.__reactInternalMemoizedMergedChildContext=s,Ht(mn),Ht(es),zt(es,s)):Ht(mn),zt(mn,a)}var $n=null,hn=!1,Mt=!1;function Ls(s){$n===null?$n=[s]:$n.push(s)}function Al(s){hn=!0,Ls(s)}function Ce(){if(!Mt&&$n!==null){Mt=!0;var s=0,r=vt;try{var a=$n;for(vt=1;s<a.length;s++){var d=a[s];do d=d(!0);while(d!==null)}$n=null,hn=!1}catch(_){throw $n!==null&&($n=$n.slice(s+1)),Fi(vo,Ce),_}finally{vt=r,Mt=!1}}return null}var Dt=[],b=0,p=null,$=0,y=[],U=0,W=null,Z=1,ae="";function Se(s,r){Dt[b++]=$,Dt[b++]=p,p=s,$=r}function Ue(s,r,a){y[U++]=Z,y[U++]=ae,y[U++]=W,W=s;var d=Z;s=ae;var _=32-Fs(d)-1;d&=~(1<<_),a+=1;var m=32-Fs(r)+_;if(30<m){var O=_-_%5;m=(d&(1<<O)-1).toString(32),d>>=O,_-=O,Z=1<<32-Fs(r)+_|a<<_|d,ae=m+s}else Z=1<<m|a<<_|d,ae=s}function Fe(s){s.return!==null&&(Se(s,1),Ue(s,1,0))}function Ne(s){for(;s===p;)p=Dt[--b],Dt[b]=null,$=Dt[--b],Dt[b]=null;for(;s===W;)W=y[--U],y[U]=null,ae=y[--U],y[U]=null,Z=y[--U],y[U]=null}var Qe=null,Xe=null,xe=!1,qe=null;function at(s,r){var a=bs(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=s,r=s.deletions,r===null?(s.deletions=[a],s.flags|=16):r.push(a)}function Gt(s,r){switch(s.tag){case 5:var a=s.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(s.stateNode=r,Qe=s,Xe=yr(r.firstChild),!0):!1;case 6:return r=s.pendingProps===""||r.nodeType!==3?null:r,r!==null?(s.stateNode=r,Qe=s,Xe=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=W!==null?{id:Z,overflow:ae}:null,s.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=bs(18,null,null,0),a.stateNode=r,a.return=s,s.child=a,Qe=s,Xe=null,!0):!1;default:return!1}}function Vt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function pt(s){if(xe){var r=Xe;if(r){var a=r;if(!Gt(s,r)){if(Vt(s))throw Error(i(418));r=yr(a.nextSibling);var d=Qe;r&&Gt(s,r)?at(d,a):(s.flags=s.flags&-4097|2,xe=!1,Qe=s)}}else{if(Vt(s))throw Error(i(418));s.flags=s.flags&-4097|2,xe=!1,Qe=s}}}function bt(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Qe=s}function ut(s){if(s!==Qe)return!1;if(!xe)return bt(s),xe=!0,!1;var r;if((r=s.tag!==3)&&!(r=s.tag!==5)&&(r=s.type,r=r!=="head"&&r!=="body"&&!Ea(s.type,s.memoizedProps)),r&&(r=Xe)){if(Vt(s))throw gt(),Error(i(418));for(;r;)at(s,r),r=yr(r.nextSibling)}if(bt(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"){if(r===0){Xe=yr(s.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}s=s.nextSibling}Xe=null}}else Xe=Qe?yr(s.stateNode.nextSibling):null;return!0}function gt(){for(var s=Xe;s;)s=yr(s.nextSibling)}function mt(){Xe=Qe=null,xe=!1}function Pt(s){qe===null?qe=[s]:qe.push(s)}var xt=nt.ReactCurrentBatchConfig;function qt(s,r,a){if(s=a.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(i(309));var d=a.stateNode}if(!d)throw Error(i(147,s));var _=d,m=""+s;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(O){var k=_.refs;O===null?delete k[m]:k[m]=O},r._stringRef=m,r)}if(typeof s!="string")throw Error(i(284));if(!a._owner)throw Error(i(290,s))}return s}function zn(s,r){throw s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s))}function As(s){var r=s._init;return r(s._payload)}function Bn(s){function r(x,H){if(s){var K=x.deletions;K===null?(x.deletions=[H],x.flags|=16):K.push(H)}}function a(x,H){if(!s)return null;for(;H!==null;)r(x,H),H=H.sibling;return null}function d(x,H){for(x=new Map;H!==null;)H.key!==null?x.set(H.key,H):x.set(H.index,H),H=H.sibling;return x}function _(x,H){return x=Ni(x,H),x.index=0,x.sibling=null,x}function m(x,H,K){return x.index=K,s?(K=x.alternate,K!==null?(K=K.index,K<H?(x.flags|=2,H):K):(x.flags|=2,H)):(x.flags|=1048576,H)}function O(x){return s&&x.alternate===null&&(x.flags|=2),x}function k(x,H,K,ye){return H===null||H.tag!==6?(H=ld(K,x.mode,ye),H.return=x,H):(H=_(H,K),H.return=x,H)}function P(x,H,K,ye){var Ye=K.type;return Ye===ot?$e(x,H,K.props.children,ye,K.key):H!==null&&(H.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Ft&&As(Ye)===H.type)?(ye=_(H,K.props),ye.ref=qt(x,H,K),ye.return=x,ye):(ye=$o(K.type,K.key,K.props,null,x.mode,ye),ye.ref=qt(x,H,K),ye.return=x,ye)}function Q(x,H,K,ye){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=Th(K,x.mode,ye),H.return=x,H):(H=_(H,K.children||[]),H.return=x,H)}function $e(x,H,K,ye,Ye){return H===null||H.tag!==7?(H=Qo(K,x.mode,ye,Ye),H.return=x,H):(H=_(H,K),H.return=x,H)}function Te(x,H,K){if(typeof H=="string"&&H!==""||typeof H=="number")return H=ld(""+H,x.mode,K),H.return=x,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case _t:return K=$o(H.type,H.key,H.props,null,x.mode,K),K.ref=qt(x,null,H),K.return=x,K;case $t:return H=Th(H,x.mode,K),H.return=x,H;case Ft:var ye=H._init;return Te(x,ye(H._payload),K)}if(He(H)||Je(H))return H=Qo(H,x.mode,K,null),H.return=x,H;zn(x,H)}return null}function ge(x,H,K,ye){var Ye=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Ye!==null?null:k(x,H,""+K,ye);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _t:return K.key===Ye?P(x,H,K,ye):null;case $t:return K.key===Ye?Q(x,H,K,ye):null;case Ft:return Ye=K._init,ge(x,H,Ye(K._payload),ye)}if(He(K)||Je(K))return Ye!==null?null:$e(x,H,K,ye,null);zn(x,K)}return null}function Pe(x,H,K,ye,Ye){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return x=x.get(K)||null,k(H,x,""+ye,Ye);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case _t:return x=x.get(ye.key===null?K:ye.key)||null,P(H,x,ye,Ye);case $t:return x=x.get(ye.key===null?K:ye.key)||null,Q(H,x,ye,Ye);case Ft:var et=ye._init;return Pe(x,H,K,et(ye._payload),Ye)}if(He(ye)||Je(ye))return x=x.get(K)||null,$e(H,x,ye,Ye,null);zn(H,ye)}return null}function Ve(x,H,K,ye){for(var Ye=null,et=null,tt=H,st=H=0,Hn=null;tt!==null&&st<K.length;st++){tt.index>st?(Hn=tt,tt=null):Hn=tt.sibling;var ct=ge(x,tt,K[st],ye);if(ct===null){tt===null&&(tt=Hn);break}s&&tt&&ct.alternate===null&&r(x,tt),H=m(ct,H,st),et===null?Ye=ct:et.sibling=ct,et=ct,tt=Hn}if(st===K.length)return a(x,tt),xe&&Se(x,st),Ye;if(tt===null){for(;st<K.length;st++)tt=Te(x,K[st],ye),tt!==null&&(H=m(tt,H,st),et===null?Ye=tt:et.sibling=tt,et=tt);return xe&&Se(x,st),Ye}for(tt=d(x,tt);st<K.length;st++)Hn=Pe(tt,x,st,K[st],ye),Hn!==null&&(s&&Hn.alternate!==null&&tt.delete(Hn.key===null?st:Hn.key),H=m(Hn,H,st),et===null?Ye=Hn:et.sibling=Hn,et=Hn);return s&&tt.forEach(function(To){return r(x,To)}),xe&&Se(x,st),Ye}function We(x,H,K,ye){var Ye=Je(K);if(typeof Ye!="function")throw Error(i(150));if(K=Ye.call(K),K==null)throw Error(i(151));for(var et=Ye=null,tt=H,st=H=0,Hn=null,ct=K.next();tt!==null&&!ct.done;st++,ct=K.next()){tt.index>st?(Hn=tt,tt=null):Hn=tt.sibling;var To=ge(x,tt,ct.value,ye);if(To===null){tt===null&&(tt=Hn);break}s&&tt&&To.alternate===null&&r(x,tt),H=m(To,H,st),et===null?Ye=To:et.sibling=To,et=To,tt=Hn}if(ct.done)return a(x,tt),xe&&Se(x,st),Ye;if(tt===null){for(;!ct.done;st++,ct=K.next())ct=Te(x,ct.value,ye),ct!==null&&(H=m(ct,H,st),et===null?Ye=ct:et.sibling=ct,et=ct);return xe&&Se(x,st),Ye}for(tt=d(x,tt);!ct.done;st++,ct=K.next())ct=Pe(tt,x,st,ct.value,ye),ct!==null&&(s&&ct.alternate!==null&&tt.delete(ct.key===null?st:ct.key),H=m(ct,H,st),et===null?Ye=ct:et.sibling=ct,et=ct);return s&&tt.forEach(function(s_){return r(x,s_)}),xe&&Se(x,st),Ye}function on(x,H,K,ye){if(typeof K=="object"&&K!==null&&K.type===ot&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case _t:e:{for(var Ye=K.key,et=H;et!==null;){if(et.key===Ye){if(Ye=K.type,Ye===ot){if(et.tag===7){a(x,et.sibling),H=_(et,K.props.children),H.return=x,x=H;break e}}else if(et.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Ft&&As(Ye)===et.type){a(x,et.sibling),H=_(et,K.props),H.ref=qt(x,et,K),H.return=x,x=H;break e}a(x,et);break}else r(x,et);et=et.sibling}K.type===ot?(H=Qo(K.props.children,x.mode,ye,K.key),H.return=x,x=H):(ye=$o(K.type,K.key,K.props,null,x.mode,ye),ye.ref=qt(x,H,K),ye.return=x,x=ye)}return O(x);case $t:e:{for(et=K.key;H!==null;){if(H.key===et)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){a(x,H.sibling),H=_(H,K.children||[]),H.return=x,x=H;break e}else{a(x,H);break}else r(x,H);H=H.sibling}H=Th(K,x.mode,ye),H.return=x,x=H}return O(x);case Ft:return et=K._init,on(x,H,et(K._payload),ye)}if(He(K))return Ve(x,H,K,ye);if(Je(K))return We(x,H,K,ye);zn(x,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,H!==null&&H.tag===6?(a(x,H.sibling),H=_(H,K),H.return=x,x=H):(a(x,H),H=ld(K,x.mode,ye),H.return=x,x=H),O(x)):a(x,H)}return on}var Un=Bn(!0),ks=Bn(!1),Zt=Si(null),ws=null,vn=null,Zi=null;function bn(){Zi=vn=ws=null}function Lt(s){var r=Zt.current;Ht(Zt),s._currentValue=r}function Xt(s,r,a){for(;s!==null;){var d=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),s===a)break;s=s.return}}function Xn(s,r){ws=s,Zi=vn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&r&&(Ts=!0),s.firstContext=null)}function en(s){var r=s._currentValue;if(Zi!==s)if(s={context:s,memoizedValue:r,next:null},vn===null){if(ws===null)throw Error(i(308));vn=s,ws.dependencies={lanes:0,firstContext:s}}else vn=vn.next=s;return r}var ri=null;function Ra(s){ri===null?ri=[s]:ri.push(s)}function Ho(s,r,a,d){var _=r.interleaved;return _===null?(a.next=a,Ra(r)):(a.next=_.next,_.next=a),r.interleaved=a,Ns(s,d)}function Ns(s,r){s.lanes|=r;var a=s.alternate;for(a!==null&&(a.lanes|=r),a=s,s=s.return;s!==null;)s.childLanes|=r,a=s.alternate,a!==null&&(a.childLanes|=r),a=s,s=s.return;return a.tag===3?a.stateNode:null}var er=!1;function ya(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kl(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ri(s,r){return{eventTime:s,lane:r,tag:0,payload:null,callback:null,next:null}}function yi(s,r,a){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,At&2){var _=d.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),d.pending=r,Ns(s,a)}return _=d.interleaved,_===null?(r.next=r,Ra(d)):(r.next=_.next,_.next=r),d.interleaved=r,Ns(s,a)}function wl(s,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var d=r.lanes;d&=s.pendingLanes,a|=d,r.lanes=a,hl(s,a)}}function va(s,r){var a=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var _=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var O={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?_=m=O:m=m.next=O,a=a.next}while(a!==null);m===null?_=m=r:m=m.next=r}else _=m=r;a={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:m,shared:d.shared,effects:d.effects},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=r:s.next=r,a.lastBaseUpdate=r}function Go(s,r,a,d){var _=s.updateQueue;er=!1;var m=_.firstBaseUpdate,O=_.lastBaseUpdate,k=_.shared.pending;if(k!==null){_.shared.pending=null;var P=k,Q=P.next;P.next=null,O===null?m=Q:O.next=Q,O=P;var $e=s.alternate;$e!==null&&($e=$e.updateQueue,k=$e.lastBaseUpdate,k!==O&&(k===null?$e.firstBaseUpdate=Q:k.next=Q,$e.lastBaseUpdate=P))}if(m!==null){var Te=_.baseState;O=0,$e=Q=P=null,k=m;do{var ge=k.lane,Pe=k.eventTime;if((d&ge)===ge){$e!==null&&($e=$e.next={eventTime:Pe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Ve=s,We=k;switch(ge=r,Pe=a,We.tag){case 1:if(Ve=We.payload,typeof Ve=="function"){Te=Ve.call(Pe,Te,ge);break e}Te=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=We.payload,ge=typeof Ve=="function"?Ve.call(Pe,Te,ge):Ve,ge==null)break e;Te=j({},Te,ge);break e;case 2:er=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,ge=_.effects,ge===null?_.effects=[k]:ge.push(k))}else Pe={eventTime:Pe,lane:ge,tag:k.tag,payload:k.payload,callback:k.callback,next:null},$e===null?(Q=$e=Pe,P=Te):$e=$e.next=Pe,O|=ge;if(k=k.next,k===null){if(k=_.shared.pending,k===null)break;ge=k,k=ge.next,ge.next=null,_.lastBaseUpdate=ge,_.shared.pending=null}}while(!0);if($e===null&&(P=Te),_.baseState=P,_.firstBaseUpdate=Q,_.lastBaseUpdate=$e,r=_.shared.interleaved,r!==null){_=r;do O|=_.lane,_=_.next;while(_!==r)}else m===null&&(_.shared.lanes=0);Va|=O,s.lanes=O,s.memoizedState=Te}}function Kc(s,r,a){if(s=r.effects,r.effects=null,s!==null)for(r=0;r<s.length;r++){var d=s[r],_=d.callback;if(_!==null){if(d.callback=null,d=a,typeof _!="function")throw Error(i(191,_));_.call(d)}}}var Nl={},ss=Si(Nl),Cr=Si(Nl),Vo=Si(Nl);function Lr(s){if(s===Nl)throw Error(i(174));return s}function Ml(s,r){switch(zt(Vo,r),zt(Cr,s),zt(ss,Nl),s=r.nodeType,s){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:nn(null,"");break;default:s=s===8?r.parentNode:r,r=s.namespaceURI||null,s=s.tagName,r=nn(r,s)}Ht(ss),zt(ss,r)}function tr(){Ht(ss),Ht(Cr),Ht(Vo)}function Jc(s){Lr(Vo.current);var r=Lr(ss.current),a=nn(r,s.type);r!==a&&(zt(Cr,s),zt(ss,a))}function Ca(s){Cr.current===s&&(Ht(ss),Ht(Cr))}var tn=Si(0);function Dl(s){for(var r=s;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var La=[];function Wo(){for(var s=0;s<La.length;s++)La[s]._workInProgressVersionPrimary=null;La.length=0}var zo=nt.ReactCurrentDispatcher,Ku=nt.ReactCurrentBatchConfig,Xo=0,an=null,Sn=null,jn=null,Ju=!1,Aa=!1,ka=0,kd=0;function os(){throw Error(i(321))}function qu(s,r){if(r===null)return!1;for(var a=0;a<r.length&&a<s.length;a++)if(!fs(s[a],r[a]))return!1;return!0}function Qu(s,r,a,d,_,m){if(Xo=m,an=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,zo.current=s===null||s.memoizedState===null?jp:Ma,s=a(d,_),Aa){m=0;do{if(Aa=!1,ka=0,25<=m)throw Error(i(301));m+=1,jn=Sn=null,r.updateQueue=null,zo.current=Yp,s=a(d,_)}while(Aa)}if(zo.current=Pl,r=Sn!==null&&Sn.next!==null,Xo=0,jn=Sn=an=null,Ju=!1,r)throw Error(i(300));return s}function Zu(){var s=ka!==0;return ka=0,s}function nr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?an.memoizedState=jn=s:jn=jn.next=s,jn}function oi(){if(Sn===null){var s=an.alternate;s=s!==null?s.memoizedState:null}else s=Sn.next;var r=jn===null?an.memoizedState:jn.next;if(r!==null)jn=r,Sn=s;else{if(s===null)throw Error(i(310));Sn=s,s={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},jn===null?an.memoizedState=jn=s:jn=jn.next=s}return jn}function wa(s,r){return typeof r=="function"?r(s):r}function Uh(s){var r=oi(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var d=Sn,_=d.baseQueue,m=a.pending;if(m!==null){if(_!==null){var O=_.next;_.next=m.next,m.next=O}d.baseQueue=_=m,a.pending=null}if(_!==null){m=_.next,d=d.baseState;var k=O=null,P=null,Q=m;do{var $e=Q.lane;if((Xo&$e)===$e)P!==null&&(P=P.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),d=Q.hasEagerState?Q.eagerState:s(d,Q.action);else{var Te={lane:$e,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};P===null?(k=P=Te,O=d):P=P.next=Te,an.lanes|=$e,Va|=$e}Q=Q.next}while(Q!==null&&Q!==m);P===null?O=d:P.next=k,fs(d,r.memoizedState)||(Ts=!0),r.memoizedState=d,r.baseState=O,r.baseQueue=P,a.lastRenderedState=d}if(s=a.interleaved,s!==null){_=s;do m=_.lane,an.lanes|=m,Va|=m,_=_.next;while(_!==s)}else _===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Fh(s){var r=oi(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var d=a.dispatch,_=a.pending,m=r.memoizedState;if(_!==null){a.pending=null;var O=_=_.next;do m=s(m,O.action),O=O.next;while(O!==_);fs(m,r.memoizedState)||(Ts=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,d]}function wd(){}function Hh(s,r){var a=an,d=oi(),_=r(),m=!fs(d.memoizedState,_);if(m&&(d.memoizedState=_,Ts=!0),d=d.queue,Ar(Dd.bind(null,a,d,s),[s]),d.getSnapshot!==r||m||jn!==null&&jn.memoizedState.tag&1){if(a.flags|=2048,sr(9,Md.bind(null,a,d,_,r),void 0,null),cs===null)throw Error(i(349));Xo&30||Nd(a,r,_)}return _}function Nd(s,r,a){s.flags|=16384,s={getSnapshot:r,value:a},r=an.updateQueue,r===null?(r={lastEffect:null,stores:null},an.updateQueue=r,r.stores=[s]):(a=r.stores,a===null?r.stores=[s]:a.push(s))}function Md(s,r,a,d){r.value=a,r.getSnapshot=d,Pd(r)&&xd(s)}function Dd(s,r,a){return a(function(){Pd(r)&&xd(s)})}function Pd(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!fs(s,a)}catch{return!0}}function xd(s){var r=Ns(s,1);r!==null&&rr(r,s,1,-1)}function ce(s){var r=nr();return typeof s=="function"&&(s=s()),r.memoizedState=r.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:s},r.queue=s,s=s.dispatch=Wd.bind(null,an,s),[r.memoizedState,s]}function sr(s,r,a,d){return s={tag:s,create:r,destroy:a,deps:d,next:null},r=an.updateQueue,r===null?(r={lastEffect:null,stores:null},an.updateQueue=r,r.lastEffect=s.next=s):(a=r.lastEffect,a===null?r.lastEffect=s.next=s:(d=a.next,a.next=s,s.next=d,r.lastEffect=s)),s}function zp(){return oi().memoizedState}function Na(s,r,a,d){var _=nr();an.flags|=s,_.memoizedState=sr(1|r,a,void 0,d===void 0?null:d)}function vi(s,r,a,d){var _=oi();d=d===void 0?null:d;var m=void 0;if(Sn!==null){var O=Sn.memoizedState;if(m=O.destroy,d!==null&&qu(d,O.deps)){_.memoizedState=sr(r,a,m,d);return}}an.flags|=s,_.memoizedState=sr(1|r,a,m,d)}function pe(s,r){return Na(8390656,8,s,r)}function Ar(s,r){return vi(2048,8,s,r)}function Xs(s,r){return vi(4,2,s,r)}function J(s,r){return vi(4,4,s,r)}function Bd(s,r){if(typeof r=="function")return s=s(),r(s),function(){r(null)};if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Ud(s,r,a){return a=a!=null?a.concat([s]):null,vi(4,4,Bd.bind(null,r,s),a)}function Gh(){}function Fd(s,r){var a=oi();r=r===void 0?null:r;var d=a.memoizedState;return d!==null&&r!==null&&qu(r,d[1])?d[0]:(a.memoizedState=[s,r],s)}function Hd(s,r){var a=oi();r=r===void 0?null:r;var d=a.memoizedState;return d!==null&&r!==null&&qu(r,d[1])?d[0]:(s=s(),a.memoizedState=[s,r],s)}function Xp(s,r,a){return Xo&21?(fs(a,r)||(a=Gs(),an.lanes|=a,Va|=a,s.baseState=!0),r):(s.baseState&&(s.baseState=!1,Ts=!0),s.memoizedState=a)}function Gd(s,r){var a=vt;vt=a!==0&&4>a?a:4,s(!0);var d=Ku.transition;Ku.transition={};try{s(!1),r()}finally{vt=a,Ku.transition=d}}function Vd(){return oi().memoizedState}function eh(s,r,a){var d=Jo(s);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},Vh(s))ho(r,a);else if(a=Ho(s,r,a,d),a!==null){var _=Ps();rr(a,s,d,_),zd(a,r,d)}}function Wd(s,r,a){var d=Jo(s),_={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vh(s))ho(r,_);else{var m=s.alternate;if(s.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var O=r.lastRenderedState,k=m(O,a);if(_.hasEagerState=!0,_.eagerState=k,fs(k,O)){var P=r.interleaved;P===null?(_.next=_,Ra(r)):(_.next=P.next,P.next=_),r.interleaved=_;return}}catch{}finally{}a=Ho(s,r,_,d),a!==null&&(_=Ps(),rr(a,s,d,_),zd(a,r,d))}}function Vh(s){var r=s.alternate;return s===an||r!==null&&r===an}function ho(s,r){Aa=Ju=!0;var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}function zd(s,r,a){if(a&4194240){var d=r.lanes;d&=s.pendingLanes,a|=d,r.lanes=a,hl(s,a)}}var Pl={readContext:en,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useInsertionEffect:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useSyncExternalStore:os,useId:os,unstable_isNewReconciler:!1},jp={readContext:en,useCallback:function(s,r){return nr().memoizedState=[s,r===void 0?null:r],s},useContext:en,useEffect:pe,useImperativeHandle:function(s,r,a){return a=a!=null?a.concat([s]):null,Na(4194308,4,Bd.bind(null,r,s),a)},useLayoutEffect:function(s,r){return Na(4194308,4,s,r)},useInsertionEffect:function(s,r){return Na(4,2,s,r)},useMemo:function(s,r){var a=nr();return r=r===void 0?null:r,s=s(),a.memoizedState=[s,r],s},useReducer:function(s,r,a){var d=nr();return r=a!==void 0?a(r):r,d.memoizedState=d.baseState=r,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:r},d.queue=s,s=s.dispatch=eh.bind(null,an,s),[d.memoizedState,s]},useRef:function(s){var r=nr();return s={current:s},r.memoizedState=s},useState:ce,useDebugValue:Gh,useDeferredValue:function(s){return nr().memoizedState=s},useTransition:function(){var s=ce(!1),r=s[0];return s=Gd.bind(null,s[1]),nr().memoizedState=s,[r,s]},useMutableSource:function(){},useSyncExternalStore:function(s,r,a){var d=an,_=nr();if(xe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),cs===null)throw Error(i(349));Xo&30||Nd(d,r,a)}_.memoizedState=a;var m={value:a,getSnapshot:r};return _.queue=m,pe(Dd.bind(null,d,m,s),[s]),d.flags|=2048,sr(9,Md.bind(null,d,m,a,r),void 0,null),a},useId:function(){var s=nr(),r=cs.identifierPrefix;if(xe){var a=ae,d=Z;a=(d&~(1<<32-Fs(d)-1)).toString(32)+a,r=":"+r+"R"+a,a=ka++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=kd++,r=":"+r+"r"+a.toString(32)+":";return s.memoizedState=r},unstable_isNewReconciler:!1},Ma={readContext:en,useCallback:Fd,useContext:en,useEffect:Ar,useImperativeHandle:Ud,useInsertionEffect:Xs,useLayoutEffect:J,useMemo:Hd,useReducer:Uh,useRef:zp,useState:function(){return Uh(wa)},useDebugValue:Gh,useDeferredValue:function(s){var r=oi();return Xp(r,Sn.memoizedState,s)},useTransition:function(){var s=Uh(wa)[0],r=oi().memoizedState;return[s,r]},useMutableSource:wd,useSyncExternalStore:Hh,useId:Vd,unstable_isNewReconciler:!1},Yp={readContext:en,useCallback:Fd,useContext:en,useEffect:Ar,useImperativeHandle:Ud,useInsertionEffect:Xs,useLayoutEffect:J,useMemo:Hd,useReducer:Fh,useRef:zp,useState:function(){return Fh(wa)},useDebugValue:Gh,useDeferredValue:function(s){var r=oi();return Sn===null?r.memoizedState=s:Xp(r,Sn.memoizedState,s)},useTransition:function(){var s=Fh(wa)[0],r=oi().memoizedState;return[s,r]},useMutableSource:wd,useSyncExternalStore:Hh,useId:Vd,unstable_isNewReconciler:!1};function js(s,r){if(s&&s.defaultProps){r=j({},r),s=s.defaultProps;for(var a in s)r[a]===void 0&&(r[a]=s[a]);return r}return r}function Wh(s,r,a,d){r=s.memoizedState,a=a(d,r),a=a==null?r:j({},r,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Yn={isMounted:function(s){return(s=s._reactInternals)?Us(s)===s:!1},enqueueSetState:function(s,r,a){s=s._reactInternals;var d=Ps(),_=Jo(s),m=Ri(d,_);m.payload=r,a!=null&&(m.callback=a),r=yi(s,m,_),r!==null&&(rr(r,s,_,d),wl(r,s,_))},enqueueReplaceState:function(s,r,a){s=s._reactInternals;var d=Ps(),_=Jo(s),m=Ri(d,_);m.tag=1,m.payload=r,a!=null&&(m.callback=a),r=yi(s,m,_),r!==null&&(rr(r,s,_,d),wl(r,s,_))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var a=Ps(),d=Jo(s),_=Ri(a,d);_.tag=2,r!=null&&(_.callback=r),r=yi(s,_,d),r!==null&&(rr(r,s,d,a),wl(r,s,d))}};function Da(s,r,a,d,_,m,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,m,O):r.prototype&&r.prototype.isPureReactComponent?!Ws(a,d)||!Ws(_,m):!0}function ir(s,r,a){var d=!1,_=Oi,m=r.contextType;return typeof m=="object"&&m!==null?m=en(m):(_=ns(r)?ts:es.current,d=r.contextTypes,m=(d=d!=null)?uo(s,_):Oi),r=new r(a,m),s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Yn,s.stateNode=r,r._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=_,s.__reactInternalMemoizedMaskedChildContext=m),r}function zh(s,r,a,d){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,d),r.state!==s&&Yn.enqueueReplaceState(r,r.state,null)}function th(s,r,a,d){var _=s.stateNode;_.props=a,_.state=s.memoizedState,_.refs={},ya(s);var m=r.contextType;typeof m=="object"&&m!==null?_.context=en(m):(m=ns(r)?ts:es.current,_.context=uo(s,m)),_.state=s.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(Wh(s,r,m,a),_.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(r=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),r!==_.state&&Yn.enqueueReplaceState(_,_.state,null),Go(s,a,_,d),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308)}function qc(s,r){try{var a="",d=r;do a+=lt(d),d=d.return;while(d);var _=a}catch(m){_=`
Error generating stack: `+m.message+`
`+m.stack}return{value:s,source:r,stack:_,digest:null}}function Xh(s,r,a){return{value:s,source:null,stack:a??null,digest:r??null}}function Qc(s,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Pa=typeof WeakMap=="function"?WeakMap:Map;function nh(s,r,a){a=Ri(-1,a),a.tag=3,a.payload={element:null};var d=r.value;return a.callback=function(){Wa||(Wa=!0,Is=d),Qc(s,r)},a}function xl(s,r,a){a=Ri(-1,a),a.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var _=r.value;a.payload=function(){return d(_)},a.callback=function(){Qc(s,r)}}var m=s.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Qc(s,r),typeof d!="function"&&(Hl===null?Hl=new Set([this]):Hl.add(this));var O=r.stack;this.componentDidCatch(r.value,{componentStack:O!==null?O:""})}),a}function jh(s,r,a){var d=s.pingCache;if(d===null){d=s.pingCache=new Pa;var _=new Set;d.set(r,_)}else _=d.get(r),_===void 0&&(_=new Set,d.set(r,_));_.has(a)||(_.add(a),s=rd.bind(null,s,r,a),r.then(s,s))}function Xd(s){do{var r;if((r=s.tag===13)&&(r=s.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return s;s=s.return}while(s!==null);return null}function jd(s,r,a,d,_){return s.mode&1?(s.flags|=65536,s.lanes=_,s):(s===r?s.flags|=65536:(s.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Ri(-1,1),r.tag=2,yi(a,r,1))),a.lanes|=1),s)}var Kp=nt.ReactCurrentOwner,Ts=!1;function ls(s,r,a,d){r.child=s===null?ks(r,null,a,d):Un(r,s.child,a,d)}function Yh(s,r,a,d,_){a=a.render;var m=r.ref;return Xn(r,_),d=Qu(s,r,a,d,m,_),a=Zu(),s!==null&&!Ts?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~_,wr(s,r,_)):(xe&&a&&Fe(r),r.flags|=1,ls(s,r,d,_),r.child)}function Yd(s,r,a,d,_){if(s===null){var m=a.type;return typeof m=="function"&&!zl(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=m,Kd(s,r,m,d,_)):(s=$o(a.type,null,d,r,r.mode,_),s.ref=r.ref,s.return=r,r.child=s)}if(m=s.child,!(s.lanes&_)){var O=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ws,a(O,d)&&s.ref===r.ref)return wr(s,r,_)}return r.flags|=1,s=Ni(m,d),s.ref=r.ref,s.return=r,r.child=s}function Kd(s,r,a,d,_){if(s!==null){var m=s.memoizedProps;if(Ws(m,d)&&s.ref===r.ref)if(Ts=!1,r.pendingProps=d=m,(s.lanes&_)!==0)s.flags&131072&&(Ts=!0);else return r.lanes=s.lanes,wr(s,r,_)}return Kh(s,r,a,d,_)}function Jd(s,r,a){var d=r.pendingProps,_=d.children,m=s!==null?s.memoizedState:null;if(d.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(Ul,Ds),Ds|=a;else{if(!(a&1073741824))return s=m!==null?m.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:s,cachePool:null,transitions:null},r.updateQueue=null,zt(Ul,Ds),Ds|=s,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=m!==null?m.baseLanes:a,zt(Ul,Ds),Ds|=d}else m!==null?(d=m.baseLanes|a,r.memoizedState=null):d=a,zt(Ul,Ds),Ds|=d;return ls(s,r,_,a),r.child}function Jp(s,r){var a=r.ref;(s===null&&a!==null||s!==null&&s.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Kh(s,r,a,d,_){var m=ns(a)?ts:es.current;return m=uo(r,m),Xn(r,_),a=Qu(s,r,a,d,m,_),d=Zu(),s!==null&&!Ts?(r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~_,wr(s,r,_)):(xe&&d&&Fe(r),r.flags|=1,ls(s,r,a,_),r.child)}function qd(s,r,a,d,_){if(ns(a)){var m=!0;Oa(r)}else m=!1;if(Xn(r,_),r.stateNode===null)Zc(s,r),ir(r,a,d),th(r,a,d,_),d=!0;else if(s===null){var O=r.stateNode,k=r.memoizedProps;O.props=k;var P=O.context,Q=a.contextType;typeof Q=="object"&&Q!==null?Q=en(Q):(Q=ns(a)?ts:es.current,Q=uo(r,Q));var $e=a.getDerivedStateFromProps,Te=typeof $e=="function"||typeof O.getSnapshotBeforeUpdate=="function";Te||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(k!==d||P!==Q)&&zh(r,O,d,Q),er=!1;var ge=r.memoizedState;O.state=ge,Go(r,d,O,_),P=r.memoizedState,k!==d||ge!==P||mn.current||er?(typeof $e=="function"&&(Wh(r,a,$e,d),P=r.memoizedState),(k=er||Da(r,a,k,d,ge,P,Q))?(Te||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(r.flags|=4194308)):(typeof O.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=P),O.props=d,O.state=P,O.context=Q,d=k):(typeof O.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{O=r.stateNode,kl(s,r),k=r.memoizedProps,Q=r.type===r.elementType?k:js(r.type,k),O.props=Q,Te=r.pendingProps,ge=O.context,P=a.contextType,typeof P=="object"&&P!==null?P=en(P):(P=ns(a)?ts:es.current,P=uo(r,P));var Pe=a.getDerivedStateFromProps;($e=typeof Pe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(k!==Te||ge!==P)&&zh(r,O,d,P),er=!1,ge=r.memoizedState,O.state=ge,Go(r,d,O,_);var Ve=r.memoizedState;k!==Te||ge!==Ve||mn.current||er?(typeof Pe=="function"&&(Wh(r,a,Pe,d),Ve=r.memoizedState),(Q=er||Da(r,a,Q,d,ge,Ve,P)||!1)?($e||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(d,Ve,P),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(d,Ve,P)),typeof O.componentDidUpdate=="function"&&(r.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof O.componentDidUpdate!="function"||k===s.memoizedProps&&ge===s.memoizedState||(r.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ge===s.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Ve),O.props=d,O.state=Ve,O.context=P,d=Q):(typeof O.componentDidUpdate!="function"||k===s.memoizedProps&&ge===s.memoizedState||(r.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ge===s.memoizedState||(r.flags|=1024),d=!1)}return sh(s,r,a,d,m,_)}function sh(s,r,a,d,_,m){Jp(s,r);var O=(r.flags&128)!==0;if(!d&&!O)return _&&Ge(r,a,!1),wr(s,r,m);d=r.stateNode,Kp.current=r;var k=O&&typeof a.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,s!==null&&O?(r.child=Un(r,s.child,null,m),r.child=Un(r,null,k,m)):ls(s,r,k,m),r.memoizedState=d.state,_&&Ge(r,a,!0),r.child}function ih(s){var r=s.stateNode;r.pendingContext?ju(s,r.pendingContext,r.pendingContext!==r.context):r.context&&ju(s,r.context,!1),Ml(s,r.containerInfo)}function Qd(s,r,a,d,_){return mt(),Pt(_),r.flags|=256,ls(s,r,a,d),r.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function Jh(s){return{baseLanes:s,cachePool:null,transitions:null}}function qp(s,r,a){var d=r.pendingProps,_=tn.current,m=!1,O=(r.flags&128)!==0,k;if((k=O)||(k=s!==null&&s.memoizedState===null?!1:(_&2)!==0),k?(m=!0,r.flags&=-129):(s===null||s.memoizedState!==null)&&(_|=1),zt(tn,_&1),s===null)return pt(r),s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(r.mode&1?s.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(O=d.children,s=d.fallback,m?(d=r.mode,m=r.child,O={mode:"hidden",children:O},!(d&1)&&m!==null?(m.childLanes=0,m.pendingProps=O):m=Pr(O,d,0,null),s=Qo(s,d,a,null),m.return=r,s.return=r,m.sibling=s,r.child=m,r.child.memoizedState=Jh(a),r.memoizedState=rh,s):qh(r,O));if(_=s.memoizedState,_!==null&&(k=_.dehydrated,k!==null))return jo(s,r,O,d,k,_,a);if(m){m=d.fallback,O=r.mode,_=s.child,k=_.sibling;var P={mode:"hidden",children:d.children};return!(O&1)&&r.child!==_?(d=r.child,d.childLanes=0,d.pendingProps=P,r.deletions=null):(d=Ni(_,P),d.subtreeFlags=_.subtreeFlags&14680064),k!==null?m=Ni(k,m):(m=Qo(m,O,a,null),m.flags|=2),m.return=r,d.return=r,d.sibling=m,r.child=d,d=m,m=r.child,O=s.child.memoizedState,O=O===null?Jh(a):{baseLanes:O.baseLanes|a,cachePool:null,transitions:O.transitions},m.memoizedState=O,m.childLanes=s.childLanes&~a,r.memoizedState=rh,d}return m=s.child,s=m.sibling,d=Ni(m,{mode:"visible",children:d.children}),!(r.mode&1)&&(d.lanes=a),d.return=r,d.sibling=null,s!==null&&(a=r.deletions,a===null?(r.deletions=[s],r.flags|=16):a.push(s)),r.child=d,r.memoizedState=null,d}function qh(s,r){return r=Pr({mode:"visible",children:r},s.mode,0,null),r.return=s,s.child=r}function oh(s,r,a,d){return d!==null&&Pt(d),Un(r,s.child,null,a),s=qh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function jo(s,r,a,d,_,m,O){if(a)return r.flags&256?(r.flags&=-257,d=Xh(Error(i(422))),oh(s,r,O,d)):r.memoizedState!==null?(r.child=s.child,r.flags|=128,null):(m=d.fallback,_=r.mode,d=Pr({mode:"visible",children:d.children},_,0,null),m=Qo(m,_,O,null),m.flags|=2,d.return=r,m.return=r,d.sibling=m,r.child=d,r.mode&1&&Un(r,s.child,null,O),r.child.memoizedState=Jh(O),r.memoizedState=rh,m);if(!(r.mode&1))return oh(s,r,O,null);if(_.data==="$!"){if(d=_.nextSibling&&_.nextSibling.dataset,d)var k=d.dgst;return d=k,m=Error(i(419)),d=Xh(m,d,void 0),oh(s,r,O,d)}if(k=(O&s.childLanes)!==0,Ts||k){if(d=cs,d!==null){switch(O&-O){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(d.suspendedLanes|O)?0:_,_!==0&&_!==m.retryLane&&(m.retryLane=_,Ns(s,_),rr(d,s,_,-1))}return Ya(),d=Xh(Error(i(421))),oh(s,r,O,d)}return _.data==="$?"?(r.flags|=128,r.child=s.child,r=ng.bind(null,s),_._reactRetry=r,null):(s=m.treeContext,Xe=yr(_.nextSibling),Qe=r,xe=!0,qe=null,s!==null&&(y[U++]=Z,y[U++]=ae,y[U++]=W,Z=s.id,ae=s.overflow,W=r),r=qh(r,d.children),r.flags|=4096,r)}function Zd(s,r,a){s.lanes|=r;var d=s.alternate;d!==null&&(d.lanes|=r),Xt(s.return,r,a)}function kr(s,r,a,d,_){var m=s.memoizedState;m===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:_}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=d,m.tail=a,m.tailMode=_)}function rn(s,r,a){var d=r.pendingProps,_=d.revealOrder,m=d.tail;if(ls(s,r,d.children,a),d=tn.current,d&2)d=d&1|2,r.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Zd(s,a,r);else if(s.tag===19)Zd(s,a,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(zt(tn,d),!(r.mode&1))r.memoizedState=null;else switch(_){case"forwards":for(a=r.child,_=null;a!==null;)s=a.alternate,s!==null&&Dl(s)===null&&(_=a),a=a.sibling;a=_,a===null?(_=r.child,r.child=null):(_=a.sibling,a.sibling=null),kr(r,!1,_,a,m);break;case"backwards":for(a=null,_=r.child,r.child=null;_!==null;){if(s=_.alternate,s!==null&&Dl(s)===null){r.child=_;break}s=_.sibling,_.sibling=a,a=_,_=s}kr(r,!0,a,null,m);break;case"together":kr(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Zc(s,r){!(r.mode&1)&&s!==null&&(s.alternate=null,r.alternate=null,r.flags|=2)}function wr(s,r,a){if(s!==null&&(r.dependencies=s.dependencies),Va|=r.lanes,!(a&r.childLanes))return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,a=Ni(s,s.pendingProps),r.child=a,a.return=r;s.sibling!==null;)s=s.sibling,a=a.sibling=Ni(s,s.pendingProps),a.return=r;a.sibling=null}return r.child}function ep(s,r,a){switch(r.tag){case 3:ih(r),mt();break;case 5:Jc(r);break;case 1:ns(r.type)&&Oa(r);break;case 4:Ml(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,_=r.memoizedProps.value;zt(Zt,d._currentValue),d._currentValue=_;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(zt(tn,tn.current&1),r.flags|=128,null):a&r.child.childLanes?qp(s,r,a):(zt(tn,tn.current&1),s=wr(s,r,a),s!==null?s.sibling:null);zt(tn,tn.current&1);break;case 19:if(d=(a&r.childLanes)!==0,s.flags&128){if(d)return rn(s,r,a);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),zt(tn,tn.current),d)break;return null;case 22:case 23:return r.lanes=0,Jd(s,r,a)}return wr(s,r,a)}var Ie,xa,Nr,li;Ie=function(s,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},xa=function(){},Nr=function(s,r,a,d){var _=s.memoizedProps;if(_!==d){s=r.stateNode,Lr(ss.current);var m=null;switch(a){case"input":_=xi(s,_),d=xi(s,d),m=[];break;case"select":_=j({},_,{value:void 0}),d=j({},d,{value:void 0}),m=[];break;case"textarea":_=Rt(s,_),d=Rt(s,d),m=[];break;default:typeof _.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Rl)}me(a,d);var O;a=null;for(Q in _)if(!d.hasOwnProperty(Q)&&_.hasOwnProperty(Q)&&_[Q]!=null)if(Q==="style"){var k=_[Q];for(O in k)k.hasOwnProperty(O)&&(a||(a={}),a[O]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(f.hasOwnProperty(Q)?m||(m=[]):(m=m||[]).push(Q,null));for(Q in d){var P=d[Q];if(k=_!=null?_[Q]:void 0,d.hasOwnProperty(Q)&&P!==k&&(P!=null||k!=null))if(Q==="style")if(k){for(O in k)!k.hasOwnProperty(O)||P&&P.hasOwnProperty(O)||(a||(a={}),a[O]="");for(O in P)P.hasOwnProperty(O)&&k[O]!==P[O]&&(a||(a={}),a[O]=P[O])}else a||(m||(m=[]),m.push(Q,a)),a=P;else Q==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,k=k?k.__html:void 0,P!=null&&k!==P&&(m=m||[]).push(Q,P)):Q==="children"?typeof P!="string"&&typeof P!="number"||(m=m||[]).push(Q,""+P):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(f.hasOwnProperty(Q)?(P!=null&&Q==="onScroll"&&Jt("scroll",s),m||k===P||(m=[])):(m=m||[]).push(Q,P))}a&&(m=m||[]).push("style",a);var Q=m;(r.updateQueue=Q)&&(r.flags|=4)}},li=function(s,r,a,d){a!==d&&(r.flags|=4)};function Ci(s,r){if(!xe)switch(s.tailMode){case"hidden":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function cn(s){var r=s.alternate!==null&&s.alternate.child===s.child,a=0,d=0;if(r)for(var _=s.child;_!==null;)a|=_.lanes|_.childLanes,d|=_.subtreeFlags&14680064,d|=_.flags&14680064,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)a|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=d,s.childLanes=a,r}function tp(s,r,a){var d=r.pendingProps;switch(Ne(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(r),null;case 1:return ns(r.type)&&Sa(),cn(r),null;case 3:return d=r.stateNode,tr(),Ht(mn),Ht(es),Wo(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(ut(r)?r.flags|=4:s===null||s.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,qe!==null&&(sd(qe),qe=null))),xa(s,r),cn(r),null;case 5:Ca(r);var _=Lr(Vo.current);if(a=r.type,s!==null&&r.stateNode!=null)Nr(s,r,a,d,_),s.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(i(166));return cn(r),null}if(s=Lr(ss.current),ut(r)){d=r.stateNode,a=r.type;var m=r.memoizedProps;switch(d[zs]=r,d[Fo]=m,s=(r.mode&1)!==0,a){case"dialog":Jt("cancel",d),Jt("close",d);break;case"iframe":case"object":case"embed":Jt("load",d);break;case"video":case"audio":for(_=0;_<Bo.length;_++)Jt(Bo[_],d);break;case"source":Jt("error",d);break;case"img":case"image":case"link":Jt("error",d),Jt("load",d);break;case"details":Jt("toggle",d);break;case"input":Nn(d,m),Jt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!m.multiple},Jt("invalid",d);break;case"textarea":hi(d,m),Jt("invalid",d)}me(a,m),_=null;for(var O in m)if(m.hasOwnProperty(O)){var k=m[O];O==="children"?typeof k=="string"?d.textContent!==k&&(m.suppressHydrationWarning!==!0&&Ii(d.textContent,k,s),_=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(m.suppressHydrationWarning!==!0&&Ii(d.textContent,k,s),_=["children",""+k]):f.hasOwnProperty(O)&&k!=null&&O==="onScroll"&&Jt("scroll",d)}switch(a){case"input":hr(d),ui(d,m,!0);break;case"textarea":hr(d),M(d);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(d.onclick=Rl)}d=_,r.updateQueue=d,d!==null&&(r.flags|=4)}else{O=_.nodeType===9?_:_.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ks(a)),s==="http://www.w3.org/1999/xhtml"?a==="script"?(s=O.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=O.createElement(a,{is:d.is}):(s=O.createElement(a),a==="select"&&(O=s,d.multiple?O.multiple=!0:d.size&&(O.size=d.size))):s=O.createElementNS(s,a),s[zs]=r,s[Fo]=d,Ie(s,r,!1,!1),r.stateNode=s;e:{switch(O=wt(a,d),a){case"dialog":Jt("cancel",s),Jt("close",s),_=d;break;case"iframe":case"object":case"embed":Jt("load",s),_=d;break;case"video":case"audio":for(_=0;_<Bo.length;_++)Jt(Bo[_],s);_=d;break;case"source":Jt("error",s),_=d;break;case"img":case"image":case"link":Jt("error",s),Jt("load",s),_=d;break;case"details":Jt("toggle",s),_=d;break;case"input":Nn(s,d),_=xi(s,d),Jt("invalid",s);break;case"option":_=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},_=j({},d,{value:void 0}),Jt("invalid",s);break;case"textarea":hi(s,d),_=Rt(s,d),Jt("invalid",s);break;default:_=d}me(a,_),k=_;for(m in k)if(k.hasOwnProperty(m)){var P=k[m];m==="style"?F(s,P):m==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&In(s,P)):m==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&q(s,P):typeof P=="number"&&q(s,""+P):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(f.hasOwnProperty(m)?P!=null&&m==="onScroll"&&Jt("scroll",s):P!=null&&ke(s,m,P,O))}switch(a){case"input":hr(s),ui(s,d,!1);break;case"textarea":hr(s),M(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Re(d.value));break;case"select":s.multiple=!!d.multiple,m=d.value,m!=null?It(s,!!d.multiple,m,!1):d.defaultValue!=null&&It(s,!!d.multiple,d.defaultValue,!0);break;default:typeof _.onClick=="function"&&(s.onclick=Rl)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return cn(r),null;case 6:if(s&&r.stateNode!=null)li(s,r,s.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=Lr(Vo.current),Lr(ss.current),ut(r)){if(d=r.stateNode,a=r.memoizedProps,d[zs]=r,(m=d.nodeValue!==a)&&(s=Qe,s!==null))switch(s.tag){case 3:Ii(d.nodeValue,a,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ii(d.nodeValue,a,(s.mode&1)!==0)}m&&(r.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[zs]=r,r.stateNode=d}return cn(r),null;case 13:if(Ht(tn),d=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(xe&&Xe!==null&&r.mode&1&&!(r.flags&128))gt(),mt(),r.flags|=98560,m=!1;else if(m=ut(r),d!==null&&d.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[zs]=r}else mt(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;cn(r),m=!1}else qe!==null&&(sd(qe),qe=null),m=!0;if(!m)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(r.child.flags|=8192,r.mode&1&&(s===null||tn.current&1?Ln===0&&(Ln=3):Ya())),r.updateQueue!==null&&(r.flags|=4),cn(r),null);case 4:return tr(),xa(s,r),s===null&&Ei(r.stateNode.containerInfo),cn(r),null;case 10:return Lt(r.type._context),cn(r),null;case 17:return ns(r.type)&&Sa(),cn(r),null;case 19:if(Ht(tn),m=r.memoizedState,m===null)return cn(r),null;if(d=(r.flags&128)!==0,O=m.rendering,O===null)if(d)Ci(m,!1);else{if(Ln!==0||s!==null&&s.flags&128)for(s=r.child;s!==null;){if(O=Dl(s),O!==null){for(r.flags|=128,Ci(m,!1),d=O.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=a,a=r.child;a!==null;)m=a,s=d,m.flags&=14680066,O=m.alternate,O===null?(m.childLanes=0,m.lanes=s,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=O.childLanes,m.lanes=O.lanes,m.child=O.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=O.memoizedProps,m.memoizedState=O.memoizedState,m.updateQueue=O.updateQueue,m.type=O.type,s=O.dependencies,m.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a=a.sibling;return zt(tn,tn.current&1|2),r.child}s=s.sibling}m.tail!==null&&sn()>Fl&&(r.flags|=128,d=!0,Ci(m,!1),r.lanes=4194304)}else{if(!d)if(s=Dl(O),s!==null){if(r.flags|=128,d=!0,a=s.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Ci(m,!0),m.tail===null&&m.tailMode==="hidden"&&!O.alternate&&!xe)return cn(r),null}else 2*sn()-m.renderingStartTime>Fl&&a!==1073741824&&(r.flags|=128,d=!0,Ci(m,!1),r.lanes=4194304);m.isBackwards?(O.sibling=r.child,r.child=O):(a=m.last,a!==null?a.sibling=O:r.child=O,m.last=O)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=sn(),r.sibling=null,a=tn.current,zt(tn,d?a&1|2:a&1),r):(cn(r),null);case 22:case 23:return id(),d=r.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(r.flags|=8192),d&&r.mode&1?Ds&1073741824&&(cn(r),r.subtreeFlags&6&&(r.flags|=8192)):cn(r),null;case 24:return null;case 25:return null}throw Error(i(156,r.tag))}function Qh(s,r){switch(Ne(r),r.tag){case 1:return ns(r.type)&&Sa(),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return tr(),Ht(mn),Ht(es),Wo(),s=r.flags,s&65536&&!(s&128)?(r.flags=s&-65537|128,r):null;case 5:return Ca(r),null;case 13:if(Ht(tn),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));mt()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return Ht(tn),null;case 4:return tr(),null;case 10:return Lt(r.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var Fn=!1,V=!1,jt=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Ba(s,r){var a=s.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){dn(s,r,d)}else a.current=null}function po(s,r,a){try{a()}catch(d){dn(s,r,d)}}var np=!1;function Qp(s,r){if(Rr=No,s=Nt(),ga(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var _=d.anchorOffset,m=d.focusNode;d=d.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var O=0,k=-1,P=-1,Q=0,$e=0,Te=s,ge=null;t:for(;;){for(var Pe;Te!==a||_!==0&&Te.nodeType!==3||(k=O+_),Te!==m||d!==0&&Te.nodeType!==3||(P=O+d),Te.nodeType===3&&(O+=Te.nodeValue.length),(Pe=Te.firstChild)!==null;)ge=Te,Te=Pe;for(;;){if(Te===s)break t;if(ge===a&&++Q===_&&(k=O),ge===m&&++$e===d&&(P=O),(Pe=Te.nextSibling)!==null)break;Te=ge,ge=Te.parentNode}Te=Pe}a=k===-1||P===-1?null:{start:k,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(yl={focusedElem:s,selectionRange:a},No=!1,Ee=r;Ee!==null;)if(r=Ee,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Ee=s;else for(;Ee!==null;){r=Ee;try{var Ve=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var We=Ve.memoizedProps,on=Ve.memoizedState,x=r.stateNode,H=x.getSnapshotBeforeUpdate(r.elementType===r.type?We:js(r.type,We),on);x.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var K=r.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ye){dn(r,r.return,ye)}if(s=r.sibling,s!==null){s.return=r.return,Ee=s;break}Ee=r.return}return Ve=np,np=!1,Ve}function lh(s,r,a){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var _=d=d.next;do{if((_.tag&s)===s){var m=_.destroy;_.destroy=void 0,m!==void 0&&po(r,a,m)}_=_.next}while(_!==d)}}function go(s,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&s)===s){var d=a.create;a.destroy=d()}a=a.next}while(a!==r)}}function Tn(s){var r=s.ref;if(r!==null){var a=s.stateNode;switch(s.tag){case 5:s=a;break;default:s=a}typeof r=="function"?r(s):r.current=s}}function ah(s){var r=s.alternate;r!==null&&(s.alternate=null,ah(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&(delete r[zs],delete r[Fo],delete r[Ia],delete r[Yc],delete r[Ll])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Zh(s){return s.tag===5||s.tag===3||s.tag===4}function ch(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Zh(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ua(s,r,a){var d=s.tag;if(d===5||d===6)s=s.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(s,r):a.insertBefore(s,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(s,a)):(r=a,r.appendChild(s)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Rl));else if(d!==4&&(s=s.child,s!==null))for(Ua(s,r,a),s=s.sibling;s!==null;)Ua(s,r,a),s=s.sibling}function Fa(s,r,a){var d=s.tag;if(d===5||d===6)s=s.stateNode,r?a.insertBefore(s,r):a.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Fa(s,r,a),s=s.sibling;s!==null;)Fa(s,r,a),s=s.sibling}var as=null,Mr=!1;function Li(s,r,a){for(a=a.child;a!==null;)ed(s,r,a),a=a.sibling}function ed(s,r,a){if(Rs&&typeof Rs.onCommitFiberUnmount=="function")try{Rs.onCommitFiberUnmount(fr,a)}catch{}switch(a.tag){case 5:V||Ba(a,r);case 6:var d=as,_=Mr;as=null,Li(s,r,a),as=d,Mr=_,as!==null&&(Mr?(s=as,a=a.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):as.removeChild(a.stateNode));break;case 18:as!==null&&(Mr?(s=as,a=a.stateNode,s.nodeType===8?Cl(s.parentNode,a):s.nodeType===1&&Cl(s,a),wo(s)):Cl(as,a.stateNode));break;case 4:d=as,_=Mr,as=a.stateNode.containerInfo,Mr=!0,Li(s,r,a),as=d,Mr=_;break;case 0:case 11:case 14:case 15:if(!V&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){_=d=d.next;do{var m=_,O=m.destroy;m=m.tag,O!==void 0&&(m&2||m&4)&&po(a,r,O),_=_.next}while(_!==d)}Li(s,r,a);break;case 1:if(!V&&(Ba(a,r),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(k){dn(a,r,k)}Li(s,r,a);break;case 21:Li(s,r,a);break;case 22:a.mode&1?(V=(d=V)||a.memoizedState!==null,Li(s,r,a),V=d):Li(s,r,a);break;default:Li(s,r,a)}}function sp(s){var r=s.updateQueue;if(r!==null){s.updateQueue=null;var a=s.stateNode;a===null&&(a=s.stateNode=new jt),r.forEach(function(d){var _=ap.bind(null,s,d);a.has(d)||(a.add(d),d.then(_,_))})}}function Ze(s,r){var a=r.deletions;if(a!==null)for(var d=0;d<a.length;d++){var _=a[d];try{var m=s,O=r,k=O;e:for(;k!==null;){switch(k.tag){case 5:as=k.stateNode,Mr=!1;break e;case 3:as=k.stateNode.containerInfo,Mr=!0;break e;case 4:as=k.stateNode.containerInfo,Mr=!0;break e}k=k.return}if(as===null)throw Error(i(160));ed(m,O,_),as=null,Mr=!1;var P=_.alternate;P!==null&&(P.return=null),_.return=null}catch(Q){dn(_,r,Q)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ip(r,s),r=r.sibling}function ip(s,r){var a=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ze(r,s),Es(s),d&4){try{lh(3,s,s.return),go(3,s)}catch(We){dn(s,s.return,We)}try{lh(5,s,s.return)}catch(We){dn(s,s.return,We)}}break;case 1:Ze(r,s),Es(s),d&512&&a!==null&&Ba(a,a.return);break;case 5:if(Ze(r,s),Es(s),d&512&&a!==null&&Ba(a,a.return),s.flags&32){var _=s.stateNode;try{q(_,"")}catch(We){dn(s,s.return,We)}}if(d&4&&(_=s.stateNode,_!=null)){var m=s.memoizedProps,O=a!==null?a.memoizedProps:m,k=s.type,P=s.updateQueue;if(s.updateQueue=null,P!==null)try{k==="input"&&m.type==="radio"&&m.name!=null&&fn(_,m),wt(k,O);var Q=wt(k,m);for(O=0;O<P.length;O+=2){var $e=P[O],Te=P[O+1];$e==="style"?F(_,Te):$e==="dangerouslySetInnerHTML"?In(_,Te):$e==="children"?q(_,Te):ke(_,$e,Te,Q)}switch(k){case"input":ci(_,m);break;case"textarea":Mn(_,m);break;case"select":var ge=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!m.multiple;var Pe=m.value;Pe!=null?It(_,!!m.multiple,Pe,!1):ge!==!!m.multiple&&(m.defaultValue!=null?It(_,!!m.multiple,m.defaultValue,!0):It(_,!!m.multiple,m.multiple?[]:"",!1))}_[Fo]=m}catch(We){dn(s,s.return,We)}}break;case 6:if(Ze(r,s),Es(s),d&4){if(s.stateNode===null)throw Error(i(162));_=s.stateNode,m=s.memoizedProps;try{_.nodeValue=m}catch(We){dn(s,s.return,We)}}break;case 3:if(Ze(r,s),Es(s),d&4&&a!==null&&a.memoizedState.isDehydrated)try{wo(r.containerInfo)}catch(We){dn(s,s.return,We)}break;case 4:Ze(r,s),Es(s);break;case 13:Ze(r,s),Es(s),_=s.child,_.flags&8192&&(m=_.memoizedState!==null,_.stateNode.isHidden=m,!m||_.alternate!==null&&_.alternate.memoizedState!==null||(hh=sn())),d&4&&sp(s);break;case 22:if($e=a!==null&&a.memoizedState!==null,s.mode&1?(V=(Q=V)||$e,Ze(r,s),V=Q):Ze(r,s),Es(s),d&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!$e&&s.mode&1)for(Ee=s,$e=s.child;$e!==null;){for(Te=Ee=$e;Ee!==null;){switch(ge=Ee,Pe=ge.child,ge.tag){case 0:case 11:case 14:case 15:lh(4,ge,ge.return);break;case 1:Ba(ge,ge.return);var Ve=ge.stateNode;if(typeof Ve.componentWillUnmount=="function"){d=ge,a=ge.return;try{r=d,Ve.props=r.memoizedProps,Ve.state=r.memoizedState,Ve.componentWillUnmount()}catch(We){dn(d,a,We)}}break;case 5:Ba(ge,ge.return);break;case 22:if(ge.memoizedState!==null){Bl(Te);continue}}Pe!==null?(Pe.return=ge,Ee=Pe):Bl(Te)}$e=$e.sibling}e:for($e=null,Te=s;;){if(Te.tag===5){if($e===null){$e=Te;try{_=Te.stateNode,Q?(m=_.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(k=Te.stateNode,P=Te.memoizedProps.style,O=P!=null&&P.hasOwnProperty("display")?P.display:null,k.style.display=R("display",O))}catch(We){dn(s,s.return,We)}}}else if(Te.tag===6){if($e===null)try{Te.stateNode.nodeValue=Q?"":Te.memoizedProps}catch(We){dn(s,s.return,We)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===s)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===s)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===s)break e;$e===Te&&($e=null),Te=Te.return}$e===Te&&($e=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:Ze(r,s),Es(s),d&4&&sp(s);break;case 21:break;default:Ze(r,s),Es(s)}}function Es(s){var r=s.flags;if(r&2){try{e:{for(var a=s.return;a!==null;){if(Zh(a)){var d=a;break e}a=a.return}throw Error(i(160))}switch(d.tag){case 5:var _=d.stateNode;d.flags&32&&(q(_,""),d.flags&=-33);var m=ch(s);Fa(s,m,_);break;case 3:case 4:var O=d.stateNode.containerInfo,k=ch(s);Ua(s,k,O);break;default:throw Error(i(161))}}catch(P){dn(s,s.return,P)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Yo(s,r,a){Ee=s,Ha(s)}function Ha(s,r,a){for(var d=(s.mode&1)!==0;Ee!==null;){var _=Ee,m=_.child;if(_.tag===22&&d){var O=_.memoizedState!==null||Fn;if(!O){var k=_.alternate,P=k!==null&&k.memoizedState!==null||V;k=Fn;var Q=V;if(Fn=O,(V=P)&&!Q)for(Ee=_;Ee!==null;)O=Ee,P=O.child,O.tag===22&&O.memoizedState!==null?Ms(_):P!==null?(P.return=O,Ee=P):Ms(_);for(;m!==null;)Ee=m,Ha(m),m=m.sibling;Ee=_,Fn=k,V=Q}Ko(s)}else _.subtreeFlags&8772&&m!==null?(m.return=_,Ee=m):Ko(s)}}function Ko(s){for(;Ee!==null;){var r=Ee;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:V||go(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!V)if(a===null)d.componentDidMount();else{var _=r.elementType===r.type?a.memoizedProps:js(r.type,a.memoizedProps);d.componentDidUpdate(_,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&Kc(r,m,d);break;case 3:var O=r.updateQueue;if(O!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Kc(r,O,a)}break;case 5:var k=r.stateNode;if(a===null&&r.flags&4){a=k;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var Q=r.alternate;if(Q!==null){var $e=Q.memoizedState;if($e!==null){var Te=$e.dehydrated;Te!==null&&wo(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}V||r.flags&512&&Tn(r)}catch(ge){dn(r,r.return,ge)}}if(r===s){Ee=null;break}if(a=r.sibling,a!==null){a.return=r.return,Ee=a;break}Ee=r.return}}function Bl(s){for(;Ee!==null;){var r=Ee;if(r===s){Ee=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Ee=a;break}Ee=r.return}}function Ms(s){for(;Ee!==null;){var r=Ee;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{go(4,r)}catch(P){dn(r,a,P)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var _=r.return;try{d.componentDidMount()}catch(P){dn(r,_,P)}}var m=r.return;try{Tn(r)}catch(P){dn(r,m,P)}break;case 5:var O=r.return;try{Tn(r)}catch(P){dn(r,O,P)}}}catch(P){dn(r,r.return,P)}if(r===s){Ee=null;break}var k=r.sibling;if(k!==null){k.return=r.return,Ee=k;break}Ee=r.return}}var Zp=Math.ceil,uh=nt.ReactCurrentDispatcher,td=nt.ReactCurrentOwner,Ai=nt.ReactCurrentBatchConfig,At=0,cs=null,Cn=null,us=0,Ds=0,Ul=Si(0),Ln=0,Ga=null,Va=0,nd=0,ki=0,On=null,hs=null,hh=0,Fl=1/0,wi=null,Wa=!1,Is=null,Hl=null,za=!1,_o=null,eu=0,fo=0,dh=null,ph=-1,Xa=0;function Ps(){return At&6?sn():ph!==-1?ph:ph=sn()}function Jo(s){return s.mode&1?At&2&&us!==0?us&-us:xt.transition!==null?(Xa===0&&(Xa=Gs()),Xa):(s=vt,s!==0||(s=window.event,s=s===void 0?16:fi(s.type)),s):1}function rr(s,r,a,d){if(50<fo)throw fo=0,dh=null,Error(i(185));Vi(s,a,d),(!(At&2)||s!==cs)&&(s===cs&&(!(At&2)&&(nd|=a),Ln===4&&mo(s,us)),Ys(s,d),a===1&&At===0&&!(r.mode&1)&&(Fl=sn()+500,hn&&Ce()))}function Ys(s,r){var a=s.callbackNode;na(s,r);var d=Vn(s,s===cs?us:0);if(d===0)a!==null&&pr(a),s.callbackNode=null,s.callbackPriority=0;else if(r=d&-d,s.callbackPriority!==r){if(a!=null&&pr(a),r===1)s.tag===0?Al(tu.bind(null,s)):Ls(tu.bind(null,s)),vl(function(){!(At&6)&&Ce()}),a=null;else{switch(Vr(d)){case 1:a=vo;break;case 4:a=Co;break;case 16:a=Hi;break;case 536870912:a=Hr;break;default:a=Hi}a=od(a,Gl.bind(null,s))}s.callbackPriority=r,s.callbackNode=a}}function Gl(s,r){if(ph=-1,Xa=0,At&6)throw Error(i(327));var a=s.callbackNode;if(or()&&s.callbackNode!==a)return null;var d=Vn(s,s===cs?us:0);if(d===0)return null;if(d&30||d&s.expiredLanes||r)r=mh(s,d);else{r=d;var _=At;At|=2;var m=rp();(cs!==s||us!==r)&&(wi=null,Fl=sn()+500,Rn(s,r));do try{tg();break}catch(k){ja(s,k)}while(!0);bn(),uh.current=m,At=_,Cn!==null?r=0:(cs=null,us=0,r=Ln)}if(r!==0){if(r===2&&(_=Gr(s),_!==0&&(d=_,r=gh(s,_))),r===1)throw a=Ga,Rn(s,0),mo(s,d),Ys(s,sn()),a;if(r===6)mo(s,d);else{if(_=s.current.alternate,!(d&30)&&!_h(_)&&(r=mh(s,d),r===2&&(m=Gr(s),m!==0&&(d=m,r=gh(s,m))),r===1))throw a=Ga,Rn(s,0),mo(s,d),Ys(s,sn()),a;switch(s.finishedWork=_,s.finishedLanes=d,r){case 0:case 1:throw Error(i(345));case 2:Dr(s,hs,wi);break;case 3:if(mo(s,d),(d&130023424)===d&&(r=hh+500-sn(),10<r)){if(Vn(s,0)!==0)break;if(_=s.suspendedLanes,(_&d)!==d){Ps(),s.pingedLanes|=s.suspendedLanes&_;break}s.timeoutHandle=Xc(Dr.bind(null,s,hs,wi),r);break}Dr(s,hs,wi);break;case 4:if(mo(s,d),(d&4194240)===d)break;for(r=s.eventTimes,_=-1;0<d;){var O=31-Fs(d);m=1<<O,O=r[O],O>_&&(_=O),d&=~m}if(d=_,d=sn()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Zp(d/1960))-d,10<d){s.timeoutHandle=Xc(Dr.bind(null,s,hs,wi),d);break}Dr(s,hs,wi);break;case 5:Dr(s,hs,wi);break;default:throw Error(i(329))}}}return Ys(s,sn()),s.callbackNode===a?Gl.bind(null,s):null}function gh(s,r){var a=On;return s.current.memoizedState.isDehydrated&&(Rn(s,r).flags|=256),s=mh(s,r),s!==2&&(r=hs,hs=a,r!==null&&sd(r)),s}function sd(s){hs===null?hs=s:hs.push.apply(hs,s)}function _h(s){for(var r=s;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var _=a[d],m=_.getSnapshot;_=_.value;try{if(!fs(m(),_))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mo(s,r){for(r&=~ki,r&=~nd,s.suspendedLanes|=r,s.pingedLanes&=~r,s=s.expirationTimes;0<r;){var a=31-Fs(r),d=1<<a;s[a]=-1,r&=~d}}function tu(s){if(At&6)throw Error(i(327));or();var r=Vn(s,0);if(!(r&1))return Ys(s,sn()),null;var a=mh(s,r);if(s.tag!==0&&a===2){var d=Gr(s);d!==0&&(r=d,a=gh(s,d))}if(a===1)throw a=Ga,Rn(s,0),mo(s,r),Ys(s,sn()),a;if(a===6)throw Error(i(345));return s.finishedWork=s.current.alternate,s.finishedLanes=r,Dr(s,hs,wi),Ys(s,sn()),null}function fh(s,r){var a=At;At|=1;try{return s(r)}finally{At=a,At===0&&(Fl=sn()+500,hn&&Ce())}}function qo(s){_o!==null&&_o.tag===0&&!(At&6)&&or();var r=At;At|=1;var a=Ai.transition,d=vt;try{if(Ai.transition=null,vt=1,s)return s()}finally{vt=d,Ai.transition=a,At=r,!(At&6)&&Ce()}}function id(){Ds=Ul.current,Ht(Ul)}function Rn(s,r){s.finishedWork=null,s.finishedLanes=0;var a=s.timeoutHandle;if(a!==-1&&(s.timeoutHandle=-1,Bh(a)),Cn!==null)for(a=Cn.return;a!==null;){var d=a;switch(Ne(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Sa();break;case 3:tr(),Ht(mn),Ht(es),Wo();break;case 5:Ca(d);break;case 4:tr();break;case 13:Ht(tn);break;case 19:Ht(tn);break;case 10:Lt(d.type._context);break;case 22:case 23:id()}a=a.return}if(cs=s,Cn=s=Ni(s.current,null),us=Ds=r,Ln=0,Ga=null,ki=nd=Va=0,hs=On=null,ri!==null){for(r=0;r<ri.length;r++)if(a=ri[r],d=a.interleaved,d!==null){a.interleaved=null;var _=d.next,m=a.pending;if(m!==null){var O=m.next;m.next=_,d.next=O}a.pending=d}ri=null}return s}function ja(s,r){do{var a=Cn;try{if(bn(),zo.current=Pl,Ju){for(var d=an.memoizedState;d!==null;){var _=d.queue;_!==null&&(_.pending=null),d=d.next}Ju=!1}if(Xo=0,jn=Sn=an=null,Aa=!1,ka=0,td.current=null,a===null||a.return===null){Ln=1,Ga=r,Cn=null;break}e:{var m=s,O=a.return,k=a,P=r;if(r=us,k.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var Q=P,$e=k,Te=$e.tag;if(!($e.mode&1)&&(Te===0||Te===11||Te===15)){var ge=$e.alternate;ge?($e.updateQueue=ge.updateQueue,$e.memoizedState=ge.memoizedState,$e.lanes=ge.lanes):($e.updateQueue=null,$e.memoizedState=null)}var Pe=Xd(O);if(Pe!==null){Pe.flags&=-257,jd(Pe,O,k,m,r),Pe.mode&1&&jh(m,Q,r),r=Pe,P=Q;var Ve=r.updateQueue;if(Ve===null){var We=new Set;We.add(P),r.updateQueue=We}else Ve.add(P);break e}else{if(!(r&1)){jh(m,Q,r),Ya();break e}P=Error(i(426))}}else if(xe&&k.mode&1){var on=Xd(O);if(on!==null){!(on.flags&65536)&&(on.flags|=256),jd(on,O,k,m,r),Pt(qc(P,k));break e}}m=P=qc(P,k),Ln!==4&&(Ln=2),On===null?On=[m]:On.push(m),m=O;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var x=nh(m,P,r);va(m,x);break e;case 1:k=P;var H=m.type,K=m.stateNode;if(!(m.flags&128)&&(typeof H.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Hl===null||!Hl.has(K)))){m.flags|=65536,r&=-r,m.lanes|=r;var ye=xl(m,k,r);va(m,ye);break e}}m=m.return}while(m!==null)}op(a)}catch(Ye){r=Ye,Cn===a&&a!==null&&(Cn=a=a.return);continue}break}while(!0)}function rp(){var s=uh.current;return uh.current=Pl,s===null?Pl:s}function Ya(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),cs===null||!(Va&268435455)&&!(nd&268435455)||mo(cs,us)}function mh(s,r){var a=At;At|=2;var d=rp();(cs!==s||us!==r)&&(wi=null,Rn(s,r));do try{eg();break}catch(_){ja(s,_)}while(!0);if(bn(),At=a,uh.current=d,Cn!==null)throw Error(i(261));return cs=null,us=0,Ln}function eg(){for(;Cn!==null;)Vl(Cn)}function tg(){for(;Cn!==null&&!gr();)Vl(Cn)}function Vl(s){var r=$h(s.alternate,s,Ds);s.memoizedProps=s.pendingProps,r===null?op(s):Cn=r,td.current=null}function op(s){var r=s;do{var a=r.alternate;if(s=r.return,r.flags&32768){if(a=Qh(a,r),a!==null){a.flags&=32767,Cn=a;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ln=6,Cn=null;return}}else if(a=tp(a,r,Ds),a!==null){Cn=a;return}if(r=r.sibling,r!==null){Cn=r;return}Cn=r=s}while(r!==null);Ln===0&&(Ln=5)}function Dr(s,r,a){var d=vt,_=Ai.transition;try{Ai.transition=null,vt=1,Kn(s,r,a,d)}finally{Ai.transition=_,vt=d}return null}function Kn(s,r,a,d){do or();while(_o!==null);if(At&6)throw Error(i(327));a=s.finishedWork;var _=s.finishedLanes;if(a===null)return null;if(s.finishedWork=null,s.finishedLanes=0,a===s.current)throw Error(i(177));s.callbackNode=null,s.callbackPriority=0;var m=a.lanes|a.childLanes;if(Wi(s,m),s===cs&&(Cn=cs=null,us=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||za||(za=!0,od(Hi,function(){return or(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=Ai.transition,Ai.transition=null;var O=vt;vt=1;var k=At;At|=4,td.current=null,Qp(s,a),ip(a,s),Il(yl),No=!!Rr,yl=Rr=null,s.current=a,Yo(a),_c(),At=k,vt=O,Ai.transition=m}else s.current=a;if(za&&(za=!1,_o=s,eu=_),m=s.pendingLanes,m===0&&(Hl=null),Su(a.stateNode),Ys(s,sn()),r!==null)for(d=s.onRecoverableError,a=0;a<r.length;a++)_=r[a],d(_.value,{componentStack:_.stack,digest:_.digest});if(Wa)throw Wa=!1,s=Is,Is=null,s;return eu&1&&s.tag!==0&&or(),m=s.pendingLanes,m&1?s===dh?fo++:(fo=0,dh=s):fo=0,Ce(),null}function or(){if(_o!==null){var s=Vr(eu),r=Ai.transition,a=vt;try{if(Ai.transition=null,vt=16>s?16:s,_o===null)var d=!1;else{if(s=_o,_o=null,eu=0,At&6)throw Error(i(331));var _=At;for(At|=4,Ee=s.current;Ee!==null;){var m=Ee,O=m.child;if(Ee.flags&16){var k=m.deletions;if(k!==null){for(var P=0;P<k.length;P++){var Q=k[P];for(Ee=Q;Ee!==null;){var $e=Ee;switch($e.tag){case 0:case 11:case 15:lh(8,$e,m)}var Te=$e.child;if(Te!==null)Te.return=$e,Ee=Te;else for(;Ee!==null;){$e=Ee;var ge=$e.sibling,Pe=$e.return;if(ah($e),$e===Q){Ee=null;break}if(ge!==null){ge.return=Pe,Ee=ge;break}Ee=Pe}}}var Ve=m.alternate;if(Ve!==null){var We=Ve.child;if(We!==null){Ve.child=null;do{var on=We.sibling;We.sibling=null,We=on}while(We!==null)}}Ee=m}}if(m.subtreeFlags&2064&&O!==null)O.return=m,Ee=O;else e:for(;Ee!==null;){if(m=Ee,m.flags&2048)switch(m.tag){case 0:case 11:case 15:lh(9,m,m.return)}var x=m.sibling;if(x!==null){x.return=m.return,Ee=x;break e}Ee=m.return}}var H=s.current;for(Ee=H;Ee!==null;){O=Ee;var K=O.child;if(O.subtreeFlags&2064&&K!==null)K.return=O,Ee=K;else e:for(O=H;Ee!==null;){if(k=Ee,k.flags&2048)try{switch(k.tag){case 0:case 11:case 15:go(9,k)}}catch(Ye){dn(k,k.return,Ye)}if(k===O){Ee=null;break e}var ye=k.sibling;if(ye!==null){ye.return=k.return,Ee=ye;break e}Ee=k.return}}if(At=_,Ce(),Rs&&typeof Rs.onPostCommitFiberRoot=="function")try{Rs.onPostCommitFiberRoot(fr,s)}catch{}d=!0}return d}finally{vt=a,Ai.transition=r}}return!1}function Wl(s,r,a){r=qc(a,r),r=nh(s,r,1),s=yi(s,r,1),r=Ps(),s!==null&&(Vi(s,1,r),Ys(s,r))}function dn(s,r,a){if(s.tag===3)Wl(s,s,a);else for(;r!==null;){if(r.tag===3){Wl(r,s,a);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Hl===null||!Hl.has(d))){s=qc(a,s),s=xl(r,s,1),r=yi(r,s,1),s=Ps(),r!==null&&(Vi(r,1,s),Ys(r,s));break}}r=r.return}}function rd(s,r,a){var d=s.pingCache;d!==null&&d.delete(r),r=Ps(),s.pingedLanes|=s.suspendedLanes&a,cs===s&&(us&a)===a&&(Ln===4||Ln===3&&(us&130023424)===us&&500>sn()-hh?Rn(s,0):ki|=a),Ys(s,r)}function lp(s,r){r===0&&(s.mode&1?(r=_s,_s<<=1,!(_s&130023424)&&(_s=4194304)):r=1);var a=Ps();s=Ns(s,r),s!==null&&(Vi(s,r,a),Ys(s,a))}function ng(s){var r=s.memoizedState,a=0;r!==null&&(a=r.retryLane),lp(s,a)}function ap(s,r){var a=0;switch(s.tag){case 13:var d=s.stateNode,_=s.memoizedState;_!==null&&(a=_.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(i(314))}d!==null&&d.delete(r),lp(s,a)}var $h;$h=function(s,r,a){if(s!==null)if(s.memoizedProps!==r.pendingProps||mn.current)Ts=!0;else{if(!(s.lanes&a)&&!(r.flags&128))return Ts=!1,ep(s,r,a);Ts=!!(s.flags&131072)}else Ts=!1,xe&&r.flags&1048576&&Ue(r,$,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;Zc(s,r),s=r.pendingProps;var _=uo(r,es.current);Xn(r,a),_=Qu(null,r,d,s,_,a);var m=Zu();return r.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ns(d)?(m=!0,Oa(r)):m=!1,r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,ya(r),_.updater=Yn,r.stateNode=_,_._reactInternals=r,th(r,d,s,a),r=sh(null,r,d,!0,m,a)):(r.tag=0,xe&&m&&Fe(r),ls(null,r,_,a),r=r.child),r;case 16:d=r.elementType;e:{switch(Zc(s,r),s=r.pendingProps,_=d._init,d=_(d._payload),r.type=d,_=r.tag=Bt(d),s=js(d,s),_){case 0:r=Kh(null,r,d,s,a);break e;case 1:r=qd(null,r,d,s,a);break e;case 11:r=Yh(null,r,d,s,a);break e;case 14:r=Yd(null,r,d,js(d.type,s),a);break e}throw Error(i(306,d,""))}return r;case 0:return d=r.type,_=r.pendingProps,_=r.elementType===d?_:js(d,_),Kh(s,r,d,_,a);case 1:return d=r.type,_=r.pendingProps,_=r.elementType===d?_:js(d,_),qd(s,r,d,_,a);case 3:e:{if(ih(r),s===null)throw Error(i(387));d=r.pendingProps,m=r.memoizedState,_=m.element,kl(s,r),Go(r,d,null,a);var O=r.memoizedState;if(d=O.element,m.isDehydrated)if(m={element:d,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){_=qc(Error(i(423)),r),r=Qd(s,r,d,a,_);break e}else if(d!==_){_=qc(Error(i(424)),r),r=Qd(s,r,d,a,_);break e}else for(Xe=yr(r.stateNode.containerInfo.firstChild),Qe=r,xe=!0,qe=null,a=ks(r,null,d,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(mt(),d===_){r=wr(s,r,a);break e}ls(s,r,d,a)}r=r.child}return r;case 5:return Jc(r),s===null&&pt(r),d=r.type,_=r.pendingProps,m=s!==null?s.memoizedProps:null,O=_.children,Ea(d,_)?O=null:m!==null&&Ea(d,m)&&(r.flags|=32),Jp(s,r),ls(s,r,O,a),r.child;case 6:return s===null&&pt(r),null;case 13:return qp(s,r,a);case 4:return Ml(r,r.stateNode.containerInfo),d=r.pendingProps,s===null?r.child=Un(r,null,d,a):ls(s,r,d,a),r.child;case 11:return d=r.type,_=r.pendingProps,_=r.elementType===d?_:js(d,_),Yh(s,r,d,_,a);case 7:return ls(s,r,r.pendingProps,a),r.child;case 8:return ls(s,r,r.pendingProps.children,a),r.child;case 12:return ls(s,r,r.pendingProps.children,a),r.child;case 10:e:{if(d=r.type._context,_=r.pendingProps,m=r.memoizedProps,O=_.value,zt(Zt,d._currentValue),d._currentValue=O,m!==null)if(fs(m.value,O)){if(m.children===_.children&&!mn.current){r=wr(s,r,a);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var k=m.dependencies;if(k!==null){O=m.child;for(var P=k.firstContext;P!==null;){if(P.context===d){if(m.tag===1){P=Ri(-1,a&-a),P.tag=2;var Q=m.updateQueue;if(Q!==null){Q=Q.shared;var $e=Q.pending;$e===null?P.next=P:(P.next=$e.next,$e.next=P),Q.pending=P}}m.lanes|=a,P=m.alternate,P!==null&&(P.lanes|=a),Xt(m.return,a,r),k.lanes|=a;break}P=P.next}}else if(m.tag===10)O=m.type===r.type?null:m.child;else if(m.tag===18){if(O=m.return,O===null)throw Error(i(341));O.lanes|=a,k=O.alternate,k!==null&&(k.lanes|=a),Xt(O,a,r),O=m.sibling}else O=m.child;if(O!==null)O.return=m;else for(O=m;O!==null;){if(O===r){O=null;break}if(m=O.sibling,m!==null){m.return=O.return,O=m;break}O=O.return}m=O}ls(s,r,_.children,a),r=r.child}return r;case 9:return _=r.type,d=r.pendingProps.children,Xn(r,a),_=en(_),d=d(_),r.flags|=1,ls(s,r,d,a),r.child;case 14:return d=r.type,_=js(d,r.pendingProps),_=js(d.type,_),Yd(s,r,d,_,a);case 15:return Kd(s,r,r.type,r.pendingProps,a);case 17:return d=r.type,_=r.pendingProps,_=r.elementType===d?_:js(d,_),Zc(s,r),r.tag=1,ns(d)?(s=!0,Oa(r)):s=!1,Xn(r,a),ir(r,d,_),th(r,d,_,a),sh(null,r,d,!0,s,a);case 19:return rn(s,r,a);case 22:return Jd(s,r,a)}throw Error(i(156,r.tag))};function od(s,r){return Fi(s,r)}function Ka(s,r,a,d){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(s,r,a,d){return new Ka(s,r,a,d)}function zl(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Bt(s){if(typeof s=="function")return zl(s)?1:0;if(s!=null){if(s=s.$$typeof,s===En)return 11;if(s===Ot)return 14}return 2}function Ni(s,r){var a=s.alternate;return a===null?(a=bs(s.tag,r,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=r,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&14680064,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,r=s.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a}function $o(s,r,a,d,_,m){var O=2;if(d=s,typeof s=="function")zl(s)&&(O=1);else if(typeof s=="string")O=5;else e:switch(s){case ot:return Qo(a.children,_,m,r);case Oe:O=8,_|=8;break;case ht:return s=bs(12,a,r,_|2),s.elementType=ht,s.lanes=m,s;case ln:return s=bs(13,a,r,_),s.elementType=ln,s.lanes=m,s;case it:return s=bs(19,a,r,_),s.elementType=it,s.lanes=m,s;case kt:return Pr(a,_,m,r);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ct:O=10;break e;case wn:O=9;break e;case En:O=11;break e;case Ot:O=14;break e;case Ft:O=16,d=null;break e}throw Error(i(130,s==null?s:typeof s,""))}return r=bs(O,a,r,_),r.elementType=s,r.type=d,r.lanes=m,r}function Qo(s,r,a,d){return s=bs(7,s,d,r),s.lanes=a,s}function Pr(s,r,a,d){return s=bs(22,s,d,r),s.elementType=kt,s.lanes=a,s.stateNode={isHidden:!1},s}function ld(s,r,a){return s=bs(6,s,null,r),s.lanes=a,s}function Th(s,r,a){return r=bs(4,s.children!==null?s.children:[],s.key,r),r.lanes=a,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}function xs(s,r,a,d,_){this.tag=r,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gi(0),this.expirationTimes=Gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.identifierPrefix=d,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Ja(s,r,a,d,_,m,O,k,P){return s=new xs(s,r,a,k,P),r===1?(r=1,m===!0&&(r|=8)):r=0,m=bs(3,null,null,r),s.current=m,m.stateNode=s,m.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ya(m),s}function nu(s,r,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$t,key:d==null?null:""+d,children:s,containerInfo:r,implementation:a}}function Eh(s){if(!s)return Oi;s=s._reactInternals;e:{if(Us(s)!==s||s.tag!==1)throw Error(i(170));var r=s;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(ns(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(i(171))}if(s.tag===1){var a=s.type;if(ns(a))return Yu(s,a,r)}return r}function su(s,r,a,d,_,m,O,k,P){return s=Ja(a,d,!0,s,_,m,O,k,P),s.context=Eh(null),a=s.current,d=Ps(),_=Jo(a),m=Ri(d,_),m.callback=r??null,yi(a,m,_),s.current.lanes=_,Vi(s,_,d),Ys(s,d),s}function Zo(s,r,a,d){var _=r.current,m=Ps(),O=Jo(_);return a=Eh(a),r.context===null?r.context=a:r.pendingContext=a,r=Ri(m,O),r.payload={element:s},d=d===void 0?null:d,d!==null&&(r.callback=d),s=yi(_,r,O),s!==null&&(rr(s,_,O,m),wl(s,_,O)),O}function Ih(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function cp(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<r?a:r}}function el(s,r){cp(s,r),(s=s.alternate)&&cp(s,r)}function up(){return null}var ad=typeof reportError=="function"?reportError:function(s){console.error(s)};function ai(s){this._internalRoot=s}Xl.prototype.render=ai.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));Zo(s,r,null,null)},Xl.prototype.unmount=ai.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;qo(function(){Zo(null,s,null,null)}),r[ii]=null}};function Xl(s){this._internalRoot=s}Xl.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ao();s={blockedOn:null,target:s,priority:r};for(var a=0;a<Zs.length&&r!==0&&r<Zs[a].priority;a++);Zs.splice(a,0,s),a===0&&dl(s)}};function bh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function iu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function hp(){}function sg(s,r,a,d,_){if(_){if(typeof d=="function"){var m=d;d=function(){var Q=Ih(O);m.call(Q)}}var O=su(r,d,s,0,null,!1,!1,"",hp);return s._reactRootContainer=O,s[ii]=O.current,Ei(s.nodeType===8?s.parentNode:s),qo(),O}for(;_=s.lastChild;)s.removeChild(_);if(typeof d=="function"){var k=d;d=function(){var Q=Ih(P);k.call(Q)}}var P=Ja(s,0,!1,null,null,!1,!1,"",hp);return s._reactRootContainer=P,s[ii]=P.current,Ei(s.nodeType===8?s.parentNode:s),qo(function(){Zo(r,P,a,d)}),P}function qa(s,r,a,d,_){var m=a._reactRootContainer;if(m){var O=m;if(typeof _=="function"){var k=_;_=function(){var P=Ih(O);k.call(P)}}Zo(r,O,s,_)}else O=sg(a,r,s,_,d);return Ih(O)}sa=function(s){switch(s.tag){case 3:var r=s.stateNode;if(r.current.memoizedState.isDehydrated){var a=Kt(r.pendingLanes);a!==0&&(hl(r,a|1),Ys(r,sn()),!(At&6)&&(Fl=sn()+500,Ce()))}break;case 13:qo(function(){var d=Ns(s,1);if(d!==null){var _=Ps();rr(d,s,1,_)}}),el(s,1)}},Lo=function(s){if(s.tag===13){var r=Ns(s,134217728);if(r!==null){var a=Ps();rr(r,s,134217728,a)}el(s,134217728)}},gi=function(s){if(s.tag===13){var r=Jo(s),a=Ns(s,r);if(a!==null){var d=Ps();rr(a,s,r,d)}el(s,r)}},Ao=function(){return vt},zi=function(s,r){var a=vt;try{return vt=s,r()}finally{vt=a}},di=function(s,r,a){switch(r){case"input":if(ci(s,a),r=a.name,a.type==="radio"&&r!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var d=a[r];if(d!==s&&d.form===s.form){var _=bi(d);if(!_)throw Error(i(90));Fr(d),ci(d,_)}}}break;case"textarea":Mn(s,a);break;case"select":r=a.value,r!=null&&It(s,!!a.multiple,r,!1)}},ue=fh,we=qo;var Jn={usingClientEntryPoint:!1,Events:[$s,rs,bi,N,X,fh]},Ss={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dp={bundleType:Ss.bundleType,version:Ss.version,rendererPackageName:Ss.rendererPackageName,rendererConfig:Ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nt.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Pn(s),s===null?null:s.stateNode},findFiberByHostInstance:Ss.findFiberByHostInstance||up,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{fr=ru.inject(dp),Rs=ru}catch{}}return cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jn,cr.createPortal=function(s,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(r))throw Error(i(200));return nu(s,r,null,a)},cr.createRoot=function(s,r){if(!bh(s))throw Error(i(299));var a=!1,d="",_=ad;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Ja(s,1,!1,null,null,a,!1,d,_),s[ii]=r.current,Ei(s.nodeType===8?s.parentNode:s),new ai(r)},cr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=Pn(r),s=s===null?null:s.stateNode,s},cr.flushSync=function(s){return qo(s)},cr.hydrate=function(s,r,a){if(!iu(r))throw Error(i(200));return qa(null,s,r,!0,a)},cr.hydrateRoot=function(s,r,a){if(!bh(s))throw Error(i(405));var d=a!=null&&a.hydratedSources||null,_=!1,m="",O=ad;if(a!=null&&(a.unstable_strictMode===!0&&(_=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),r=su(r,null,s,1,a??null,_,!1,m,O),s[ii]=r.current,Ei(s),d)for(s=0;s<d.length;s++)a=d[s],_=a._getVersion,_=_(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,_]:r.mutableSourceEagerHydrationData.push(a,_);return new Xl(r)},cr.render=function(s,r,a){if(!iu(r))throw Error(i(200));return qa(null,s,r,!1,a)},cr.unmountComponentAtNode=function(s){if(!iu(s))throw Error(i(40));return s._reactRootContainer?(qo(function(){qa(null,null,s,!1,function(){s._reactRootContainer=null,s[ii]=null})}),!0):!1},cr.unstable_batchedUpdates=fh,cr.unstable_renderSubtreeIntoContainer=function(s,r,a,d){if(!iu(a))throw Error(i(200));if(s==null||s._reactInternals===void 0)throw Error(i(38));return qa(s,r,a,!1,d)},cr.version="18.3.1-next-f1338f8080-20240426",cr}var U$;function AI(){if(U$)return ef.exports;U$=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(l){console.error(l)}}return h(),ef.exports=LI(),ef.exports}var F$;function kI(){if(F$)return yg;F$=1;var h=AI();return yg.createRoot=h.createRoot,yg.hydrateRoot=h.hydrateRoot,yg}var wI=kI(),Lp={},H$;function NI(){if(H$)return Lp;H$=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.parse=C,Lp.serialize=D;const h=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,l=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,u=/^[\u0020-\u003A\u003D-\u007E]*$/,f=Object.prototype.toString,I=(()=>{const Y=function(){};return Y.prototype=Object.create(null),Y})();function C(Y,fe){const re=new I,be=Y.length;if(be<2)return re;const oe=(fe==null?void 0:fe.decode)||te;let de=0;do{const Le=Y.indexOf("=",de);if(Le===-1)break;const ke=Y.indexOf(";",de),nt=ke===-1?be:ke;if(Le>nt){de=Y.lastIndexOf(";",Le-1)+1;continue}const _t=A(Y,de,Le),$t=L(Y,Le,_t),ot=Y.slice(_t,$t);if(re[ot]===void 0){let Oe=A(Y,Le+1,nt),ht=L(Y,nt,Oe);const Ct=oe(Y.slice(Oe,ht));re[ot]=Ct}de=nt+1}while(de<be);return re}function A(Y,fe,re){do{const be=Y.charCodeAt(fe);if(be!==32&&be!==9)return fe}while(++fe<re);return re}function L(Y,fe,re){for(;fe>re;){const be=Y.charCodeAt(--fe);if(be!==32&&be!==9)return fe+1}return re}function D(Y,fe,re){const be=(re==null?void 0:re.encode)||encodeURIComponent;if(!h.test(Y))throw new TypeError(`argument name is invalid: ${Y}`);const oe=be(fe);if(!l.test(oe))throw new TypeError(`argument val is invalid: ${fe}`);let de=Y+"="+oe;if(!re)return de;if(re.maxAge!==void 0){if(!Number.isInteger(re.maxAge))throw new TypeError(`option maxAge is invalid: ${re.maxAge}`);de+="; Max-Age="+re.maxAge}if(re.domain){if(!i.test(re.domain))throw new TypeError(`option domain is invalid: ${re.domain}`);de+="; Domain="+re.domain}if(re.path){if(!u.test(re.path))throw new TypeError(`option path is invalid: ${re.path}`);de+="; Path="+re.path}if(re.expires){if(!se(re.expires)||!Number.isFinite(re.expires.valueOf()))throw new TypeError(`option expires is invalid: ${re.expires}`);de+="; Expires="+re.expires.toUTCString()}if(re.httpOnly&&(de+="; HttpOnly"),re.secure&&(de+="; Secure"),re.partitioned&&(de+="; Partitioned"),re.priority)switch(typeof re.priority=="string"?re.priority.toLowerCase():void 0){case"low":de+="; Priority=Low";break;case"medium":de+="; Priority=Medium";break;case"high":de+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${re.priority}`)}if(re.sameSite)switch(typeof re.sameSite=="string"?re.sameSite.toLowerCase():re.sameSite){case!0:case"strict":de+="; SameSite=Strict";break;case"lax":de+="; SameSite=Lax";break;case"none":de+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${re.sameSite}`)}return de}function te(Y){if(Y.indexOf("%")===-1)return Y;try{return decodeURIComponent(Y)}catch{return Y}}function se(Y){return f.call(Y)==="[object Date]"}return Lp}NI();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var G$="popstate";function MI(h={}){function l(u,f){let{pathname:I,search:C,hash:A}=u.location;return ff("",{pathname:I,search:C,hash:A},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function i(u,f){return typeof f=="string"?f:Np(f)}return PI(l,i,null,h)}function kn(h,l){if(h===!1||h===null||typeof h>"u")throw new Error(l)}function ol(h,l){if(!h){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function DI(){return Math.random().toString(36).substring(2,10)}function V$(h,l){return{usr:h.state,key:h.key,idx:l}}function ff(h,l,i=null,u){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof l=="string"?yd(l):l,state:i,key:l&&l.key||u||DI()}}function Np({pathname:h="/",search:l="",hash:i=""}){return l&&l!=="?"&&(h+=l.charAt(0)==="?"?l:"?"+l),i&&i!=="#"&&(h+=i.charAt(0)==="#"?i:"#"+i),h}function yd(h){let l={};if(h){let i=h.indexOf("#");i>=0&&(l.hash=h.substring(i),h=h.substring(0,i));let u=h.indexOf("?");u>=0&&(l.search=h.substring(u),h=h.substring(0,u)),h&&(l.pathname=h)}return l}function PI(h,l,i,u={}){let{window:f=document.defaultView,v5Compat:I=!1}=u,C=f.history,A="POP",L=null,D=te();D==null&&(D=0,C.replaceState({...C.state,idx:D},""));function te(){return(C.state||{idx:null}).idx}function se(){A="POP";let oe=te(),de=oe==null?null:oe-D;D=oe,L&&L({action:A,location:be.location,delta:de})}function Y(oe,de){A="PUSH";let Le=ff(be.location,oe,de);D=te()+1;let ke=V$(Le,D),nt=be.createHref(Le);try{C.pushState(ke,"",nt)}catch(_t){if(_t instanceof DOMException&&_t.name==="DataCloneError")throw _t;f.location.assign(nt)}I&&L&&L({action:A,location:be.location,delta:1})}function fe(oe,de){A="REPLACE";let Le=ff(be.location,oe,de);D=te();let ke=V$(Le,D),nt=be.createHref(Le);C.replaceState(ke,"",nt),I&&L&&L({action:A,location:be.location,delta:0})}function re(oe){let de=f.location.origin!=="null"?f.location.origin:f.location.href,Le=typeof oe=="string"?oe:Np(oe);return Le=Le.replace(/ $/,"%20"),kn(de,`No window.location.(origin|href) available to create URL for href: ${Le}`),new URL(Le,de)}let be={get action(){return A},get location(){return h(f,C)},listen(oe){if(L)throw new Error("A history only accepts one active listener");return f.addEventListener(G$,se),L=oe,()=>{f.removeEventListener(G$,se),L=null}},createHref(oe){return l(f,oe)},createURL:re,encodeLocation(oe){let de=re(oe);return{pathname:de.pathname,search:de.search,hash:de.hash}},push:Y,replace:fe,go(oe){return C.go(oe)}};return be}function LT(h,l,i="/"){return xI(h,l,i,!1)}function xI(h,l,i,u){let f=typeof l=="string"?yd(l):l,I=Tu(f.pathname||"/",i);if(I==null)return null;let C=AT(h);BI(C);let A=null;for(let L=0;A==null&&L<C.length;++L){let D=KI(I);A=jI(C[L],D,u)}return A}function AT(h,l=[],i=[],u=""){let f=(I,C,A)=>{let L={relativePath:A===void 0?I.path||"":A,caseSensitive:I.caseSensitive===!0,childrenIndex:C,route:I};L.relativePath.startsWith("/")&&(kn(L.relativePath.startsWith(u),`Absolute route path "${L.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),L.relativePath=L.relativePath.slice(u.length));let D=uc([u,L.relativePath]),te=i.concat(L);I.children&&I.children.length>0&&(kn(I.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${D}".`),AT(I.children,l,te,D)),!(I.path==null&&!I.index)&&l.push({path:D,score:zI(D,I.index),routesMeta:te})};return h.forEach((I,C)=>{var A;if(I.path===""||!((A=I.path)!=null&&A.includes("?")))f(I,C);else for(let L of kT(I.path))f(I,C,L)}),l}function kT(h){let l=h.split("/");if(l.length===0)return[];let[i,...u]=l,f=i.endsWith("?"),I=i.replace(/\?$/,"");if(u.length===0)return f?[I,""]:[I];let C=kT(u.join("/")),A=[];return A.push(...C.map(L=>L===""?I:[I,L].join("/"))),f&&A.push(...C),A.map(L=>h.startsWith("/")&&L===""?"/":L)}function BI(h){h.sort((l,i)=>l.score!==i.score?i.score-l.score:XI(l.routesMeta.map(u=>u.childrenIndex),i.routesMeta.map(u=>u.childrenIndex)))}var UI=/^:[\w-]+$/,FI=3,HI=2,GI=1,VI=10,WI=-2,W$=h=>h==="*";function zI(h,l){let i=h.split("/"),u=i.length;return i.some(W$)&&(u+=WI),l&&(u+=HI),i.filter(f=>!W$(f)).reduce((f,I)=>f+(UI.test(I)?FI:I===""?GI:VI),u)}function XI(h,l){return h.length===l.length&&h.slice(0,-1).every((u,f)=>u===l[f])?h[h.length-1]-l[l.length-1]:0}function jI(h,l,i=!1){let{routesMeta:u}=h,f={},I="/",C=[];for(let A=0;A<u.length;++A){let L=u[A],D=A===u.length-1,te=I==="/"?l:l.slice(I.length)||"/",se=Gg({path:L.relativePath,caseSensitive:L.caseSensitive,end:D},te),Y=L.route;if(!se&&D&&i&&!u[u.length-1].route.index&&(se=Gg({path:L.relativePath,caseSensitive:L.caseSensitive,end:!1},te)),!se)return null;Object.assign(f,se.params),C.push({params:f,pathname:uc([I,se.pathname]),pathnameBase:ZI(uc([I,se.pathnameBase])),route:Y}),se.pathnameBase!=="/"&&(I=uc([I,se.pathnameBase]))}return C}function Gg(h,l){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[i,u]=YI(h.path,h.caseSensitive,h.end),f=l.match(i);if(!f)return null;let I=f[0],C=I.replace(/(.)\/+$/,"$1"),A=f.slice(1);return{params:u.reduce((D,{paramName:te,isOptional:se},Y)=>{if(te==="*"){let re=A[Y]||"";C=I.slice(0,I.length-re.length).replace(/(.)\/+$/,"$1")}const fe=A[Y];return se&&!fe?D[te]=void 0:D[te]=(fe||"").replace(/%2F/g,"/"),D},{}),pathname:I,pathnameBase:C,pattern:h}}function YI(h,l=!1,i=!0){ol(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let u=[],f="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,A,L)=>(u.push({paramName:A,isOptional:L!=null}),L?"/?([^\\/]+)?":"/([^\\/]+)"));return h.endsWith("*")?(u.push({paramName:"*"}),f+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?f+="\\/*$":h!==""&&h!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,l?void 0:"i"),u]}function KI(h){try{return h.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return ol(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),h}}function Tu(h,l){if(l==="/")return h;if(!h.toLowerCase().startsWith(l.toLowerCase()))return null;let i=l.endsWith("/")?l.length-1:l.length,u=h.charAt(i);return u&&u!=="/"?null:h.slice(i)||"/"}function JI(h,l="/"){let{pathname:i,search:u="",hash:f=""}=typeof h=="string"?yd(h):h;return{pathname:i?i.startsWith("/")?i:qI(i,l):l,search:eb(u),hash:tb(f)}}function qI(h,l){let i=l.replace(/\/+$/,"").split("/");return h.split("/").forEach(f=>{f===".."?i.length>1&&i.pop():f!=="."&&i.push(f)}),i.length>1?i.join("/"):"/"}function sf(h,l,i,u){return`Cannot include a '${h}' character in a manually specified \`to.${l}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QI(h){return h.filter((l,i)=>i===0||l.route.path&&l.route.path.length>0)}function vf(h){let l=QI(h);return l.map((i,u)=>u===l.length-1?i.pathname:i.pathnameBase)}function Cf(h,l,i,u=!1){let f;typeof h=="string"?f=yd(h):(f={...h},kn(!f.pathname||!f.pathname.includes("?"),sf("?","pathname","search",f)),kn(!f.pathname||!f.pathname.includes("#"),sf("#","pathname","hash",f)),kn(!f.search||!f.search.includes("#"),sf("#","search","hash",f)));let I=h===""||f.pathname==="",C=I?"/":f.pathname,A;if(C==null)A=i;else{let se=l.length-1;if(!u&&C.startsWith("..")){let Y=C.split("/");for(;Y[0]==="..";)Y.shift(),se-=1;f.pathname=Y.join("/")}A=se>=0?l[se]:"/"}let L=JI(f,A),D=C&&C!=="/"&&C.endsWith("/"),te=(I||C===".")&&i.endsWith("/");return!L.pathname.endsWith("/")&&(D||te)&&(L.pathname+="/"),L}var uc=h=>h.join("/").replace(/\/\/+/g,"/"),ZI=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),eb=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,tb=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function nb(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var wT=["POST","PUT","PATCH","DELETE"];new Set(wT);var sb=["GET",...wT];new Set(sb);var vd=he.createContext(null);vd.displayName="DataRouter";var qg=he.createContext(null);qg.displayName="DataRouterState";var NT=he.createContext({isTransitioning:!1});NT.displayName="ViewTransition";var ib=he.createContext(new Map);ib.displayName="Fetchers";var rb=he.createContext(null);rb.displayName="Await";var ll=he.createContext(null);ll.displayName="Navigation";var xp=he.createContext(null);xp.displayName="Location";var al=he.createContext({outlet:null,matches:[],isDataRoute:!1});al.displayName="Route";var Lf=he.createContext(null);Lf.displayName="RouteError";function ob(h,{relative:l}={}){kn(Cd(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:u}=he.useContext(ll),{hash:f,pathname:I,search:C}=Bp(h,{relative:l}),A=I;return i!=="/"&&(A=I==="/"?i:uc([i,I])),u.createHref({pathname:A,search:C,hash:f})}function Cd(){return he.useContext(xp)!=null}function Eu(){return kn(Cd(),"useLocation() may be used only in the context of a <Router> component."),he.useContext(xp).location}var MT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DT(h){he.useContext(ll).static||he.useLayoutEffect(h)}function Af(){let{isDataRoute:h}=he.useContext(al);return h?Ib():lb()}function lb(){kn(Cd(),"useNavigate() may be used only in the context of a <Router> component.");let h=he.useContext(vd),{basename:l,navigator:i}=he.useContext(ll),{matches:u}=he.useContext(al),{pathname:f}=Eu(),I=JSON.stringify(vf(u)),C=he.useRef(!1);return DT(()=>{C.current=!0}),he.useCallback((L,D={})=>{if(ol(C.current,MT),!C.current)return;if(typeof L=="number"){i.go(L);return}let te=Cf(L,JSON.parse(I),f,D.relative==="path");h==null&&l!=="/"&&(te.pathname=te.pathname==="/"?l:uc([l,te.pathname])),(D.replace?i.replace:i.push)(te,D.state,D)},[l,i,I,f,h])}var ab=he.createContext(null);function cb(h){let l=he.useContext(al).outlet;return l&&he.createElement(ab.Provider,{value:h},l)}function Bp(h,{relative:l}={}){let{matches:i}=he.useContext(al),{pathname:u}=Eu(),f=JSON.stringify(vf(i));return he.useMemo(()=>Cf(h,JSON.parse(f),u,l==="path"),[h,f,u,l])}function ub(h,l){return PT(h,l)}function PT(h,l,i,u){var Le;kn(Cd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f,static:I}=he.useContext(ll),{matches:C}=he.useContext(al),A=C[C.length-1],L=A?A.params:{},D=A?A.pathname:"/",te=A?A.pathnameBase:"/",se=A&&A.route;{let ke=se&&se.path||"";xT(D,!se||ke.endsWith("*")||ke.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${D}" (under <Route path="${ke}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ke}"> to <Route path="${ke==="/"?"*":`${ke}/*`}">.`)}let Y=Eu(),fe;if(l){let ke=typeof l=="string"?yd(l):l;kn(te==="/"||((Le=ke.pathname)==null?void 0:Le.startsWith(te)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${te}" but pathname "${ke.pathname}" was given in the \`location\` prop.`),fe=ke}else fe=Y;let re=fe.pathname||"/",be=re;if(te!=="/"){let ke=te.replace(/^\//,"").split("/");be="/"+re.replace(/^\//,"").split("/").slice(ke.length).join("/")}let oe=!I&&i&&i.matches&&i.matches.length>0?i.matches:LT(h,{pathname:be});ol(se||oe!=null,`No routes matched location "${fe.pathname}${fe.search}${fe.hash}" `),ol(oe==null||oe[oe.length-1].route.element!==void 0||oe[oe.length-1].route.Component!==void 0||oe[oe.length-1].route.lazy!==void 0,`Matched leaf route at location "${fe.pathname}${fe.search}${fe.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let de=_b(oe&&oe.map(ke=>Object.assign({},ke,{params:Object.assign({},L,ke.params),pathname:uc([te,f.encodeLocation?f.encodeLocation(ke.pathname).pathname:ke.pathname]),pathnameBase:ke.pathnameBase==="/"?te:uc([te,f.encodeLocation?f.encodeLocation(ke.pathnameBase).pathname:ke.pathnameBase])})),C,i,u);return l&&de?he.createElement(xp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...fe},navigationType:"POP"}},de):de}function hb(){let h=Eb(),l=nb(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),i=h instanceof Error?h.stack:null,u="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:u},I={padding:"2px 4px",backgroundColor:u},C=null;return console.error("Error handled by React Router default ErrorBoundary:",h),C=he.createElement(he.Fragment,null,he.createElement("p",null,"💿 Hey developer 👋"),he.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",he.createElement("code",{style:I},"ErrorBoundary")," or"," ",he.createElement("code",{style:I},"errorElement")," prop on your route.")),he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},l),i?he.createElement("pre",{style:f},i):null,C)}var db=he.createElement(hb,null),pb=class extends he.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,l){return l.location!==h.location||l.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:l.error,location:l.location,revalidation:h.revalidation||l.revalidation}}componentDidCatch(h,l){console.error("React Router caught the following error during render",h,l)}render(){return this.state.error!==void 0?he.createElement(al.Provider,{value:this.props.routeContext},he.createElement(Lf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gb({routeContext:h,match:l,children:i}){let u=he.useContext(vd);return u&&u.static&&u.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=l.route.id),he.createElement(al.Provider,{value:h},i)}function _b(h,l=[],i=null,u=null){if(h==null){if(!i)return null;if(i.errors)h=i.matches;else if(l.length===0&&!i.initialized&&i.matches.length>0)h=i.matches;else return null}let f=h,I=i==null?void 0:i.errors;if(I!=null){let L=f.findIndex(D=>D.route.id&&(I==null?void 0:I[D.route.id])!==void 0);kn(L>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(I).join(",")}`),f=f.slice(0,Math.min(f.length,L+1))}let C=!1,A=-1;if(i)for(let L=0;L<f.length;L++){let D=f[L];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(A=L),D.route.id){let{loaderData:te,errors:se}=i,Y=D.route.loader&&!te.hasOwnProperty(D.route.id)&&(!se||se[D.route.id]===void 0);if(D.route.lazy||Y){C=!0,A>=0?f=f.slice(0,A+1):f=[f[0]];break}}}return f.reduceRight((L,D,te)=>{let se,Y=!1,fe=null,re=null;i&&(se=I&&D.route.id?I[D.route.id]:void 0,fe=D.route.errorElement||db,C&&(A<0&&te===0?(xT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,re=null):A===te&&(Y=!0,re=D.route.hydrateFallbackElement||null)));let be=l.concat(f.slice(0,te+1)),oe=()=>{let de;return se?de=fe:Y?de=re:D.route.Component?de=he.createElement(D.route.Component,null):D.route.element?de=D.route.element:de=L,he.createElement(gb,{match:D,routeContext:{outlet:L,matches:be,isDataRoute:i!=null},children:de})};return i&&(D.route.ErrorBoundary||D.route.errorElement||te===0)?he.createElement(pb,{location:i.location,revalidation:i.revalidation,component:fe,error:se,children:oe(),routeContext:{outlet:null,matches:be,isDataRoute:!0}}):oe()},null)}function kf(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fb(h){let l=he.useContext(vd);return kn(l,kf(h)),l}function mb(h){let l=he.useContext(qg);return kn(l,kf(h)),l}function $b(h){let l=he.useContext(al);return kn(l,kf(h)),l}function wf(h){let l=$b(h),i=l.matches[l.matches.length-1];return kn(i.route.id,`${h} can only be used on routes that contain a unique "id"`),i.route.id}function Tb(){return wf("useRouteId")}function Eb(){var u;let h=he.useContext(Lf),l=mb("useRouteError"),i=wf("useRouteError");return h!==void 0?h:(u=l.errors)==null?void 0:u[i]}function Ib(){let{router:h}=fb("useNavigate"),l=wf("useNavigate"),i=he.useRef(!1);return DT(()=>{i.current=!0}),he.useCallback(async(f,I={})=>{ol(i.current,MT),i.current&&(typeof f=="number"?h.navigate(f):await h.navigate(f,{fromRouteId:l,...I}))},[h,l])}var z$={};function xT(h,l,i){!l&&!z$[h]&&(z$[h]=!0,ol(!1,i))}he.memo(bb);function bb({routes:h,future:l,state:i}){return PT(h,void 0,i,l)}function BT({to:h,replace:l,state:i,relative:u}){kn(Cd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:f}=he.useContext(ll);ol(!f,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:I}=he.useContext(al),{pathname:C}=Eu(),A=Af(),L=Cf(h,vf(I),C,u==="path"),D=JSON.stringify(L);return he.useEffect(()=>{A(JSON.parse(D),{replace:l,state:i,relative:u})},[A,D,u,l,i]),null}function Sb(h){return cb(h.context)}function il(h){kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ob({basename:h="/",children:l=null,location:i,navigationType:u="POP",navigator:f,static:I=!1}){kn(!Cd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let C=h.replace(/^\/*/,"/"),A=he.useMemo(()=>({basename:C,navigator:f,static:I,future:{}}),[C,f,I]);typeof i=="string"&&(i=yd(i));let{pathname:L="/",search:D="",hash:te="",state:se=null,key:Y="default"}=i,fe=he.useMemo(()=>{let re=Tu(L,C);return re==null?null:{location:{pathname:re,search:D,hash:te,state:se,key:Y},navigationType:u}},[C,L,D,te,se,Y,u]);return ol(fe!=null,`<Router basename="${C}"> is not able to match the URL "${L}${D}${te}" because it does not start with the basename, so the <Router> won't render anything.`),fe==null?null:he.createElement(ll.Provider,{value:A},he.createElement(xp.Provider,{children:l,value:fe}))}function Rb({children:h,location:l}){return ub(mf(h),l)}function mf(h,l=[]){let i=[];return he.Children.forEach(h,(u,f)=>{if(!he.isValidElement(u))return;let I=[...l,f];if(u.type===he.Fragment){i.push.apply(i,mf(u.props.children,I));return}kn(u.type===il,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kn(!u.props.index||!u.props.children,"An index route cannot have child routes.");let C={id:u.props.id||I.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(C.children=mf(u.props.children,I)),i.push(C)}),i}var Ag="get",kg="application/x-www-form-urlencoded";function Qg(h){return h!=null&&typeof h.tagName=="string"}function yb(h){return Qg(h)&&h.tagName.toLowerCase()==="button"}function vb(h){return Qg(h)&&h.tagName.toLowerCase()==="form"}function Cb(h){return Qg(h)&&h.tagName.toLowerCase()==="input"}function Lb(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function Ab(h,l){return h.button===0&&(!l||l==="_self")&&!Lb(h)}var vg=null;function kb(){if(vg===null)try{new FormData(document.createElement("form"),0),vg=!1}catch{vg=!0}return vg}var wb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rf(h){return h!=null&&!wb.has(h)?(ol(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kg}"`),null):h}function Nb(h,l){let i,u,f,I,C;if(vb(h)){let A=h.getAttribute("action");u=A?Tu(A,l):null,i=h.getAttribute("method")||Ag,f=rf(h.getAttribute("enctype"))||kg,I=new FormData(h)}else if(yb(h)||Cb(h)&&(h.type==="submit"||h.type==="image")){let A=h.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let L=h.getAttribute("formaction")||A.getAttribute("action");if(u=L?Tu(L,l):null,i=h.getAttribute("formmethod")||A.getAttribute("method")||Ag,f=rf(h.getAttribute("formenctype"))||rf(A.getAttribute("enctype"))||kg,I=new FormData(A,h),!kb()){let{name:D,type:te,value:se}=h;if(te==="image"){let Y=D?`${D}.`:"";I.append(`${Y}x`,"0"),I.append(`${Y}y`,"0")}else D&&I.append(D,se)}}else{if(Qg(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Ag,u=null,f=kg,C=h}return I&&f==="text/plain"&&(C=I,I=void 0),{action:u,method:i.toLowerCase(),encType:f,formData:I,body:C}}function Nf(h,l){if(h===!1||h===null||typeof h>"u")throw new Error(l)}async function Mb(h,l){if(h.id in l)return l[h.id];try{let i=await import(h.module);return l[h.id]=i,i}catch(i){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Db(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function Pb(h,l,i){let u=await Promise.all(h.map(async f=>{let I=l.routes[f.route.id];if(I){let C=await Mb(I,i);return C.links?C.links():[]}return[]}));return Fb(u.flat(1).filter(Db).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function X$(h,l,i,u,f,I){let C=(L,D)=>i[D]?L.route.id!==i[D].route.id:!0,A=(L,D)=>{var te;return i[D].pathname!==L.pathname||((te=i[D].route.path)==null?void 0:te.endsWith("*"))&&i[D].params["*"]!==L.params["*"]};return I==="assets"?l.filter((L,D)=>C(L,D)||A(L,D)):I==="data"?l.filter((L,D)=>{var se;let te=u.routes[L.route.id];if(!te||!te.hasLoader)return!1;if(C(L,D)||A(L,D))return!0;if(L.route.shouldRevalidate){let Y=L.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:((se=i[0])==null?void 0:se.params)||{},nextUrl:new URL(h,window.origin),nextParams:L.params,defaultShouldRevalidate:!0});if(typeof Y=="boolean")return Y}return!0}):[]}function xb(h,l){return Bb(h.map(i=>{let u=l.routes[i.route.id];if(!u)return[];let f=[u.module];return u.imports&&(f=f.concat(u.imports)),f}).flat(1))}function Bb(h){return[...new Set(h)]}function Ub(h){let l={},i=Object.keys(h).sort();for(let u of i)l[u]=h[u];return l}function Fb(h,l){let i=new Set;return new Set(l),h.reduce((u,f)=>{let I=JSON.stringify(Ub(f));return i.has(I)||(i.add(I),u.push({key:I,link:f})),u},[])}function Hb(h){let l=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return l.pathname==="/"?l.pathname="_root.data":l.pathname=`${l.pathname.replace(/\/$/,"")}.data`,l}function Gb(){let h=he.useContext(vd);return Nf(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function Vb(){let h=he.useContext(qg);return Nf(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var Mf=he.createContext(void 0);Mf.displayName="FrameworkContext";function UT(){let h=he.useContext(Mf);return Nf(h,"You must render this element inside a <HydratedRouter> element"),h}function Wb(h,l){let i=he.useContext(Mf),[u,f]=he.useState(!1),[I,C]=he.useState(!1),{onFocus:A,onBlur:L,onMouseEnter:D,onMouseLeave:te,onTouchStart:se}=l,Y=he.useRef(null);he.useEffect(()=>{if(h==="render"&&C(!0),h==="viewport"){let be=de=>{de.forEach(Le=>{C(Le.isIntersecting)})},oe=new IntersectionObserver(be,{threshold:.5});return Y.current&&oe.observe(Y.current),()=>{oe.disconnect()}}},[h]),he.useEffect(()=>{if(u){let be=setTimeout(()=>{C(!0)},100);return()=>{clearTimeout(be)}}},[u]);let fe=()=>{f(!0)},re=()=>{f(!1),C(!1)};return i?h!=="intent"?[I,Y,{}]:[I,Y,{onFocus:Ap(A,fe),onBlur:Ap(L,re),onMouseEnter:Ap(D,fe),onMouseLeave:Ap(te,re),onTouchStart:Ap(se,fe)}]:[!1,Y,{}]}function Ap(h,l){return i=>{h&&h(i),i.defaultPrevented||l(i)}}function zb({page:h,...l}){let{router:i}=Gb(),u=he.useMemo(()=>LT(i.routes,h,i.basename),[i.routes,h,i.basename]);return u?he.createElement(jb,{page:h,matches:u,...l}):null}function Xb(h){let{manifest:l,routeModules:i}=UT(),[u,f]=he.useState([]);return he.useEffect(()=>{let I=!1;return Pb(h,l,i).then(C=>{I||f(C)}),()=>{I=!0}},[h,l,i]),u}function jb({page:h,matches:l,...i}){let u=Eu(),{manifest:f,routeModules:I}=UT(),{loaderData:C,matches:A}=Vb(),L=he.useMemo(()=>X$(h,l,A,f,u,"data"),[h,l,A,f,u]),D=he.useMemo(()=>X$(h,l,A,f,u,"assets"),[h,l,A,f,u]),te=he.useMemo(()=>{if(h===u.pathname+u.search+u.hash)return[];let fe=new Set,re=!1;if(l.forEach(oe=>{var Le;let de=f.routes[oe.route.id];!de||!de.hasLoader||(!L.some(ke=>ke.route.id===oe.route.id)&&oe.route.id in C&&((Le=I[oe.route.id])!=null&&Le.shouldRevalidate)||de.hasClientLoader?re=!0:fe.add(oe.route.id))}),fe.size===0)return[];let be=Hb(h);return re&&fe.size>0&&be.searchParams.set("_routes",l.filter(oe=>fe.has(oe.route.id)).map(oe=>oe.route.id).join(",")),[be.pathname+be.search]},[C,u,f,L,l,h,I]),se=he.useMemo(()=>xb(D,f),[D,f]),Y=Xb(D);return he.createElement(he.Fragment,null,te.map(fe=>he.createElement("link",{key:fe,rel:"prefetch",as:"fetch",href:fe,...i})),se.map(fe=>he.createElement("link",{key:fe,rel:"modulepreload",href:fe,...i})),Y.map(({key:fe,link:re})=>he.createElement("link",{key:fe,...re})))}function Yb(...h){return l=>{h.forEach(i=>{typeof i=="function"?i(l):i!=null&&(i.current=l)})}}var FT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FT&&(window.__reactRouterVersion="7.1.5")}catch{}function Kb({basename:h,children:l,window:i}){let u=he.useRef();u.current==null&&(u.current=MI({window:i,v5Compat:!0}));let f=u.current,[I,C]=he.useState({action:f.action,location:f.location}),A=he.useCallback(L=>{he.startTransition(()=>C(L))},[C]);return he.useLayoutEffect(()=>f.listen(A),[f,A]),he.createElement(Ob,{basename:h,children:l,location:I.location,navigationType:I.action,navigator:f})}var HT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pu=he.forwardRef(function({onClick:l,discover:i="render",prefetch:u="none",relative:f,reloadDocument:I,replace:C,state:A,target:L,to:D,preventScrollReset:te,viewTransition:se,...Y},fe){let{basename:re}=he.useContext(ll),be=typeof D=="string"&&HT.test(D),oe,de=!1;if(typeof D=="string"&&be&&(oe=D,FT))try{let ht=new URL(window.location.href),Ct=D.startsWith("//")?new URL(ht.protocol+D):new URL(D),wn=Tu(Ct.pathname,re);Ct.origin===ht.origin&&wn!=null?D=wn+Ct.search+Ct.hash:de=!0}catch{ol(!1,`<Link to="${D}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Le=ob(D,{relative:f}),[ke,nt,_t]=Wb(u,Y),$t=Zb(D,{replace:C,state:A,target:L,preventScrollReset:te,relative:f,viewTransition:se});function ot(ht){l&&l(ht),ht.defaultPrevented||$t(ht)}let Oe=he.createElement("a",{...Y,..._t,href:oe||Le,onClick:de||I?l:ot,ref:Yb(fe,nt),target:L,"data-discover":!be&&i==="render"?"true":void 0});return ke&&!be?he.createElement(he.Fragment,null,Oe,he.createElement(zb,{page:Le})):Oe});pu.displayName="Link";var Jb=he.forwardRef(function({"aria-current":l="page",caseSensitive:i=!1,className:u="",end:f=!1,style:I,to:C,viewTransition:A,children:L,...D},te){let se=Bp(C,{relative:D.relative}),Y=Eu(),fe=he.useContext(qg),{navigator:re,basename:be}=he.useContext(ll),oe=fe!=null&&iS(se)&&A===!0,de=re.encodeLocation?re.encodeLocation(se).pathname:se.pathname,Le=Y.pathname,ke=fe&&fe.navigation&&fe.navigation.location?fe.navigation.location.pathname:null;i||(Le=Le.toLowerCase(),ke=ke?ke.toLowerCase():null,de=de.toLowerCase()),ke&&be&&(ke=Tu(ke,be)||ke);const nt=de!=="/"&&de.endsWith("/")?de.length-1:de.length;let _t=Le===de||!f&&Le.startsWith(de)&&Le.charAt(nt)==="/",$t=ke!=null&&(ke===de||!f&&ke.startsWith(de)&&ke.charAt(de.length)==="/"),ot={isActive:_t,isPending:$t,isTransitioning:oe},Oe=_t?l:void 0,ht;typeof u=="function"?ht=u(ot):ht=[u,_t?"active":null,$t?"pending":null,oe?"transitioning":null].filter(Boolean).join(" ");let Ct=typeof I=="function"?I(ot):I;return he.createElement(pu,{...D,"aria-current":Oe,className:ht,ref:te,style:Ct,to:C,viewTransition:A},typeof L=="function"?L(ot):L)});Jb.displayName="NavLink";var qb=he.forwardRef(({discover:h="render",fetcherKey:l,navigate:i,reloadDocument:u,replace:f,state:I,method:C=Ag,action:A,onSubmit:L,relative:D,preventScrollReset:te,viewTransition:se,...Y},fe)=>{let re=nS(),be=sS(A,{relative:D}),oe=C.toLowerCase()==="get"?"get":"post",de=typeof A=="string"&&HT.test(A),Le=ke=>{if(L&&L(ke),ke.defaultPrevented)return;ke.preventDefault();let nt=ke.nativeEvent.submitter,_t=(nt==null?void 0:nt.getAttribute("formmethod"))||C;re(nt||ke.currentTarget,{fetcherKey:l,method:_t,navigate:i,replace:f,state:I,relative:D,preventScrollReset:te,viewTransition:se})};return he.createElement("form",{ref:fe,method:oe,action:be,onSubmit:u?L:Le,...Y,"data-discover":!de&&h==="render"?"true":void 0})});qb.displayName="Form";function Qb(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GT(h){let l=he.useContext(vd);return kn(l,Qb(h)),l}function Zb(h,{target:l,replace:i,state:u,preventScrollReset:f,relative:I,viewTransition:C}={}){let A=Af(),L=Eu(),D=Bp(h,{relative:I});return he.useCallback(te=>{if(Ab(te,l)){te.preventDefault();let se=i!==void 0?i:Np(L)===Np(D);A(h,{replace:se,state:u,preventScrollReset:f,relative:I,viewTransition:C})}},[L,A,D,i,u,l,h,f,I,C])}var eS=0,tS=()=>`__${String(++eS)}__`;function nS(){let{router:h}=GT("useSubmit"),{basename:l}=he.useContext(ll),i=Tb();return he.useCallback(async(u,f={})=>{let{action:I,method:C,encType:A,formData:L,body:D}=Nb(u,l);if(f.navigate===!1){let te=f.fetcherKey||tS();await h.fetch(te,i,f.action||I,{preventScrollReset:f.preventScrollReset,formData:L,body:D,formMethod:f.method||C,formEncType:f.encType||A,flushSync:f.flushSync})}else await h.navigate(f.action||I,{preventScrollReset:f.preventScrollReset,formData:L,body:D,formMethod:f.method||C,formEncType:f.encType||A,replace:f.replace,state:f.state,fromRouteId:i,flushSync:f.flushSync,viewTransition:f.viewTransition})},[h,l,i])}function sS(h,{relative:l}={}){let{basename:i}=he.useContext(ll),u=he.useContext(al);kn(u,"useFormAction must be used inside a RouteContext");let[f]=u.matches.slice(-1),I={...Bp(h||".",{relative:l})},C=Eu();if(h==null){I.search=C.search;let A=new URLSearchParams(I.search),L=A.getAll("index");if(L.some(te=>te==="")){A.delete("index"),L.filter(se=>se).forEach(se=>A.append("index",se));let te=A.toString();I.search=te?`?${te}`:""}}return(!h||h===".")&&f.route.index&&(I.search=I.search?I.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(I.pathname=I.pathname==="/"?i:uc([i,I.pathname])),Np(I)}function iS(h,l={}){let i=he.useContext(NT);kn(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=GT("useViewTransitionState"),f=Bp(h,{relative:l.relative});if(!i.isTransitioning)return!1;let I=Tu(i.currentLocation.pathname,u)||i.currentLocation.pathname,C=Tu(i.nextLocation.pathname,u)||i.nextLocation.pathname;return Gg(f.pathname,C)!=null||Gg(f.pathname,I)!=null}new TextEncoder;const rS=()=>Ae.jsxs("div",{className:"container mt-5",children:[Ae.jsx("h1",{children:"歡迎來到，首頁網頁。"}),Ae.jsx("p",{children:"這是一個教育網站。"})]}),oS=()=>Ae.jsxs("div",{className:"container mt-5",children:[Ae.jsx("h1",{children:"歡迎來到，課程網頁。"}),Ae.jsx("p",{children:"這是一個教育網站。"})]}),lS=()=>Ae.jsxs("div",{className:"container mt-5",children:[Ae.jsx("h1",{children:"歡迎來到，申請網頁。"}),Ae.jsx("p",{children:"這是一個教育網站。"})]});var j$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=function(h){const l=[];let i=0;for(let u=0;u<h.length;u++){let f=h.charCodeAt(u);f<128?l[i++]=f:f<2048?(l[i++]=f>>6|192,l[i++]=f&63|128):(f&64512)===55296&&u+1<h.length&&(h.charCodeAt(u+1)&64512)===56320?(f=65536+((f&1023)<<10)+(h.charCodeAt(++u)&1023),l[i++]=f>>18|240,l[i++]=f>>12&63|128,l[i++]=f>>6&63|128,l[i++]=f&63|128):(l[i++]=f>>12|224,l[i++]=f>>6&63|128,l[i++]=f&63|128)}return l},aS=function(h){const l=[];let i=0,u=0;for(;i<h.length;){const f=h[i++];if(f<128)l[u++]=String.fromCharCode(f);else if(f>191&&f<224){const I=h[i++];l[u++]=String.fromCharCode((f&31)<<6|I&63)}else if(f>239&&f<365){const I=h[i++],C=h[i++],A=h[i++],L=((f&7)<<18|(I&63)<<12|(C&63)<<6|A&63)-65536;l[u++]=String.fromCharCode(55296+(L>>10)),l[u++]=String.fromCharCode(56320+(L&1023))}else{const I=h[i++],C=h[i++];l[u++]=String.fromCharCode((f&15)<<12|(I&63)<<6|C&63)}}return l.join("")},WT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(h,l){if(!Array.isArray(h))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=l?this.byteToCharMapWebSafe_:this.byteToCharMap_,u=[];for(let f=0;f<h.length;f+=3){const I=h[f],C=f+1<h.length,A=C?h[f+1]:0,L=f+2<h.length,D=L?h[f+2]:0,te=I>>2,se=(I&3)<<4|A>>4;let Y=(A&15)<<2|D>>6,fe=D&63;L||(fe=64,C||(Y=64)),u.push(i[te],i[se],i[Y],i[fe])}return u.join("")},encodeString(h,l){return this.HAS_NATIVE_SUPPORT&&!l?btoa(h):this.encodeByteArray(VT(h),l)},decodeString(h,l){return this.HAS_NATIVE_SUPPORT&&!l?atob(h):aS(this.decodeStringToByteArray(h,l))},decodeStringToByteArray(h,l){this.init_();const i=l?this.charToByteMapWebSafe_:this.charToByteMap_,u=[];for(let f=0;f<h.length;){const I=i[h.charAt(f++)],A=f<h.length?i[h.charAt(f)]:0;++f;const D=f<h.length?i[h.charAt(f)]:64;++f;const se=f<h.length?i[h.charAt(f)]:64;if(++f,I==null||A==null||D==null||se==null)throw new cS;const Y=I<<2|A>>4;if(u.push(Y),D!==64){const fe=A<<4&240|D>>2;if(u.push(fe),se!==64){const re=D<<6&192|se;u.push(re)}}}return u},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let h=0;h<this.ENCODED_VALS.length;h++)this.byteToCharMap_[h]=this.ENCODED_VALS.charAt(h),this.charToByteMap_[this.byteToCharMap_[h]]=h,this.byteToCharMapWebSafe_[h]=this.ENCODED_VALS_WEBSAFE.charAt(h),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[h]]=h,h>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(h)]=h,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(h)]=h)}}};class cS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uS=function(h){const l=VT(h);return WT.encodeByteArray(l,!0)},zT=function(h){return uS(h).replace(/\./g,"")},XT=function(h){try{return WT.decodeString(h,!0)}catch(l){console.error("base64Decode failed: ",l)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=()=>hS().__FIREBASE_DEFAULTS__,pS=()=>{if(typeof process>"u"||typeof j$>"u")return;const h=j$.__FIREBASE_DEFAULTS__;if(h)return JSON.parse(h)},gS=()=>{if(typeof document>"u")return;let h;try{h=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const l=h&&XT(h[1]);return l&&JSON.parse(l)},Df=()=>{try{return dS()||pS()||gS()}catch(h){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${h}`);return}},_S=h=>{var l,i;return(i=(l=Df())===null||l===void 0?void 0:l.emulatorHosts)===null||i===void 0?void 0:i[h]},jT=()=>{var h;return(h=Df())===null||h===void 0?void 0:h.config},YT=h=>{var l;return(l=Df())===null||l===void 0?void 0:l[`_${h}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((l,i)=>{this.resolve=l,this.reject=i})}wrapCallback(l){return(i,u)=>{i?this.reject(i):this.resolve(u),typeof l=="function"&&(this.promise.catch(()=>{}),l.length===1?l(i):l(i,u))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pi())}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TS(){const h=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof h=="object"&&h.id!==void 0}function ES(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IS(){const h=Pi();return h.indexOf("MSIE ")>=0||h.indexOf("Trident/")>=0}function bS(){try{return typeof indexedDB=="object"}catch{return!1}}function SS(){return new Promise((h,l)=>{try{let i=!0;const u="validate-browser-context-for-indexeddb-analytics-module",f=self.indexedDB.open(u);f.onsuccess=()=>{f.result.close(),i||self.indexedDB.deleteDatabase(u),h(!0)},f.onupgradeneeded=()=>{i=!1},f.onerror=()=>{var I;l(((I=f.error)===null||I===void 0?void 0:I.message)||"")}}catch(i){l(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="FirebaseError";class Iu extends Error{constructor(l,i,u){super(i),this.code=l,this.customData=u,this.name=OS,Object.setPrototypeOf(this,Iu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Up.prototype.create)}}class Up{constructor(l,i,u){this.service=l,this.serviceName=i,this.errors=u}create(l,...i){const u=i[0]||{},f=`${this.service}/${l}`,I=this.errors[l],C=I?RS(I,u):"Error",A=`${this.serviceName}: ${C} (${f}).`;return new Iu(f,A,u)}}function RS(h,l){return h.replace(yS,(i,u)=>{const f=l[u];return f!=null?String(f):`<${u}?>`})}const yS=/\{\$([^}]+)}/g;function vS(h){for(const l in h)if(Object.prototype.hasOwnProperty.call(h,l))return!1;return!0}function Vg(h,l){if(h===l)return!0;const i=Object.keys(h),u=Object.keys(l);for(const f of i){if(!u.includes(f))return!1;const I=h[f],C=l[f];if(Y$(I)&&Y$(C)){if(!Vg(I,C))return!1}else if(I!==C)return!1}for(const f of u)if(!i.includes(f))return!1;return!0}function Y$(h){return h!==null&&typeof h=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(h){const l=[];for(const[i,u]of Object.entries(h))Array.isArray(u)?u.forEach(f=>{l.push(encodeURIComponent(i)+"="+encodeURIComponent(f))}):l.push(encodeURIComponent(i)+"="+encodeURIComponent(u));return l.length?"&"+l.join("&"):""}function CS(h,l){const i=new LS(h,l);return i.subscribe.bind(i)}class LS{constructor(l,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{l(this)}).catch(u=>{this.error(u)})}next(l){this.forEachObserver(i=>{i.next(l)})}error(l){this.forEachObserver(i=>{i.error(l)}),this.close(l)}complete(){this.forEachObserver(l=>{l.complete()}),this.close()}subscribe(l,i,u){let f;if(l===void 0&&i===void 0&&u===void 0)throw new Error("Missing Observer.");AS(l,["next","error","complete"])?f=l:f={next:l,error:i,complete:u},f.next===void 0&&(f.next=of),f.error===void 0&&(f.error=of),f.complete===void 0&&(f.complete=of);const I=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?f.error(this.finalError):f.complete()}catch{}}),this.observers.push(f),I}unsubscribeOne(l){this.observers===void 0||this.observers[l]===void 0||(delete this.observers[l],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(l){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,l)}sendOne(l,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[l]!==void 0)try{i(this.observers[l])}catch(u){typeof console<"u"&&console.error&&console.error(u)}})}close(l){this.finalized||(this.finalized=!0,l!==void 0&&(this.finalError=l),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AS(h,l){if(typeof h!="object"||h===null)return!1;for(const i of l)if(i in h&&typeof h[i]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(h){return h&&h._delegate?h._delegate:h}class Od{constructor(l,i,u){this.name=l,this.instanceFactory=i,this.type=u,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(l){return this.instantiationMode=l,this}setMultipleInstances(l){return this.multipleInstances=l,this}setServiceProps(l){return this.serviceProps=l,this}setInstanceCreatedCallback(l){return this.onInstanceCreated=l,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(l,i){this.name=l,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(l){const i=this.normalizeInstanceIdentifier(l);if(!this.instancesDeferred.has(i)){const u=new fS;if(this.instancesDeferred.set(i,u),this.isInitialized(i)||this.shouldAutoInitialize())try{const f=this.getOrInitializeService({instanceIdentifier:i});f&&u.resolve(f)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(l){var i;const u=this.normalizeInstanceIdentifier(l==null?void 0:l.identifier),f=(i=l==null?void 0:l.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(u)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:u})}catch(I){if(f)return null;throw I}else{if(f)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(l){if(l.name!==this.name)throw Error(`Mismatching Component ${l.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=l,!!this.shouldAutoInitialize()){if(NS(l))try{this.getOrInitializeService({instanceIdentifier:Lh})}catch{}for(const[i,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(i);try{const I=this.getOrInitializeService({instanceIdentifier:f});u.resolve(I)}catch{}}}}clearInstance(l=Lh){this.instancesDeferred.delete(l),this.instancesOptions.delete(l),this.instances.delete(l)}async delete(){const l=Array.from(this.instances.values());await Promise.all([...l.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...l.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(l=Lh){return this.instances.has(l)}getOptions(l=Lh){return this.instancesOptions.get(l)||{}}initialize(l={}){const{options:i={}}=l,u=this.normalizeInstanceIdentifier(l.instanceIdentifier);if(this.isInitialized(u))throw Error(`${this.name}(${u}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const f=this.getOrInitializeService({instanceIdentifier:u,options:i});for(const[I,C]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(I);u===A&&C.resolve(f)}return f}onInit(l,i){var u;const f=this.normalizeInstanceIdentifier(i),I=(u=this.onInitCallbacks.get(f))!==null&&u!==void 0?u:new Set;I.add(l),this.onInitCallbacks.set(f,I);const C=this.instances.get(f);return C&&l(C,f),()=>{I.delete(l)}}invokeOnInitCallbacks(l,i){const u=this.onInitCallbacks.get(i);if(u)for(const f of u)try{f(l,i)}catch{}}getOrInitializeService({instanceIdentifier:l,options:i={}}){let u=this.instances.get(l);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:wS(l),options:i}),this.instances.set(l,u),this.instancesOptions.set(l,i),this.invokeOnInitCallbacks(u,l),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,l,u)}catch{}return u||null}normalizeInstanceIdentifier(l=Lh){return this.component?this.component.multipleInstances?l:Lh:l}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wS(h){return h===Lh?void 0:h}function NS(h){return h.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(l){this.name=l,this.providers=new Map}addComponent(l){const i=this.getProvider(l.name);if(i.isComponentSet())throw new Error(`Component ${l.name} has already been registered with ${this.name}`);i.setComponent(l)}addOrOverwriteComponent(l){this.getProvider(l.name).isComponentSet()&&this.providers.delete(l.name),this.addComponent(l)}getProvider(l){if(this.providers.has(l))return this.providers.get(l);const i=new kS(l,this);return this.providers.set(l,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn;(function(h){h[h.DEBUG=0]="DEBUG",h[h.VERBOSE=1]="VERBOSE",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.SILENT=5]="SILENT"})(gn||(gn={}));const DS={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},PS=gn.INFO,xS={[gn.DEBUG]:"log",[gn.VERBOSE]:"log",[gn.INFO]:"info",[gn.WARN]:"warn",[gn.ERROR]:"error"},BS=(h,l,...i)=>{if(l<h.logLevel)return;const u=new Date().toISOString(),f=xS[l];if(f)console[f](`[${u}]  ${h.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${l})`)};class KT{constructor(l){this.name=l,this._logLevel=PS,this._logHandler=BS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(l){if(!(l in gn))throw new TypeError(`Invalid value "${l}" assigned to \`logLevel\``);this._logLevel=l}setLogLevel(l){this._logLevel=typeof l=="string"?DS[l]:l}get logHandler(){return this._logHandler}set logHandler(l){if(typeof l!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=l}get userLogHandler(){return this._userLogHandler}set userLogHandler(l){this._userLogHandler=l}debug(...l){this._userLogHandler&&this._userLogHandler(this,gn.DEBUG,...l),this._logHandler(this,gn.DEBUG,...l)}log(...l){this._userLogHandler&&this._userLogHandler(this,gn.VERBOSE,...l),this._logHandler(this,gn.VERBOSE,...l)}info(...l){this._userLogHandler&&this._userLogHandler(this,gn.INFO,...l),this._logHandler(this,gn.INFO,...l)}warn(...l){this._userLogHandler&&this._userLogHandler(this,gn.WARN,...l),this._logHandler(this,gn.WARN,...l)}error(...l){this._userLogHandler&&this._userLogHandler(this,gn.ERROR,...l),this._logHandler(this,gn.ERROR,...l)}}const US=(h,l)=>l.some(i=>h instanceof i);let K$,J$;function FS(){return K$||(K$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HS(){return J$||(J$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JT=new WeakMap,$f=new WeakMap,qT=new WeakMap,lf=new WeakMap,Pf=new WeakMap;function GS(h){const l=new Promise((i,u)=>{const f=()=>{h.removeEventListener("success",I),h.removeEventListener("error",C)},I=()=>{i(mu(h.result)),f()},C=()=>{u(h.error),f()};h.addEventListener("success",I),h.addEventListener("error",C)});return l.then(i=>{i instanceof IDBCursor&&JT.set(i,h)}).catch(()=>{}),Pf.set(l,h),l}function VS(h){if($f.has(h))return;const l=new Promise((i,u)=>{const f=()=>{h.removeEventListener("complete",I),h.removeEventListener("error",C),h.removeEventListener("abort",C)},I=()=>{i(),f()},C=()=>{u(h.error||new DOMException("AbortError","AbortError")),f()};h.addEventListener("complete",I),h.addEventListener("error",C),h.addEventListener("abort",C)});$f.set(h,l)}let Tf={get(h,l,i){if(h instanceof IDBTransaction){if(l==="done")return $f.get(h);if(l==="objectStoreNames")return h.objectStoreNames||qT.get(h);if(l==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return mu(h[l])},set(h,l,i){return h[l]=i,!0},has(h,l){return h instanceof IDBTransaction&&(l==="done"||l==="store")?!0:l in h}};function WS(h){Tf=h(Tf)}function zS(h){return h===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(l,...i){const u=h.call(af(this),l,...i);return qT.set(u,l.sort?l.sort():[l]),mu(u)}:HS().includes(h)?function(...l){return h.apply(af(this),l),mu(JT.get(this))}:function(...l){return mu(h.apply(af(this),l))}}function XS(h){return typeof h=="function"?zS(h):(h instanceof IDBTransaction&&VS(h),US(h,FS())?new Proxy(h,Tf):h)}function mu(h){if(h instanceof IDBRequest)return GS(h);if(lf.has(h))return lf.get(h);const l=XS(h);return l!==h&&(lf.set(h,l),Pf.set(l,h)),l}const af=h=>Pf.get(h);function jS(h,l,{blocked:i,upgrade:u,blocking:f,terminated:I}={}){const C=indexedDB.open(h,l),A=mu(C);return u&&C.addEventListener("upgradeneeded",L=>{u(mu(C.result),L.oldVersion,L.newVersion,mu(C.transaction),L)}),i&&C.addEventListener("blocked",L=>i(L.oldVersion,L.newVersion,L)),A.then(L=>{I&&L.addEventListener("close",()=>I()),f&&L.addEventListener("versionchange",D=>f(D.oldVersion,D.newVersion,D))}).catch(()=>{}),A}const YS=["get","getKey","getAll","getAllKeys","count"],KS=["put","add","delete","clear"],cf=new Map;function q$(h,l){if(!(h instanceof IDBDatabase&&!(l in h)&&typeof l=="string"))return;if(cf.get(l))return cf.get(l);const i=l.replace(/FromIndex$/,""),u=l!==i,f=KS.includes(i);if(!(i in(u?IDBIndex:IDBObjectStore).prototype)||!(f||YS.includes(i)))return;const I=async function(C,...A){const L=this.transaction(C,f?"readwrite":"readonly");let D=L.store;return u&&(D=D.index(A.shift())),(await Promise.all([D[i](...A),f&&L.done]))[0]};return cf.set(l,I),I}WS(h=>({...h,get:(l,i,u)=>q$(l,i)||h.get(l,i,u),has:(l,i)=>!!q$(l,i)||h.has(l,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(l){this.container=l}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(qS(i)){const u=i.getImmediate();return`${u.library}/${u.version}`}else return null}).filter(i=>i).join(" ")}}function qS(h){const l=h.getComponent();return(l==null?void 0:l.type)==="VERSION"}const Ef="@firebase/app",Q$="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new KT("@firebase/app"),QS="@firebase/app-compat",ZS="@firebase/analytics-compat",eO="@firebase/analytics",tO="@firebase/app-check-compat",nO="@firebase/app-check",sO="@firebase/auth",iO="@firebase/auth-compat",rO="@firebase/database",oO="@firebase/data-connect",lO="@firebase/database-compat",aO="@firebase/functions",cO="@firebase/functions-compat",uO="@firebase/installations",hO="@firebase/installations-compat",dO="@firebase/messaging",pO="@firebase/messaging-compat",gO="@firebase/performance",_O="@firebase/performance-compat",fO="@firebase/remote-config",mO="@firebase/remote-config-compat",$O="@firebase/storage",TO="@firebase/storage-compat",EO="@firebase/firestore",IO="@firebase/vertexai",bO="@firebase/firestore-compat",SO="firebase",OO="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="[DEFAULT]",RO={[Ef]:"fire-core",[QS]:"fire-core-compat",[eO]:"fire-analytics",[ZS]:"fire-analytics-compat",[nO]:"fire-app-check",[tO]:"fire-app-check-compat",[sO]:"fire-auth",[iO]:"fire-auth-compat",[rO]:"fire-rtdb",[oO]:"fire-data-connect",[lO]:"fire-rtdb-compat",[aO]:"fire-fn",[cO]:"fire-fn-compat",[uO]:"fire-iid",[hO]:"fire-iid-compat",[dO]:"fire-fcm",[pO]:"fire-fcm-compat",[gO]:"fire-perf",[_O]:"fire-perf-compat",[fO]:"fire-rc",[mO]:"fire-rc-compat",[$O]:"fire-gcs",[TO]:"fire-gcs-compat",[EO]:"fire-fst",[bO]:"fire-fst-compat",[IO]:"fire-vertex","fire-js":"fire-js",[SO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new Map,yO=new Map,bf=new Map;function Z$(h,l){try{h.container.addComponent(l)}catch(i){hc.debug(`Component ${l.name} failed to register with FirebaseApp ${h.name}`,i)}}function Mp(h){const l=h.name;if(bf.has(l))return hc.debug(`There were multiple attempts to register component ${l}.`),!1;bf.set(l,h);for(const i of Wg.values())Z$(i,h);for(const i of yO.values())Z$(i,h);return!0}function QT(h,l){const i=h.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),h.container.getProvider(l)}function oc(h){return h.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$u=new Up("app","Firebase",vO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(l,i,u){this._isDeleted=!1,this._options=Object.assign({},l),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=u,this.container.addComponent(new Od("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(l){this.checkDestroyed(),this._automaticDataCollectionEnabled=l}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(l){this._isDeleted=l}checkDestroyed(){if(this.isDeleted)throw $u.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=OO;function ZT(h,l={}){let i=h;typeof l!="object"&&(l={name:l});const u=Object.assign({name:If,automaticDataCollectionEnabled:!1},l),f=u.name;if(typeof f!="string"||!f)throw $u.create("bad-app-name",{appName:String(f)});if(i||(i=jT()),!i)throw $u.create("no-options");const I=Wg.get(f);if(I){if(Vg(i,I.options)&&Vg(u,I.config))return I;throw $u.create("duplicate-app",{appName:f})}const C=new MS(f);for(const L of bf.values())C.addComponent(L);const A=new CO(i,u,C);return Wg.set(f,A),A}function LO(h=If){const l=Wg.get(h);if(!l&&h===If&&jT())return ZT();if(!l)throw $u.create("no-app",{appName:h});return l}function Ed(h,l,i){var u;let f=(u=RO[h])!==null&&u!==void 0?u:h;i&&(f+=`-${i}`);const I=f.match(/\s|\//),C=l.match(/\s|\//);if(I||C){const A=[`Unable to register library "${f}" with version "${l}":`];I&&A.push(`library name "${f}" contains illegal characters (whitespace or "/")`),I&&C&&A.push("and"),C&&A.push(`version name "${l}" contains illegal characters (whitespace or "/")`),hc.warn(A.join(" "));return}Mp(new Od(`${f}-version`,()=>({library:f,version:l}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="firebase-heartbeat-database",kO=1,Dp="firebase-heartbeat-store";let uf=null;function eE(){return uf||(uf=jS(AO,kO,{upgrade:(h,l)=>{switch(l){case 0:try{h.createObjectStore(Dp)}catch(i){console.warn(i)}}}}).catch(h=>{throw $u.create("idb-open",{originalErrorMessage:h.message})})),uf}async function wO(h){try{const i=(await eE()).transaction(Dp),u=await i.objectStore(Dp).get(tE(h));return await i.done,u}catch(l){if(l instanceof Iu)hc.warn(l.message);else{const i=$u.create("idb-get",{originalErrorMessage:l==null?void 0:l.message});hc.warn(i.message)}}}async function eT(h,l){try{const u=(await eE()).transaction(Dp,"readwrite");await u.objectStore(Dp).put(l,tE(h)),await u.done}catch(i){if(i instanceof Iu)hc.warn(i.message);else{const u=$u.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});hc.warn(u.message)}}}function tE(h){return`${h.name}!${h.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=1024,MO=30*24*60*60*1e3;class DO{constructor(l){this.container=l,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new xO(i),this._heartbeatsCachePromise=this._storage.read().then(u=>(this._heartbeatsCache=u,u))}async triggerHeartbeat(){var l,i;try{const f=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),I=tT();return((l=this._heartbeatsCache)===null||l===void 0?void 0:l.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===I||this._heartbeatsCache.heartbeats.some(C=>C.date===I)?void 0:(this._heartbeatsCache.heartbeats.push({date:I,agent:f}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(C=>{const A=new Date(C.date).valueOf();return Date.now()-A<=MO}),this._storage.overwrite(this._heartbeatsCache))}catch(u){hc.warn(u)}}async getHeartbeatsHeader(){var l;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((l=this._heartbeatsCache)===null||l===void 0?void 0:l.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=tT(),{heartbeatsToSend:u,unsentEntries:f}=PO(this._heartbeatsCache.heartbeats),I=zT(JSON.stringify({version:2,heartbeats:u}));return this._heartbeatsCache.lastSentHeartbeatDate=i,f.length>0?(this._heartbeatsCache.heartbeats=f,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),I}catch(i){return hc.warn(i),""}}}function tT(){return new Date().toISOString().substring(0,10)}function PO(h,l=NO){const i=[];let u=h.slice();for(const f of h){const I=i.find(C=>C.agent===f.agent);if(I){if(I.dates.push(f.date),nT(i)>l){I.dates.pop();break}}else if(i.push({agent:f.agent,dates:[f.date]}),nT(i)>l){i.pop();break}u=u.slice(1)}return{heartbeatsToSend:i,unsentEntries:u}}class xO{constructor(l){this.app=l,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bS()?SS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await wO(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(l){var i;if(await this._canUseIndexedDBPromise){const f=await this.read();return eT(this.app,{lastSentHeartbeatDate:(i=l.lastSentHeartbeatDate)!==null&&i!==void 0?i:f.lastSentHeartbeatDate,heartbeats:l.heartbeats})}else return}async add(l){var i;if(await this._canUseIndexedDBPromise){const f=await this.read();return eT(this.app,{lastSentHeartbeatDate:(i=l.lastSentHeartbeatDate)!==null&&i!==void 0?i:f.lastSentHeartbeatDate,heartbeats:[...f.heartbeats,...l.heartbeats]})}else return}}function nT(h){return zT(JSON.stringify({version:2,heartbeats:h})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(h){Mp(new Od("platform-logger",l=>new JS(l),"PRIVATE")),Mp(new Od("heartbeat",l=>new DO(l),"PRIVATE")),Ed(Ef,Q$,h),Ed(Ef,Q$,"esm2017"),Ed("fire-js","")}BO("");var UO="firebase",FO="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ed(UO,FO,"app");function xf(h,l){var i={};for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&l.indexOf(u)<0&&(i[u]=h[u]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,u=Object.getOwnPropertySymbols(h);f<u.length;f++)l.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(h,u[f])&&(i[u[f]]=h[u[f]]);return i}function nE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HO=nE,sE=new Up("auth","Firebase",nE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new KT("@firebase/auth");function GO(h,...l){zg.logLevel<=gn.WARN&&zg.warn(`Auth (${Hp}): ${h}`,...l)}function wg(h,...l){zg.logLevel<=gn.ERROR&&zg.error(`Auth (${Hp}): ${h}`,...l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(h,...l){throw Uf(h,...l)}function rl(h,...l){return Uf(h,...l)}function Bf(h,l,i){const u=Object.assign(Object.assign({},HO()),{[l]:i});return new Up("auth","Firebase",u).create(l,{appName:h.name})}function kh(h){return Bf(h,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VO(h,l,i){const u=i;if(!(l instanceof u))throw u.name!==l.constructor.name&&ea(h,"argument-error"),Bf(h,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uf(h,...l){if(typeof h!="string"){const i=l[0],u=[...l.slice(1)];return u[0]&&(u[0].appName=h.name),h._errorFactory.create(i,...u)}return sE.create(h,...l)}function dt(h,l,...i){if(!h)throw Uf(l,...i)}function lc(h){const l="INTERNAL ASSERTION FAILED: "+h;throw wg(l),new Error(l)}function dc(h,l){h||lc(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){var h;return typeof self<"u"&&((h=self.location)===null||h===void 0?void 0:h.href)||""}function WO(){return sT()==="http:"||sT()==="https:"}function sT(){var h;return typeof self<"u"&&((h=self.location)===null||h===void 0?void 0:h.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WO()||TS()||"connection"in navigator)?navigator.onLine:!0}function XO(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(l,i){this.shortDelay=l,this.longDelay=i,dc(i>l,"Short delay should be less than long delay!"),this.isMobile=mS()||ES()}get(){return zO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(h,l){dc(h.emulator,"Emulator should always be set here");const{url:i}=h.emulator;return l?`${i}${l.startsWith("/")?l.slice(1):l}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{static initialize(l,i,u){this.fetchImpl=l,i&&(this.headersImpl=i),u&&(this.responseImpl=u)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new Gp(3e4,6e4);function Hf(h,l){return h.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:h.tenantId}):l}async function Ad(h,l,i,u,f={}){return rE(h,f,async()=>{let I={},C={};u&&(l==="GET"?C=u:I={body:JSON.stringify(u)});const A=Fp(Object.assign({key:h.config.apiKey},C)).slice(1),L=await h._getAdditionalHeaders();L["Content-Type"]="application/json",h.languageCode&&(L["X-Firebase-Locale"]=h.languageCode);const D=Object.assign({method:l,headers:L},I);return $S()||(D.referrerPolicy="no-referrer"),iE.fetch()(oE(h,h.config.apiHost,i,A),D)})}async function rE(h,l,i){h._canInitEmulator=!1;const u=Object.assign(Object.assign({},jO),l);try{const f=new JO(h),I=await Promise.race([i(),f.promise]);f.clearNetworkTimeout();const C=await I.json();if("needConfirmation"in C)throw Cg(h,"account-exists-with-different-credential",C);if(I.ok&&!("errorMessage"in C))return C;{const A=I.ok?C.errorMessage:C.error.message,[L,D]=A.split(" : ");if(L==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cg(h,"credential-already-in-use",C);if(L==="EMAIL_EXISTS")throw Cg(h,"email-already-in-use",C);if(L==="USER_DISABLED")throw Cg(h,"user-disabled",C);const te=u[L]||L.toLowerCase().replace(/[_\s]+/g,"-");if(D)throw Bf(h,te,D);ea(h,te)}}catch(f){if(f instanceof Iu)throw f;ea(h,"network-request-failed",{message:String(f)})}}async function KO(h,l,i,u,f={}){const I=await Ad(h,l,i,u,f);return"mfaPendingCredential"in I&&ea(h,"multi-factor-auth-required",{_serverResponse:I}),I}function oE(h,l,i,u){const f=`${l}${i}?${u}`;return h.config.emulator?Ff(h.config,f):`${h.config.apiScheme}://${f}`}class JO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((i,u)=>{this.timer=setTimeout(()=>u(rl(this.auth,"network-request-failed")),YO.get())})}}function Cg(h,l,i){const u={appName:h.name};i.email&&(u.email=i.email),i.phoneNumber&&(u.phoneNumber=i.phoneNumber);const f=rl(h,l,u);return f.customData._tokenResponse=i,f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(h,l){return Ad(h,"POST","/v1/accounts:delete",l)}async function lE(h,l){return Ad(h,"POST","/v1/accounts:lookup",l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(h){if(h)try{const l=new Date(Number(h));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}async function QO(h,l=!1){const i=Ld(h),u=await i.getIdToken(l),f=Gf(u);dt(f&&f.exp&&f.auth_time&&f.iat,i.auth,"internal-error");const I=typeof f.firebase=="object"?f.firebase:void 0,C=I==null?void 0:I.sign_in_provider;return{claims:f,token:u,authTime:wp(hf(f.auth_time)),issuedAtTime:wp(hf(f.iat)),expirationTime:wp(hf(f.exp)),signInProvider:C||null,signInSecondFactor:(I==null?void 0:I.sign_in_second_factor)||null}}function hf(h){return Number(h)*1e3}function Gf(h){const[l,i,u]=h.split(".");if(l===void 0||i===void 0||u===void 0)return wg("JWT malformed, contained fewer than 3 sections"),null;try{const f=XT(i);return f?JSON.parse(f):(wg("Failed to decode base64 JWT payload"),null)}catch(f){return wg("Caught error parsing JWT payload as JSON",f==null?void 0:f.toString()),null}}function iT(h){const l=Gf(h);return dt(l,"internal-error"),dt(typeof l.exp<"u","internal-error"),dt(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pp(h,l,i=!1){if(i)return l;try{return await l}catch(u){throw u instanceof Iu&&ZO(u)&&h.auth.currentUser===h&&await h.auth.signOut(),u}}function ZO({code:h}){return h==="auth/user-disabled"||h==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(l){var i;if(l){const u=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),u}else{this.errorBackoff=3e4;const f=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,f)}}schedule(l=!1){if(!this.isRunning)return;const i=this.getInterval(l);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(l){(l==null?void 0:l.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(l,i){this.createdAt=l,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=wp(this.lastLoginAt),this.creationTime=wp(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xg(h){var l;const i=h.auth,u=await h.getIdToken(),f=await Pp(h,lE(i,{idToken:u}));dt(f==null?void 0:f.users.length,i,"internal-error");const I=f.users[0];h._notifyReloadListener(I);const C=!((l=I.providerUserInfo)===null||l===void 0)&&l.length?aE(I.providerUserInfo):[],A=nR(h.providerData,C),L=h.isAnonymous,D=!(h.email&&I.passwordHash)&&!(A!=null&&A.length),te=L?D:!1,se={uid:I.localId,displayName:I.displayName||null,photoURL:I.photoUrl||null,email:I.email||null,emailVerified:I.emailVerified||!1,phoneNumber:I.phoneNumber||null,tenantId:I.tenantId||null,providerData:A,metadata:new Of(I.createdAt,I.lastLoginAt),isAnonymous:te};Object.assign(h,se)}async function tR(h){const l=Ld(h);await Xg(l),await l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)}function nR(h,l){return[...h.filter(u=>!l.some(f=>f.providerId===u.providerId)),...l]}function aE(h){return h.map(l=>{var{providerId:i}=l,u=xf(l,["providerId"]);return{providerId:i,uid:u.rawId||"",displayName:u.displayName||null,email:u.email||null,phoneNumber:u.phoneNumber||null,photoURL:u.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(h,l){const i=await rE(h,{},async()=>{const u=Fp({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:f,apiKey:I}=h.config,C=oE(h,f,"/v1/token",`key=${I}`),A=await h._getAdditionalHeaders();return A["Content-Type"]="application/x-www-form-urlencoded",iE.fetch()(C,{method:"POST",headers:A,body:u})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function iR(h,l){return Ad(h,"POST","/v2/accounts:revokeToken",Hf(h,l))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){dt(l.idToken,"internal-error"),dt(typeof l.idToken<"u","internal-error"),dt(typeof l.refreshToken<"u","internal-error");const i="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):iT(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,i)}updateFromIdToken(l){dt(l.length!==0,"internal-error");const i=iT(l);this.updateTokensAndExpiration(l,null,i)}async getToken(l,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,l,"user-token-expired"),this.refreshToken?(await this.refresh(l,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(l,i){const{accessToken:u,refreshToken:f,expiresIn:I}=await sR(l,i);this.updateTokensAndExpiration(u,f,Number(I))}updateTokensAndExpiration(l,i,u){this.refreshToken=i||null,this.accessToken=l||null,this.expirationTime=Date.now()+u*1e3}static fromJSON(l,i){const{refreshToken:u,accessToken:f,expirationTime:I}=i,C=new Id;return u&&(dt(typeof u=="string","internal-error",{appName:l}),C.refreshToken=u),f&&(dt(typeof f=="string","internal-error",{appName:l}),C.accessToken=f),I&&(dt(typeof I=="number","internal-error",{appName:l}),C.expirationTime=I),C}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new Id,this.toJSON())}_performRefresh(){return lc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(h,l){dt(typeof h=="string"||typeof h>"u","internal-error",{appName:l})}class ac{constructor(l){var{uid:i,auth:u,stsTokenManager:f}=l,I=xf(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=u,this.stsTokenManager=f,this.accessToken=f.accessToken,this.displayName=I.displayName||null,this.email=I.email||null,this.emailVerified=I.emailVerified||!1,this.phoneNumber=I.phoneNumber||null,this.photoURL=I.photoURL||null,this.isAnonymous=I.isAnonymous||!1,this.tenantId=I.tenantId||null,this.providerData=I.providerData?[...I.providerData]:[],this.metadata=new Of(I.createdAt||void 0,I.lastLoginAt||void 0)}async getIdToken(l){const i=await Pp(this,this.stsTokenManager.getToken(this.auth,l));return dt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(l){return QO(this,l)}reload(){return tR(this)}_assign(l){this!==l&&(dt(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(i=>Object.assign({},i)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const i=new ac(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(l){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(l,i=!1){let u=!1;l.idToken&&l.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(l),u=!0),i&&await Xg(this),await this.auth._persistUserIfCurrent(this),u&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oc(this.auth.app))return Promise.reject(kh(this.auth));const l=await this.getIdToken();return await Pp(this,qO(this.auth,{idToken:l})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,i){var u,f,I,C,A,L,D,te;const se=(u=i.displayName)!==null&&u!==void 0?u:void 0,Y=(f=i.email)!==null&&f!==void 0?f:void 0,fe=(I=i.phoneNumber)!==null&&I!==void 0?I:void 0,re=(C=i.photoURL)!==null&&C!==void 0?C:void 0,be=(A=i.tenantId)!==null&&A!==void 0?A:void 0,oe=(L=i._redirectEventId)!==null&&L!==void 0?L:void 0,de=(D=i.createdAt)!==null&&D!==void 0?D:void 0,Le=(te=i.lastLoginAt)!==null&&te!==void 0?te:void 0,{uid:ke,emailVerified:nt,isAnonymous:_t,providerData:$t,stsTokenManager:ot}=i;dt(ke&&ot,l,"internal-error");const Oe=Id.fromJSON(this.name,ot);dt(typeof ke=="string",l,"internal-error"),du(se,l.name),du(Y,l.name),dt(typeof nt=="boolean",l,"internal-error"),dt(typeof _t=="boolean",l,"internal-error"),du(fe,l.name),du(re,l.name),du(be,l.name),du(oe,l.name),du(de,l.name),du(Le,l.name);const ht=new ac({uid:ke,auth:l,email:Y,emailVerified:nt,displayName:se,isAnonymous:_t,photoURL:re,phoneNumber:fe,tenantId:be,stsTokenManager:Oe,createdAt:de,lastLoginAt:Le});return $t&&Array.isArray($t)&&(ht.providerData=$t.map(Ct=>Object.assign({},Ct))),oe&&(ht._redirectEventId=oe),ht}static async _fromIdTokenResponse(l,i,u=!1){const f=new Id;f.updateFromServerResponse(i);const I=new ac({uid:i.localId,auth:l,stsTokenManager:f,isAnonymous:u});return await Xg(I),I}static async _fromGetAccountInfoResponse(l,i,u){const f=i.users[0];dt(f.localId!==void 0,"internal-error");const I=f.providerUserInfo!==void 0?aE(f.providerUserInfo):[],C=!(f.email&&f.passwordHash)&&!(I!=null&&I.length),A=new Id;A.updateFromIdToken(u);const L=new ac({uid:f.localId,auth:l,stsTokenManager:A,isAnonymous:C}),D={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:I,metadata:new Of(f.createdAt,f.lastLoginAt),isAnonymous:!(f.email&&f.passwordHash)&&!(I!=null&&I.length)};return Object.assign(L,D),L}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=new Map;function cc(h){dc(h instanceof Function,"Expected a class definition");let l=rT.get(h);return l?(dc(l instanceof h,"Instance stored in cache mismatched with class"),l):(l=new h,rT.set(h,l),l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(l,i){this.storage[l]=i}async _get(l){const i=this.storage[l];return i===void 0?null:i}async _remove(l){delete this.storage[l]}_addListener(l,i){}_removeListener(l,i){}}cE.type="NONE";const oT=cE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(h,l,i){return`firebase:${h}:${l}:${i}`}class bd{constructor(l,i,u){this.persistence=l,this.auth=i,this.userKey=u;const{config:f,name:I}=this.auth;this.fullUserKey=Ng(this.userKey,f.apiKey,I),this.fullPersistenceKey=Ng("persistence",f.apiKey,I),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}async getCurrentUser(){const l=await this.persistence._get(this.fullUserKey);return l?ac._fromJSON(this.auth,l):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(l){if(this.persistence===l)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=l,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(l,i,u="authUser"){if(!i.length)return new bd(cc(oT),l,u);const f=(await Promise.all(i.map(async D=>{if(await D._isAvailable())return D}))).filter(D=>D);let I=f[0]||cc(oT);const C=Ng(u,l.config.apiKey,l.name);let A=null;for(const D of i)try{const te=await D._get(C);if(te){const se=ac._fromJSON(l,te);D!==I&&(A=se),I=D;break}}catch{}const L=f.filter(D=>D._shouldAllowMigration);return!I._shouldAllowMigration||!L.length?new bd(I,l,u):(I=L[0],A&&await I._set(C,A.toJSON()),await Promise.all(i.map(async D=>{if(D!==I)try{await D._remove(C)}catch{}})),new bd(I,l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(h){const l=h.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(pE(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(uE(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(_E(l))return"Blackberry";if(fE(l))return"Webos";if(hE(l))return"Safari";if((l.includes("chrome/")||dE(l))&&!l.includes("edge/"))return"Chrome";if(gE(l))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,u=h.match(i);if((u==null?void 0:u.length)===2)return u[1]}return"Other"}function uE(h=Pi()){return/firefox\//i.test(h)}function hE(h=Pi()){const l=h.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function dE(h=Pi()){return/crios\//i.test(h)}function pE(h=Pi()){return/iemobile/i.test(h)}function gE(h=Pi()){return/android/i.test(h)}function _E(h=Pi()){return/blackberry/i.test(h)}function fE(h=Pi()){return/webos/i.test(h)}function Vf(h=Pi()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function rR(h=Pi()){var l;return Vf(h)&&!!(!((l=window.navigator)===null||l===void 0)&&l.standalone)}function oR(){return IS()&&document.documentMode===10}function mE(h=Pi()){return Vf(h)||gE(h)||fE(h)||_E(h)||/windows phone/i.test(h)||pE(h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(h,l=[]){let i;switch(h){case"Browser":i=lT(Pi());break;case"Worker":i=`${lT(Pi())}-${h}`;break;default:i=h}const u=l.length?l.join(","):"FirebaseCore-web";return`${i}/JsCore/${Hp}/${u}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,i){const u=I=>new Promise((C,A)=>{try{const L=l(I);C(L)}catch(L){A(L)}});u.onAbort=i,this.queue.push(u);const f=this.queue.length-1;return()=>{this.queue[f]=()=>Promise.resolve()}}async runMiddleware(l){if(this.auth.currentUser===l)return;const i=[];try{for(const u of this.queue)await u(l),u.onAbort&&i.push(u.onAbort)}catch(u){i.reverse();for(const f of i)try{f()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:u==null?void 0:u.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(h,l={}){return Ad(h,"GET","/v2/passwordPolicy",Hf(h,l))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=6;class uR{constructor(l){var i,u,f,I;const C=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=C.minPasswordLength)!==null&&i!==void 0?i:cR,C.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=C.maxPasswordLength),C.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=C.containsLowercaseCharacter),C.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=C.containsUppercaseCharacter),C.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=C.containsNumericCharacter),C.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=C.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(f=(u=l.allowedNonAlphanumericCharacters)===null||u===void 0?void 0:u.join(""))!==null&&f!==void 0?f:"",this.forceUpgradeOnSignin=(I=l.forceUpgradeOnSignin)!==null&&I!==void 0?I:!1,this.schemaVersion=l.schemaVersion}validatePassword(l){var i,u,f,I,C,A;const L={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,L),this.validatePasswordCharacterOptions(l,L),L.isValid&&(L.isValid=(i=L.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),L.isValid&&(L.isValid=(u=L.meetsMaxPasswordLength)!==null&&u!==void 0?u:!0),L.isValid&&(L.isValid=(f=L.containsLowercaseLetter)!==null&&f!==void 0?f:!0),L.isValid&&(L.isValid=(I=L.containsUppercaseLetter)!==null&&I!==void 0?I:!0),L.isValid&&(L.isValid=(C=L.containsNumericCharacter)!==null&&C!==void 0?C:!0),L.isValid&&(L.isValid=(A=L.containsNonAlphanumericCharacter)!==null&&A!==void 0?A:!0),L}validatePasswordLengthOptions(l,i){const u=this.customStrengthOptions.minPasswordLength,f=this.customStrengthOptions.maxPasswordLength;u&&(i.meetsMinPasswordLength=l.length>=u),f&&(i.meetsMaxPasswordLength=l.length<=f)}validatePasswordCharacterOptions(l,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let u;for(let f=0;f<l.length;f++)u=l.charAt(f),this.updatePasswordCharacterOptionsStatuses(i,u>="a"&&u<="z",u>="A"&&u<="Z",u>="0"&&u<="9",this.allowedNonAlphanumericCharacters.includes(u))}updatePasswordCharacterOptionsStatuses(l,i,u,f,I){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=u)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=f)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(l,i,u,f){this.app=l,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=u,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aT(this),this.idTokenSubscription=new aT(this),this.beforeStateQueue=new lR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(l,i){return i&&(this._popupRedirectResolver=cc(i)),this._initializationPromise=this.queue(async()=>{var u,f;if(!this._deleted&&(this.persistenceManager=await bd.create(this,l),!this._deleted)){if(!((u=this._popupRedirectResolver)===null||u===void 0)&&u._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((f=this.currentUser)===null||f===void 0?void 0:f.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const l=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!l)){if(this.currentUser&&l&&this.currentUser.uid===l.uid){this._currentUser._assign(l),await this.currentUser.getIdToken();return}await this._updateCurrentUser(l,!0)}}async initializeCurrentUserFromIdToken(l){try{const i=await lE(this,{idToken:l}),u=await ac._fromGetAccountInfoResponse(this,i,l);await this.directlySetCurrentUser(u)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(l){var i;if(oc(this.app)){const C=this.app.settings.authIdToken;return C?new Promise(A=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(C).then(A,A))}):this.directlySetCurrentUser(null)}const u=await this.assertedPersistence.getCurrentUser();let f=u,I=!1;if(l&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const C=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,A=f==null?void 0:f._redirectEventId,L=await this.tryRedirectSignIn(l);(!C||C===A)&&(L!=null&&L.user)&&(f=L.user,I=!0)}if(!f)return this.directlySetCurrentUser(null);if(!f._redirectEventId){if(I)try{await this.beforeStateQueue.runMiddleware(f)}catch(C){f=u,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(C))}return f?this.reloadAndSetCurrentUserOrClear(f):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===f._redirectEventId?this.directlySetCurrentUser(f):this.reloadAndSetCurrentUserOrClear(f)}async tryRedirectSignIn(l){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,l,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(l){try{await Xg(l)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(l)}useDeviceLanguage(){this.languageCode=XO()}async _delete(){this._deleted=!0}async updateCurrentUser(l){if(oc(this.app))return Promise.reject(kh(this));const i=l?Ld(l):null;return i&&dt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(l,i=!1){if(!this._deleted)return l&&dt(this.tenantId===l.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(l),this.queue(async()=>{await this.directlySetCurrentUser(l),this.notifyAuthListeners()})}async signOut(){return oc(this.app)?Promise.reject(kh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(l){return oc(this.app)?Promise.reject(kh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cc(l))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(l){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(l)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const l=await aR(this),i=new uR(l);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new Up("auth","Firebase",l())}onAuthStateChanged(l,i,u){return this.registerStateListener(this.authStateSubscription,l,i,u)}beforeAuthStateChanged(l,i){return this.beforeStateQueue.pushCallback(l,i)}onIdTokenChanged(l,i,u){return this.registerStateListener(this.idTokenSubscription,l,i,u)}authStateReady(){return new Promise((l,i)=>{if(this.currentUser)l();else{const u=this.onAuthStateChanged(()=>{u(),l()},i)}})}async revokeAccessToken(l){if(this.currentUser){const i=await this.currentUser.getIdToken(),u={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:i};this.tenantId!=null&&(u.tenantId=this.tenantId),await iR(this,u)}}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(l=this._currentUser)===null||l===void 0?void 0:l.toJSON()}}async _setRedirectUser(l,i){const u=await this.getOrInitRedirectPersistenceManager(i);return l===null?u.removeCurrentUser():u.setCurrentUser(l)}async getOrInitRedirectPersistenceManager(l){if(!this.redirectPersistenceManager){const i=l&&cc(l)||this._popupRedirectResolver;dt(i,this,"argument-error"),this.redirectPersistenceManager=await bd.create(this,[cc(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(l){var i,u;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===l?this._currentUser:((u=this.redirectUser)===null||u===void 0?void 0:u._redirectEventId)===l?this.redirectUser:null}async _persistUserIfCurrent(l){if(l===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(l))}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const u=(i=(l=this.currentUser)===null||l===void 0?void 0:l.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==u&&(this.lastNotifiedUid=u,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,i,u,f){if(this._deleted)return()=>{};const I=typeof i=="function"?i:i.next.bind(i);let C=!1;const A=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(A,this,"internal-error"),A.then(()=>{C||I(this.currentUser)}),typeof i=="function"){const L=l.addObserver(i,u,f);return()=>{C=!0,L()}}else{const L=l.addObserver(i);return()=>{C=!0,L()}}}async directlySetCurrentUser(l){this.currentUser&&this.currentUser!==l&&this._currentUser._stopProactiveRefresh(),l&&this.isProactiveRefreshEnabled&&l._startProactiveRefresh(),this.currentUser=l,l?await this.assertedPersistence.setCurrentUser(l):await this.assertedPersistence.removeCurrentUser()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=$E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const u=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||l===void 0?void 0:l.getHeartbeatsHeader());u&&(i["X-Firebase-Client"]=u);const f=await this._getAppCheckToken();return f&&(i["X-Firebase-AppCheck"]=f),i}async _getAppCheckToken(){var l;const i=await((l=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||l===void 0?void 0:l.getToken());return i!=null&&i.error&&GO(`Error while retrieving App Check token: ${i.error}`),i==null?void 0:i.token}}function Zg(h){return Ld(h)}class aT{constructor(l){this.auth=l,this.observer=null,this.addObserver=CS(i=>this.observer=i)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dR(h){Wf=h}function pR(h){return Wf.loadJS(h)}function gR(){return Wf.gapiScript}function _R(h){return`__${h}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(h,l){const i=QT(h,"auth");if(i.isInitialized()){const f=i.getImmediate(),I=i.getOptions();if(Vg(I,l??{}))return f;ea(f,"already-initialized")}return i.initialize({options:l})}function mR(h,l){const i=(l==null?void 0:l.persistence)||[],u=(Array.isArray(i)?i:[i]).map(cc);l!=null&&l.errorMap&&h._updateErrorMap(l.errorMap),h._initializeWithPersistence(u,l==null?void 0:l.popupRedirectResolver)}function $R(h,l,i){const u=Zg(h);dt(u._canInitEmulator,u,"emulator-config-failed"),dt(/^https?:\/\//.test(l),u,"invalid-emulator-scheme");const f=!1,I=TE(l),{host:C,port:A}=TR(l),L=A===null?"":`:${A}`;u.config.emulator={url:`${I}//${C}${L}/`},u.settings.appVerificationDisabledForTesting=!0,u.emulatorConfig=Object.freeze({host:C,port:A,protocol:I.replace(":",""),options:Object.freeze({disableWarnings:f})}),ER()}function TE(h){const l=h.indexOf(":");return l<0?"":h.substr(0,l+1)}function TR(h){const l=TE(h),i=/(\/\/)?([^?#/]+)/.exec(h.substr(l.length));if(!i)return{host:"",port:null};const u=i[2].split("@").pop()||"",f=/^(\[[^\]]+\])(:|$)/.exec(u);if(f){const I=f[1];return{host:I,port:cT(u.substr(I.length+1))}}else{const[I,C]=u.split(":");return{host:I,port:cT(C)}}}function cT(h){if(!h)return null;const l=Number(h);return isNaN(l)?null:l}function ER(){function h(){const l=document.createElement("p"),i=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(l,i){this.providerId=l,this.signInMethod=i}toJSON(){return lc("not implemented")}_getIdTokenResponse(l){return lc("not implemented")}_linkToIdToken(l,i){return lc("not implemented")}_getReauthenticationResolver(l){return lc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(h,l){return KO(h,"POST","/v1/accounts:signInWithIdp",Hf(h,l))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="http://localhost";class wh extends EE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const i=new wh(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(i.idToken=l.idToken),l.accessToken&&(i.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(i.nonce=l.nonce),l.pendingToken&&(i.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(i.accessToken=l.oauthToken,i.secret=l.oauthTokenSecret):ea("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const i=typeof l=="string"?JSON.parse(l):l,{providerId:u,signInMethod:f}=i,I=xf(i,["providerId","signInMethod"]);if(!u||!f)return null;const C=new wh(u,f);return C.idToken=I.idToken||void 0,C.accessToken=I.accessToken||void 0,C.secret=I.secret,C.nonce=I.nonce,C.pendingToken=I.pendingToken||null,C}_getIdTokenResponse(l){const i=this.buildRequest();return Sd(l,i)}_linkToIdToken(l,i){const u=this.buildRequest();return u.idToken=i,Sd(l,u)}_getReauthenticationResolver(l){const i=this.buildRequest();return i.autoCreate=!1,Sd(l,i)}buildRequest(){const l={requestUri:IR,returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),l.postBody=Fp(i)}return l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends zf{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Vp{constructor(){super("facebook.com")}static credential(l){return wh._fromParams({providerId:gu.PROVIDER_ID,signInMethod:gu.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return gu.credentialFromTaggedObject(l)}static credentialFromError(l){return gu.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return gu.credential(l.oauthAccessToken)}catch{return null}}}gu.FACEBOOK_SIGN_IN_METHOD="facebook.com";gu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends Vp{constructor(){super("google.com"),this.addScope("profile")}static credential(l,i){return wh._fromParams({providerId:rc.PROVIDER_ID,signInMethod:rc.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:i})}static credentialFromResult(l){return rc.credentialFromTaggedObject(l)}static credentialFromError(l){return rc.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:i,oauthAccessToken:u}=l;if(!i&&!u)return null;try{return rc.credential(i,u)}catch{return null}}}rc.GOOGLE_SIGN_IN_METHOD="google.com";rc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Vp{constructor(){super("github.com")}static credential(l){return wh._fromParams({providerId:_u.PROVIDER_ID,signInMethod:_u.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return _u.credentialFromTaggedObject(l)}static credentialFromError(l){return _u.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return _u.credential(l.oauthAccessToken)}catch{return null}}}_u.GITHUB_SIGN_IN_METHOD="github.com";_u.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Vp{constructor(){super("twitter.com")}static credential(l,i){return wh._fromParams({providerId:fu.PROVIDER_ID,signInMethod:fu.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:i})}static credentialFromResult(l){return fu.credentialFromTaggedObject(l)}static credentialFromError(l){return fu.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:i,oauthTokenSecret:u}=l;if(!i||!u)return null;try{return fu.credential(i,u)}catch{return null}}}fu.TWITTER_SIGN_IN_METHOD="twitter.com";fu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static async _fromIdTokenResponse(l,i,u,f=!1){const I=await ac._fromIdTokenResponse(l,u,f),C=uT(u);return new Rd({user:I,providerId:C,_tokenResponse:u,operationType:i})}static async _forOperation(l,i,u){await l._updateTokensIfNecessary(u,!0);const f=uT(u);return new Rd({user:l,providerId:f,_tokenResponse:u,operationType:i})}}function uT(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends Iu{constructor(l,i,u,f){var I;super(i.code,i.message),this.operationType=u,this.user=f,Object.setPrototypeOf(this,jg.prototype),this.customData={appName:l.name,tenantId:(I=l.tenantId)!==null&&I!==void 0?I:void 0,_serverResponse:i.customData._serverResponse,operationType:u}}static _fromErrorAndOperation(l,i,u,f){return new jg(l,i,u,f)}}function IE(h,l,i,u){return(l==="reauthenticate"?i._getReauthenticationResolver(h):i._getIdTokenResponse(h)).catch(I=>{throw I.code==="auth/multi-factor-auth-required"?jg._fromErrorAndOperation(h,I,l,u):I})}async function bR(h,l,i=!1){const u=await Pp(h,l._linkToIdToken(h.auth,await h.getIdToken()),i);return Rd._forOperation(h,"link",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(h,l,i=!1){const{auth:u}=h;if(oc(u.app))return Promise.reject(kh(u));const f="reauthenticate";try{const I=await Pp(h,IE(u,f,l,h),i);dt(I.idToken,u,"internal-error");const C=Gf(I.idToken);dt(C,u,"internal-error");const{sub:A}=C;return dt(h.uid===A,u,"user-mismatch"),Rd._forOperation(h,f,I)}catch(I){throw(I==null?void 0:I.code)==="auth/user-not-found"&&ea(u,"user-mismatch"),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(h,l,i=!1){if(oc(h.app))return Promise.reject(kh(h));const u="signIn",f=await IE(h,u,l),I=await Rd._fromIdTokenResponse(h,u,f);return i||await h._updateCurrentUser(I.user),I}function RR(h,l,i,u){return Ld(h).onIdTokenChanged(l,i,u)}function yR(h,l,i){return Ld(h).beforeAuthStateChanged(l,i)}const Yg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(l,i){this.storageRetriever=l,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Yg,"1"),this.storage.removeItem(Yg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,i){return this.storage.setItem(l,JSON.stringify(i)),Promise.resolve()}_get(l){const i=this.storage.getItem(l);return Promise.resolve(i?JSON.parse(i):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=1e3,CR=10;class SE extends bE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,i)=>this.onStorageEvent(l,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mE(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const i of Object.keys(this.listeners)){const u=this.storage.getItem(i),f=this.localCache[i];u!==f&&l(i,f,u)}}onStorageEvent(l,i=!1){if(!l.key){this.forAllChangedKeys((C,A,L)=>{this.notifyListeners(C,L)});return}const u=l.key;i?this.detachListener():this.stopPolling();const f=()=>{const C=this.storage.getItem(u);!i&&this.localCache[u]===C||this.notifyListeners(u,C)},I=this.storage.getItem(u);oR()&&I!==l.newValue&&l.newValue!==l.oldValue?setTimeout(f,CR):f()}notifyListeners(l,i){this.localCache[l]=i;const u=this.listeners[l];if(u)for(const f of Array.from(u))f(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,i,u)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:i,newValue:u}),!0)})},vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(i)}_removeListener(l,i){this.listeners[l]&&(this.listeners[l].delete(i),this.listeners[l].size===0&&delete this.listeners[l]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(l,i){await super._set(l,i),this.localCache[l]=JSON.stringify(i)}async _get(l){const i=await super._get(l);return this.localCache[l]=JSON.stringify(i),i}async _remove(l){await super._remove(l),delete this.localCache[l]}}SE.type="LOCAL";const LR=SE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends bE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,i){}_removeListener(l,i){}}OE.type="SESSION";const RE=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(h){return Promise.all(h.map(async l=>{try{return{fulfilled:!0,value:await l}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const i=this.receivers.find(f=>f.isListeningto(l));if(i)return i;const u=new e_(l);return this.receivers.push(u),u}isListeningto(l){return this.eventTarget===l}async handleEvent(l){const i=l,{eventId:u,eventType:f,data:I}=i.data,C=this.handlersMap[f];if(!(C!=null&&C.size))return;i.ports[0].postMessage({status:"ack",eventId:u,eventType:f});const A=Array.from(C).map(async D=>D(i.origin,I)),L=await AR(A);i.ports[0].postMessage({status:"done",eventId:u,eventType:f,response:L})}_subscribe(l,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(i)}_unsubscribe(l,i){this.handlersMap[l]&&i&&this.handlersMap[l].delete(i),(!i||this.handlersMap[l].size===0)&&delete this.handlersMap[l],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(h="",l=10){let i="";for(let u=0;u<l;u++)i+=Math.floor(Math.random()*10);return h+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}async _send(l,i,u=50){const f=typeof MessageChannel<"u"?new MessageChannel:null;if(!f)throw new Error("connection_unavailable");let I,C;return new Promise((A,L)=>{const D=Xf("",20);f.port1.start();const te=setTimeout(()=>{L(new Error("unsupported_event"))},u);C={messageChannel:f,onMessage(se){const Y=se;if(Y.data.eventId===D)switch(Y.data.status){case"ack":clearTimeout(te),I=setTimeout(()=>{L(new Error("timeout"))},3e3);break;case"done":clearTimeout(I),A(Y.data.response);break;default:clearTimeout(te),clearTimeout(I),L(new Error("invalid_response"));break}}},this.handlers.add(C),f.port1.addEventListener("message",C.onMessage),this.target.postMessage({eventType:l,eventId:D,data:i},[f.port2])}).finally(()=>{C&&this.removeMessageHandler(C)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(){return window}function wR(h){Zl().location.href=h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(){return typeof Zl().WorkerGlobalScope<"u"&&typeof Zl().importScripts=="function"}async function NR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MR(){var h;return((h=navigator==null?void 0:navigator.serviceWorker)===null||h===void 0?void 0:h.controller)||null}function DR(){return yE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebaseLocalStorageDb",PR=1,Kg="firebaseLocalStorage",CE="fbase_key";class Wp{constructor(l){this.request=l}toPromise(){return new Promise((l,i)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function t_(h,l){return h.transaction([Kg],l?"readwrite":"readonly").objectStore(Kg)}function xR(){const h=indexedDB.deleteDatabase(vE);return new Wp(h).toPromise()}function Rf(){const h=indexedDB.open(vE,PR);return new Promise((l,i)=>{h.addEventListener("error",()=>{i(h.error)}),h.addEventListener("upgradeneeded",()=>{const u=h.result;try{u.createObjectStore(Kg,{keyPath:CE})}catch(f){i(f)}}),h.addEventListener("success",async()=>{const u=h.result;u.objectStoreNames.contains(Kg)?l(u):(u.close(),await xR(),l(await Rf()))})})}async function hT(h,l,i){const u=t_(h,!0).put({[CE]:l,value:i});return new Wp(u).toPromise()}async function BR(h,l){const i=t_(h,!1).get(l),u=await new Wp(i).toPromise();return u===void 0?null:u.value}function dT(h,l){const i=t_(h,!0).delete(l);return new Wp(i).toPromise()}const UR=800,FR=3;class LE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rf(),this.db)}async _withRetries(l){let i=0;for(;;)try{const u=await this._openDb();return await l(u)}catch(u){if(i++>FR)throw u;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=e_._getInstance(DR()),this.receiver._subscribe("keyChanged",async(l,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(l,i)=>["keyChanged"])}async initializeSender(){var l,i;if(this.activeServiceWorker=await NR(),!this.activeServiceWorker)return;this.sender=new kR(this.activeServiceWorker);const u=await this.sender._send("ping",{},800);u&&!((l=u[0])===null||l===void 0)&&l.fulfilled&&!((i=u[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(l){if(!(!this.sender||!this.activeServiceWorker||MR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:l},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const l=await Rf();return await hT(l,Yg,"1"),await dT(l,Yg),!0}catch{}return!1}async _withPendingWrite(l){this.pendingWrites++;try{await l()}finally{this.pendingWrites--}}async _set(l,i){return this._withPendingWrite(async()=>(await this._withRetries(u=>hT(u,l,i)),this.localCache[l]=i,this.notifyServiceWorker(l)))}async _get(l){const i=await this._withRetries(u=>BR(u,l));return this.localCache[l]=i,i}async _remove(l){return this._withPendingWrite(async()=>(await this._withRetries(i=>dT(i,l)),delete this.localCache[l],this.notifyServiceWorker(l)))}async _poll(){const l=await this._withRetries(f=>{const I=t_(f,!1).getAll();return new Wp(I).toPromise()});if(!l)return[];if(this.pendingWrites!==0)return[];const i=[],u=new Set;if(l.length!==0)for(const{fbase_key:f,value:I}of l)u.add(f),JSON.stringify(this.localCache[f])!==JSON.stringify(I)&&(this.notifyListeners(f,I),i.push(f));for(const f of Object.keys(this.localCache))this.localCache[f]&&!u.has(f)&&(this.notifyListeners(f,null),i.push(f));return i}notifyListeners(l,i){this.localCache[l]=i;const u=this.listeners[l];if(u)for(const f of Array.from(u))f(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(i)}_removeListener(l,i){this.listeners[l]&&(this.listeners[l].delete(i),this.listeners[l].size===0&&delete this.listeners[l]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LE.type="LOCAL";const HR=LE;new Gp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(h,l){return l?cc(l):(dt(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends EE{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Sd(l,this._buildIdpRequest())}_linkToIdToken(l,i){return Sd(l,this._buildIdpRequest(i))}_getReauthenticationResolver(l){return Sd(l,this._buildIdpRequest())}_buildIdpRequest(l){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(i.idToken=l),i}}function GR(h){return OR(h.auth,new jf(h),h.bypassAuthState)}function VR(h){const{auth:l,user:i}=h;return dt(i,l,"internal-error"),SR(i,new jf(h),h.bypassAuthState)}async function WR(h){const{auth:l,user:i}=h;return dt(i,l,"internal-error"),bR(i,new jf(h),h.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(l,i,u,f,I=!1){this.auth=l,this.resolver=u,this.user=f,this.bypassAuthState=I,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(l,i)=>{this.pendingPromise={resolve:l,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(u){this.reject(u)}})}async onAuthEvent(l){const{urlResponse:i,sessionId:u,postBody:f,tenantId:I,error:C,type:A}=l;if(C){this.reject(C);return}const L={auth:this.auth,requestUri:i,sessionId:u,tenantId:I||void 0,postBody:f||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(A)(L))}catch(D){this.reject(D)}}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return GR;case"linkViaPopup":case"linkViaRedirect":return WR;case"reauthViaPopup":case"reauthViaRedirect":return VR;default:ea(this.auth,"internal-error")}}resolve(l){dc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){dc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new Gp(2e3,1e4);async function XR(h,l,i){if(oc(h.app))return Promise.reject(rl(h,"operation-not-supported-in-this-environment"));const u=Zg(h);VO(h,l,zf);const f=AE(u,i);return new Ah(u,"signInViaPopup",l,f).executeNotNull()}class Ah extends kE{constructor(l,i,u,f,I){super(l,i,f,I),this.provider=u,this.authWindow=null,this.pollId=null,Ah.currentPopupAction&&Ah.currentPopupAction.cancel(),Ah.currentPopupAction=this}async executeNotNull(){const l=await this.execute();return dt(l,this.auth,"internal-error"),l}async onExecution(){dc(this.filter.length===1,"Popup operations only handle one event");const l=Xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],l),this.authWindow.associatedEvent=l,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(rl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var l;return((l=this.authWindow)===null||l===void 0?void 0:l.associatedEvent)||null}cancel(){this.reject(rl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ah.currentPopupAction=null}pollUserCancellation(){const l=()=>{var i,u;if(!((u=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||u===void 0)&&u.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(l,zR.get())};l()}}Ah.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="pendingRedirect",Mg=new Map;class YR extends kE{constructor(l,i,u=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,u),this.eventId=null}async execute(){let l=Mg.get(this.auth._key());if(!l){try{const u=await KR(this.resolver,this.auth)?await super.execute():null;l=()=>Promise.resolve(u)}catch(i){l=()=>Promise.reject(i)}Mg.set(this.auth._key(),l)}return this.bypassAuthState||Mg.set(this.auth._key(),()=>Promise.resolve(null)),l()}async onAuthEvent(l){if(l.type==="signInViaRedirect")return super.onAuthEvent(l);if(l.type==="unknown"){this.resolve(null);return}if(l.eventId){const i=await this.auth._redirectUserForId(l.eventId);if(i)return this.user=i,super.onAuthEvent(l);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KR(h,l){const i=QR(l),u=qR(h);if(!await u._isAvailable())return!1;const f=await u._get(i)==="true";return await u._remove(i),f}function JR(h,l){Mg.set(h._key(),l)}function qR(h){return cc(h._redirectPersistence)}function QR(h){return Ng(jR,h.config.apiKey,h.name)}async function ZR(h,l,i=!1){if(oc(h.app))return Promise.reject(kh(h));const u=Zg(h),f=AE(u,l),C=await new YR(u,f,i).execute();return C&&!i&&(delete C.user._redirectEventId,await u._persistUserIfCurrent(C.user),await u._setRedirectUser(null,l)),C}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=10*60*1e3;class ty{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let i=!1;return this.consumers.forEach(u=>{this.isEventForConsumer(l,u)&&(i=!0,this.sendToConsumer(l,u),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!ny(l)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=l,i=!0)),i}sendToConsumer(l,i){var u;if(l.error&&!wE(l)){const f=((u=l.error.code)===null||u===void 0?void 0:u.split("auth/")[1])||"internal-error";i.onError(rl(this.auth,f))}else i.onAuthEvent(l)}isEventForConsumer(l,i){const u=i.eventId===null||!!l.eventId&&l.eventId===i.eventId;return i.filter.includes(l.type)&&u}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=ey&&this.cachedEventUids.clear(),this.cachedEventUids.has(pT(l))}saveEventToCache(l){this.cachedEventUids.add(pT(l)),this.lastProcessedEventTime=Date.now()}}function pT(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(l=>l).join("-")}function wE({type:h,error:l}){return h==="unknown"&&(l==null?void 0:l.code)==="auth/no-auth-event"}function ny(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wE(h);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sy(h,l={}){return Ad(h,"GET","/v1/projects",l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ry=/^https?/;async function oy(h){if(h.config.emulator)return;const{authorizedDomains:l}=await sy(h);for(const i of l)try{if(ly(i))return}catch{}ea(h,"unauthorized-domain")}function ly(h){const l=Sf(),{protocol:i,hostname:u}=new URL(l);if(h.startsWith("chrome-extension://")){const C=new URL(h);return C.hostname===""&&u===""?i==="chrome-extension:"&&h.replace("chrome-extension://","")===l.replace("chrome-extension://",""):i==="chrome-extension:"&&C.hostname===u}if(!ry.test(i))return!1;if(iy.test(h))return u===h;const f=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+f+"|"+f+")$","i").test(u)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Gp(3e4,6e4);function gT(){const h=Zl().___jsl;if(h!=null&&h.H){for(const l of Object.keys(h.H))if(h.H[l].r=h.H[l].r||[],h.H[l].L=h.H[l].L||[],h.H[l].r=[...h.H[l].L],h.CP)for(let i=0;i<h.CP.length;i++)h.CP[i]=null}}function cy(h){return new Promise((l,i)=>{var u,f,I;function C(){gT(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{gT(),i(rl(h,"network-request-failed"))},timeout:ay.get()})}if(!((f=(u=Zl().gapi)===null||u===void 0?void 0:u.iframes)===null||f===void 0)&&f.Iframe)l(gapi.iframes.getContext());else if(!((I=Zl().gapi)===null||I===void 0)&&I.load)C();else{const A=_R("iframefcb");return Zl()[A]=()=>{gapi.load?C():i(rl(h,"network-request-failed"))},pR(`${gR()}?onload=${A}`).catch(L=>i(L))}}).catch(l=>{throw Dg=null,l})}let Dg=null;function uy(h){return Dg=Dg||cy(h),Dg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Gp(5e3,15e3),dy="__/auth/iframe",py="emulator/auth/iframe",gy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_y=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fy(h){const l=h.config;dt(l.authDomain,h,"auth-domain-config-required");const i=l.emulator?Ff(l,py):`https://${h.config.authDomain}/${dy}`,u={apiKey:l.apiKey,appName:h.name,v:Hp},f=_y.get(h.config.apiHost);f&&(u.eid=f);const I=h._getFrameworks();return I.length&&(u.fw=I.join(",")),`${i}?${Fp(u).slice(1)}`}async function my(h){const l=await uy(h),i=Zl().gapi;return dt(i,h,"internal-error"),l.open({where:document.body,url:fy(h),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gy,dontclear:!0},u=>new Promise(async(f,I)=>{await u.restyle({setHideOnLeave:!1});const C=rl(h,"network-request-failed"),A=Zl().setTimeout(()=>{I(C)},hy.get());function L(){Zl().clearTimeout(A),f(u)}u.ping(L).then(L,()=>{I(C)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ty=500,Ey=600,Iy="_blank",by="http://localhost";class _T{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sy(h,l,i,u=Ty,f=Ey){const I=Math.max((window.screen.availHeight-f)/2,0).toString(),C=Math.max((window.screen.availWidth-u)/2,0).toString();let A="";const L=Object.assign(Object.assign({},$y),{width:u.toString(),height:f.toString(),top:I,left:C}),D=Pi().toLowerCase();i&&(A=dE(D)?Iy:i),uE(D)&&(l=l||by,L.scrollbars="yes");const te=Object.entries(L).reduce((Y,[fe,re])=>`${Y}${fe}=${re},`,"");if(rR(D)&&A!=="_self")return Oy(l||"",A),new _T(null);const se=window.open(l||"",A,te);dt(se,h,"popup-blocked");try{se.focus()}catch{}return new _T(se)}function Oy(h,l){const i=document.createElement("a");i.href=h,i.target=l;const u=document.createEvent("MouseEvent");u.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="__/auth/handler",yy="emulator/auth/handler",vy=encodeURIComponent("fac");async function fT(h,l,i,u,f,I){dt(h.config.authDomain,h,"auth-domain-config-required"),dt(h.config.apiKey,h,"invalid-api-key");const C={apiKey:h.config.apiKey,appName:h.name,authType:i,redirectUrl:u,v:Hp,eventId:f};if(l instanceof zf){l.setDefaultLanguage(h.languageCode),C.providerId=l.providerId||"",vS(l.getCustomParameters())||(C.customParameters=JSON.stringify(l.getCustomParameters()));for(const[te,se]of Object.entries({}))C[te]=se}if(l instanceof Vp){const te=l.getScopes().filter(se=>se!=="");te.length>0&&(C.scopes=te.join(","))}h.tenantId&&(C.tid=h.tenantId);const A=C;for(const te of Object.keys(A))A[te]===void 0&&delete A[te];const L=await h._getAppCheckToken(),D=L?`#${vy}=${encodeURIComponent(L)}`:"";return`${Cy(h)}?${Fp(A).slice(1)}${D}`}function Cy({config:h}){return h.emulator?Ff(h,yy):`https://${h.authDomain}/${Ry}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="webStorageSupport";class Ly{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RE,this._completeRedirectFn=ZR,this._overrideRedirectResult=JR}async _openPopup(l,i,u,f){var I;dc((I=this.eventManagers[l._key()])===null||I===void 0?void 0:I.manager,"_initialize() not called before _openPopup()");const C=await fT(l,i,u,Sf(),f);return Sy(l,C,Xf())}async _openRedirect(l,i,u,f){await this._originValidation(l);const I=await fT(l,i,u,Sf(),f);return wR(I),new Promise(()=>{})}_initialize(l){const i=l._key();if(this.eventManagers[i]){const{manager:f,promise:I}=this.eventManagers[i];return f?Promise.resolve(f):(dc(I,"If manager is not set, promise should be"),I)}const u=this.initAndGetManager(l);return this.eventManagers[i]={promise:u},u.catch(()=>{delete this.eventManagers[i]}),u}async initAndGetManager(l){const i=await my(l),u=new ty(l);return i.register("authEvent",f=>(dt(f==null?void 0:f.authEvent,l,"invalid-auth-event"),{status:u.onEvent(f.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[l._key()]={manager:u},this.iframes[l._key()]=i,u}_isIframeWebStorageSupported(l,i){this.iframes[l._key()].send(df,{type:df},f=>{var I;const C=(I=f==null?void 0:f[0])===null||I===void 0?void 0:I[df];C!==void 0&&i(!!C),ea(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const i=l._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=oy(l)),this.originValidationPromises[i]}get _shouldInitProactively(){return mE()||hE()||Vf()}}const Ay=Ly;var mT="@firebase/auth",$T="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),((l=this.auth.currentUser)===null||l===void 0?void 0:l.uid)||null}async getToken(l){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(l)}:null}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const i=this.auth.onIdTokenChanged(u=>{l((u==null?void 0:u.stsTokenManager.accessToken)||null)});this.internalListeners.set(l,i),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const i=this.internalListeners.get(l);i&&(this.internalListeners.delete(l),i(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ny(h){Mp(new Od("auth",(l,{options:i})=>{const u=l.getProvider("app").getImmediate(),f=l.getProvider("heartbeat"),I=l.getProvider("app-check-internal"),{apiKey:C,authDomain:A}=u.options;dt(C&&!C.includes(":"),"invalid-api-key",{appName:u.name});const L={apiKey:C,authDomain:A,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$E(h)},D=new hR(u,f,I,L);return mR(D,i),D},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,i,u)=>{l.getProvider("auth-internal").initialize()})),Mp(new Od("auth-internal",l=>{const i=Zg(l.getProvider("auth").getImmediate());return(u=>new ky(u))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ed(mT,$T,wy(h)),Ed(mT,$T,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=5*60,Dy=YT("authIdTokenMaxAge")||My;let TT=null;const Py=h=>async l=>{const i=l&&await l.getIdTokenResult(),u=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(u&&u>Dy)return;const f=i==null?void 0:i.token;TT!==f&&(TT=f,await fetch(h,{method:f?"POST":"DELETE",headers:f?{Authorization:`Bearer ${f}`}:{}}))};function xy(h=LO()){const l=QT(h,"auth");if(l.isInitialized())return l.getImmediate();const i=fR(h,{popupRedirectResolver:Ay,persistence:[HR,LR,RE]}),u=YT("authTokenSyncURL");if(u&&typeof isSecureContext=="boolean"&&isSecureContext){const I=new URL(u,location.origin);if(location.origin===I.origin){const C=Py(I.toString());yR(i,C,()=>C(i.currentUser)),RR(i,A=>C(A))}}const f=_S("auth");return f&&$R(i,`http://${f}`),i}function By(){var h,l;return(l=(h=document.getElementsByTagName("head"))===null||h===void 0?void 0:h[0])!==null&&l!==void 0?l:document}dR({loadJS(h){return new Promise((l,i)=>{const u=document.createElement("script");u.setAttribute("src",h),u.onload=l,u.onerror=f=>{const I=rl("internal-error");I.customData=f,i(I)},u.type="text/javascript",u.charset="UTF-8",By().appendChild(u)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ny("Browser");const Uy={apiKey:'"AIzaSyDwR3PGc-BAh-GfP_R5DHauRKF6oNixABc",',authDomain:'"project-41041225-react.firebaseapp.com",',databaseURL:'"https://project-41041225-react-default-rtdb.asia-southeast1.firebasedatabase.app",',projectId:'"project-41041225-react",',storageBucket:'"project-41041225-react.firebasestorage.app",',messagingSenderId:'"855445856184",',appId:'"1:855445856184:web:627c5982777138bef4f94d",'},Fy=ZT(Uy),ur=xy(Fy),Hy=new rc,Gy=()=>{const h=Af(),l=async()=>{try{const i=await XR(ur,Hy);console.log(i),h("/")}catch(i){console.error("Login failed:",i),alert("登入失敗，請重試。")}};return Ae.jsxs("div",{className:"container mt-5",children:[Ae.jsx("h1",{children:"歡迎來到，登入網頁。"}),Ae.jsx("p",{children:"請使用您的帳號進行登入。"}),Ae.jsx("button",{className:"btn btn-primary",onClick:l,children:"登入 Google 帳號"})]})},Vy=()=>Ae.jsxs("div",{className:"container mt-5",children:[Ae.jsx("h1",{children:"歡迎來到，註冊網頁。"}),Ae.jsx("p",{children:"這是一個教育網站。"})]});var Pg={exports:{}},Wy=Pg.exports,ET;function n_(){return ET||(ET=1,function(h,l){(function(i,u){h.exports=u()})(Wy,function(){var i={},u,f,I,C,A,L,D,te,se,Y,fe,re,be,oe,de,Le,ke,nt,_t,$t,ot,Oe,ht,Ct,wn,En,ln,it,Ot,Ft,kt,ee,Je,j,z,_e,rt,je,lt,ze,Et,Re,ft,_n,hr,Fr,ds,xi,Nn,fn,ci,ui,Bi,He,It,Rt,hi,Mn,M,Ks,nn,yt,In,q,ve,E,R,F,G,me,wt,Gn,Bs,di,qn,T,v,N,X,ue,we,Ke,ps,Js,yo,qs,ta,Ui,pi,dr,pc,gc,Mh,cl,Us,Dn,gs,Qn,Pn,ul,Fi,pr,gr,_c,sn,_r,vo,Co,Hi,bu,Hr,fr,Rs,Su,Fs,Ou,mr,xn,$r,_s,Kt,Vn,Hs,na,Gr,Gs,Gi,Vi,Wi,hl,vt,Vr,sa,Lo,gi,Ao,zi,Wr,zr,ys,Qs,Vs,Tr,_i,Zs,ko,fc,Xr,mc,dl,ei,Ru,jr,Zn,wo,Er,No,$c,yu,Yr,Mo,pl,fi,Wn,ia,gl,Tc,_l,fl,Ec,is,Kr,Ic,ml,bc,ra,mi,Jr,oa,Ir,Sc,Oc,br,qr,Rc,yc,Dh,vu,Cu,vc,Cc,Lc,Lu,Qr,Xi,la,$l,Ac,aa,ji,Au,ku,ca,wu,Nu,ti,Do,Zr,Mu,Du,Pu,kc,Tl,Po,eo,wc,El,Nc,Mc,Dc,to,Yi,Ki,no,vs,xu,Pc,ua,xc,Bc,Bu,Uu,Ph,xo,ha,da,fs,Ws,Uc,pa,Ji,Nt,ga,Il,so,io,bl,Sr,ro,Fc,qi,$i,Sl,Hc,_a,Fu,Hu,Gc,Ti,fa,Ol,Or,Vc,Wc,xh,ma,Bo,Gu,Uo,oo,Jt,lo,Qi,Ei,Vu,zc,ni,si,ms,Wu,$a,Ta,zu,Ii,Rl,Rr,yl,Ea,Xc,Bh,jc,vl,ao,Cl,yr,Xu,co,zs,Fo,ii,Ia,Yc,Ll,Cs,$s,rs,bi,ba,vr,Si,Ht,zt,Oi,es,mn,ts,uo,ns,Sa,ju,Yu,Oa,Ge,$n,hn,Mt,Ls,Al,Ce,Dt,b,p,$,y,U,W,Z,ae,Se,Ue,Fe,Ne,Qe,Xe,xe,qe,at,Gt,Vt,pt,bt,ut,gt,mt,Pt,xt,qt,zn,As,Bn,Un,ks,Zt,ws,vn,Zi,bn,Lt,Xt,Xn,en,ri,Ra,Ho,Ns,er,ya,kl,Ri,yi,wl,va,Go,Kc,Nl,ss,Cr,Vo,Lr,Ml,tr,Jc,Ca,tn,Dl,La,Wo,zo,Ku,Xo,an,Sn,jn,Ju,Aa,ka,kd,os,qu,Qu,Zu,nr,oi,wa,Uh,Fh,wd,Hh,Nd,Md,Dd,Pd,xd,ce;u=function(e,t,n,o){if(!(e instanceof pe)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const c=t.toLowerCase();if(!n)throw Error("Can not register a null value");let g=sr[e],S=Na[e];if(g||(g=sr[e]=Object.create(null),S=Na[e]=Object.create(null)),f(e,n),!o&&g[c]&&g[c]!==n)throw Error('Name "'+c+'" with type "'+e+'" already registered.');g[c]=n,S[c]=t},f=function(e,t){switch(e){case String(pe.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},I=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const n=sr[e];n&&n[t]?(delete sr[e][t],delete Na[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},C=function(e,t,n){e=`${e}`.toLowerCase(),t=t.toLowerCase();const o=sr[e];if(!o||!o[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",n)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return o[t]},A=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=sr[e])?!!e[t]:!1},L=function(e,t,n){return C(e,t,n)},D=function(e,t,n){return C(e,t,n)},te=function(e,t,n){e=`${e}`.toLowerCase();var o=sr[e];if(!o){if(o=`Unable to find [${e}] in the registry.`,n)throw Error(`${o} You must require or register a ${e} plugin.`);return console.warn(o),null}if(!t)return o;e=Na[e],n=Object.create(null);for(const c of Object.keys(o))n[e[c]]=o[c];return n},se=function(e,t,n){return t=t.plugins[String(e)]||vi,typeof t=="function"?t:L(e,t,n)},Y=function(e,t,n,o){e=e+" was deprecated in "+t+" and will be deleted in "+n+".",o&&(e+=`
Use `+o+" instead."),Ud.has(e)||(Ud.add(e),console.warn(e))},fe=function(){return"blockly-"+(Xp++).toString(36)},re=function(){return Hd.genUid()},be=function(e){return e.type===J.BLOCK_CREATE},oe=function(e){return e.type===J.BLOCK_DELETE},de=function(e){return e.type===J.BLOCK_CHANGE},Le=function(e){return e.type===J.BLOCK_FIELD_INTERMEDIATE_CHANGE},ke=function(e){return e.type===J.BLOCK_MOVE},nt=function(e){return e.type===J.CLICK},_t=function(e){return e.type===J.BUBBLE_OPEN},$t=function(e){return e.type===J.VIEWPORT_CHANGE},i.setRecordUndo$$module$build$src$core$events$utils=function(e){eh=e},ot=function(){return eh},Oe=function(e){zd.fireInternal(e)},ht=function(e){if(it()){if(!ho.length)try{requestAnimationFrame(()=>{setTimeout(Ct,0)})}catch{setTimeout(Ct,0)}wn(e)}},Ct=function(){const e=En(ho,!0);ho.length=0;for(const t of e){if(!t.workspaceId)continue;let n;(n=j(t.workspaceId))==null||n.fireChangeListener(t)}},wn=function(e){if(de(e)&&e.element==="mutation"){let t;for(t=ho.length;0<t;t--){const n=ho[t-1];if(n.group!==e.group||n.workspaceId!==e.workspaceId||!ke(n)||n.newParentId!==e.blockId)break}ho.splice(t,0,e)}else ho.push(e)},En=function(e,t=!0){t||(Y("filter(queue, /*forward=*/false)","v11.2","v12"),e=e.slice().reverse());const n=[];for(const o of e)if(e=n[n.length-1],!o.isNull())if(e&&e.workspaceId===o.workspaceId&&e.group===o.group)if(ke(o)&&ke(e)&&o.blockId===e.blockId){if(e.newParentId=o.newParentId,e.newInputName=o.newInputName,e.newCoordinate=o.newCoordinate,e.reason||o.reason){let c,g;e.reason=Array.from(new Set(((c=e.reason)!=null?c:[]).concat((g=o.reason)!=null?g:[])))}}else de(o)&&de(e)&&o.blockId===e.blockId&&o.element===e.element&&o.name===e.name?e.newValue=o.newValue:$t(o)&&$t(e)?(e.viewTop=o.viewTop,e.viewLeft=o.viewLeft,e.scale=o.scale,e.oldScale=o.oldScale):nt(o)&&_t(e)||n.push(o);else n.push(o);return e=n.filter(o=>!o.isNull()),t||e.reverse(),e},ln=function(){for(let e=0,t;t=ho[e];e++)t.recordUndo=!1},i.disable$$module$build$src$core$events$utils=function(){Wd++},i.enable$$module$build$src$core$events$utils=function(){Wd--},it=function(){return Wd===0},i.getGroup$$module$build$src$core$events$utils=function(){return Vd},i.setGroup$$module$build$src$core$events$utils=function(e){zd.setGroupInternal(e)},Ot=function(e){Vd=typeof e=="boolean"?e?re():"":e},Ft=function(e){const t=[];e=e.getDescendants(!1);for(let n=0,o;o=e[n];n++)t[n]=o.id;return t},kt=function(e,t){const n=ee(e.type);if(!n)throw Error("Unknown event type.");return n.fromJson(e,t)},ee=function(e){const t=L(pe.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},Je=function(e){if((ke(e)||be(e))&&e.workspaceId){var t=j(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const n=eh;try{eh=!1;const o=e.getParent();if(o&&!o.hasDisabledReason(Vh)){const c=e.getDescendants(!1);for(let g=0,S;S=c[g];g++)S.setDisabledReason(!1,Vh)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,Vh),e=e.getNextBlock();while(e)}finally{eh=n}}}},j=function(e){return Pl[e]||null},z=function(){const e=[];for(const t in Pl)e.push(Pl[t]);return e},_e=function(e){Pl[e.id]=e},rt=function(e){delete Pl[e.id]},je=function(){return jp},lt=function(e){jp=e},ze=function(){return Ma},i.setSelected$$module$build$src$core$common=function(e){if(Ma!==e){var t,n,o,c,g,S,w=new(ee(J.SELECTED))((o=(t=Ma)==null?void 0:t.id)!=null?o:null,(c=e==null?void 0:e.id)!=null?c:null,(S=(g=e==null?void 0:e.workspace.id)!=null?g:(n=Ma)==null?void 0:n.workspace.id)!=null?S:"");Oe(w);var ie;(ie=Ma)==null||ie.unselect(),Ma=e;var De;(De=Ma)==null||De.select()}},Et=function(){return Yp},Re=function(e){Yp=e},ft=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),n=e.getCachedParentSvgSize();var o=t.parentElement;if(o instanceof HTMLElement){var c=o.offsetWidth;o=o.offsetHeight,n.width!==c&&(t.setAttribute("width",c+"px"),e.setCachedParentSvgSize(c,null)),n.height!==o&&(t.setAttribute("height",o+"px"),e.setCachedParentSvgSize(null,o)),e.resize()}},_n=function(e,t){const n=Object.create(null),o=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=o.indexOf(e),o.splice(e,o.length-e));for(let c=0,g;g=o[c];c++)n[g.type]?n[g.type]++:n[g.type]=1;return n},hr=function(e){return function(){this.jsonInit(e)}},Fr=function(e){Wh.defineBlocksWithJsonArrayInternal(e)},ds=function(e){i.defineBlocks$$module$build$src$core$common(i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let n=0;n<e.length;n++){const o=e[n];if(!o){console.warn(`Block definition #${n} in JSON array is ${o}. Skipping`);continue}const c=o.type;c?t[c]={init:hr(o)}:console.warn(`Block definition #${n} in JSON array is missing a type attribute. Skipping.`)}return t},i.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const n=e[t];t in Xs&&console.warn(`Block definition "${t}" overwrites previous definition.`),Xs[t]=n}},xi=function(e,t){Nn(),nh=setTimeout(function(){t&&t.handleRightClick(e)},qc)},Nn=function(){nh&&(clearTimeout(nh),nh=0)},fn=function(){Qc=null},ci=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&Bi(e)},ui=function(e){return`${e.pointerId}`},Bi=function(e){const t=ui(e);return Qc?Qc===t:e.type==="pointerdown"?(Qc=t,!0):!1},He=function(e,t,n,o,c){function g(w){(c||ci(w))&&(n?o.call(n,w):o(w))}const S=[];if(t in Pa)for(let w=0;w<Pa[t].length;w++){const ie=Pa[t][w];e.addEventListener(ie,g,!1),S.push([e,ie,g])}else e.addEventListener(t,g,!1),S.push([e,t,g]);return S},It=function(e,t,n,o){function c(S){n?o.call(n,S):o(S)}const g=[];if(t in Pa)for(let S=0;S<Pa[t].length;S++){const w=Pa[t][S];e.addEventListener(w,c,!1),g.push([e,w,c])}else e.addEventListener(t,c,!1),g.push([e,t,c]);return g},Rt=function(e){const t=e[e.length-1][2];for(;e.length;){const[n,o,c]=e.pop();n.removeEventListener(o,c,!1)}return t},hi=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},Mn=function(e){return e.ctrlKey&&rh?!0:e.button===2},M=function(e,t,n){const o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,n||(n=t.getScreenCTM().inverse()),o.matrixTransform(n)},Ks=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*qh,y:e.deltaY*qh};case 2:return{x:e.deltaX*oh,y:e.deltaY*oh}}},nn=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},yt=function(e){if(Zc)throw Error("CSS already injected");wr+=`
`+e},In=function(e,t){Zc||(Zc=!0,e&&(e=t.replace(/[\\/]$/,""),t=wr.replace(/<<<PATH>>>/g,e),wr="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},q=function(e,t,n){e=document.createElementNS(xa,`${e}`);for(const o in t)e.setAttribute(o,`${t[o]}`);return n&&n.appendChild(e),e},ve=function(e,t){return t=t.split(" "),t.every(n=>e.classList.contains(n))?!1:(e.classList.add(...t),!0)},E=function(e,t){e.classList.remove(...t.split(" "))},R=function(e,t){return t=t.split(" "),t.every(n=>!e.classList.contains(n))?!1:(e.classList.remove(...t),!0)},F=function(e,t){return e.classList.contains(t)},G=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},me=function(e,t){const n=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");n?t.insertBefore(e,n):t.appendChild(e)},wt=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Gn=function(){tp++,cn||(cn=Object.create(null))},Bs=function(){tp--,tp||(cn=null)},di=function(e){const t=e.textContent+`
`+e.className.baseVal;let n;if(cn&&(n=cn[t]))return n;try{n=e.getComputedTextLength()}catch{return 8*e.textContent.length}return cn&&(cn[t]=n),n},qn=function(e,t,n,o){return T(e,t+"pt",n,o)},T=function(e,t,n,o){const c=e.textContent;e=c+`
`+e.className.baseVal;var g;return cn&&(g=cn[e])||(Qh||(g=document.createElement("canvas"),g.className="blocklyComputeCanvas",document.body.appendChild(g),Qh=g.getContext("2d")),Qh.font=n+" "+t+" "+o,g=c?Qh.measureText(c).width:0,cn&&(cn[e]=g)),g},v=function(e,t,n,o){const c=document.createElement("span");c.style.font=n+" "+t+" "+o,c.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(c),t.appendChild(e),document.body.appendChild(t),n={height:0,baseline:0};try{t.style.alignItems="baseline",n.baseline=e.offsetTop-c.offsetTop,t.style.alignItems="flex-end",n.height=e.offsetTop-c.offsetTop}finally{document.body.removeChild(t)}return n},N=function(e){return Ba.getSizeInternal(e)},X=function(e){if(we(e,"display")!=="none")return ue(e);const t=e.style,n=t.display,o=t.visibility,c=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const g=e.offsetWidth;return e=e.offsetHeight,t.display=n,t.position=c,t.visibility=o,new Ee(g,e)},ue=function(e){return Y("Blockly.utils.style.getSizeWithDisplay()","v11.2","v13"),new Ee(e.offsetWidth,e.offsetHeight)},we=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},Ke=function(e){const t=new Ie(0,0);e=e.getBoundingClientRect();var n=document.documentElement;return n=new Ie(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop),t.x=e.left+n.x,t.y=e.top+n.y,t},ps=function(){const e=document.body,t=document.documentElement;return new Ie(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},Js=function(e){Y("Blockly.utils.style.getBorderBox()","v11.2","v13");const t=parseFloat(we(e,"borderLeftWidth")),n=parseFloat(we(e,"borderRightWidth")),o=parseFloat(we(e,"borderTopWidth"));return e=parseFloat(we(e,"borderBottomWidth")),new jt(o,e,t,n)},yo=function(e,t,n){Y("Blockly.utils.style.scrollIntoContainerView()","v11.2","v13","the native Element.scrollIntoView()"),e=qs(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},qs=function(e,t,n){Y("Blockly.utils.style.getContainerOffsetToScrollInto()","v11.2","v13");var o=Ke(e),c=Ke(t),g=Js(t);const S=o.x-c.x-g.left;return o=o.y-c.y-g.top,c=ue(e),e=t.clientWidth-c.width,c=t.clientHeight-c.height,g=t.scrollLeft,t=t.scrollTop,n?(g+=S-e/2,t+=o-c/2):(g+=Math.min(S,Math.max(S-e,0)),t+=Math.min(o,Math.max(o-c,0))),new Ie(g,t)},ta=function(e){const t=new Ie(0,0);var n=e.x&&e.getAttribute("x");const o=e.y&&e.getAttribute("y");return n&&(t.x=parseInt(n)),o&&(t.y=parseInt(o)),(n=(n=e.getAttribute("transform"))&&n.match(np))&&(t.x+=Number(n[1]),n[3]&&(t.y+=Number(n[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(Qp))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},Ui=function(e){let t=0,n=0;for(;e;){const o=ta(e);if(t+=o.x,n+=o.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new Ie(t,n)},pi=function(){const e=ps();return new jt(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},dr=function(){const e=document.documentElement,t=window;return new Ie(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},pc=function(e,t){var n=t.x;t=t.y;const o=e.getInjectionDiv().getBoundingClientRect();return n=new Ie(n-o.left,t-o.top),t=e.getOriginOffsetInPixels(),Ie.difference(n,t).scale(1/e.scale)},gc=function(e,t){var n=t.scale(e.scale);t=n.x,n=n.y;const o=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new Ie(t+o.left+e.x,n+o.top+e.y)},Mh=function(e){({document:ch=ch,DOMParser:Ua=Ua,XMLSerializer:Fa=Fa}=e),ah=new Ua,Zh=new Fa},i.createElement$$module$build$src$core$utils$xml=function(e){return ch.createElementNS(as,e)},i.createTextNode$$module$build$src$core$utils$xml=function(e){return ch.createTextNode(e)},i.textToDom$$module$build$src$core$utils$xml=function(e){let t=ah.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=ah.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},cl=function(e){return Us(Zh.serializeToString(e))},Us=function(e){return e.replace(Mr,t=>`&#${t.charCodeAt(0)};`)},Dn=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=sn(e),e=pr(e)),gs(e),e):null},gs=function(e){const t=e.kind;if(e=e.contents,t&&t!==sp&&t!==ed)throw Error("Invalid toolbox kind "+t+". Please supply either "+sp+" or "+ed);if(!e)throw Error("Toolbox must have a contents attribute.")},Qn=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:gr(e):[]},Pn=function(e){return ip.hasCategoriesInternal(e)},ul=function(e){if(!e)return!1;const t=e.kind;return t?t===ed:!!e.contents.filter(n=>n.kind.toUpperCase()==="CATEGORY").length},Fi=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},pr=function(e){const t={contents:gr(e)};return e instanceof Node&&_c(e,t),t},gr=function(e){const t=[];let n=e.childNodes;n||(n=e);for(let o=0,c;c=n[o];o++){if(!c.tagName)continue;e={};const g=c.tagName.toUpperCase();e.kind=g,g==="BLOCK"?e.blockxml=c:c.childNodes&&0<c.childNodes.length&&(e.contents=gr(c)),_c(c,e),t.push(e)}return t},_c=function(e,t){for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];o.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[o.nodeName.replace("css-","")]=o.value):t[o.nodeName]=o.value}},sn=function(e){let t=null;if(e)if(typeof e=="string"){if(t=i.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},_r=function(e,t,n,o,c,g){const S=g.scrollbar&&g.scrollbar.canScrollVertically();return e.horizontal===Ha.LEFT?(n=c.absoluteMetrics.left+n,S&&g.RTL&&(n+=Tn.scrollbarThickness)):(n=c.absoluteMetrics.left+c.viewMetrics.width-t.width-n,S&&!g.RTL&&(n-=Tn.scrollbarThickness)),e.vertical===Yo.TOP?e=c.absoluteMetrics.top+o:(e=c.absoluteMetrics.top+c.viewMetrics.height-t.height-o,g.scrollbar&&g.scrollbar.canScrollHorizontally()&&(e-=Tn.scrollbarThickness)),new jt(e,e+t.height,n,n+t.width)},vo=function(e,t){return{horizontal:t.toolboxMetrics.position===Ze.LEFT||e.horizontalLayout&&!e.RTL?Ha.RIGHT:Ha.LEFT,vertical:t.toolboxMetrics.position===Ze.BOTTOM?Yo.TOP:Yo.BOTTOM}},Co=function(e,t,n,o){const c=e.left,g=e.right-e.left,S=e.bottom-e.top;for(let w=0;w<o.length;w++){const ie=o[w];e.intersects(ie)&&(e=n===Ko.UP?ie.top-S-t:ie.bottom+t,e=new jt(e,e+S,c,c+g),w=-1)}return e},Hi=function(e,t){u(pe.SERIALIZER,e,t)},bu=function(e){I(pe.SERIALIZER,e)},Hr=function(e,{addCoordinates:t=!1,saveIds:n=!0}={}){const o=e.workspace,c=Object.create(null);return c.height=e.getSize().height,c.width=e.getSize().width,n&&(c.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),c.x=o.RTL?o.getWidth()-t.x:t.x,c.y=t.y),e.getText()&&(c.text=e.getText()),e.isCollapsed()&&(c.collapsed=!0),e.isOwnEditable()||(c.editable=!1),e.isOwnMovable()||(c.movable=!1),e.isOwnDeletable()||(c.deletable=!1),c},fr=function(e,t,{recordUndo:n=!1}={}){const o=ot();if(i.setRecordUndo$$module$build$src$core$events$utils(n),n=t.newComment(e.id),e.text!==void 0&&n.setText(e.text),e.x!==void 0||e.y!==void 0){const g=n.getRelativeToSurfaceXY();let S,w=(S=e.x)!=null?S:g.x;w=t.RTL?t.getWidth()-w:w;var c;t=(c=e.y)!=null?c:g.y,n.moveTo(new Ie(w,t))}if(e.width!==void 0||e.height){c=n.getSize();let g,S;n.setSize(new Ee((g=e.width)!=null?g:c.width,(S=e.height)!=null?S:c.height))}return e.collapsed!==void 0&&n.setCollapsed(e.collapsed),e.editable!==void 0&&n.setEditable(e.editable),e.movable!==void 0&&n.setMovable(e.movable),e.deletable!==void 0&&n.setDeletable(e.deletable),i.setRecordUndo$$module$build$src$core$events$utils(o),n},Rs=function(e,t){u(pe.PASTER,e,t)},Su=function(e){I(pe.PASTER,e)},Fs=function(e){const t=e.workspace,n=e.getRelativeToSurfaceXY(),o=new Ie(0,0),c=t.getTopComments(!1).filter(g=>g.id!==e.id).map(g=>g.getRelativeToSurfaceXY());for(;Ou(Ie.sum(n,o),c);)o.translate(t.RTL?-30:30,30);e.moveTo(Ie.sum(n,o))},Ou=function(e,t){return t.some(n=>1>=Math.abs(n.x-e.x)&&1>=Math.abs(n.y-e.y))},mr=function(e,t){e.setAttribute(nd,t)},xn=function(e,t,n){Array.isArray(n)&&(n=n.join(" ")),e.setAttribute(Va+t,`${n}`)},$r=function(e){return e.saveState!==void 0&&e.loadState!==void 0},_s=function(e){return na(e),Hs()?(Gr(),Promise.resolve()):(fo||(fo=new Promise(t=>{dh=t,ph=window.requestAnimationFrame(()=>{Gr(),t()})})),fo)},Kt=function(){return fo||Promise.resolve()},Vn=function(e){e||window.cancelAnimationFrame(ph),Gr(e),!e&&dh&&dh()},Hs=function(){return Kh},na=function(e){_o.add(e),eu.set(e,i.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?na(t):za.add(e)},Gr=function(e){const t=e?new Set([e]):new Set([...za].map(g=>g.workspace)),n=[...za].filter(Gi).filter(g=>t.has(g.workspace));for(var o of n)Vi(o);for(const g of t)g.resizeContents();for(var c of n)o=c.getRelativeToSurfaceXY(),c.updateComponentLocations(o);for(const g of n)c=i.getGroup$$module$build$src$core$events$utils(),(o=eu.get(g))&&i.setGroup$$module$build$src$core$events$utils(o),g.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(c);for(const g of n)Gs(g);e||(fo=null)},Gs=function(e){za.delete(e),_o.delete(e),eu.delete(e);for(const t of e.getChildren(!1))Gs(t)},Gi=function(e){return!e.isDisposed()&&!e.getParent()},Vi=function(e){if(_o.has(e)&&e.initialized){for(const t of e.getChildren(!1))Vi(t);e.renderEfficiently()}},Wi=function(e,t){Ps(e,t)},hl=function(e){Ps=e},vt=function(e,t){Ys.confirmInternal(e,t)},Vr=function(e,t){Jo(e,t)},sa=function(e){Jo=e},Lo=function(e,t,n){rr(e,t,n)},gi=function(e){rr=e},Ao=function(e){return e.getProcedureDef!==void 0},zi=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},Wr=function(e){return e.getVariableModel!==void 0},i.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let n=0;n<e.length;n++){const o=e[n].getVarModels();if(o)for(let c=0;c<o.length;c++){const g=o[c];g.getId()&&t.add(g)}}return Array.from(t.values())},i.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let o=0,c;c=e[o];o++){var n=c.getDeveloperVariables;if(n){n=n();for(let g=0;g<n.length;g++)t.add(n[g])}}return Array.from(t.values())},zr=function(e){let t=[];const n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(o){_i(o.getTargetWorkspace())}),t.push(n),e=ys(e),t=t.concat(e)},ys=function(e){e=e.getVariablesOfType("");const t=[];if(0<e.length){var n=e[e.length-1];if(Xs.variables_set){var o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",Xs.math_change?"8":"24"),o.appendChild(ei(n)),t.push(o)}if(Xs.math_change&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","math_change"),o.setAttribute("gap",Xs.variables_get?"20":"8"),o.appendChild(ei(n)),n=i.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(n),t.push(o)),Xs.variables_get){e.sort(tu.compareByName);for(let c=0,g;g=e[c];c++)n=i.createElement$$module$build$src$core$utils$xml("block"),n.setAttribute("type","variables_get"),n.setAttribute("gap","8"),n.appendChild(ei(g)),t.push(n)}}return t},Qs=function(e){return id.generateUniqueNameInternal(e)},Vs=function(e){return Tr(qo.charAt(0),e.getAllVariableNames())},Tr=function(e,t){if(!t.length)return e;const n=qo;let o="",c=n.indexOf(e);for(;;){let g=!1;for(let S=0;S<t.length;S++)if(t[S].toLowerCase()===e){g=!0;break}if(!g)break;c++,c===n.length&&(c=0,o=`${Number(o)+1}`),e=n.charAt(c)+o}return e},_i=function(e,t,n){function o(g){Zs(i.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,g,function(S){if(S){var w=fc(S,e);if(w){if(w.type===c)var ie=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",w.name);else ie=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,ie=ie.replace("%1",w.name).replace("%2",w.type);Wi(ie,function(){o(S)})}else e.createVariable(S,c),t&&t(S)}else t&&t(null)})}const c=n||"";o("")},i.renameVariable$$module$build$src$core$variables=function(e,t,n){function o(c){const g=i.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);Zs(g,c,function(S){if(S){var w=ko(S,t.type,e),ie=Xr(t.name,S,e);if(w||ie){var De="";w?De=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",w.name).replace("%2",w.type):ie&&(De=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",S).replace("%2",ie)),Wi(De,function(){o(S)})}else e.renameVariableById(t.getId(),S),n&&n(S)}else n&&n(null)})}o("")},Zs=function(e,t,n){Lo(e,t,function(o){o&&(o=o.replace(/[\s\xa0]+/g," ").trim(),o===i.Msg$$module$build$src$core$msg.RENAME_VARIABLE||o===i.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(o=null),n(o)})},ko=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,c;c=n[o];o++)if(c.name.toLowerCase()===e&&c.type!==t)return c;return null},fc=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let n=0,o;o=t[n];n++)if(o.name.toLowerCase()===e)return o;return null},Xr=function(e,t,n){return n.getProcedureMap().getProcedures().length?mc(e,t,n):dl(e,t,n)},mc=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),n=n.getProcedureMap().getProcedures();for(const c of n){var o=c.getParameters().filter(Wr).map(g=>g.getVariableModel().name);if(o&&(n=o.some(g=>g.toLowerCase()===e),o=o.some(g=>g.toLowerCase()===t),n&&o))return c.getName()}return null},dl=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),n=n.getAllBlocks(!1);for(const c of n){if(!Ao(c))continue;n=c.getProcedureDef();var o=n[1];const g=o.some(S=>S.toLowerCase()===e);if(o=o.some(S=>S.toLowerCase()===t),g&&o)return n[0]}return null},ei=function(e){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=i.createTextNode$$module$build$src$core$utils$xml(e.name),t.appendChild(e),t},i.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,n,o){let c=i.getVariable$$module$build$src$core$variables(e,t,n,o);return c||(c=Ru(e,t,n,o)),c},i.getVariable$$module$build$src$core$variables=function(e,t,n,o){const c=e.getPotentialVariableMap();let g=null;if(t&&(g=e.getVariableById(t),!g&&c&&(g=c.getVariableById(t)),g))return g;if(n){if(o===void 0)throw Error("Tried to look up a variable by name without a type");g=e.getVariable(n,o),!g&&c&&(g=c.getVariable(n,o))}return g},Ru=function(e,t,n,o){const c=e.getPotentialVariableMap();return n||(n=Qs(e.isFlyout?e.targetWorkspace:e)),c?c.createVariable(n,o,t):e.createVariable(n,o,t)},jr=function(e,t){e=e.getAllVariables();const n=[];if(t.length!==e.length)for(let o=0;o<e.length;o++){const c=e[o];t.includes(c)||n.push(c)}return n},Zn=function(e,{addCoordinates:t=!1,addInputBlocks:n=!0,addNextBlocks:o=!0,doFullSerialization:c=!0,saveIds:g=!0}={}){if(e.isInsertionMarker())return null;const S={type:e.type,id:g?e.id:void 0};return t&&Er(e,S),wo(e,S),No(e,S,c),$c(e,S,c),yu(e,S,c),n&&Yr(e,S,c,g),o&&Mo(e,S,c,g),S},wo=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},Er=function(e,t){const n=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(n.RTL?n.getWidth()-e.x:e.x),t.y=Math.round(e.y)},No=function(e,t,n){e.saveExtraState?(e=e.saveExtraState(n),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=ms(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},$c=function(e,t,n){const o=Object.create(null);for(const c of e.getIcons())$r(c)&&(e=c.saveState(n))&&(o[c.getType().toString()]=e);Object.keys(o).length&&(t.icons=o)},yu=function(e,t,n){const o=Object.create(null);for(let c=0;c<e.inputList.length;c++){const g=e.inputList[c];for(let S=0;S<g.fieldRow.length;S++){const w=g.fieldRow[S];w.isSerializable()&&(o[w.name]=w.saveState(n))}}Object.keys(o).length&&(t.fields=o)},Yr=function(e,t,n,o){const c=Object.create(null);for(let g=0;g<e.inputList.length;g++){const S=e.inputList[g];if(!S.connection)continue;const w=pl(S.connection,n,o);w&&(c[S.name]=w)}Object.keys(c).length&&(t.inputs=c)},Mo=function(e,t,n,o){e.nextConnection&&(e=pl(e.nextConnection,n,o))&&(t.next=e)},pl=function(e,t,n){const o=e.getShadowState(!0);if(e=e.targetBlock(),!o&&!e)return null;const c=Object.create(null);return o&&(c.shadow=o),e&&!e.isShadow()&&(c.block=Zn(e,{doFullSerialization:t,saveIds:n})),c},fi=function(e,t,{recordUndo:n=!1}={}){return e=Wn(e,t,{recordUndo:n}),t.rendered&&Vn(),e},Wn=function(e,t,{parentConnection:n,isShadow:o=!1,recordUndo:c=!1}={}){const g=ot();i.setRecordUndo$$module$build$src$core$events$utils(c),(c=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),i.disable$$module$build$src$core$events$utils();const S=t.getAllVariables();let w;try{w=ia(e,t,{parentConnection:n,isShadow:o})}finally{i.enable$$module$build$src$core$events$utils()}if(gl(t,S),it()&&Oe(new(ee(J.BLOCK_CREATE))(w)),i.setGroup$$module$build$src$core$events$utils(c),i.setRecordUndo$$module$build$src$core$events$utils(g),t.rendered){const ie=w;setTimeout(()=>{ie.disposed||ie.setConnectionTracking(!0)},1)}return w},ia=function(e,t,{parentConnection:n,isShadow:o=!1}={}){if(!e.type)throw new rp(e);const c=t.newBlock(e.type,e.id);return c.setShadow(o),Tc(c,e),_l(c,e),fl(c,e),Ec(n,c,e),is(c,e),Kr(c,e),Ic(c,e),ml(c,e),ra(c,t.rendered),c},gl=function(e,t){if(it())for(e=jr(e,t),t=0;t<e.length;t++){const n=e[t];Oe(new(ee(J.VAR_CREATE))(n))}},Tc=function(e,t){let n=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const o=e.workspace;n=o.RTL?o.getWidth()-n:n,e.moveBy(n,t)},_l=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,Is),Array.isArray(t.disabledReasons))for(const n of t.disabledReasons)e.setDisabledReason(!0,n);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},fl=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(i.textToDom$$module$build$src$core$utils$xml(t.extraState)))},Ec=function(e,t,n){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new eg(n);if(e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var o=t.outputConnection;if(!o)throw new Ya("output",t,n)}else if(o=t.previousConnection,!o)throw new Ya("previous",t,n);if(!e.connect(o)){const c=t.workspace.connectionChecker;throw new mh(c.getErrorMessage(c.canConnectWithReason(o,e,!1),o,e),e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,n)}}},is=function(e,t){if(t.icons){var n=Object.keys(t.icons);for(const c of n){n=t.icons[c];var o=e.getIcon(c);if(!o){if(o=L(pe.ICON,c,!1),!o)throw new tg(c,e,t);o=new o(e),e.addIcon(o)}$r(o)&&o.loadState(n)}}},Kr=function(e,t){if(t.fields){var n=Object.keys(t.fields);for(let o=0;o<n.length;o++){const c=n[o],g=t.fields[c],S=e.getField(c);S?S.loadState(g):console.warn(`Ignoring non-existant field ${c} in block ${e.type}`)}}},Ic=function(e,t){if(t.inputs){var n=Object.keys(t.inputs);for(let o=0;o<n.length;o++){const c=n[o],g=e.getInput(c);if(!g||!g.connection)throw new Ya(c,e,t);bc(g.connection,t.inputs[c])}}},ml=function(e,t){if(t.next){if(!e.nextConnection)throw new Ya("next",e,t);bc(e.nextConnection,t.next)}},bc=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&ia(t.block,e.getSourceBlock().workspace,{parentConnection:e})},ra=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const n of e.getIcons())n.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},mi=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},Jr=function(e){return e*Math.PI/180},oa=function(e){return 180*e/Math.PI},Ir=function(e,t,n){if(n<e){const o=n;n=e,e=o}return Math.max(e,Math.min(t,n))},Sc=function(){document.querySelector(".blocklyDropDownDiv")||(Bt=document.createElement("div"),Bt.className="blocklyDropDownDiv",(Et()||document.body).appendChild(Bt),Ni=document.createElement("div"),Ni.className="blocklyDropDownContent",Bt.appendChild(Ni),$o=document.createElement("div"),$o.className="blocklyDropDownArrow",Bt.appendChild($o),Bt.style.opacity="0",Bt.style.transition="transform "+$h+"s, opacity "+$h+"s",Bt.addEventListener("focusin",function(){ve(Bt,"blocklyFocused")}),Bt.addEventListener("focusout",function(){R(Bt,"blocklyFocused")}))},Oc=function(e){Qo=e},br=function(){return Pr},qr=function(){return Ni},Rc=function(){Ni.textContent="",Ni.style.width=""},yc=function(e,t){Bt.style.backgroundColor=e,Bt.style.borderColor=t},Dh=function(e,t,n,o){return Cc(Cu(t),e,n,o)},vu=function(e,t,n){return ld=!0,Cc(vc(e),e,t,n)},Cu=function(e){var t=e.getSvgRoot();const n=e.workspace.scale,o=e.height*n;return e=e.width*n,t=Ke(t),new jt(t.y,t.y+o,t.x,t.x+e)},vc=function(e){return e=e.getScaledBBox(),new jt(e.top,e.bottom,e.left,e.right)},Cc=function(e,t,n,o){const c=e.left+(e.right-e.left)/2,g=e.bottom;e=e.top,o&&(e+=o),o=t.getSourceBlock();let S=o.workspace;for(;S.options.parentWorkspace;)S=S.options.parentWorkspace;return Oc(S.getParentSvg().parentNode),Lc(t,o.RTL,c,g,c,e,n)},Lc=function(e,t,n,o,c,g,S){return Pr=e,Ka=S||null,Bt.style.direction=t?"rtl":"ltr",e=je(),bs=e.getRenderer().getClassName(),zl=e.getTheme().getClassName(),bs&&ve(Bt,bs),zl&&ve(Bt,zl),Au(n,o,c,g)},Lu=function(e,t,n,o){return e=la(e,n.left,n.right,o.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+ap,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Qr=function(e,t,n,o){return e=la(e,n.left,n.right,o.width),{initialX:e.divX,initialY:t-o.height,finalX:e.divX,finalY:t-o.height-ap,arrowX:e.arrowX,arrowY:o.height-2*lp-rd/2,arrowAtTop:!1,arrowVisible:!0}},Xi=function(e,t,n){return e=la(e,t.left,t.right,n.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},la=function(e,t,n,o){return t=Ir(t,e-o/2,n-o),e=e-rd/2-t,n=ng,e=Ir(n,e,o-n-rd),{arrowX:e,divX:t}},$l=function(){return!!Pr},Ac=function(e,t){return Pr===e?(t?ji():aa(),!0):!1},aa=function(){Bt.style.transform="translate(0, 0)",Bt.style.opacity="0",od=setTimeout(function(){ji()},1e3*$h),Ka&&(Ka(),Ka=null)},ji=function(){$l()&&(od&&clearTimeout(od),Bt.style.transform="",Bt.style.left="",Bt.style.top="",Bt.style.opacity="0",Bt.style.display="none",Bt.style.backgroundColor="",Bt.style.borderColor="",Ka&&(Ka(),Ka=null),Rc(),Pr=null,bs&&(R(Bt,bs),bs=""),zl&&(R(Bt,zl),zl=""),je().markFocused())},Au=function(e,t,n,o){e=Th.getPositionMetrics(e,t,n,o),e.arrowVisible?($o.style.display="",$o.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",$o.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):$o.style.display="none",t=Math.floor(e.initialX),n=Math.floor(e.initialY),o=Math.floor(e.finalX);const c=Math.floor(e.finalY);return Bt.style.left=t+"px",Bt.style.top=n+"px",Bt.style.display="block",Bt.style.opacity="1",Bt.style.transform="translate("+(o-t)+"px,"+(c-n)+"px)",!!e.arrowAtTop},ku=function(){if(Pr){var e=Pr.getSourceBlock();e=ld?vc(Pr):Cu(e);const t=e.left+(e.right-e.left)/2;Au(t,e.bottom,t,e.top)}else aa()},ca=function(e){return e.length?e.reduce(function(t,n){return t.length<n.length?t:n}).length:0},wu=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let n=0;t=t||ca(e);let o;for(o=0;o<t;o++){for(var c=e[0][o],g=1;g<e.length;g++)if(c!==e[g][o])return n;c===" "&&(n=o+1)}for(c=1;c<e.length;c++)if((g=e[c][o])&&g!==" ")return n;return t},Nu=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let n=0;t=t||ca(e);let o;for(o=0;o<t;o++){for(var c=e[0].substr(-o-1,1),g=1;g<e.length;g++)if(c!==e[g].substr(-o-1,1))return n;c===" "&&(n=o+1)}for(c=1;c<e.length;c++)if((g=e[c].charAt(e[c].length-o-1))&&g!==" ")return n;return t},i.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let n=0;n<e.length;n++)e[n]=ti(e[n],t);return e.join(`
`)},ti=function(e,t){if(e.length<=t)return e;const n=e.trim().split(/\s+/);for(var o=0;o<n.length;o++)n[o].length>t&&(t=n[o].length);var c=-1/0;let g,S=1;do{o=c,g=e,e=[],c=n.length/S;let w=1;for(let ie=0;ie<n.length-1;ie++)w<(ie+1.5)/c?(w++,e[ie]=!0):e[ie]=!1;e=Zr(n,e,t),c=Do(n,e,t),e=Mu(n,e),S++}while(c>o);return g},Do=function(e,t,n){const o=[0],c=[];for(var g=0;g<e.length;g++)o[o.length-1]+=e[g].length,t[g]===!0?(o.push(0),c.push(e[g].charAt(e[g].length-1))):t[g]===!1&&o[o.length-1]++;for(e=Math.max(...o),t=0,g=0;g<o.length;g++)t-=2*Math.pow(Math.abs(n-o[g]),1.5),t-=Math.pow(e-o[g],1.5),".?!".includes(c[g])?t+=n/3:",;)]}".includes(c[g])&&(t+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5),t},Zr=function(e,t,n){let o=Do(e,t,n),c;for(let g=0;g<t.length-1;g++){if(t[g]===t[g+1])continue;const S=[].concat(t);S[g]=!S[g],S[g+1]=!S[g+1];const w=Do(e,S,n);w>o&&(o=w,c=S)}return c?Zr(e,c,n):t},Mu=function(e,t){const n=[];for(let o=0;o<e.length;o++)n.push(e[o]),t[o]!==void 0&&n.push(t[o]?`
`:" ");return n.join("")},i.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Du=function(e){Eh=e},Pu=function(){return Eh},kc=function(){return su},Tl=function(){return Jn},Po=function(e){if(e=eo(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},eo=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},wc=function(){document.querySelector(".blocklyTooltipDiv")||(Jn=document.createElement("div"),Jn.className="blocklyTooltipDiv",(Et()||document.body).appendChild(Jn))},El=function(e){e.mouseOverWrapper_=It(e,"pointerover",null,Mc),e.mouseOutWrapper_=It(e,"pointerout",null,Dc),e.addEventListener("pointermove",to,!1)},Nc=function(e){e&&(Rt(e.mouseOverWrapper_),Rt(e.mouseOutWrapper_),e.removeEventListener("pointermove",to))},Mc=function(e){Zo||(e=eo(e.currentTarget),ai!==e&&(Ki(),Xl=null,ai=e),clearTimeout(cp))},Dc=function(e){Zo||(cp=setTimeout(function(){Xl=ai=null,Ki()},1),clearTimeout(el),el=0)},to=function(e){if(ai&&ai.tooltip&&!Zo)if(su){const t=up-e.pageX;e=ad-e.pageY,Math.sqrt(t*t+e*e)>hp&&Ki()}else Xl!==ai&&(clearTimeout(el),up=e.pageX,ad=e.pageY,el=setTimeout(xc,sg))},Yi=function(){Xl=ai=null,Ki()},Ki=function(){su&&(su=!1,Jn&&(Jn.style.display="none")),el&&(clearTimeout(el),el=0)},no=function(){Ki(),Zo=!0},vs=function(){Zo=!1},xu=function(){Jn&&ai&&(typeof Eh=="function"?Eh(Jn,ai):Pc())},Pc=function(){var e=Po(ai);e=i.wrap$$module$build$src$core$utils$string(e,Ih),e=e.split(`
`);for(let t=0;t<e.length;t++){const n=document.createElement("div");n.appendChild(document.createTextNode(e[t])),Jn.appendChild(n)}},ua=function(e){const t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;let o=up;o=e?o-(bh+Jn.offsetWidth):o+bh;let c=ad+iu;return c+Jn.offsetHeight>n+window.scrollY&&(c-=Jn.offsetHeight+2*iu),e?o=Math.max(qa-window.scrollX,o):o+Jn.offsetWidth>t+window.scrollX-2*qa&&(o=t-Jn.offsetWidth-2*qa),{x:o,y:c}},xc=function(){if(!Zo&&(Xl=ai,Jn)){Jn.textContent="",xu();var e=ai.RTL;Jn.style.direction=e?"rtl":"ltr",Jn.style.display="block",su=!0;var{x:t,y:n}=ua(e);Jn.style.left=t+"px",Jn.style.top=n+"px"}},Bc=function(){return dp},Bu=function(e){dp=e},Uu=function(){return ru},Ph=function(e){ru=e},xo=function(e){e=`${e}`.toLowerCase().trim();var t=s[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var n=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(e=Number(n[1]),t=Number(n[2]),n=Number(n[3]),0<=e&&256>e&&0<=t&&256>t&&0<=n&&256>n)?ha(e,t,n):null},ha=function(e,t,n){return t=e<<16|t<<8|n,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},da=function(e){return e=xo(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},fs=function(e,t,n){let o=0,c=0,g=0;if(t===0)g=c=o=n;else{const S=Math.floor(e/60),w=e/60-S;e=n*(1-t);const ie=n*(1-t*w);switch(t=n*(1-t*(1-w)),S){case 1:o=ie,c=n,g=e;break;case 2:o=e,c=n,g=t;break;case 3:o=e,c=ie,g=n;break;case 4:o=t,c=e,g=n;break;case 5:o=n,c=e,g=ie;break;case 6:case 0:o=n,c=t,g=e}}return ha(Math.floor(o),Math.floor(c),Math.floor(g))},Ws=function(e,t,n){return e=xo(e),!e||(t=xo(t),!t)?null:(e=da(e),t=da(t),ha(Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2]))))},Uc=function(e){return fs(e,dp,255*ru)},pa=function(e,t,n){const o=[];var c=e.split("");c.push("");var g=0;e=[];let S=null;for(let De=0;De<c.length;De++){var w=c[De];if(g===0)if(w==="%")(g=e.join(""))&&o.push(g),e.length=0,g=1;else if(n&&w===`
`){const pn=e.join("");pn&&o.push(pn),e.length=0,o.push(w)}else e.push(w);else if(g===1)w==="%"?(e.push(w),g=0):t&&"0"<=w&&"9">=w?(g=2,S=w,(w=e.join(""))&&o.push(w),e.length=0):w==="{"?g=3:(e.push("%",w),g=0);else if(g===2)if("0"<=w&&"9">=w)S+=w;else{var ie=void 0;o.push(parseInt((ie=S)!=null?ie:"",10)),De--,g=0}else g===3&&(w===""?(e.splice(0,0,"%{"),De--,g=0):w!=="}"?e.push(w):(g=e.join(""),/[A-Z]\w*/i.test(g)?(w=g.toUpperCase(),(w=w.startsWith("BKY_")?w.substring(4):null)&&w in i.Msg$$module$build$src$core$msg?(g=i.Msg$$module$build$src$core$msg[w],typeof g=="string"?Array.prototype.push.apply(o,pa(g,t,n)):t?o.push(`${g}`):o.push(g)):o.push("%{"+g+"}")):o.push("%{"+g+"}"),g=e.length=0))}for((t=e.join(""))&&o.push(t),ie=[],e.length=0,c=0;c<o.length;c++)typeof o[c]!="string"||n&&o[c]===`
`?((t=e.join(""))&&ie.push(t),e.length=0,ie.push(o[c])):e.push(o[c]);return(t=e.join(""))&&ie.push(t),e.length=0,ie},Ji=function(e){return pa(e,!0,!0)},Nt=function(e){return typeof e!="string"?e:(e=pa(e,!1,!1),e.length?String(e[0]):"")},ga=function(e){let t=!0;const n=i.Msg$$module$build$src$core$msg,o=e.match(/%{BKY_[A-Z]\w*}/gi);if(o)for(let c=0;c<o.length;c++){const g=o[c].toUpperCase();n[g.slice(6,-1)]===void 0&&(console.warn("No message string for "+o[c]+" in "+e),t=!1)}return t},Il=function(e){const t=typeof e=="string"?Nt(e):e;var n=Number(t);if(!isNaN(n)&&0<=n&&360>=n)return{hue:n,hex:fs(n,Bc(),255*Uu())};if(n=xo(t))return{hue:null,hex:n};throw n='Invalid colour: "'+t+'"',e!==t&&(n+=' (from "'+e+'")'),Error(n)},so=function(){return Te},io=function(e){if(Te=e,e===null){let t;(t=document.querySelector("."+P))==null||t.remove()}},bl=function(){const e=Et()||document.body;document.querySelector("."+P)?Te=document.querySelector("."+P):(Te=document.createElement("div"),Te.className=P),e.appendChild(Te)},Sr=function(e,t,n,o){if(ro(),m=e,k=n,n=Te){if(n.style.direction=t?"rtl":"ltr",n.style.display="block",!o&&e instanceof d){let S;o=(S=e.getSourceBlock())==null?void 0:S.workspace}var c;O=(c=o)!=null?c:null;var g;e=(g=o)!=null?g:je(),Q=e.getRenderer().getClassName(),$e=e.getTheme().getClassName(),Q&&ve(n,Q),$e&&ve(n,$e)}},ro=function(){if(Fc()){m=null;var e=Te;e&&(e.style.display="none",e.style.left="",e.style.top="",k&&k(),k=null,e.textContent="",Q&&(R(e,Q),Q=""),$e&&(R(e,$e),$e=""),je().markFocused())}},Fc=function(){return!!m},qi=function(e){m===e&&ro()},$i=function(e){O!==null&&O!==e||ro()},Sl=function(e,t,n){Te.style.left=e+"px",Te.style.top=t+"px",Te.style.height=n+"px"},Hc=function(e,t,n,o){const c=Fu(e,t,n);e=_a(e,t,n,o),0>c?Sl(e,0,n.height+c):Sl(e,c,n.height)},_a=function(e,t,n,o){return o?Math.min(Math.max(t.right-n.width,e.left),e.right-n.width):Math.max(Math.min(t.left,e.right-n.width),e.left)},Fu=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},Hu=function(e){return!(e==null||!e.repositionForWindowResize)},Gc=function(){Hu(m)&&m.repositionForWindowResize()||ro()},Ti=function(){return Pe},fa=function(e){Pe=e},Ol=function(e,t,n,o){if(Sr(Ve,n,Bo,o),t.length){var c=Or(t,n,e);We=c,Vc(c,e,n),setTimeout(function(){c.focus()},1),Pe=null}else ma()},Or=function(e,t,n){const o=new hh;o.setRole(ki.MENU);for(let c=0;c<e.length;c++){const g=e[c],S=new Fl(g.text);S.setRightToLeft(t),S.setRole(ki.MENUITEM),o.addChild(S),S.setEnabled(g.enabled),g.enabled&&S.onAction(function(){ma(),requestAnimationFrame(()=>{setTimeout(()=>{g.callback(g.scope,n)},0)})},{})}return o},Vc=function(e,t,n){const o=pi();t=new jt(t.clientY+o.top,t.clientY+o.top,t.clientX+o.left,t.clientX+o.left),Wc(e);const c=e.getSize();n&&(t.left+=c.width,t.right+=c.width,o.left+=c.width,o.right+=c.width),Hc(o,t,c,n),e.focus()},Wc=function(e){var t=so();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),ve(t,"blocklyContextMenu"),He(t,"contextmenu",null,xh),e.focus()},xh=function(e){e.preventDefault(),e.stopPropagation()},ma=function(){qi(Ve),Pe=null},Bo=function(){We&&(We.dispose(),We=null)},i.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{i.disable$$module$build$src$core$events$utils();let n;try{n=t instanceof Element?Ii(t,e.workspace):Wn(t,e.workspace);const o=e.getRelativeToSurfaceXY();o.x=e.RTL?o.x-i.config$$module$build$src$core$config.snapRadius:o.x+i.config$$module$build$src$core$config.snapRadius,o.y+=2*i.config$$module$build$src$core$config.snapRadius,n.moveBy(o.x,o.y)}finally{i.enable$$module$build$src$core$events$utils()}return it()&&!n.isShadow()&&Oe(new(ee(J.BLOCK_CREATE))(n)),i.setSelected$$module$build$src$core$common(n),n}},Gu=function(e,t){return t=M(t,e.getParentSvg(),e.getInverseScreenCTM()),t.x/=e.scale,t.y/=e.scale,t},Uo=function(e,t,n){t=Gu(e,t),et.set(e,Ie.difference(n,t))},oo=function(e,t){if(t=Gu(e,t),e=et.get(e),!e)throw Error("Drag not initialized");return Ie.sum(e,t)},Jt=function(e,t=!1){const n=i.createElement$$module$build$src$core$utils$xml("xml");var o=Qi(i.allUsedVarModels$$module$build$src$core$variables(e));o.hasChildNodes()&&n.appendChild(o);for(const c of e.getTopComments())n.appendChild(lo(c,t));for(e=e.getTopBlocks(!0),o=0;o<e.length;o++)n.appendChild(Ei(e[o],t));return n},lo=function(e,t=!1){const n=i.createElement$$module$build$src$core$utils$xml("comment");t||n.setAttribute("id",e.id),t=e.workspace;const o=e.getRelativeToSurfaceXY();return o.x=t.RTL?t.getWidth()-o.x:o.x,n.setAttribute("x",`${o.x}`),n.setAttribute("y",`${o.y}`),n.setAttribute("w",`${e.getSize().width}`),n.setAttribute("h",`${e.getSize().height}`),e.getText()&&(n.textContent=e.getText()),e.isCollapsed()&&n.setAttribute("collapsed","true"),e.isOwnEditable()||n.setAttribute("editable","false"),e.isOwnMovable()||n.setAttribute("movable","false"),e.isOwnDeletable()||n.setAttribute("deletable","false"),n},Qi=function(e){const t=i.createElement$$module$build$src$core$utils$xml("variables");for(let n=0;n<e.length;n++){const o=e[n],c=i.createElement$$module$build$src$core$utils$xml("variable");c.appendChild(i.createTextNode$$module$build$src$core$utils$xml(o.name)),o.type&&c.setAttribute("type",o.type),c.id=o.getId(),t.appendChild(c)}return t},Ei=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let n=0;if(e.workspace.RTL&&(n=e.workspace.getWidth()),t=ni(e,t),co(t)){const o=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?n-o.x:o.x))),t.setAttribute("y",String(Math.round(o.y)))}return t},Vu=function(e){if(e.isSerializable()){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},zc=function(e,t){for(let n=0;n<e.inputList.length;n++){const o=e.inputList[n];for(let c=0;c<o.fieldRow.length;c++){const g=Vu(o.fieldRow[c]);g&&t.appendChild(g)}}},ni=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?ni(t):new DocumentFragment;const n=i.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(n.setAttribute("type",e.type),t||(n.id=e.id),e.mutationToDom){var o=e.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&n.appendChild(o)}if(zc(e,n),o=e.getCommentText()){var c=e.getIcon(Kn.COMMENT),g=c.getBubbleSize();c=c.bubbleIsVisible();var S=i.createElement$$module$build$src$core$utils$xml("comment");S.appendChild(i.createTextNode$$module$build$src$core$utils$xml(o)),S.setAttribute("pinned",`${c}`),S.setAttribute("h",String(g.height)),S.setAttribute("w",String(g.width)),n.appendChild(S)}for(e.data&&(o=i.createElement$$module$build$src$core$utils$xml("data"),o.appendChild(i.createTextNode$$module$build$src$core$utils$xml(e.data)),n.appendChild(o)),o=0;o<e.inputList.length;o++){g=e.inputList[o];var w=void 0;if(c=!0,g.type!==i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&g.type!==i.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){S=g.connection.targetBlock(),g.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?w=i.createElement$$module$build$src$core$utils$xml("value"):g.type===i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(w=i.createElement$$module$build$src$core$utils$xml("statement"));const De=g.connection.getShadowDom();!De||S&&S.isShadow()||w.appendChild(si(De,t)),S&&(S=ni(S,t),S.nodeType===Ci.ELEMENT_NODE&&(w.appendChild(S),c=!1)),w.setAttribute("name",g.name),c||n.appendChild(w)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&n.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&n.setAttribute("collapsed","true"),e.isEnabled()||n.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||n.setAttribute("deletable","false"),e.isOwnMovable()||n.setAttribute("movable","false"),e.isOwnEditable()||n.setAttribute("editable","false"),w=e.getNextBlock();let ie;return w&&(o=ni(w,t),o.nodeType===Ci.ELEMENT_NODE&&(ie=i.createElement$$module$build$src$core$utils$xml("next"),ie.appendChild(o),n.appendChild(ie))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||w&&w.isShadow()||ie.appendChild(si(e,t)),n},si=function(e,t){let n=e=e.cloneNode(!0),o;for(;n;)if(t&&n.nodeName==="shadow"&&n.removeAttribute("id"),n.firstChild)n=n.firstChild;else{for(;n&&!n.nextSibling;){o=n,n=n.parentNode;let c;o.nodeType===Ci.TEXT_NODE&&o.data.trim()===""&&((c=n)==null?void 0:c.firstChild)!==o&&G(o)}n&&(o=n,n=n.nextSibling,o.nodeType===Ci.TEXT_NODE&&o.data.trim()===""&&G(o))}return e},ms=function(e){return cl(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Wu=function(e){e=ms(e).split("<");let t="";for(let n=1;n<e.length;n++){const o=e[n];o[0]==="/"&&(t=t.substring(2)),e[n]=t+"<"+o,o[0]!=="/"&&o.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},$a=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=i.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},i.domToWorkspace$$module$build$src$core$xml=function(e,t){let n=0;t.RTL&&(n=t.getWidth());const o=[];Gn();const c=i.getGroup$$module$build$src$core$events$utils();c||i.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let g=!0;try{for(let S=0,w;w=e.childNodes[S];S++){const ie=w.nodeName.toLowerCase(),De=w;if(ie==="block"||ie==="shadow"&&!ot()){const pn=Ii(De,t);o.push(pn.id);let un;const ar=parseInt((un=De.getAttribute("x"))!=null?un:"10",10);let Td;const vp=parseInt((Td=De.getAttribute("y"))!=null?Td:"10",10);isNaN(ar)||isNaN(vp)||pn.moveBy(t.RTL?n-ar:ar,vp,["create"]),g=!1}else{if(ie==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(ie==="comment")Ta(De,t);else if(ie==="variables"){if(g)Rl(De,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");g=!1}}}}finally{i.setGroup$$module$build$src$core$events$utils(c),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&Vn(),Bs()}return Oe(new(ee(J.FINISHED_LOADING))(t)),o},Ta=function(e,t){var n;const o=(n=e.getAttribute("id"))!=null?n:void 0;n=t.rendered?new Hn(t,o):new st(t,o);var c;n.setText((c=e.textContent)!=null?c:"");var g;c=parseInt((g=e.getAttribute("x"))!=null?g:"",10);let S;g=parseInt((S=e.getAttribute("y"))!=null?S:"",10),isNaN(c)||isNaN(g)||(c=t.RTL?t.getWidth()-c:c,n.moveTo(new Ie(c,g)));var w;t=parseInt((w=e.getAttribute("w"))!=null?w:"",10);let ie;return w=parseInt((ie=e.getAttribute("h"))!=null?ie:"",10),isNaN(t)||isNaN(w)||n.setSize(new Ee(t,w)),e.getAttribute("collapsed")==="true"&&n.setCollapsed(!0),e.getAttribute("editable")==="false"&&n.setEditable(!1),e.getAttribute("movable")==="false"&&n.setMovable(!1),e.getAttribute("deletable")==="false"&&n.setDeletable(!1),n},zu=function(e,t){if(!t.getBlocksBoundingBox)return i.domToWorkspace$$module$build$src$core$xml(e,t);var n=t.getBlocksBoundingBox();if(e=i.domToWorkspace$$module$build$src$core$xml(e,t),n&&n.top!==n.bottom){var o=n.bottom;n=t.RTL?n.right:n.left;var c=1/0;let g=-1/0,S=1/0;for(let w=0;w<e.length;w++){const ie=t.getBlockById(e[w]).getRelativeToSurfaceXY();ie.y<S&&(S=ie.y),ie.x<c&&(c=ie.x),ie.x>g&&(g=ie.x)}for(o=o-S+10,n=t.RTL?n-g:n-c,c=0;c<e.length;c++)t.getBlockById(e[c]).moveBy(n,o,["create"])}return e},i.domToBlock$$module$build$src$core$xml=function(e,t){return e=Ii(e,t),t.rendered&&Vn(),e},Ii=function(e,t){i.disable$$module$build$src$core$events$utils();var n=t.getAllVariables();let o;try{if(o=Cl(e,t),t.rendered){const c=o,g=o.getDescendants(!1);c.setConnectionTracking(!1);for(let S=g.length-1;0<=S;S--)g[S].initSvg();for(let S=g.length-1;0<=S;S--)g[S].queueRender();setTimeout(function(){c.disposed||c.setConnectionTracking(!0)},1),t.resizeContents()}else{const c=o.getDescendants(!1);for(let g=c.length-1;0<=g;g--)c[g].initModel()}}finally{i.enable$$module$build$src$core$events$utils()}if(it()){for(e=jr(t,n),t=0;t<e.length;t++)n=e[t],Oe(new(ee(J.VAR_CREATE))(n));Oe(new(ee(J.BLOCK_CREATE))(o))}return o},Rl=function(e,t){for(let o=0;o<e.children.length;o++){var n=e.children[o];const c=n.getAttribute("type"),g=n.getAttribute("id");if(n=n.textContent,!n)break;t.createVariable(n,c,g)}},Rr=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let n=0;n<e.children.length;n++){const o=e.children[n];if(o.nodeType!==Ci.TEXT_NODE)switch(o.nodeName.toLowerCase()){case"mutation":t.mutation.push(o);break;case"comment":t.comment.push(o);break;case"data":t.data.push(o);break;case"title":case"field":t.field.push(o);break;case"value":case"statement":t.input.push(o);break;case"next":t.next.push(o);break;default:console.warn("Ignoring unknown tag: "+o.nodeName)}}return t},yl=function(e,t){let n=!1;for(let o=0;o<e.length;o++){const c=e[o];t.domToMutation&&(t.domToMutation(c),t.initSvg&&(n=!0))}return n},Ea=function(e,t){for(let o=0;o<e.length;o++){var n=e[o];const c=n.textContent,g=n.getAttribute("pinned")==="true";let S;const w=parseInt((S=n.getAttribute("w"))!=null?S:"50",10);let ie;n=parseInt((ie=n.getAttribute("h"))!=null?ie:"50",10),t.setCommentText(c);const De=t.getIcon(Kn.COMMENT);isNaN(w)||isNaN(n)||De.setBubbleSize(new Ee(w,n)),De.setBubbleVisible(g),setTimeout(()=>De.setBubbleVisible(g),1)}},Xc=function(e,t){for(let n=0;n<e.length;n++)t.data=e[n].textContent},Bh=function(e,t){for(let n=0;n<e.length;n++){const o=e[n],c=o.getAttribute("name");c?yr(t,c,o):console.warn(`Ignoring unnamed field in block ${t.type}`)}},jc=function(e){let t=null,n=null;for(let o=0;o<e.childNodes.length;o++){const c=e.childNodes[o];co(c)&&(c.nodeName.toLowerCase()==="block"?t=c:c.nodeName.toLowerCase()==="shadow"&&(n=c))}return{childBlockElement:t,childShadowElement:n}},vl=function(e,t,n,o){for(let g=0;g<e.length;g++){var c=e[g];const S=c.getAttribute("name"),w=S?n.getInput(S):null;if(!w){console.warn("Ignoring non-existent input "+S+" in block "+o);break}if(c=jc(c),c.childBlockElement){if(!w.connection)throw TypeError("Input connection does not exist.");Cl(c.childBlockElement,t,w.connection,!1)}if(c.childShadowElement){let ie;(ie=w.connection)==null||ie.setShadowDom(c.childShadowElement)}}},ao=function(e,t,n){for(let o=0;o<e.length;o++){const c=jc(e[o]);if(c.childBlockElement){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Cl(c.childBlockElement,t,n.nextConnection,!0)}c.childShadowElement&&n.nextConnection&&n.nextConnection.setShadowDom(c.childShadowElement)}},Cl=function(e,t,n,o){var c;const g=e.getAttribute("type");if(!g)throw TypeError("Block type unspecified: "+e.outerHTML);var S=(c=e.getAttribute("id"))!=null?c:void 0;c=t.newBlock(g,S),S=Rr(e);const w=yl(S.mutation,c);if(Ea(S.comment,c),Xc(S.data,c),n)if(o)if(c.previousConnection)n.connect(c.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(c.outputConnection)n.connect(c.outputConnection);else if(c.previousConnection)n.connect(c.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Bh(S.field,c),vl(S.input,t,c,g),ao(S.next,t,c),w&&c.initSvg(),(t=e.getAttribute("inline"))&&c.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&c.setDisabledReason(t==="true"||t==="disabled",Is),t=e.getAttribute("disabled-reasons"),t!==null)for(var ie of t.split(","))c.setDisabledReason(!0,decodeURIComponent(ie));if((ie=e.getAttribute("deletable"))&&c.setDeletable(ie==="true"),(ie=e.getAttribute("movable"))&&c.setMovable(ie==="true"),(ie=e.getAttribute("editable"))&&c.setEditable(ie==="true"),(ie=e.getAttribute("collapsed"))&&c.setCollapsed(ie==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=c.getChildren(!1),ie=0;ie<e.length;ie++)if(!e[ie].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");c.setShadow(!0)}return c},yr=function(e,t,n){const o=e.getField(t);o?o.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Xu=function(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(n.nodeName.toLowerCase()==="next"){e.removeChild(n);break}}},co=function(e){return e.nodeType===Ci.ELEMENT_NODE},zs=function(e){if(!(100<e.getDescendants(!1).length)){var t=e.workspace,n=e.getSvgRoot();t.getAudioManager().play("delete");var o=e.getRelativeToSurfaceXY(),c=n.cloneNode(!0);c.setAttribute("transform","translate("+o.x+","+o.y+")");var g;(g=t.getLayerManager())==null||g.appendToAnimationLayer({getSvgRoot:()=>c}),Fo(c,{x:o.x,y:o.y,width:e.width,height:e.height},t.RTL,new Date)}},Fo=function(e,t,n,o){const c=(new Date().getTime()-o.getTime())/150;1<c?G(e):(e.setAttribute("transform","translate("+(t.x+(n?-1:1)*t.width/2*c)+","+(t.y+t.height/2*c)+") scale("+(1-c)+")"),setTimeout(Fo,10,e,t,n,o))},ii=function(e){var t=e.workspace;const n=t.scale;if(t.getAudioManager().play("click"),!(1>n)){var o=t.getSvgXY(e.getSvgRoot());e.outputConnection?(o.x+=(e.RTL?3:-3)*n,o.y+=13*n):e.previousConnection&&(o.x+=(e.RTL?-23:23)*n,o.y+=3*n);var c=q(V.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=q(V.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*n},c),t=q(V.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},c),e.beginElement(),t.beginElement(),setTimeout(()=>void G(c),150)}},Ia=function(e){if(Ll(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),pp=e,Yc(e,t,new Date)}},Yc=function(e,t,n){const o=(new Date().getTime()-n.getTime())/200;let c="";1>=o&&(c=`skewX(${Math.round(Math.sin(o*Math.PI*3)*(1-o)*t)})`,ig=setTimeout(Yc,10,e,t,n)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${c}`)},Ll=function(){pp&&(ig&&(clearTimeout(ig),ig=null),pp.getSvgRoot().setAttribute("transform",pp.getTranslation()),pp=null)},Cs=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},$s=function(e,t){for(const n in t)e[n]=t[n]!==null&&typeof t[n]=="object"?$s(e[n]||Object.create(null),t[n]):t[n];return e},rs=function(e,t){u(pe.FIELD,e,t)},bi=function(e){I(pe.FIELD,e)},i.fromJson$$module$build$src$core$field_registry=function(e){return qf.fromJsonInternal(e)},ba=function(e){const t=D(pe.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},i.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(ud[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');ud[e]=t},i.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');i.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},i.registerMutator$$module$build$src$core$extensions=function(e,t,n,o){const c='Error when registering mutator "'+e+'": ';uo(c,t);const g=mn(t,c);if(n&&typeof n!="function")throw Error(c+'Extension "'+e+'" is not a function');i.register$$module$build$src$core$extensions(e,function(){g&&this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(o||[],this)),this.mixin(t),n&&n.apply(this)})},vr=function(e){Si(e)?delete ud[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Si=function(e){return!!ud[e]},Ht=function(e,t,n){const o=ud[e];if(typeof o!="function")throw Error('Error: Extension "'+e+'" not found.');let c;if(n?zt(e,t):c=ns(t),o.apply(t),n)uo('Error after applying mutator "'+e+'": ',t);else if(!Sa(c,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},zt=function(e,t){if(ns(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Oi=function(e,t){return ts(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},es=function(e,t){return ts(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},mn=function(e,t){return ts(e.compose,e.decompose,t+" compose/decompose")},ts=function(e,t,n){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(n+" must be a function");return!0}if(!e&&!t)return!1;throw Error(n+"Must have both or neither functions")},uo=function(e,t){const n=Oi(t,e),o=es(t,e);if(!n&&!o)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");mn(t,e)},ns=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},Sa=function(e,t){if(t=ns(t),t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0},ju=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},i.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const n=[];return function(){n.includes(this.type)||(Yu(this,e,t),n.push(this.type)),this.setTooltip((function(){const o=String(this.getFieldValue(e));return Nt(t[o])}).bind(this))}},Yu=function(e,t,n){var o=e.getField(t);if(o instanceof lr&&!o.isOptionListDynamic()){o=o.getOptions();for(const[,c]of o)n[c]===void 0&&console.warn(`No tooltip mapping for value ${c} of field ${t} of block type ${e.type}.`)}},i.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const n=this.getField(t);return Nt(e).replace("%1",n?n.getText():"")}).bind(this))}},Oa=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},Ge=function(e,t){return" "+e+","+t+" "},$n=function(e,t){return" "+e+t.join("")},hn=function(e,t){return" M "+e+","+t+" "},Mt=function(e,t){return" m "+e+","+t+" "},Ls=function(e,t){return" l "+e+","+t+" "},Al=function(e){return" l"+e.join("")},Ce=function(e,t){return" "+e+" "+t+" "},Dt=function(e,t,n,o){return e+" "+n+" "+n+" "+t+o},b=function(e,t){u(pe.ICON,e.toString(),t)},p=function(e){I(pe.ICON,e)},$=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},y=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},U=function(e){const t=e.getProcedureMap().getProcedures().filter(o=>!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(c=>c.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(o=>{!$(o)&&Ao(o)&&t.push(o.getProcedureDef())});const n=e.getProcedureMap().getProcedures().filter(o=>!!o.getReturnTypes()).map(o=>[o.getName(),o.getParameters().map(c=>c.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(o=>{!$(o)&&Ao(o)&&n.push(o.getProcedureDef())}),t.sort(W),n.sort(W),[t,n]},W=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},i.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Z(e,t.workspace,t);){const n=e.match(/^(.*?)(\d+)$/);e=n?n[1]+(parseInt(n[2])+1):e+"2"}return e},Z=function(e,t,n){return!ae(e,t,n)},ae=function(e,t,n){for(const o of t.getAllBlocks(!1))if(o!==n&&Ao(o)&&i.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],e))return!0;n=n&&$(n)?n==null?void 0:n.getProcedureModel():void 0;for(const o of t.getProcedureMap().getProcedures())if(o!==n&&i.Names$$module$build$src$core$names.equals(o.getName(),e))return!0;return!1},i.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new _;e=e.trim();const n=i.findLegalName$$module$build$src$core$procedures(e,t);$(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(n);const o=this.getValue();if(o!==e&&o!==n)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const c=e[t];c.renameProcedure&&c.renameProcedure(o,n)}return n},Se=function(e){function t(g,S){for(let ie=0;ie<g.length;ie++){var w=g[ie][0];const De=g[ie][1],pn=i.createElement$$module$build$src$core$utils$xml("block");pn.setAttribute("type",S),pn.setAttribute("gap","16");const un=i.createElement$$module$build$src$core$utils$xml("mutation");for(un.setAttribute("name",w),pn.appendChild(un),w=0;w<De.length;w++){const ar=i.createElement$$module$build$src$core$utils$xml("arg");ar.setAttribute("name",De[w]),un.appendChild(ar)}n.push(pn)}}const n=[];if(Xs.procedures_defnoreturn){var o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap","16");var c=i.createElement$$module$build$src$core$utils$xml("field");c.setAttribute("name","NAME"),c.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(c),n.push(o)}return Xs.procedures_defreturn&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_defreturn"),o.setAttribute("gap","16"),c=i.createElement$$module$build$src$core$utils$xml("field"),c.setAttribute("name","NAME"),c.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(c),n.push(o)),Xs.procedures_ifreturn&&(o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","procedures_ifreturn"),o.setAttribute("gap","16"),n.push(o)),n.length&&n[n.length-1].setAttribute("gap","24"),e=U(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),n},Ue=function(e){var t=[],n=e.getBlocksByType("procedures_mutatorarg",!1);for(let g=0,S;S=n[g];g++)t.push(S.getFieldValue("NAME"));n=i.createElement$$module$build$src$core$utils$xml("xml");const o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_mutatorarg");const c=i.createElement$$module$build$src$core$utils$xml("field");c.setAttribute("name","NAME"),t=Tr(i.DEFAULT_ARG$$module$build$src$core$procedures,t),t=i.createTextNode$$module$build$src$core$utils$xml(t),c.appendChild(t),o.appendChild(c),n.appendChild(o),e.updateToolbox(n)},Fe=function(e){if(_t(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=j(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Ue(e),e.addChangeListener(Ne))}},Ne=function(e){(be(e)||oe(e)||de(e)||Le(e))&&(e=j(e.workspaceId),Ue(e))},Qe=function(e,t){return t.getAllBlocks(!1).filter(n=>Xe(n,e)||zi(n)&&i.Names$$module$build$src$core$names.equals(n.getProcedureCall(),e))},Xe=function(e,t){return $(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&i.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},i.mutateCallers$$module$build$src$core$procedures=function(e){const t=ot();var n=e.getProcedureDef()[0];const o=e.mutationToDom(!0);e=Qe(n,e.workspace);for(let g=0,S;S=e[g];g++){n=(n=S.mutationToDom())&&cl(n),S.domToMutation&&S.domToMutation(o);var c=S.mutationToDom();c=c&&cl(c),n!==c&&(i.setRecordUndo$$module$build$src$core$events$utils(!1),Oe(new(ee(J.BLOCK_CHANGE))(S,"mutation",null,n,c)),i.setRecordUndo$$module$build$src$core$events$utils(t))}},i.getDefinition$$module$build$src$core$procedures=function(e,t){for(const n of t.getAllBlocks(!1))if($(n)&&n.isProcedureDef()&&i.Names$$module$build$src$core$names.equals(n.getProcedureModel().getName(),e)||Ao(n)&&i.Names$$module$build$src$core$names.equals(n.getProcedureDef()[0],e))return n;return null},xe=function(e){return e.isDynamic},qe=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},at=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Gt=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},Vt=function(e,t){let n=null;t=t.outputConnection;const o=t==null?void 0:t.getConnectionChecker();for(let c=0,g;g=e.inputList[c];c++){const S=g.connection;let w;if(S&&((w=o)!=null&&w.canConnect(t,S,!1))){if(n)return null;n=S}}return n},pt=function(e,t){let n;for(;n=Vt(e,t);)if(e=n.targetBlock(),!e||e.isShadow())return n;return null},bt=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},ut=function(e){return bt(e)&&mi(e)&&$r(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===Kn.COMMENT},gt=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},mt=function(e,t){u(pe.RENDERER,e,t)},Pt=function(e){I(pe.RENDERER,e)},xt=function(e,t,n){return e=new(L(pe.RENDERER,e))(e),e.init(t,n),e},qt=function(e){_i(e.getTargetWorkspace(),void 0,"String")},zn=function(e){_i(e.getTargetWorkspace(),void 0,"Number")},As=function(e){_i(e.getTargetWorkspace(),void 0,"Colour")},Bn=function(e){let t=[],n=document.createElement("button");return n.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(n),n=document.createElement("button"),n.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(n),n=document.createElement("button"),n.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",qt),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",zn),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",As),e=Un(e),t=t.concat(e)},Un=function(e){e=e.getAllVariables();const t=[];if(0<e.length){if(Xs.variables_set_dynamic){var n=e[e.length-1];const o=i.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap","24"),o.appendChild(ei(n)),t.push(o)}if(Xs.variables_get_dynamic){e.sort(tu.compareByName);for(let o=0,c;c=e[o];o++)n=i.createElement$$module$build$src$core$utils$xml("block"),n.setAttribute("type","variables_get_dynamic"),n.setAttribute("gap","8"),n.appendChild(ei(c)),t.push(n)}}return t},ks=function(e,t){const n=e.workspace,o=i.config$$module$build$src$core$config.snapRadius,c=Ie.difference(t,e.getRelativeToSurfaceXY()),g=new Ie(0,0),S=n.getAllBlocks(!1).filter(w=>w.id!=e.id).map(w=>w.getRelativeToSurfaceXY());for(;Zt(Ie.sum(t,g),S)||ws(e,Ie.sum(c,g),o);)n.RTL?g.translate(-o,2*o):g.translate(o,2*o);e.moveTo(Ie.sum(t,g))},Zt=function(e,t){return t.some(n=>1>=Math.abs(n.x-e.x)&&1>=Math.abs(n.y-e.y))},ws=function(e,t,n){return e.getConnections_(!1).some(o=>!!o.closest(n,t).connection)},vn=function(e,t,n){const o=n.getBoundingRectangle(),c=o.right-o.left,g=Ir(t.top,o.top,t.top+t.height-(o.bottom-o.top))-o.top;let S=t.left;return t=t.left+t.width-c,e.RTL?S=Math.min(t,S):t=Math.max(S,t),(e=Ir(S,o.left,t)-o.left)||g?(n.moveBy(e,g,["inbounds"]),!0):!1},Zi=function(e){return t=>{var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){var o;if(Bd.includes((o=t.type)!=null?o:"")){o=n.getScrollMetrics(!0);const c=bn(e,t);c&&(n=i.getGroup$$module$build$src$core$events$utils()||!1,i.setGroup$$module$build$src$core$events$utils(t.group),vn(e,o,c)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),i.setGroup$$module$build$src$core$events$utils(n))}else $t(t)&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Lt(e)}}},bn=function(e,t){let n=null;switch(t.type){case J.BLOCK_CREATE:case J.BLOCK_MOVE:(n=e.getBlockById(t.blockId))&&(n=n.getRootBlock());break;case J.COMMENT_CREATE:case J.COMMENT_MOVE:case J.COMMENT_RESIZE:n=e.getCommentById(t.commentId)}return n},Lt=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var n=e.getTopBoundedElements();for(let o=0,c;c=n[o];o++)vn(e,t,c)}},Xt=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},Xn=function(e){const t=e.toCopyData();C_=t;let n;return L_=(n=e.workspace)!=null?n:null,t},en=function(e,t,n){return e&&t?ri(e,t,n):C_&&L_?ri(C_,L_):null},ri=function(e,t,n){let o;t=(o=t.getRootWorkspace())!=null?o:t;let c,g;return(g=(c=D(pe.PASTER,e.paster,!1))==null?void 0:c.paste(e,t,n))!=null?g:null},Ra=function(e){const t=e.toCopyData();return t?en(t,e.workspace):null},Ho=function(e){return e.toCopyData!==void 0},Ns=function(){Wt.registry.register({name:Kl.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[Tt.ESC]})},er=function(){Wt.registry.register({name:Kl.DELETE,preconditionFn(e){const t=ze();return!e.options.readOnly&&t!=null&&Xt(t)&&t.isDeletable()&&!Qa.inProgress()},callback(e,t){return t.preventDefault(),e=ze(),e instanceof Oo?e.checkAndDelete():Xt(e)&&e.isDeletable()&&(i.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),i.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[Tt.DELETE,Tt.BACKSPACE]})},ya=function(){const e=Wt.registry.createSerializedKey(Tt.C,[Tt.CTRL]),t=Wt.registry.createSerializedKey(Tt.C,[Tt.ALT]),n=Wt.registry.createSerializedKey(Tt.C,[Tt.META]);Wt.registry.register({name:Kl.COPY,preconditionFn(o){const c=ze();return!o.options.readOnly&&!Qa.inProgress()&&c!=null&&Xt(c)&&c.isDeletable()&&Cs(c)&&c.isMovable()&&Ho(c)},callback(o,c){return c.preventDefault(),o.hideChaff(),c=ze(),!c||!Ho(c)?!1:(cu=c.toCopyData(),uu=o,fd=Cs(c)?c.getRelativeToSurfaceXY():null,!!cu)},keyCodes:[e,t,n]})},kl=function(){const e=Wt.registry.createSerializedKey(Tt.X,[Tt.CTRL]),t=Wt.registry.createSerializedKey(Tt.X,[Tt.ALT]),n=Wt.registry.createSerializedKey(Tt.X,[Tt.META]);Wt.registry.register({name:Kl.CUT,preconditionFn(o){const c=ze();return!o.options.readOnly&&!Qa.inProgress()&&c!=null&&Xt(c)&&c.isDeletable()&&Cs(c)&&c.isMovable()&&!c.workspace.isFlyout},callback(o){const c=ze();return c instanceof Oo?(cu=c.toCopyData(),uu=o,fd=c.getRelativeToSurfaceXY(),c.checkAndDelete(),!0):Xt(c)&&c.isDeletable()&&Ho(c)?(cu=c.toCopyData(),uu=o,fd=Cs(c)?c.getRelativeToSurfaceXY():null,c.dispose(),!0):!1},keyCodes:[e,t,n]})},Ri=function(){const e=Wt.registry.createSerializedKey(Tt.V,[Tt.CTRL]),t=Wt.registry.createSerializedKey(Tt.V,[Tt.ALT]),n=Wt.registry.createSerializedKey(Tt.V,[Tt.META]);Wt.registry.register({name:Kl.PASTE,preconditionFn(o){return!o.options.readOnly&&!Qa.inProgress()},callback(){if(!cu||!uu)return!1;if(!fd)return!!en(cu,uu);const{left:o,top:c,width:g,height:S}=uu.getMetricsManager().getViewMetrics(!0);if(new jt(c,c+S,o,o+g).contains(fd.x,fd.y))return!!en(cu,uu);const w=new Ie(o+g/2,c+S/2);return!!en(cu,uu,w)},keyCodes:[e,t,n]})},yi=function(){const e=Wt.registry.createSerializedKey(Tt.Z,[Tt.CTRL]),t=Wt.registry.createSerializedKey(Tt.Z,[Tt.ALT]),n=Wt.registry.createSerializedKey(Tt.Z,[Tt.META]);Wt.registry.register({name:Kl.UNDO,preconditionFn(o){return!o.options.readOnly&&!Qa.inProgress()},callback(o,c){return o.hideChaff(),o.undo(!1),c.preventDefault(),!0},keyCodes:[e,t,n]})},wl=function(){const e=Wt.registry.createSerializedKey(Tt.Z,[Tt.SHIFT,Tt.CTRL]),t=Wt.registry.createSerializedKey(Tt.Z,[Tt.SHIFT,Tt.ALT]),n=Wt.registry.createSerializedKey(Tt.Z,[Tt.SHIFT,Tt.META]),o=Wt.registry.createSerializedKey(Tt.Y,[Tt.CTRL]);Wt.registry.register({name:Kl.REDO,preconditionFn(c){return!Qa.inProgress()&&!c.options.readOnly},callback(c,g){return c.hideChaff(),c.undo(!0),g.preventDefault(),!0},keyCodes:[e,t,n,o]})},va=function(){Ns(),er(),ya(),kl(),Ri(),yi(),wl()},Go=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(n=>n.saveState())),t},Kc=function(e,t,n,o){if(e=e.loadState(n,o),!n.parameters)return e;for(const[c,g]of n.parameters.entries())e.insertParameter(t.loadState(g,o),c);return e},Nl=function(e){const t=Object.create(null),n=te(pe.SERIALIZER,!0);for(const o in n){let c;const g=(c=n[o])==null?void 0:c.save(e);g&&(t[o]=g)}return t},ss=function(e,t,{recordUndo:n=!1}={}){var o=te(pe.SERIALIZER,!0);if(o){o=Object.entries(o).sort((g,S)=>S[1].priority-g[1].priority);var c=ot();i.setRecordUndo$$module$build$src$core$events$utils(n),(n=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),Gn(),t instanceof So&&t.setResizesEnabled(!1);for(const[,g]of o.reverse()){let S;(S=g)==null||S.clear(t)}for(const[g,S]of o.reverse())if(e[g]){let w;(w=S)==null||w.load(e[g],t)}t instanceof So&&t.setResizesEnabled(!0),Bs(),Oe(new(ee(J.FINISHED_LOADING))(t)),i.setGroup$$module$build$src$core$events$utils(n),i.setRecordUndo$$module$build$src$core$events$utils(c)}},Cr=function(e,t){let n=null;n=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var o;if(!document.contains(n)&&document!==((o=n)==null?void 0:o.ownerDocument))throw Error("Error: container is not in current document");e=new Eo(t||{}),o=document.createElement("div"),ve(o,"injectionDiv"),t!=null&&t.rtl&&ve(o,"blocklyRTL"),o.tabIndex=0,xn(o,On.LABEL,i.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),n.appendChild(o),t=Vo(o,e);const c=Lr(o,t,e);return Ml(c),lt(c),ft(c),o.addEventListener("focusin",function(){lt(c)}),He(o,"keydown",null,tr),He(qr(),"keydown",null,tr),(t=so())&&He(t,"keydown",null,tr),c},Vo=function(e,t){e.setAttribute("dir","LTR"),In(t.hasCss,t.pathToMedia),e=q(V.SVG,{xmlns:xa,"xmlns:html":Nr,"xmlns:xlink":li,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const n=q(V.DEFS,{},e),o=String(Math.random()).substring(2);return t.gridPattern=o_.createDom(o,t.gridOptions,n),e},Lr=function(e,t,n){n.parentWorkspace=null,n=new So(n);const o=n.options;n.scale=o.zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground",e));var c=n.getRenderer().getClassName();return c&&ve(e,c),(c=n.getTheme().getClassName())&&ve(e,c),!o.hasCategories&&o.languageTree&&(e=n.addFlyout(V.SVG),me(e,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(Zi(n)),ft(n),bl(),Sc(),wc(),n},Ml=function(e){const t=e.options;var n=e.getParentSvg();if(He(n.parentNode,"contextmenu",null,function(o){hi(o)||o.preventDefault()}),n=He(window,"resize",null,function(){Ki(),e.hideComponents(!0),ku(),Gc(),ft(e),Lt(e)}),e.setResizeHandlerWrapper(n),Jc(),t.languageTree){n=e.getToolbox();const o=e.getFlyout(!0);n?n.init():o&&(o.init(e),o.show(t.languageTree),typeof o.scrollToStart=="function"&&o.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new k_(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&Ca(t.pathToMedia,e)},tr=function(e){const t=je();t&&!(hi(e)||t.rendered&&!t.isVisible())&&Wt.registry.onKeyDown(t,e)},Jc=function(){Pm||(He(document,"scroll",null,function(){const e=z();for(let t=0,n;n=e[t];t++)n instanceof So&&n.updateInverseScreenCTM()}),It(document,"touchend",null,Nn),It(document,"touchcancel",null,Nn)),Pm=!0},Ca=function(e,t){function n(){for(;c.length;){const g=c.pop();g&&Rt(g)}o.preload()}const o=t.getAudioManager();o.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),o.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),o.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const c=[];c.push(He(document,"pointermove",null,n,!0)),c.push(He(document,"touchstart",null,n,!0))},tn=function(){x.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:x.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Dl=function(){x.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:x.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},La=function(){x.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:x.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Wo=function(e,t){function n(g){c--,g.setCollapsed(e),c===0&&i.setGroup$$module$build$src$core$events$utils(!1)}let o=0,c=0;i.setGroup$$module$build$src$core$events$utils(!0);for(let g=0;g<t.length;g++){let S=t[g];for(;S;)c++,setTimeout(n.bind(null,S),o),S=S.getNextBlock(),o+=10}},zo=function(){x.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(!n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Wo(!0,e.workspace.getTopBlocks(!0))},scopeType:x.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Ku=function(){x.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Wo(!1,e.workspace.getTopBlocks(!0))},scopeType:x.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Xo=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let n=0;n<e.length;n++)Xo(e[n],t)}},an=function(e){const t=[];e=e.getTopBlocks(!0);for(let n=0;n<e.length;n++)Xo(e[n],t);return t},Sn=function(e,t){t?i.setGroup$$module$build$src$core$events$utils(t):(i.setGroup$$module$build$src$core$events$utils(!0),t=i.getGroup$$module$build$src$core$events$utils());const n=e.shift();n&&(n.isDeadOrDying()?Sn(e,t):(n.dispose(!1,!0),setTimeout(Sn,10,e,t))),i.setGroup$$module$build$src$core$events$utils(!1)},jn=function(){x.registry.register({displayText(e){return e.workspace?(e=an(e.workspace).length,e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<an(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=an(e.workspace);2>t.length?Sn(t):vt(i.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(n){n&&Sn(t)})}},scopeType:x.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Ju=function(){tn(),Dl(),La(),zo(),Ku(),jn()},Aa=function(){x.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&en(t,e.block.workspace)}},scopeType:x.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},ka=function(){x.registry.register({displayText(e){return e.block.hasIcon(tc.TYPE)?i.Msg$$module$build$src$core$msg.REMOVE_COMMENT:i.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(tc.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:x.ScopeType.BLOCK,id:"blockComment",weight:2})},kd=function(){x.registry.register({displayText(e){return e.block.getInputsInline()?i.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:i.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof Sg||e.inputList[t]instanceof Sg))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:x.ScopeType.BLOCK,id:"blockInline",weight:3})},os=function(){x.registry.register({displayText(e){return e.block.isCollapsed()?i.Msg$$module$build$src$core$msg.EXPAND_BLOCK:i.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:x.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},qu=function(){x.registry.register({displayText(e){return e.block.hasDisabledReason(Is)?i.Msg$$module$build$src$core$msg.ENABLE_BLOCK:i.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(Is)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(Is),Is),i.setGroup$$module$build$src$core$events$utils(t)},scopeType:x.ScopeType.BLOCK,id:"blockDisable",weight:5})},Qu=function(){x.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:x.ScopeType.BLOCK,id:"blockDelete",weight:6})},Zu=function(){x.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:x.ScopeType.BLOCK,id:"blockHelp",weight:7})},nr=function(){x.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){i.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),i.setGroup$$module$build$src$core$events$utils(!1)},scopeType:x.ScopeType.COMMENT,id:"commentDelete",weight:6})},oi=function(){x.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&en(t,e.comment.workspace)}},scopeType:x.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},wa=function(){x.registry.register({displayText:()=>i.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:()=>"enabled",callback:(e,t)=>{if(e=e.workspace){i.setGroup$$module$build$src$core$events$utils(!0);var n=new Hn(e);n.setText(i.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),n.moveTo(Uh(new Ie(t.clientX,t.clientY),e)),i.setSelected$$module$build$src$core$common(n),i.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:x.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},Uh=function(e,t){var n=t.getInjectionDiv().getBoundingClientRect();return e=new Ie(e.x-n.left,e.y-n.top),n=t.getOriginOffsetInPixels(),e=Ie.difference(e,n),e.scale(1/t.scale),e},Fh=function(){Aa(),ka(),kd(),os(),qu(),Qu(),Zu()},wd=function(){oi(),nr(),wa()},Hh=function(){Ju(),Fh()},Nd=function(e){return e.paste!==void 0},Md=function(e){return e.getSvgRoot!==void 0},Dd=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},Pd=function(e){return e.isSelectable()},xd=function(e){je().hideChaff(e)},ce=ce||{},ce.scope={},ce.ASSUME_ES5=!1,ce.ASSUME_NO_NATIVE_MAP=!1,ce.ASSUME_NO_NATIVE_SET=!1,ce.SIMPLE_FROUND_POLYFILL=!1,ce.ISOLATE_POLYFILLS=!1,ce.FORCE_POLYFILL_PROMISE=!1,ce.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,ce.defineProperty=ce.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},ce.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof A$=="object"&&A$];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},ce.global=ce.getGlobal(this),ce.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",ce.TRUST_ES6_POLYFILLS=!ce.ISOLATE_POLYFILLS||ce.IS_SYMBOL_NATIVE,ce.polyfills={},ce.propertyToPolyfillSymbol={},ce.POLYFILL_PREFIX="$jscp$",ce.polyfill=function(e,t,n,o){t&&(ce.ISOLATE_POLYFILLS?ce.polyfillIsolated(e,t,n,o):ce.polyfillUnisolated(e,t,n,o))},ce.polyfillUnisolated=function(e,t,n,o){for(n=ce.global,e=e.split("."),o=0;o<e.length-1;o++){var c=e[o];if(!(c in n))return;n=n[c]}e=e[e.length-1],o=n[e],t=t(o),t!=o&&t!=null&&ce.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},ce.polyfillIsolated=function(e,t,n,o){var c=e.split(".");e=c.length===1,o=c[0],o=!e&&o in ce.polyfills?ce.polyfills:ce.global;for(var g=0;g<c.length-1;g++){var S=c[g];if(!(S in o))return;o=o[S]}c=c[c.length-1],n=ce.IS_SYMBOL_NATIVE&&n==="es6"?o[c]:null,t=t(n),t!=null&&(e?ce.defineProperty(ce.polyfills,c,{configurable:!0,writable:!0,value:t}):t!==n&&(ce.propertyToPolyfillSymbol[c]===void 0&&(n=1e9*Math.random()>>>0,ce.propertyToPolyfillSymbol[c]=ce.IS_SYMBOL_NATIVE?ce.global.Symbol(c):ce.POLYFILL_PREFIX+n+"$"+c),ce.defineProperty(o,ce.propertyToPolyfillSymbol[c],{configurable:!0,writable:!0,value:t})))},ce.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},ce.setPrototypeOf=ce.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:ce.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,ce.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},ce.arrayIterator=function(e){return{next:ce.arrayIteratorImpl(e)}},ce.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return ce.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},ce.generator={},ce.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},ce.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},ce.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},ce.generator.Context.prototype.stop_=function(){this.isRunning_=!1},ce.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},ce.generator.Context.prototype.next_=function(e){this.yieldResult=e},ce.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},ce.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},ce.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},ce.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},ce.generator.Context.prototype.yieldAll=function(e,t){e=ce.makeIterator(e);var n=e.next();if(ce.generator.ensureIteratorResultIsObject_(n),n.done)this.yieldResult=n.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(n.value,t)},ce.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},ce.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},ce.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},ce.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},ce.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},ce.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},ce.generator.Context.prototype.enterFinallyBlock=function(e,t,n){n?this.finallyContexts_[n]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},ce.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},ce.generator.Context.prototype.forIn=function(e){return new ce.generator.Context.PropertyIterator(e)},ce.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},ce.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},ce.generator.Engine_=function(e){this.context_=new ce.generator.Context,this.program_=e},ce.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},ce.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(n){return{value:n,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},ce.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},ce.generator.Engine_.prototype.yieldAllStep_=function(e,t,n){try{var o=e.call(this.context_.yieldAllIterator_,t);if(ce.generator.ensureIteratorResultIsObject_(o),!o.done)return this.context_.stop_(),o;var c=o.value}catch(g){return this.context_.yieldAllIterator_=null,this.context_.throw_(g),this.nextStep_()}return this.context_.yieldAllIterator_=null,n.call(this.context_,c),this.nextStep_()},ce.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},ce.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},ce.generator.createGenerator=function(e,t){return t=new ce.generator.Generator_(new ce.generator.Engine_(t)),ce.setPrototypeOf&&e.prototype&&ce.setPrototypeOf(t,e.prototype),t},ce.asyncExecutePromiseGenerator=function(e){function t(o){return e.next(o)}function n(o){return e.throw(o)}return new Promise(function(o,c){function g(S){S.done?o(S.value):Promise.resolve(S.value).then(t,n).then(g,c)}g(e.next())})},ce.asyncExecutePromiseGeneratorFunction=function(e){return ce.asyncExecutePromiseGenerator(e())},ce.asyncExecutePromiseGeneratorProgram=function(e){return ce.asyncExecutePromiseGenerator(new ce.generator.Generator_(new ce.generator.Engine_(e)))},ce.polyfill("globalThis",function(e){return e||ce.global},"es_2020","es3"),ce.polyfill("Array.prototype.includes",function(e){return e||function(t,n){var o=this;o instanceof String&&(o=String(o));var c=o.length;for(n=n||0,0>n&&(n=Math.max(n+c,0));n<c;n++){var g=o[n];if(g===t||Object.is(g,t))return!0}return!1}},"es7","es3"),ce.initSymbol=function(){},ce.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},ce.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,o=!1,c={next:function(){if(!o&&n<e.length){var g=n++;return{value:t(g,e[g]),done:!1}}return o=!0,{done:!0,value:void 0}}};return c[Symbol.iterator]=function(){return c},c},ce.polyfill("Array.prototype.values",function(e){return e||function(){return ce.iteratorFromArray(this,function(t,n){return n})}},"es8","es3"),ce.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var n=[];return Array.prototype.forEach.call(this,function(o){Array.isArray(o)&&0<t?(o=Array.prototype.flat.call(o,t-1),n.push.apply(n,o)):n.push(o)}),n}},"es9","es5"),ce.polyfill("Array.prototype.flatMap",function(e){return e||function(t,n){var o=[];return Array.prototype.forEach.call(this,function(c,g){c=t.call(n,c,g,this),Array.isArray(c)?o.push.apply(o,c):o.push(c)}),o}},"es9","es5"),ce.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ce.polyfill("Object.entries",function(e){return e||function(t){var n=[],o;for(o in t)ce.owns(t,o)&&n.push([o,t[o]]);return n}},"es8","es3"),ce.polyfill("Object.values",function(e){return e||function(t){var n=[],o;for(o in t)ce.owns(t,o)&&n.push(t[o]);return n}},"es8","es3");var sr=Object.create(null),zp={typeMap:sr},Na=Object.create(null),vi="default",pe=class{constructor(e){this.name=e}toString(){return this.name}};pe.CONNECTION_CHECKER=new pe("connectionChecker"),pe.CONNECTION_PREVIEWER=new pe("connectionPreviewer"),pe.CURSOR=new pe("cursor"),pe.EVENT=new pe("event"),pe.FIELD=new pe("field"),pe.INPUT=new pe("input"),pe.RENDERER=new pe("renderer"),pe.TOOLBOX=new pe("toolbox"),pe.THEME=new pe("theme"),pe.TOOLBOX_ITEM=new pe("toolboxItem"),pe.FLYOUTS_VERTICAL_TOOLBOX=new pe("flyoutsVerticalToolbox"),pe.FLYOUTS_HORIZONTAL_TOOLBOX=new pe("flyoutsHorizontalToolbox"),pe.METRICS_MANAGER=new pe("metricsManager"),pe.BLOCK_DRAGGER=new pe("blockDragger"),pe.SERIALIZER=new pe("serializer"),pe.ICON=new pe("icon"),pe.PASTER=new pe("paster");var Ar={DEFAULT:vi,TEST_ONLY:zp};Ar.Type=pe,Ar.getAllItems=te,Ar.getClass=L,Ar.getClassFromOptions=se,Ar.getObject=D,Ar.hasItem=A,Ar.register=u,Ar.unregister=I;var Xs=Object.create(null),J;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(J||(J={}));var Bd=[J.BLOCK_CREATE,J.BLOCK_MOVE,J.COMMENT_CREATE,J.COMMENT_MOVE],Ud=new Set,Gh={};Gh.warn=Y;var Fd="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Hd={genUid:()=>{const e=Fd.length,t=[];for(let n=0;20>n;n++)t[n]=Fd.charAt(Math.random()*e);return t.join("")}},Xp=0,Gd={TEST_ONLY:Hd};Gd.genUid=re,Gd.getNextUniqueId=fe;var Vd="",eh=!0,Wd=0,Vh="ORPHANED_BLOCK",ho=[],zd={FIRE_QUEUE:ho,enqueueEvent:wn,fireNow:Ct,fireInternal:ht,setGroupInternal:Ot};i.disable$$module$build$src$core$events$utils,i.enable$$module$build$src$core$events$utils,i.getGroup$$module$build$src$core$events$utils,i.setGroup$$module$build$src$core$events$utils,i.setRecordUndo$$module$build$src$core$events$utils;var Pl=Object.create(null),jp,Ma=null,Yp,js=[],Wh={defineBlocksWithJsonArrayInternal:ds},Yn={TEST_ONLY:Wh};Yn.createBlockDefinitionsFromJsonArray=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Yn.defineBlocks=i.defineBlocks$$module$build$src$core$common,Yn.defineBlocksWithJsonArray=Fr,Yn.draggingConnections=js,Yn.getAllWorkspaces=z,Yn.getBlockTypeCounts=_n,Yn.getMainWorkspace=je,Yn.getParentContainer=Et,Yn.getSelected=ze,Yn.getWorkspaceById=j,Yn.registerWorkspace=_e,Yn.setMainWorkspace=lt,Yn.setParentContainer=Re,Yn.setSelected=i.setSelected$$module$build$src$core$common,Yn.svgResize=ft,Yn.unregisterWorkpace=rt;var Da=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ot()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,n){return n.isBlank=!1,n.group=e.group||"",n.workspaceId=t.id,n}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=j(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},ir=class extends Da{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},zh=class extends ir{constructor(e,t,n){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=J.CLICK,this.blockId=e?e.id:void 0,this.targetType=n}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new zh),t.targetType=e.targetType,t.blockId=e.blockId,t}},th;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(th||(th={})),u(pe.EVENT,J.CLICK,zh);var qc=750,Xh="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Qc=null,Pa={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},nh=0,xl={TOUCH_ENABLED:Xh,TOUCH_MAP:Pa};xl.checkTouchIdentifier=Bi,xl.clearTouchIdentifier=fn,xl.getTouchIdentifierFromEvent=ui,xl.longStart=xi,xl.longStop=Nn,xl.shouldHandleEvent=ci;var jh,Xd,jd,Kp,Ts,ls,Yh,Yd,Kd,Jd;(function(e){function t(o){return n.includes(o.toUpperCase())}jh=e;const n=jh.toUpperCase();Xd=t("JavaFX"),jd=t("WebKit"),Kp=t("Gecko")&&!jd,Ts=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,ls=t("iPad")||t("Macintosh")&&0<e,Yh=t("iPhone")&&!ls,Yd=t("Macintosh"),Kd=ls||Ts&&!t("Mobile")||t("Silk"),Jd=!Kd&&(Yh||Ts)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Jp=jh,Kh=Xd,qd=Kp,sh=Ts,ih=ls,Qd=Yh,rh=Yd,Jh=Jd,qp={ANDROID:sh,GECKO:qd,IPAD:ih,IPHONE:Qd,JavaFx:Kh,MAC:rh,MOBILE:Jh,raw:Jp},qh=40,oh=125,jo={};jo.bind=It,jo.conditionalBind=He,jo.getScrollDeltaPixels=Ks,jo.isRightButton=Mn,jo.isTargetInput=hi,jo.mouseToSvg=M,jo.unbind=Rt;var Zd={};Zd.removeElem=nn;var kr=class{constructor(e){this.name=e}toString(){return this.name}};kr.POSITIONABLE=new kr("positionable"),kr.DRAG_TARGET=new kr("drag_target"),kr.DELETE_AREA=new kr("delete_area"),kr.AUTOHIDEABLE=new kr("autohideable");var rn=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const n=e.component.id;if(!t&&this.componentData.has(n)){var o;throw Error('Plugin "'+n+'" with capabilities "'+((o=this.componentData.get(n))==null?void 0:o.capabilities)+'" already added.')}for(this.componentData.set(n,e),t=[],o=0;o<e.capabilities.length;o++){const c=String(e.capabilities[o]).toLowerCase();if(t.push(c),this.capabilityToComponentIds.has(c)){let g;(g=this.capabilityToComponentIds.get(c))==null||g.push(n)}else this.capabilityToComponentIds.set(c,[n])}this.componentData.get(n).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let n=0;n<t.capabilities.length;n++){const o=String(t.capabilities[n]).toLowerCase();nn(this.capabilityToComponentIds.get(o),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var n;(n=this.componentData.get(e))==null||n.capabilities.push(t);var o;(o=this.capabilityToComponentIds.get(t))==null||o.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),nn(this.componentData.get(e).capabilities,t),nn(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const n=[];if(t){const o=[];e.forEach(c=>{o.push(this.componentData.get(c))}),o.sort(function(c,g){return c.weight-g.weight}),o.forEach(function(c){n.push(c.component)})}else e.forEach(o=>{n.push(this.componentData.get(o).component)});return n}};rn.Capability=kr,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(rn||(rn={})),rn.ComponentWeight;var Zc=!1,wr=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,ep={};ep.inject=In,ep.register=yt;var Ie=class{constructor(e,t){this.x=e,this.y=t}clone(){return new Ie(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new Ie(e.x-t.x,e.y-t.y)}static sum(e,t){return new Ie(e.x+t.x,e.y+t.y)}},xa="http://www.w3.org/2000/svg",Nr="http://www.w3.org/1999/xhtml",li="http://www.w3.org/1999/xlink",Ci;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Ci||(Ci={}));var cn=null,tp=0,Qh=null,Fn={HTML_NS:Nr};Fn.NodeType=Ci,Fn.SVG_NS=xa,Fn.XLINK_NS=li,Fn.addClass=ve,Fn.createSvgElement=q,Fn.getFastTextWidth=qn,Fn.getFastTextWidthWithSizeString=T,Fn.getTextWidth=di,Fn.hasClass=F,Fn.insertAfter=me,Fn.measureFontMetrics=v,Fn.removeClass=R,Fn.removeClasses=E,Fn.removeNode=G,Fn.setCssTransform=wt,Fn.startTextWidthCache=Gn,Fn.stopTextWidthCache=Bs;var V=class{constructor(e){this.tagName=e}toString(){return this.tagName}};V.ANIMATE=new V("animate"),V.CIRCLE=new V("circle"),V.CLIPPATH=new V("clipPath"),V.DEFS=new V("defs"),V.FECOMPOSITE=new V("feComposite"),V.FECOMPONENTTRANSFER=new V("feComponentTransfer"),V.FEFLOOD=new V("feFlood"),V.FEFUNCA=new V("feFuncA"),V.FEGAUSSIANBLUR=new V("feGaussianBlur"),V.FEPOINTLIGHT=new V("fePointLight"),V.FESPECULARLIGHTING=new V("feSpecularLighting"),V.FILTER=new V("filter"),V.FOREIGNOBJECT=new V("foreignObject"),V.G=new V("g"),V.IMAGE=new V("image"),V.LINE=new V("line"),V.PATH=new V("path"),V.PATTERN=new V("pattern"),V.POLYGON=new V("polygon"),V.RECT=new V("rect"),V.SVG=new V("svg"),V.TEXT=new V("text"),V.TSPAN=new V("tspan");var jt=class{constructor(e,t,n,o){this.top=e,this.bottom=t,this.left=n,this.right=o}clone(){return new jt(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,t){return e===t?!0:e&&t?e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right:!1}static createFromPoint(e,t,n){const o=e.x;return e=e.y,new jt(e,e+n,o,o+t)}},Ee=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new Ee(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new Ee(Math.min(e.width,t.width),Math.min(e.height,t.height))}},Ba={getSizeInternal:X},po={TEST_ONLY:Ba};po.getBorderBox=Js,po.getComputedStyle=we,po.getContainerOffsetToScrollInto=qs,po.getPageOffset=Ke,po.getSize=N,po.getViewportPageOffset=ps,po.scrollIntoContainerView=yo;var np=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Qp=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,lh={XY_REGEX:np,XY_STYLE_REGEX:Qp},go={TEST_ONLY:lh};go.getDocumentScroll=dr,go.getInjectionDivXY=Ui,go.getRelativeXY=ta,go.getViewportBBox=pi,go.screenToWsCoordinates=pc,go.wsToScreenCoordinates=gc;var Tn=class{constructor(e,t,n,o,c){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new Ie(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Ie(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=n||!1,this.margin=c!==void 0?c:Tn.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),o&&(e+=" "+o),this.outerSvg=q(V.SVG,{class:e}),o=q(V.G,{},this.outerSvg),this.svgBackground=q(V.RECT,{class:"blocklyScrollbarBackground"},o),e=Math.floor((Tn.scrollbarThickness-5)/2),this.svgHandle=q(V.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},o),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),me(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=He(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=He(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Tn.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),Rt(this.onMouseDownBarWrapper_),Rt(this.onMouseDownHandleWrapper_),G(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,wt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&Tn.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=Tn.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=Tn.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-Tn.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var n=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=Tn.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Tn.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var n=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),fn(),this.cleanUp(),Mn(e))e.stopPropagation();else{var t=M(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var n=Ui(this.svgHandle);n=this.horizontal?n.x:n.y;var o=this.handlePosition,c=.95*this.handleLength;t<=n?o-=c:t>=n+this.handleLength&&(o+=c),this.setHandlePosition(this.constrainHandlePosition(o)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),Mn(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=He(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=He(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){fn(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(Rt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Rt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new Ie(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};Tn.scrollbarThickness=Xh?25:15,Tn.DEFAULT_SCROLLBAR_MARGIN=.5;var ah={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Zh={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:ch,DOMParser:Ua,XMLSerializer:Fa}=globalThis;Ua&&(ah=new Ua),Fa&&(Zh=new Fa);var as="https://developers.google.com/blockly/xml",Mr=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Li={NAME_SPACE:as};Li.createElement=i.createElement$$module$build$src$core$utils$xml,Li.createTextNode=i.createTextNode$$module$build$src$core$utils$xml,Li.domToText=cl,Li.injectDependencies=Mh,Li.textToDom=i.textToDom$$module$build$src$core$utils$xml;var ed="categoryToolbox",sp="flyoutToolbox",Ze;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(Ze||(Ze={}));var ip={hasCategoriesInternal:ul},Es={};Es.Position=Ze,Es.TEST_ONLY=ip,Es.convertFlyoutDefToJsonArray=Qn,Es.convertToolboxDefToJson=Dn,Es.hasCategories=Pn,Es.isCategoryCollapsible=Fi,Es.parseToolboxTree=sn;var Yo;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(Yo||(Yo={}));var Ha;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Ha||(Ha={}));var Ko;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(Ko||(Ko={}));var Bl={};Bl.bumpDirection=Ko,Bl.bumpPositionRect=Co,Bl.getCornerOppositeToolbox=vo,Bl.getStartPositionRect=_r,Bl.horizontalPosition=Ha,Bl.verticalPosition=Yo;var Ms={width:96,height:124,url:"sprites.png"},Zp=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=q(V.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:rn.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[rn.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&G(this.svgGroup);for(const e of this.boundEvents)Rt(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new jt(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var n=vo(this.workspace,e),o=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(o+=this.LARGE_SPACING+this.HEIGHT),e=_r(n,new Ee(this.WIDTH,o),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),n=n.vertical,t=Co(e,this.MARGIN_VERTICAL,n===Yo.TOP?Ko.DOWN:Ko.UP,t),n===Yo.TOP){var c=this.SMALL_SPACING+this.HEIGHT,g;(g=this.zoomInGroup)==null||g.setAttribute("transform","translate(0, "+c+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(c+this.LARGE_SPACING+this.HEIGHT)+")")}else{g=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let w;(w=this.zoomInGroup)==null||w.setAttribute("transform","translate(0, "+g+")"),g=g+this.SMALL_SPACING+this.HEIGHT,(c=this.zoomOutGroup)==null||c.setAttribute("transform","translate(0, "+g+")")}this.top=t.top,this.left=t.left;var S;(S=this.svgGroup)==null||S.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=q(V.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=q(V.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);q(V.RECT,{width:32,height:32},t),q(V.IMAGE,{width:Ms.width,height:Ms.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(li,"xlink:href",this.workspace.options.pathToMedia+Ms.url),this.boundEvents.push(He(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=q(V.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=q(V.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);q(V.RECT,{width:32,height:32},t),q(V.IMAGE,{width:Ms.width,height:Ms.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(li,"xlink:href",this.workspace.options.pathToMedia+Ms.url),this.boundEvents.push(He(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),fn(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=q(V.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=q(V.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);q(V.RECT,{width:32,height:32},t),q(V.IMAGE,{width:Ms.width,height:Ms.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(li,"xlink:href",this.workspace.options.pathToMedia+Ms.url),this.boundEvents.push(He(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),fn(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(ee(J.CLICK))(null,this.workspace.id,"zoom_controls");Oe(e)}};yt(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var uh=100,td=75,Ai=50,At=25,cs={BLOCKS:Ai,PROCEDURES:td,VARIABLES:uh,WORKSPACE_COMMENTS:At},Cn={};Cn.register=Hi,Cn.unregister=bu;var us=class{constructor(){this.priority=At}save(e){const t=[];for(const n of e.getTopComments())(e=Hr(n,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const n of e)fr(n,t,{recordUndo:ot()})}clear(e){for(const t of e.getTopComments())t.dispose()}};Hi("workspaceComments",new us);var Ds={};Ds.WorkspaceCommentSerializer=us,Ds.append=fr,Ds.save=Hr;var Ul={};Ul.register=Rs,Ul.unregister=Su;var Ln=class{paste(e,t,n){e=e.commentState,n&&(e.x=n.x,e.y=n.y),i.disable$$module$build$src$core$events$utils();let o;try{o=fr(e,t),Fs(o)}finally{i.enable$$module$build$src$core$events$utils()}return o?(it()&&Oe(new(ee(J.COMMENT_CREATE))(o)),i.setSelected$$module$build$src$core$common(o),o):null}};Ln.TYPE="workspace-comment",Rs(Ln.TYPE,new Ln);var Ga;Ga=28,i.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Ga,connectingSnapRadius:Ga,currentConnectionPreference:8,bumpDelay:250},i.config$$module$build$src$core$config;var Va="aria-",nd="role",ki;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(ki||(ki={}));var On;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(On||(On={}));var hs={};hs.Role=ki,hs.State=On,hs.setRole=mr,hs.setState=xn;var hh=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&mr(t,this.roleName),this.element=t;for(let n=0,o;o=this.menuItems[n];n++)t.appendChild(o.createDom());return this.mouseOverHandler=He(t,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=He(t,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=He(t,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=He(t,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=He(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),ve(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),R(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(Rt(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(Rt(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(Rt(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(Rt(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(Rt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){for(let n=0,o;o=this.menuItems[n];n++)if(o.getElement()===e)return o}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;if(t&&(t.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,(t=this.getElement())&&xn(t,On.ACTIVEDESCENDANT,e.getId());let n;(n=e.getElement())==null||n.scrollIntoView({block:"nearest",inline:"start"})}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let n;for(;n=this.menuItems[e];){if(n.isEnabled()){this.setHighlighted(n);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const n=new Ie(e.clientX,e.clientY);if(1>Ie.distance(t,n))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=N(e);return t.height=e.scrollHeight,t}},Fl=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=fe(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var n=document.createElement("div");n.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(n)}return n=this.content,typeof this.content=="string"&&(n=document.createTextNode(this.content)),t.appendChild(n),e.appendChild(t),this.roleName&&mr(e,this.roleName),xn(e,On.SELECTED,this.checkable&&this.checked||!1),xn(e,On.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(ve(t,"blocklyMenuItemHighlight"),ve(t,"goog-menuitem-highlight")):(R(t,"blocklyMenuItemHighlight"),R(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},wi="_TEMP_COLLAPSED_INPUT",Wa="_TEMP_COLLAPSED_FIELD",Is="MANUALLY_DISABLED",Hl={COLLAPSED_FIELD_NAME:Wa,COLLAPSED_INPUT_NAME:wi,MANUALLY_DISABLED:Is};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(i.inputTypes$$module$build$src$core$inputs$input_types||(i.inputTypes$$module$build$src$core$inputs$input_types={})),i.inputTypes$$module$build$src$core$inputs$input_types;var za=new Set,_o=new WeakSet,eu=new WeakMap,fo=null,dh=null,ph=0,Xa={};Xa.finishQueuedRenders=Kt,Xa.queueRender=_s,Xa.triggerQueuedRenders=Vn;var Ps=function(e,t){window.alert(e),t&&t()},Jo=function(e,t){t(window.confirm(e))},rr=function(e,t,n){n(window.prompt(e,t))},Ys={confirmInternal:Vr},Gl={TEST_ONLY:Ys};Gl.alert=Wi,Gl.confirm=vt,Gl.prompt=Lo,Gl.setAlert=hl,Gl.setConfirm=sa,Gl.setPrompt=gi;var gh,sd;i.Msg$$module$build$src$core$msg=Object.create(null),gh=function(e){Object.keys(e).forEach(function(t){i.Msg$$module$build$src$core$msg[t]=e[t]})},sd={Msg:i.Msg$$module$build$src$core$msg,setLocale:gh};var _h=class extends Da{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new _h),t.varId=e.varId,t}},mo=class extends _h{constructor(e){super(e),this.type=J.VAR_CREATE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new mo),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};u(pe.EVENT,J.VAR_CREATE,mo);var tu=class{constructor(e,t,n,o){this.workspace=e,this.name=t,this.type=n||"",this.id=o||re()}getId(){return this.id}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},fh="VARIABLE",qo="ijkmnopqrstuvwxyzabcdefgh",id={generateUniqueNameInternal:Vs},Rn={CATEGORY_NAME:fh,TEST_ONLY:id,VAR_LETTER_OPTIONS:qo};Rn.allDeveloperVariables=i.allDeveloperVariables$$module$build$src$core$variables,Rn.allUsedVarModels=i.allUsedVarModels$$module$build$src$core$variables,Rn.createVariableButtonHandler=_i,Rn.flyoutCategory=zr,Rn.flyoutCategoryBlocks=ys,Rn.generateUniqueName=Qs,Rn.generateUniqueNameFromOptions=Tr,Rn.generateVariableFieldDom=ei,Rn.getAddedVariables=jr,Rn.getOrCreateVariablePackage=i.getOrCreateVariablePackage$$module$build$src$core$variables,Rn.getVariable=i.getVariable$$module$build$src$core$variables,Rn.nameUsedWithAnyType=fc,Rn.nameUsedWithConflictingParam=Xr,Rn.promptName=Zs,Rn.renameVariable=i.renameVariable$$module$build$src$core$variables;var ja=class extends Error{},rp=class extends ja{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Ya=class extends ja{constructor(e,t,n){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=n}},mh=class extends ja{constructor(e,t,n,o){super(`The block ${n.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=n,this.childState=o}},eg=class extends ja{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},tg=class extends ja{constructor(e,t,n){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=n}},Vl={};Vl.BadConnectionCheck=mh,Vl.DeserializationError=ja,Vl.MissingBlockType=rp,Vl.MissingConnection=Ya,Vl.RealChildOfShadow=eg,Vl.UnregisteredIcon=tg;var op=class{constructor(){this.priority=Ai}save(e){const t=[];for(const n of e.getTopBlocks(!1))(e=Zn(n,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const n of e)fi(n,t,{recordUndo:ot()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Hi("blocks",new op);var Dr={};Dr.BlockSerializer=op,Dr.append=fi,Dr.appendInternal=Wn,Dr.save=Zn;var Kn=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};Kn.MUTATOR=new Kn("mutator"),Kn.WARNING=new Kn("warning"),Kn.COMMENT=new Kn("comment");var or=class extends Da{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new or),t.blockId=e.blockId,t}},Wl=class extends or{constructor(e,t,n,o,c){super(e),this.type=J.BLOCK_CHANGE,e&&(this.element=t,this.name=n||void 0,this.oldValue=o,this.newValue=c)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Wl),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const n=t.getIcon(Kn.MUTATOR);switch(n&&mi(n)&&n.bubbleIsVisible()&&n.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var o;t.setDisabledReason(!!e,(o=this.disabledReason)!=null?o:Is);break;case"inline":t.setInputsInline(!!e);break;case"mutation":o=Wl.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(i.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),Oe(new Wl(t,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?ms(e):""}};u(pe.EVENT,J.BLOCK_CHANGE,Wl);var dn={};dn.clamp=Ir,dn.toDegrees=oa,dn.toRadians=Jr;var rd=16,lp=1,ng=12,ap=16,$h=.25,od=null,Ka=null,bs="",zl="",Bt,Ni,$o,Qo=null,Pr=null,ld=null,Th={getBoundsInfo:function(){const e=Ke(Qo),t=N(Qo);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,n,o){const c=Th.getBoundsInfo(),g=N(Bt);return t+g.height<c.bottom?Lu(e,t,c,g):o-g.height>c.top?Qr(n,o,c,g):t+g.height<document.documentElement.clientHeight?Lu(e,t,c,g):o-g.height>document.documentElement.clientTop?Qr(n,o,c,g):Xi(e,c,g)}},xs={ANIMATION_TIME:$h,ARROW_HORIZONTAL_PADDING:ng,ARROW_SIZE:rd,BORDER_SIZE:lp,PADDING_Y:ap,TEST_ONLY:Th};xs.clearContent=Rc,xs.createDom=Sc,xs.getContentDiv=qr,xs.getOwner=br,xs.getPositionX=la,xs.hide=aa,xs.hideIfOwner=Ac,xs.hideWithoutAnimation=ji,xs.isVisible=$l,xs.repositionForWindowResize=ku,xs.setBoundsElement=Oc,xs.setColour=yc,xs.show=Lc,xs.showPositionedByBlock=Dh,xs.showPositionedByField=vu;var Ja=class{constructor(e){this.workspace=e,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(e),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t=0,n;n=e[t];t++)this.unregisterMarker(n);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};Ja.LOCAL_MARKER="local_marker_1";var nu={};nu.commonWordPrefix=wu,nu.commonWordSuffix=Nu,nu.isNumber=i.isNumber$$module$build$src$core$utils$string,nu.shortestStringLength=ca,nu.wrap=i.wrap$$module$build$src$core$utils$string;var Eh=void 0,su=!1,Zo=!1,Ih=50,cp=0,el=0,up=0,ad=0,ai=null,Xl=null,bh=0,iu=10,hp=10,sg=750,qa=5,Jn=null,Ss={HOVER_MS:sg,LIMIT:Ih,MARGINS:qa,OFFSET_X:bh,OFFSET_Y:iu,RADIUS_OK:hp};Ss.bindMouseEvents=El,Ss.block=no,Ss.createDom=wc,Ss.dispose=Yi,Ss.getCustomTooltip=Pu,Ss.getDiv=Tl,Ss.getTooltipOfObject=Po,Ss.hide=Ki,Ss.isVisible=kc,Ss.setCustomTooltip=Du,Ss.unbindMouseEvents=Nc,Ss.unblock=vs;var dp=.45,ru=.65,s={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},r={};r.blend=Ws,r.getHsvSaturation=Bc,r.getHsvValue=Uu,r.hexToRgb=da,r.hsvToHex=fs,r.hueToHex=Uc,r.names=s,r.parse=xo,r.rgbToHex=ha,r.setHsvSaturation=Bu,r.setHsvValue=Ph;var a={};a.checkMessageReferences=ga,a.parseBlockColour=Il,a.replaceMessageReferences=Nt,a.tokenizeInterpolation=Ji;var d=class{constructor(e,t,n){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Ee(0,0),e!==d.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(Nt(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=q(V.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=q(V.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=q(V.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");El(e),this.mouseDownWrapper=He(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(d),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(d,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=i.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),cl(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(i.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){Ac(this),qi(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||G(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(ve(e,"blocklyEditableText"),R(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(ve(e,"blocklyNonEditableText"),R(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==d.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let n=2*e,o=t.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(c=qn(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),n+=c),this.isFullBlockField()||(o=Math.max(o,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=n,this.positionTextElement_(e,c),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var n=this.getConstants(),o=this.size_.height/2,c;this.textElement_.setAttribute("x",String((c=this.getSourceBlock())!=null&&c.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(n.FIELD_TEXT_BASELINE_CENTER?o:o-n.FIELD_TEXT_HEIGHT/2+n.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Ee(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new _;if(this.isFullBlockField()){var n=this.sourceBlock_.getHeightWidth();const o=t.workspace.scale;e=this.getAbsoluteXY_(),t=(n.width+1)*o,n=(n.height+1)*o,qd?(e.x+=1.5*o,e.y+=1.5*o):(e.x-=.5*o,e.y-=.5*o)}else n=this.borderRect_.getBoundingClientRect(),e=Ke(this.borderRect_),t=n.width,n=n.height;return new jt(e.y,e.y+n,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,d.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e):d.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var n=i.getGroup$$module$build$src$core$events$utils();n||i.setGroup$$module$build$src$core$events$utils(!0);try{const ie=this.doClassValidation_(e),De=this.processValidation(e,ie,t);if(!(De instanceof Error)){var o,c=(o=this.getValidator())==null?void 0:o.call(this,De),g=this.processValidation(De,c,t);if(!(g instanceof Error)){var S=this.sourceBlock_;if(!S||!S.disposed){var w=this.getValue();w===g?this.doValueUpdate_(g):(this.doValueUpdate_(g),t&&S&&it()&&Oe(new(ee(J.BLOCK_CHANGE))(S,"field",this.name||null,w,g)),this.isDirty_&&this.forceRerender())}}}}finally{i.setGroup$$module$build$src$core$events$utils(n)}}}processValidation(e,t,n){return t===null?(this.doValueInvalid_(e,n),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return Po(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Ke(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new _;const n=t.inputList;for(let o=0;o<t.inputList.length;o++){const c=n[o],g=c.fieldRow;for(let S=0;S<g.length;S++)if(g[S]===this){e=c;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg=e}else this.cursorSvg=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg=e}else this.markerSvg=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new _;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg&&e.getMarker(Ja.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};d.NBSP=" ",d.SKIP_SETUP=Symbol("SKIP_SETUP");var _=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},m=null,O=null,k=null,P="blocklyWidgetDiv",Q="",$e="",Te,ge={};ge.createDom=bl,ge.getDiv=so,ge.hide=ro,ge.hideIfOwner=qi,ge.hideIfOwnerIsInWorkspace=$i,ge.isVisible=Fc,ge.positionWithAnchor=Hc,ge.repositionForWindowResize=Gc,ge.show=Sr,ge.testOnly_setDiv=io;var Pe=null,Ve={},We=null,on={};on.callbackFactory=i.callbackFactory$$module$build$src$core$contextmenu,on.dispose=Bo,on.getCurrentBlock=Ti,on.hide=ma,on.setCurrentBlock=fa,on.show=Ol;var x=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let t;return(t=this.registeredItems.get(e))!=null?t:null}getContextMenuOptions(e,t){const n=[];for(const c of this.registeredItems.values())if(e===c.scopeType){var o=c.preconditionFn(t);o!=="hidden"&&(o={text:typeof c.displayText=="function"?c.displayText(t):c.displayText,enabled:o==="enabled",callback:c.callback,scope:t,weight:c.weight},n.push(o))}return n.sort(function(c,g){return c.weight-g.weight}),n}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(x||(x={})),x.ScopeType;var H=50,K=100,ye={BLOCK:H,BUBBLE:K},Ye=class{constructor(e){this.comment=e,this.startLoc=null,this.inGroup=!1,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,H),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||i.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const e=new(ee(J.COMMENT_DRAG))(this.comment,!0);Oe(e)}fireDragEndEvent(){const e=new(ee(J.COMMENT_DRAG))(this.comment,!1);Oe(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(ee(J.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),Oe(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},et=new WeakMap,tt=class{constructor(e){this.workspace=e,this.size=new Ee(120,100),this.collapsed=!1,this.editable=!0,this.location=new Ie(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=q(V.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let t;(t=e.getLayerManager())==null||t.append(this,H),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Ie(0,0))}createHighlightRect(e){return q(V.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,t){e=q(V.G,{class:"blocklyCommentTopbar"},e);const n=q(V.RECT,{class:"blocklyCommentTopbarBackground"},e),o=q(V.IMAGE,{class:"blocklyDeleteIcon",href:`${t.options.pathToMedia}delete-icon.svg`},e);t=q(V.IMAGE,{class:"blocklyFoldoutIcon",href:`${t.options.pathToMedia}foldout-icon.svg`},e);const c=q(V.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),g=document.createTextNode("");return c.appendChild(g),He(t,"pointerdown",this,this.onFoldoutDown),He(o,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:n,deleteIcon:o,foldoutIcon:t,textPreview:c,textPreviewNode:g}}createTextArea(e){e=q(V.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const t=document.createElementNS(Nr,"body");t.setAttribute("xmlns",Nr),t.className="blocklyMinimalBody";const n=document.createElementNS(Nr,"textarea");return ve(n,"blocklyCommentText"),ve(n,"blocklyTextarea"),ve(n,"blocklyText"),t.appendChild(n),e.appendChild(t),He(n,"change",this,this.onTextChange),{foreignObject:e,textArea:n}}createResizeHandle(e,t){return e=q(V.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),He(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const t=this.topBarBackground.getBBox(),n=this.deleteIcon.getBBox(),o=this.foldoutIcon.getBBox(),c=this.textPreview.getBBox(),g=this.resizeHandle.getBBox();this.size=e=Ee.max(e,this.calcMinSize(t,o,n)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,t),this.updateDeleteIconPosition(e,t,n),this.updateFoldoutIconPosition(t,o),this.updateTextPreviewSize(e,t,c,n,g),this.updateResizeHandlePosition(e,g)}setSize(e){const t=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(t,this.size)}calcMinSize(e,t,n){var o;this.updateTextPreview((o=this.textArea.value)!=null?o:""),o=di(this.textPreview);const c=this.calcFoldoutMargin(e,t),g=this.calcDeleteMargin(e,n);let S=o;return this.foldoutIcon.checkVisibility()?S+=t.width+2*c:o&&(S+=4),this.deleteIcon.checkVisibility()?S+=n.width+2*g:o&&(S+=4),new Ee(S,e.height+20)}calcDeleteMargin(e,t){return(e.height-t.height)/2}calcFoldoutMargin(e,t){return(e.height-t.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,t,n){t=this.calcDeleteMargin(t,n),this.deleteIcon.setAttribute("y",`${t}`),this.deleteIcon.setAttribute("x",`${e.width-n.width-t}`)}updateFoldoutIconPosition(e,t){e=this.calcFoldoutMargin(e,t),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,t,n,o,c){const g=(t.height-n.height)/2,S=this.calcDeleteMargin(t,o);t=this.calcFoldoutMargin(t,c),e=e.width-c.width-2*t-o.width-2*S,this.textPreview.setAttribute("x",`${c.width+2*t*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${g+n.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let n=this.sizeChangeListeners.length-1;0<=n;n--)this.sizeChangeListeners[n](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),Mn(e)||(this.preResizeSize=this.getSize(),Uo(this.workspace,e,new Ie(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=He(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=He(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){fn(),this.resizePointerUpListener&&(Rt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Rt(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=oo(this.workspace,e),this.setSizeWithoutFiringEvents(new Ee(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?ve(this.svgRoot,"blocklyCollapsed"):R(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){fn(),this.bringToFront(),Mn(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(ve(this.svgRoot,"blocklyEditable"),R(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(R(this.svgRoot,"blocklyEditable"),ve(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let t=this.textChangeListeners.length-1;0<=t;t--)this.textChangeListeners[t](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){fn(),Mn(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,G(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};yt(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var st=class{constructor(e,t){this.workspace=e,this.text="",this.size=new Ee(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Ie(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:re(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){it()&&Oe(new(ee(J.COMMENT_CREATE))(this))}fireDeleteEvent(){it()&&Oe(new(ee(J.COMMENT_DELETE))(this))}fireChangeEvent(e,t){it()&&Oe(new(ee(J.COMMENT_CHANGE))(this,e,t))}fireCollapseEvent(e){it()&&Oe(new(ee(J.COMMENT_COLLAPSE))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){const t=new(ee(J.COMMENT_RESIZE))(this);this.size=e,t.recordCurrentSizeAsNewSize(),Oe(t)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,t){const n=new(ee(J.COMMENT_MOVE))(this);t&&n.setReason(t),this.location=e,n.recordNew(),Oe(n)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},Hn=class extends st{constructor(e,t){super(e,t),this.dragStrategy=new Ye(this),this.workspace=e,this.view=new tt(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),He(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),He(this.view.getSvgRoot(),"wheel",this,n=>{n.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>void super.setText(t)),this.view.addSizeChangeListener((e,t)=>void super.setSize(t)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,n;const o=(n=(t=this.view)==null?void 0:t.getSize())!=null?n:this.getSize();return this.workspace.RTL?(t=e.x-o.width,n=e.x):(t=e.x,n=e.x+o.width),new jt(e.y,e.y+o.height,t,n)}moveBy(e,t,n){const o=this.getRelativeToSurfaceXY();e=new Ie(o.x+e,o.y+t),this.moveTo(e,n)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?ve(this.getSvgRoot(),"blocklyDragging"):R(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);if(t){t.handleCommentStart(e,this);let n;(n=this.workspace.getLayerManager())==null||n.append(this,H),i.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(e){e?ve(this.getSvgRoot(),"blocklyDraggingDelete"):R(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){ve(this.getSvgRoot(),"blocklySelected")}unselect(){R(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:Ln.TYPE,commentState:Hr(this,{addCoordinates:!0})}}showContextMenu(e){const t=x.registry.getContextMenuOptions(x.ScopeType.COMMENT,{comment:this});Ol(e,t,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}},ct={};ct.appendDomToWorkspace=zu,ct.blockToDom=ni,ct.blockToDomWithXY=Ei,ct.clearWorkspaceAndLoadFromXml=$a,ct.deleteNext=Xu,ct.domToBlock=i.domToBlock$$module$build$src$core$xml,ct.domToBlockInternal=Ii,ct.domToPrettyText=Wu,ct.domToText=ms,ct.domToVariables=Rl,ct.domToWorkspace=i.domToWorkspace$$module$build$src$core$xml,ct.loadWorkspaceComment=Ta,ct.saveWorkspaceComment=lo,ct.variablesToDom=Qi,ct.workspaceToDom=Jt;var To=class extends or{constructor(e){super(e),this.type=J.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Ei(e),this.ids=Ft(e),this.json=Zn(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=ms(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new To),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!s_(t,this.ids))if(e)fi(this.json,t);else for(e=0;e<this.ids.length;e++){const n=this.ids[e],o=t.getBlockById(n);o?o.dispose(!1):n===this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}},s_=function(e,t){return t.map(n=>e.getBlockById(n)).filter(n=>n&&n.isShadow()).length===t.length};u(pe.EVENT,J.BLOCK_CREATE,To);var i_=class extends ir{constructor(e,t){super(t),this.type=J.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new i_),t.themeName=e.themeName,t}};u(pe.EVENT,J.THEME_CHANGE,i_);var r_=class extends ir{constructor(e,t,n,o,c){super(o),this.type=J.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=t,this.scale=n,this.oldScale=c}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new r_),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};u(pe.EVENT,J.VIEWPORT_CHANGE,r_);var Be;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Be||(Be={}));var cd=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const n=this.calculateIndexForYPos(t);if(n>=this.connections.length)return-1;t=e.y;let o=n;for(;0<=o&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o--}for(o=n;o<this.connections.length&&this.connections[o].y===t;){if(this.connections[o]===e)return o;o++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,n=this.connections.length;for(;t<n;){const o=Math.floor((t+n)/2);if(this.connections[o].y<e)t=o+1;else if(this.connections[o].y>e)n=o;else{t=o;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function n(De){const pn=c-o[De].x,un=g-o[De].y;return Math.sqrt(pn*pn+un*un)<=t&&ie.push(o[De]),un<t}const o=this.connections,c=e.x,g=e.y;e=0;let S=o.length-2,w=S;for(;e<w;)o[w].y<g?e=w:S=w,w=Math.floor((e+S)/2);const ie=[];if(S=e=w,o.length){for(;0<=e&&n(e);)e--;do S++;while(S<o.length&&n(S))}return ie}isInYRange(e,t,n){return Math.abs(this.connections[e].y-t)<=n}searchForClosest(e,t,n){if(!this.connections.length)return{connection:null,radius:t};const o=e.y,c=e.x;e.x=c+n.x,e.y=o+n.y;var g=this.calculateIndexForYPos(e.y);n=null;let S=t,w,ie=g-1;for(;0<=ie&&this.isInYRange(ie,e.y,t);)w=this.connections[ie],this.connectionChecker.canConnect(e,w,!0,S)&&(n=w,S=w.distanceFrom(e)),ie--;for(;g<this.connections.length&&this.isInYRange(g,e.y,t);)w=this.connections[g],this.connectionChecker.canConnect(e,w,!0,S)&&(n=w,S=w.distanceFrom(e)),g++;return e.x=c,e.y=o,{connection:n,radius:S}}static init(e){const t=[];return t[Be.INPUT_VALUE]=new cd(e),t[Be.OUTPUT_VALUE]=new cd(e),t[Be.NEXT_STATEMENT]=new cd(e),t[Be.PREVIOUS_STATEMENT]=new cd(e),t}},ig=null,pp=null,gp={};gp.connectionUiEffect=ii,gp.disconnectUiEffect=Ia,gp.disconnectUiStop=Ll,gp.disposeUiEffect=zs;var Kf=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Ie(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){ze()&&ze().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=Ie.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},BE=5,UE=6,Qa=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new Ie(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new Ie(0,0)}dispose(){fn(),vs(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)Rt(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new Ie(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),Nn()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=Ie.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Ie.magnitude(this.currentDragDeltaXY)>(this.flyout?i.config$$module$build$src$core$config.flyoutDragRadius:i.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),i.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new Kf(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=ze();t&&Cs(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(se(pe.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,hi(e)?this.cancel():(this.gestureHasStarted=!0,Ll(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=br(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,no(),Mn(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&xi(e,this),this.mouseDownXY=new Ie(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(He(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(He(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(He(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&Nn())}handleMove(e){this.isDragging()&&ci(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),Nn())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!ci(e))return;if(this.updateFromEvent(e),Nn(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=ui(e);this.cachedPoints.set(t,this.getTouchPoint(e));var n=Array.from(this.cachedPoints.keys());n.length===2&&(t=this.cachedPoints.get(n[0]),n=this.cachedPoints.get(n[1]),this.startDistance=Ie.distance(t,n),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const t=ui(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),n=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),n=Ie.distance(n,t)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(t=n-this.previousScale,t=0<t?t*BE:t*UE,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const o=this.startWorkspace_,c=M(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(c.x,c.y,t)}this.previousScale=n,e.preventDefault()}handleTouchEnd(e){e=ui(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new Ie(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(Nn(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||i.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){Oe(new(ee(J.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(ee(J.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),Oe(e)}this.bringBlockToFront(),i.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,ze()&&ze().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,i.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=z();for(let t=0,n;n=e[t];t++)if(n.currentGesture_)return!0;return!1}},o_=class{constructor(e,t){this.pattern=e,this.scale=1;let n;this.spacing=(n=t.spacing)!=null?n:0;let o;this.length=(o=t.length)!=null?o:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let c;this.snapToGrid=(c=t.snap)!=null?c:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let n=t-this.length/2,o=t+this.length/2;t*=e,n*=e,o*=e,this.setLineAttributes(this.line1,e,n,o,t,t),this.setLineAttributes(this.line2,e,t,t,n,o)}setLineAttributes(e,t,n,o,c,g){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${n}`),e.setAttribute("y1",`${c}`),e.setAttribute("x2",`${o}`),e.setAttribute("y2",`${g}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const n=t/2,o=Math.round(Math.round((e.x-n)/t)*t+n);return t=Math.round(Math.round((e.y-n)/t)*t+n),o===e.x&&t===e.y?e:new Ie(o,t)}static createDom(e,t,n){e=q(V.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n);let o,c;if(0<((o=t.length)!=null?o:1)&&0<((c=t.spacing)!=null?c:0)){q(V.LINE,{stroke:t.colour},e);let g;(g=t.length)!=null&&g&&q(V.LINE,{stroke:t.colour},e)}else q(V.LINE,{},e);return e}},FE=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(H),ve(e,"blocklyBlockCanvas"),e=this.createLayer(K),ve(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=q(V.SVG,{class:"blocklyBlockDragSurface",xmlns:xa,"xmlns:html":Nr,"xmlns:xlink":li,version:"1.1"});return e.append(t),q(V.G,{},t)}createAnimationLayer(e){const t=q(V.SVG,{class:"blocklyAnimationLayer",xmlns:xa,"xmlns:html":Nr,"xmlns:xlink":li,version:"1.1"});return e.append(t),q(V.G,{},t)}appendToAnimationLayer(e){let t;const n=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(n){let c;(c=this.animationLayer)==null||c.setAttribute("transform",n)}let o;(o=this.animationLayer)==null||o.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let n;(n=this.dragLayer)==null||n.setAttribute("transform",e);for(const[,o]of this.layers)o.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot())}moveOffDragLayer(e,t){this.append(e,t)}append(e,t){this.layers.has(t)||this.createLayer(t);let n;(n=this.layers.get(t))==null||n.appendChild(e.getSvgRoot())}createLayer(e){const t=this.workspace.getSvgGroup(),n=q(V.G,{});let o=!1;const c=[...this.layers].sort((g,S)=>g[0]-S[0]);for(const[g,S]of c)if(e<g){t.insertBefore(n,S),o=!0;break}return o||t.appendChild(n),this.layers.set(e,n),n}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(H)}getBubbleLayer(){return this.layers.get(K)}},Jf={};Jf.deepMerge=$s;var Sh=class{constructor(e,t,n,o){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=n||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),u(pe.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const n=new Sh(e);let o=t.base;if(o){if(typeof o=="string"){let c;o=(c=D(pe.THEME,o))!=null?c:void 0}o instanceof Sh&&($s(n,o),n.name=e)}return $s(n.blockStyles,t.blockStyles),$s(n.categoryStyles,t.categoryStyles),$s(n.componentStyles,t.componentStyles),$s(n.fontStyle,t.fontStyle),t.startHats!==null&&(n.startHats=t.startHats),n}},HE={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},GE={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},rg=new Sh("classic",HE,GE),Eo=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,n=!1;var o=!1,c=!1,g=!1,S=!1,w=!1;const ie=!!e.readOnly;if(!ie){var De;t=Dn((De=e.toolbox)!=null?De:null),n=Pn(t),o=e.trashcan,o=o===void 0?n:o,c=e.collapse,c=c===void 0?n:c,g=e.comments,g=g===void 0?n:g,S=e.disable,S=S===void 0?n:S,w=e.sounds,w=w===void 0?!0:w}De=e.maxTrashcanContents,o?De===void 0&&(De=32):De=0;const pn=!!e.rtl;let un=e.horizontalLayout;un===void 0&&(un=!1);var ar=e.toolboxPosition!=="end";ar=un?ar?Ze.TOP:Ze.BOTTOM:ar===pn?Ze.RIGHT:Ze.LEFT;let Td=e.css;Td===void 0&&(Td=!0);let vp="https://blockly-demo.appspot.com/static/media/";e.media&&(vp=e.media.endsWith("/")?e.media:e.media+"/");const y$=e.oneBasedIndex,EI=e.renderer||"geras",II=e.plugins||{};let q_=e.modalInputs;q_===void 0&&(q_=!0),this.RTL=pn,this.oneBasedIndex=y$===void 0?!0:y$,this.collapse=c,this.comments=g,this.disable=S,this.readOnly=ie,this.maxBlocks=e.maxBlocks||1/0;let v$;this.maxInstances=(v$=e.maxInstances)!=null?v$:null,this.modalInputs=q_,this.pathToMedia=vp,this.hasCategories=n,this.moveOptions=Eo.parseMoveOptions(e,n),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=o,this.maxTrashcanContents=De,this.hasSounds=w,this.hasCss=Td,this.horizontalLayout=un,this.languageTree=t,this.gridOptions=Eo.parseGridOptions(e),this.zoomOptions=Eo.parseZoomOptions(e),this.toolboxPosition=ar,this.theme=Eo.parseThemeOptions(e),this.renderer=EI;let C$;this.rendererOverrides=(C$=e.rendererOverrides)!=null?C$:null;let L$;this.parentWorkspace=(L$=e.parentWorkspace)!=null?L$:null,this.plugins=II}static parseMoveOptions(e,t){const n=e.move||{},o={};return n.scrollbars===void 0&&e.scrollbars===void 0?o.scrollbars=t:typeof n.scrollbars=="object"?(o.scrollbars={horizontal:!!n.scrollbars.horizontal,vertical:!!n.scrollbars.vertical},o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!n.scrollbars||!!e.scrollbars,o.wheel=o.scrollbars&&n.wheel!==void 0?!!n.wheel:typeof o.scrollbars=="object",o.drag=o.scrollbars?n.drag===void 0?!0:!!n.drag:!1,o}static parseZoomOptions(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions(e){return e=e.theme||rg,typeof e=="string"?D(pe.THEME,e):e instanceof Sh?e:Sh.defineTheme(e.name||"builtin"+fe(),e)}},qf={fromJsonInternal:ba},og={TEST_ONLY:qf};og.fromJson=i.fromJson$$module$build$src$core$field_registry,og.register=rs,og.unregister=bi;var lr=class extends d{constructor(e,t,n){super(d.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==d.SKIP_SETUP&&(Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],n&&this.configure_(n),this.setValue(this.selectedOption[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(lr,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=q(V.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ve(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=q(V.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?lr.ARROW_CHAR+" ":" "+lr.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=q(V.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(li,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new _;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new Ie(e.clientX,e.clientY):null,Rc(),e=this.menu_.render(qr()),ve(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),yc(t,this.sourceBlock_.style.colourTertiary)),vu(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new _;const t=new hh;t.setRole(ki.LISTBOX),this.menu_=t;const n=this.getOptions(!1);this.selectedMenuItem=null;for(let c=0;c<n.length;c++){const[g,S]=n[c];if(typeof g=="object"){var o=new Image(g.width,g.height);o.src=g.src,o.alt=g.alt||""}else o=g;o=new Fl(o,S),o.setRole(ki.OPTION),o.setRightToLeft(e.RTL),o.setCheckable(!0),t.addChild(o),o.setChecked(S===this.value_),S===this.value_&&(this.selectedMenuItem=o),o.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){Ac(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,n;n=e[t];t++)n[1]===this.value_&&(this.selectedOption=n)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=e.colourSecondary:this.arrow.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new _;this.imageElement.style.display="",this.imageElement.setAttributeNS(li,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const n=Number(e.height);e=Number(e.width);var o=!!this.borderRect_;const c=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+lr.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let g;g=this.svgArrow?this.positionSVGArrow(e+o,c/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):qn(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+g+2*o,this.size_.height=c;let S=0;t.RTL?this.imageElement.setAttribute("x",`${o+g}`):(S=e+g,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${o}`)),this.imageElement.setAttribute("y",String(c/2-n/2)),this.positionTextElement_(S+o,e+g)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();ve(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const n=qn(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let o=0;this.svgArrow&&(o=this.positionSVGArrow(n+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+o+2*t,this.size_.height=e,this.positionTextElement_(t,n)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const n=this.getSourceBlock();if(!n)throw new _;const o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,g=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(n.RTL?o:e+c)+","+t+")"),g+c}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let t=!1;const n=e.map(([S,w])=>typeof S=="string"?[Nt(S),w]:(t=!0,[S.alt!==null?Object.assign({},S,{alt:Nt(S.alt)}):Object.assign({},S),w]));if(t||2>e.length)return{options:n};var o=n.map(([S])=>S),c=ca(o);e=wu(o,c);const g=Nu(o,c);return!e&&!g||c<=e+g?{options:n}:(c=e?o[0].substring(0,e-1):void 0,o=g?o[0].substr(1-g):void 0,{options:this.applyTrim(n,e,g),prefix:c,suffix:o})}applyTrim(e,t,n){return e.map(([o,c])=>[o.substring(t,o.length-n),c])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let n=0;n<e.length;n++){const o=e[n];Array.isArray(o)?typeof o[1]!="string"?(t=!0,console.error(`Invalid option[${n}]: Each FieldDropdown option id must be a string. 
          Found ${o[1]} in: ${o}`)):o[0]&&typeof o[0]!="string"&&typeof o[0].src!="string"&&(t=!0,console.error(`Invalid option[${n}]: Each FieldDropdown option must have a string 
          label or image description. Found ${o[0]} in: ${o}`)):(t=!0,console.error(`Invalid option[${n}]: Each FieldDropdown option must be an array.
          Found: ${o}`))}if(t)throw TypeError("Found invalid FieldDropdown options.")}};lr.CHECKMARK_OVERHANG=25,lr.MAX_MENU_HEIGHT_VH=.45,lr.ARROW_CHAR="▾",lr.IMAGE_Y_OFFSET=5,lr.IMAGE_Y_PADDING=2*lr.IMAGE_Y_OFFSET,rs("field_dropdown",lr);var Qf=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||i.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,K),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},xr,Qt=class{constructor(e,t,n){this.workspace=e,this.anchor=t,this.ownerRect=n,this.size=new Ee(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new Qf(this,this.workspace),this.id=fe(),this.svgRoot=q(V.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=q(V.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=q(V.PATH,{class:"blocklyBubbleTail"},e),this.background=q(V.RECT,{class:"blocklyDraggable",x:0,y:0,rx:xr.BORDER_WIDTH,ry:xr.BORDER_WIDTH},e),this.contentContainer=q(V.G,{},this.svgRoot),He(this.background,"pointerdown",this,this.onMouseDown)}dispose(){G(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,xr.MIN_SIZE),e.height=Math.max(e.height,xr.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),this.bringToFront(),i.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new jt(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft(t),o=this.getOptimalRelativeTop(t);const c={x:n,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},g={x:-this.size.width-30,y:o};o={x:e.getWidth(),y:o};var S={x:n,y:e.getHeight()};n=e.getWidth()<e.getHeight()?o:S,e=e.getWidth()<e.getHeight()?S:o,o=this.getOverlap(c,t),S=this.getOverlap(g,t);const w=this.getOverlap(n,t);t=this.getOverlap(e,t),t=Math.max(o,S,w,t),o===t?(this.relativeLeft=c.x,this.relativeTop=c.y):S===t?(this.relativeLeft=g.x,this.relativeTop=g.y):w===t?(this.relativeLeft=n.x,this.relativeTop=n.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var n=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(n+this.size.width,t.left+t.width)-Math.max(n,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var n=this.anchor.x-t;n-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):n>e.right&&(t=-(e.right-this.anchor.x))}else{n=t+this.anchor.x;const o=n+this.size.width;n<e.left?t=e.left-this.anchor.x:o>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const n=this.anchor.y+t,o=n+this.size.height;return e=this.getWorkspaceViewRect(e),n<e.top?t=e.top-this.anchor.y:o>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let n=e.top+e.height,o=e.left;return e=e.left+e.width,n-=this.getScrollbarThickness(),this.workspace.RTL?o-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new jt(t,n,o,e)}getScrollbarThickness(){return Tn.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,n=this.size.height/2,o=-this.relativeLeft,c=-this.relativeTop;if(t===o&&n===c)e.push("M "+t+","+n);else{c-=n,o-=t,this.workspace.RTL&&(o*=-1);var g=Math.sqrt(c*c+o*o),S=Math.acos(o/g);0>c&&(S=2*Math.PI-S);var w=S+Math.PI/2;w>2*Math.PI&&(w-=2*Math.PI);var ie=Math.sin(w);const pn=Math.cos(w);let un=(this.size.width+this.size.height)/xr.TAIL_THICKNESS;un=Math.min(un,this.size.width,this.size.height)/4,w=1-xr.ANCHOR_RADIUS/g,o=t+w*o,c=n+w*c,w=t+un*pn;const ar=n+un*ie;t-=un*pn,n-=un*ie,ie=Jr(this.workspace.RTL?-xr.TAIL_ANGLE:xr.TAIL_ANGLE),ie=S+ie,ie>2*Math.PI&&(ie-=2*Math.PI),S=Math.sin(ie)*g/xr.TAIL_BEND,g=Math.cos(ie)*g/xr.TAIL_BEND,e.push("M"+w+","+ar),e.push("C"+(w+g)+","+(ar+S)+" "+o+","+c+" "+o+","+c),e.push("C"+o+","+c+" "+(t+g)+","+(n+S)+" "+t+","+n)}e.push("z");let De;(De=this.tail)==null||De.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&(t==null?void 0:t.lastChild)!==this.svgRoot?(t==null||t.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Ie(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};xr=Qt,Qt.BORDER_WIDTH=6,Qt.DOUBLE_BORDER=2*xr.BORDER_WIDTH,Qt.MIN_SIZE=xr.DOUBLE_BORDER,Qt.TAIL_THICKNESS=1,Qt.TAIL_ANGLE=20,Qt.TAIL_BEND=4,Qt.ANCHOR_RADIUS=8;var Za=class extends Qt{constructor(e,t,n,o){super(t,n,o),this.workspace=t,this.anchor=n,this.ownerRect=o,this.autoLayout=!0,t=new Eo(e),this.validateWorkspaceOptions(t),this.svgDialog=q(V.SVG,{x:Qt.BORDER_WIDTH,y:Qt.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Eo(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(V.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e==null||e.init(this.miniWorkspace),e==null||e.show(t.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let c,g;(c=this.miniWorkspace.getFlyout())==null||(g=c.getWorkspace())==null||g.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(20>t.y&&e.moveBy(0,20-t.y),e.RTL){let n=-20;const o=this.miniWorkspace.getFlyout();o&&(n-=o.getWidth()),t.x>n&&e.moveBy(n-t.x,0)}else 20>t.x&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Za.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Za.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new Ee(t.width+Qt.DOUBLE_BORDER,t.height+Qt.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+Za.MARGIN;e=e.height+Za.MARGIN;const n=this.miniWorkspace.getFlyout();if(n){const o=n.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,o.height+20),t+=n.getWidth()}return new Ee(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const n of e.getAllBlocks(!1))n.setStyle(n.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Za.MINIMUM_VIEW_CHANGE=10,Za.MARGIN=3*Qt.DOUBLE_BORDER;var lg=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new Ie(0,0),this.workspaceLocation=new Ie(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=q(V.G,{class:"blocklyIconGroup"}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),He(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,El(this.svgRoot)}}dispose(){Nc(this.svgRoot),G(this.svgRoot)}getWeight(){return-1}getSize(){return new Ee(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",mi(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=Ie.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},ag,cg;ag=17,cg=16,i.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends lg{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),q(V.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),q(V.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),q(V.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),ve(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Ee(ag,ag)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary);let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return ce.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield Kt(),e){t.miniWorkspaceBubble=new Za(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let n;(n=t.miniWorkspaceBubble)==null||n.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let n;(n=t.miniWorkspaceBubble)==null||n.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}Oe(new(ee(J.BUBBLE_OPEN))(t.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(n=>({kind:"block",type:n}))}),t}getAnchorLocation(){const e=ag/2;return Ie.sum(this.workspaceLocation,new Ie(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new jt(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,n,o,c;e=(c=(t=this.miniWorkspaceBubble)==null||(n=t.getWorkspace())==null||(o=n.getFlyout())==null?void 0:o.getWidth())!=null?c:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+cg):cg,cg)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{i.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||be(e)||de(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);var t=Wl.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var n=Wl.getExtraBlockState_(this.sourceBlock);t!==n&&Oe(new(ee(J.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,t,n)),i.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Kn.MUTATOR,i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,i.MutatorIcon$$module$build$src$core$icons$mutator_icon;var ud=Object.create(null),VE={allExtensions:ud};i.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Oa);var tl={TEST_ONLY:VE};tl.apply=Ht,tl.buildTooltipForDropdown=i.buildTooltipForDropdown$$module$build$src$core$extensions,tl.buildTooltipWithFieldText=i.buildTooltipWithFieldText$$module$build$src$core$extensions,tl.isRegistered=Si,tl.register=i.register$$module$build$src$core$extensions,tl.registerMixin=i.registerMixin$$module$build$src$core$extensions,tl.registerMutator=i.registerMutator$$module$build$src$core$extensions,tl.runAfterPageLoad=ju,tl.unregister=vr;var Tt;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(Tt||(Tt={}));var ec={};ec.arc=Dt,ec.curve=$n,ec.line=Al,ec.lineOnAxis=Ce,ec.lineTo=Ls,ec.moveBy=Mt,ec.moveTo=hn,ec.point=Ge;var An={};An.Coordinate=Ie,An.KeyCodes=Tt,An.Rect=jt,An.Size=Ee,An.Svg=V,An.aria=hs,An.array=Zd,An.browserEvents=jo,An.colour=r,An.deprecation=Gh,An.dom=Fn,An.extensions=tl,An.idGenerator=Gd,An.math=dn,An.object=Jf,An.parsing=a,An.string=nu,An.style=po,An.svgMath=go,An.svgPaths=ec,An.toolbox=Es,An.userAgent=qp,An.xml=Li;var Zf=class extends Qt{constructor(e,t,n){super(e,t,n),this.workspace=e,this.anchor=t,this.ownerRect=n,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Ee(160+Qt.DOUBLE_BORDER,80+Qt.DOUBLE_BORDER),this.MIN_SIZE=new Ee(45+Qt.DOUBLE_BORDER,20+Qt.DOUBLE_BORDER),this.editable=!0,ve(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=q(V.FOREIGNOBJECT,{x:Qt.BORDER_WIDTH,y:Qt.BORDER_WIDTH},e);const t=document.createElementNS(Nr,"body");t.setAttribute("xmlns",Nr),t.className="blocklyMinimalBody";const n=document.createElementNS(Nr,"textarea");return n.className="blocklyTextarea blocklyText",n.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),t.appendChild(n),e.appendChild(t),this.bindTextAreaEvents(n),setTimeout(()=>{n.focus()},0),{inputRoot:e,textArea:n}}bindTextAreaEvents(e){He(e,"wheel",this,t=>{t.stopPropagation()}),He(e,"focus",this,this.onStartEdit,!0),He(e,"change",this,this.onTextChange)}createResizeHandle(e,t){return e=q(V.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),He(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const n=e.width-Qt.DOUBLE_BORDER,o=e.height-Qt.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${n}`),this.inputRoot.setAttribute("height",`${o}`),this.resizeGroup.setAttribute("y",`${o}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-Qt.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${n}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),Mn(e)||(Uo(this.workspace,e,new Ie(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=He(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=He(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){fn(),this.resizePointerUpListener&&(Rt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Rt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=oo(this.workspace,e),this.setSize(new Ee(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};yt(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var l_={};l_.register=b,l_.unregister=p;var a_=17,em=160,tm=80,tc=class extends lg{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new Ee(em,tm),this.bubbleVisiblity=!1}getType(){return tc.TYPE}initView(e){this.svgRoot||(super.initView(e),q(V.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),q(V.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),q(V.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),ve(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return tc.WEIGHT}getSize(){return new Ee(a_,a_)}applyColour(){super.applyColour();const e=this.sourceBlock.style.colourPrimary;let t;(t=this.textInputBubble)==null||t.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return ce.asyncExecutePromiseGeneratorFunction(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let t;(t=this.textInputBubble)==null||t.setAnchorLocation(e)}setText(e){const t=this.text;Oe(new(ee(J.BLOCK_CHANGE))(this.sourceBlock,"comment",null,t,e)),this.text=e;let n;(n=this.textInputBubble)==null||n.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let n,o;this.bubbleSize=new Ee((n=e.width)!=null?n:em,(o=e.height)!=null?o:tm);let c;this.bubbleVisiblity=(c=e.pinned)!=null?c:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(Oe(new(ee(J.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return ce.asyncExecutePromiseGeneratorFunction(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield Kt(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),Oe(new(ee(J.BUBBLE_OPEN))(t.sourceBlock,e,"comment"))))})}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let t;(t=this.textInputBubble)==null||t.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new Zf(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=a_/2;return Ie.sum(this.workspaceLocation,new Ie(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};tc.TYPE=Kn.COMMENT,tc.WEIGHT=3,b(tc.TYPE,tc);var nm=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},sm={};sm.DuplicateIconType=nm;var im=class extends Qt{constructor(e,t,n,o){super(t,n,o),this.text=e,this.workspace=t,this.anchor=n,this.ownerRect=o,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,G(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createSpans(t,e),this.workspace.RTL&&this.rightAlignSpans(t.getBBox().width,e),t}createParagraph(e){return q(V.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Qt.BORDER_WIDTH},e)}createSpans(e,t){return t.split(`
`).map(n=>{const o=q(V.TSPAN,{dy:"1em",x:Qt.BORDER_WIDTH},e);return n=document.createTextNode(n),o.appendChild(n),o})}rightAlignSpans(e,t){for(const n of t)n.setAttribute("text-anchor","end"),n.setAttribute("x",`${e+Qt.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new Ee(e.width+2*Qt.BORDER_WIDTH,e.height+2*Qt.BORDER_WIDTH),!0)}},c_=17,nc=class extends lg{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return nc.TYPE}initView(e){this.svgRoot||(super.initView(e),q(V.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),q(V.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),q(V.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),ve(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return nc.WEIGHT}getSize(){return new Ee(c_,c_)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let n;return(n=this.textBubble)==null||n.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return ce.asyncExecutePromiseGeneratorFunction(function*(){if(t.bubbleIsVisible()!==e){if(yield Kt(),e)t.textBubble=new im(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let n;(n=t.textBubble)==null||n.dispose(),t.textBubble=null}Oe(new(ee(J.BUBBLE_OPEN))(t.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=c_/2;return Ie.sum(this.workspaceLocation,new Ie(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new jt(e.y,e.y+e.height,e.x,e.x+e.width)}};nc.TYPE=Kn.WARNING,nc.WEIGHT=2;var ou={};ou.CommentIcon=tc,ou.Icon=lg,ou.IconType=Kn,ou.MutatorIcon=i.MutatorIcon$$module$build$src$core$icons$mutator_icon,ou.WarningIcon=nc,ou.exceptions=sm,ou.registry=l_,i.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=i.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),i.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let n=e;t===i.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(n=e),e=n.toLowerCase();const o=t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const c=this.db.get(t);return c.has(e)?o+c.get(e):(t=this.getDistinctName(n,t),c.set(e,t.substr(o.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let n=null,o,c;for(;this.dbReverse.has(e+((o=n)!=null?o:""))||this.reservedWords.has(e+((c=n)!=null?c:""));)n=n?n+1:2;let g;return e+=(g=n)!=null?g:"",this.dbReverse.add(e),(t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(i.Names$$module$build$src$core$names||(i.Names$$module$build$src$core$names={})),i.NameType$$module$build$src$core$names=i.Names$$module$build$src$core$names.NameType,i.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,i.NameType$$module$build$src$core$names,i.Names$$module$build$src$core$names;var rm=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),y(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(y(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},ug,Mi;ug="PROCEDURE",i.DEFAULT_ARG$$module$build$src$core$procedures="x",Mi={CATEGORY_NAME:ug,DEFAULT_ARG:i.DEFAULT_ARG$$module$build$src$core$procedures},Mi.ObservableProcedureMap=rm,Mi.allProcedures=U,Mi.findLegalName=i.findLegalName$$module$build$src$core$procedures,Mi.flyoutCategory=Se,Mi.getCallers=Qe,Mi.getDefinition=i.getDefinition$$module$build$src$core$procedures,Mi.isNameUsed=ae,Mi.isProcedureBlock=$,Mi.mutateCallers=i.mutateCallers$$module$build$src$core$procedures,Mi.mutatorOpenListener=Fe,Mi.rename=i.rename$$module$build$src$core$procedures;var WE=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},B=new WE,jl=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=B.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},_p=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=B.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(B.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(B.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(B.isSpacer(t))return t}return null}},u_=class extends _p{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=B.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let o=0;o<this.elements.length;o++){const c=this.elements[o];t+=c.width,B.isSpacer(c)||(B.isNextConnection(c)?n=Math.max(n,c.height):e=Math.max(e,c.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.descenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},sc=class extends jl{constructor(e,t){super(e),this.connectionModel=t,this.type|=B.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},lu=class extends sc{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=B.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},hg=class extends lu{constructor(e,t){super(e,t),this.height=0,this.type|=B.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},hd=class extends jl{constructor(e,t,n){super(e),this.field=t,this.parentInput=n,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=B.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},h_=class extends jl{constructor(e){super(e),this.type|=B.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},om=class extends jl{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=B.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},Br=class extends jl{constructor(e,t){super(e),this.type=this.type|B.SPACER|B.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},d_=class extends lu{constructor(e,t){super(e,t),this.type|=B.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},fp=class extends lu{constructor(e,t){super(e,t),this.type|=B.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},p_=class extends _p{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=B.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const n=this.elements[t];this.width+=n.width,B.isInput(n)&&n instanceof lu&&(B.isStatementInput(n)&&n instanceof fp?e+=n.connectedBlockWidth:B.isExternalInput(n)&&n instanceof hg&&n.connectedBlockWidth!==0&&(e+=n.connectedBlockWidth-n.connectionWidth)),B.isSpacer(n)||(this.height=Math.max(this.height,n.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},lm=class extends jl{constructor(e){super(e),this.type|=B.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},am=class extends sc{constructor(e,t){super(e,t),this.type|=B.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},cm=class extends sc{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=B.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},um=class extends sc{constructor(e,t){super(e,t),this.type|=B.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},mp=class extends jl{constructor(e,t){super(e),this.type=(t&&t!=="left"?B.RIGHT_ROUND_CORNER:B.LEFT_ROUND_CORNER)|B.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},g_=class extends _p{constructor(e,t,n){super(e),this.height=t,this.width=n,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|B.SPACER|B.BETWEEN_ROW_SPACER,this.elements=[new Br(this.constants_,n)]}measure(){}},$p=class extends jl{constructor(e,t){super(e),this.type=(t&&t!=="left"?B.RIGHT_SQUARE_CORNER:B.LEFT_SQUARE_CORNER)|B.CORNER,this.width=this.height=this.constants_.NO_PADDING}},__=class extends _p{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=B.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,n=e.getPreviousBlock();return!!e.outputConnection||t||(n?n.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let o=0;o<this.elements.length;o++){const c=this.elements[o];t+=c.width,B.isSpacer(c)||(B.isHat(c)&&c instanceof h_?n=Math.max(n,c.ascenderHeight):e=Math.max(e,c.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.capline=this.ascenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},dg=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Mt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const n in t)this.blockStyles[n]=this.validatedBlockStyle_(t[n]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=v("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=Il(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?Il(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?Il(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return Ws("#fff",e,.6)||e}generateTertiaryColour_(e){return Ws("#fff",e,.3)||e}dispose(){this.embossFilter&&G(this.embossFilter),this.disabledPattern&&G(this.disabledPattern),this.debugFilter&&G(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,n=Al([Ge(t,e/4),Ge(2*-t,e/2),Ge(t,e/4)]);return{height:e,width:t,path:n}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,n=$n("c",[Ge(30,-e),Ge(70,-e),Ge(t,0)]);return{height:e,width:t,path:n}}makePuzzleTab(){function e(g){g=g?-1:1;const S=-g;var w=n/2;const ie=w+2.5,De=w+.5,pn=Ge(-t,g*w);return w=Ge(t,g*w),$n("c",[Ge(0,g*ie),Ge(-t,S*De),pn])+$n("s",[Ge(t,2.5*S),w])}const t=this.TAB_WIDTH,n=this.TAB_HEIGHT,o=e(!0),c=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:n,pathDown:c,pathUp:o}}makeNotch(){function e(S){return Al([Ge(S*o,n),Ge(3*S,0),Ge(S*o,-n)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=(t-3)/2,c=e(1),g=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:c,pathRight:g}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Dt("a","0 0,0",e,Ge(-e,e)),n=Dt("a","0 0,0",e,Ge(e,e));return{width:e,height:e,pathTop:t,pathBottom:n}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=Mt(0,e)+Dt("a","0 0,1",e,Ge(e,-e)),n=Dt("a","0 0,1",e,Ge(e,e)),o=Dt("a","0 0,1",e,Ge(-e,-e)),c=Dt("a","0 0,1",e,Ge(-e,e));return{topLeft:t,topRight:n,bottomRight:c,bottomLeft:o,rightHeight:e}}shapeFor(e){switch(e.type){case Be.INPUT_VALUE:case Be.OUTPUT_VALUE:return this.PUZZLE_TAB;case Be.PREVIOUS_STATEMENT:case Be.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,n){this.injectCSS_(t,n),this.defs=q(V.DEFS,{},e),e=q(V.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),q(V.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=q(V.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),q(V.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),q(V.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),q(V.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=q(V.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),q(V.RECT,{width:10,height:10,fill:"#aaa"},e),q(V.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=q(V.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=q(V.FECOMPONENTTRANSFER,{result:"outBlur"},e);q(V.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),q(V.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),q(V.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const n=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=n:(t=document.createElement("style"),t.id=e,e=document.createTextNode(n),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},pg=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Mt(e.xPos,this.info_.startY);for(let n=0,o;o=t[n];n++)B.isLeftRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:B.isRightRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:B.isPreviousConnection(o)&&o instanceof sc?this.outlinePath_+=o.shape.pathLeft:B.isHat(o)?this.outlinePath_+=this.constants_.START_HAT.path:B.isSpacer(o)&&(this.outlinePath_+=Ce("h",o.width));this.outlinePath_+=Ce("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Ce("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const n=xe(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=Ce("H",t.xPos+t.width)+n+Ce("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var n=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+Ce("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Ce("H",n)+t+Ce("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+Ce("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=Ce("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let n=0,o="";for(let c=t.length-1,g;g=t[c];c--)B.isNextConnection(g)&&g instanceof sc?o+=g.shape.pathRight:B.isLeftSquareCorner(g)?o+=Ce("H",e.xPos):B.isLeftRoundedCorner(g)?o+=this.constants_.OUTSIDE_CORNERS.bottomLeft:B.isRightRoundedCorner(g)?(o+=this.constants_.OUTSIDE_CORNERS.bottomRight,n=this.constants_.OUTSIDE_CORNERS.rightHeight):B.isSpacer(g)&&(o+=Ce("h",-1*g.width));this.outlinePath_+=Ce("V",e.baseline-n),this.outlinePath_+=o}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=xe(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=Ce("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let n=0,o;o=t.elements[n];n++)B.isInlineInput(o)?this.drawInlineInput_(o):(B.isIcon(o)||B.isField(o))&&this.layoutField_(o)}layoutField_(e){const t=e.centerline-e.height/2;let n=e.xPos;var o="";this.info_.RTL&&(n=-(n+e.width),e.flipRtl&&(n+=e.width,o="scale(-1 1)")),B.isIcon(e)?(o=e.icon,o.setOffsetInBlock(new Ie(n,t)),this.info_.isInsertionMarker&&o.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+n+","+t+")"+o),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,n=e.height,o=e.connectionOffsetY,c=e.connectionHeight+o;this.inlinePath_+=hn(e.xPos+e.connectionWidth,e.centerline-n/2)+Ce("v",o)+e.shape.pathDown+Ce("v",n-c)+Ce("h",t-e.connectionWidth)+Ce("v",-n)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements)if(t instanceof sc)if(t.highlighted)this.drawConnectionHighlightPath(t);else{let n,o;(o=(n=this.block_.pathObject).removeConnectionHighlight)==null||o.call(n,t.connectionModel)}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===Be.INPUT_VALUE||t.type===Be.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const n=t.getSourceBlock();let o,c;(c=(o=n.pathObject).addConnectionHighlight)==null||c.call(o,t,e,t.getOffsetInBlock(),n.RTL)}getExpressionConnectionHighlightPath(e){let t="";return xe(e.shape)?t=e.shape.pathDown(e.height):qe(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,Mt(0,-e)+Ce("v",e)+t+Ce("v",e)}getStatementConnectionHighlightPath(e){if(!at(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Mt(-t,0)+Ce("h",t)+e.shape.pathLeft+Ce("h",t)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(i.Align$$module$build$src$core$inputs$align||(i.Align$$module$build$src$core$inputs$align={})),i.Align$$module$build$src$core$inputs$align;var Oh=class extends d{constructor(e,t,n){super(d.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==d.SKIP_SETUP&&(n?this.configure_(n):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&ve(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&R(this.textElement_,this.class),e&&ve(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Nt(e.text),void 0,e)}};rs("field_label",Oh),Oh.prototype.DEFAULT_VALUE="";var dd=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=i.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,n){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&n)&&(typeof t=="string"&&(t=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=n,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let n=0,o;o=this.fieldRow[n];n++)if(o.name===e)return o.dispose(),this.fieldRow.splice(n,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let o=0,c;c=this.fieldRow[o];o++)c.setVisible(e);if(this.connection){var n=this.connection;e?t=n.startTrackingAll():n.stopTrackingAll(),(n=n.targetBlock())&&(n.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},Yl=class extends dd{constructor(e,t){super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},ic=class extends dd{constructor(e,t){super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Ur=class extends dd{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Be.NEXT_STATEMENT)}},hm;i.ValueInput$$module$build$src$core$inputs$value_input=class extends dd{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Be.INPUT_VALUE)}},hm={},hm.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input;var Tp=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new cm(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new __(this.constants_),this.bottomRow=new u_(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new p_(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let n=0,o;o=t[n];n++){const c=new om(this.constants_,o);this.isCollapsed&&!o.isShownWhenCollapsed()||e.elements.push(c)}t=void 0;for(let n=0,o;o=this.block_.inputList[n];n++)if(o.isVisible()){this.shouldStartNewRow_(o,t)&&(this.rows.push(e),e=new p_(this.constants_),this.inputRows.push(e));for(let c=0,g;g=o.fieldRow[c];c++)e.elements.push(new hd(this.constants_,g,o));this.addInput_(o,e),t=o}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new lm(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let n=this.topRow.hasLeftSquareCorner(this.block_)?$p:mp;this.topRow.elements.push(new n(this.constants_)),t?(e=new h_(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new um(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Ur&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,n=this.topRow.hasRightSquareCorner(this.block_)?$p:mp,this.topRow.elements.push(new n(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Ur?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new $p(this.constants_)):this.bottomRow.elements.push(new mp(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new am(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new $p(this.constants_,"right")):this.bottomRow.elements.push(new mp(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new d_(this.constants_,e)),t.hasInlineInput=!0):e instanceof Ur?(t.elements.push(new fp(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new hg(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Yl||e instanceof ic)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof ic||e instanceof Ur||t instanceof Ur?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Yl||t instanceof i.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const n=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new Br(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let o=0;o<n.length-1;o++){t.elements.push(n[o]);const c=this.getInRowSpacing_(n[o],n[o+1]);t.elements.push(new Br(this.constants_,c))}t.elements.push(n[n.length-1]),t.endsWithElemSpacer()&&t.elements.push(new Br(this.constants_,this.getInRowSpacing_(n[n.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&B.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&B.isInput(e)&&!t){if(B.isExternalInput(e))return this.constants_.NO_PADDING;if(B.isInlineInput(e))return this.constants_.LARGE_PADDING;if(B.isStatementInput(e))return this.constants_.NO_PADDING}return e&&B.isLeftSquareCorner(e)&&t&&(B.isPreviousConnection(t)||B.isNextConnection(t))?t.notchOffset:e&&B.isLeftRoundedCorner(e)&&t&&(B.isPreviousConnection(t)||B.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,n=0;for(let c=0,g;g=this.rows[c];c++){if(g.measure(),t=Math.max(t,g.width),g.hasStatement){var o=g.getLastInput();let S,w;o=g.width-((w=(S=o)==null?void 0:S.width)!=null?w:0),e=Math.max(e,o)}n=Math.max(n,g.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let c=0,g;g=this.rows[c];c++)g.hasStatement&&(g.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,n),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,n;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var e=n.width;e=this.getDesiredRowWidth_(n)-e,0<e&&this.addAlignmentPadding_(n,e),B.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const n=e.getFirstSpacer(),o=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===i.Align$$module$build$src$core$inputs$align.LEFT&&o)o.width+=t;else if(e.align===i.Align$$module$build$src$core$inputs$align.CENTRE&&n&&o)n.width+=t/2,o.width+=t/2;else if(e.align===i.Align$$module$build$src$core$inputs$align.RIGHT&&n)n.width+=t;else if(o)o.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var n=e.width-t.width,o=this.statementEdge;n=o-n,0<n&&this.addAlignmentPadding_(e,n),n=e.width,o=this.getDesiredRowWidth_(e),t.width+=o-n,t.height=Math.max(t.height,e.height),e.width+=o-n,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var n=this.getSpacerRowHeight_(e,t);const o=this.getSpacerRowWidth_(e,t);return n=new g_(this.constants_,n,o),e.hasStatement&&(n.followsStatement=!0),t.hasStatement&&(n.precedesStatement=!0),n}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return B.isSpacer(t)?e.yPos+t.height/2:B.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,B.isNextConnection(t)?e+t.height/2:e-t.height/2):B.isTopRow(e)?B.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let n=0,o;o=e.elements[n];n++)B.isSpacer(o)&&(o.height=e.height),o.xPos=t,o.centerline=this.getElemCenterline_(e,o),t+=o.width}finalize_(){let e=0,t=0;for(let n=0,o;o=this.rows[n];n++)o.yPos=t,o.xPos=this.startX,t+=o.height,e=Math.max(e,o.widthWithConnectedBlocks),this.recordElemPositions_(o);if(this.outputConnection&&this.block_.nextConnection){const n=this.block_.nextConnection.targetBlock();n&&(e=Math.max(e,n.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const n of this.rows)for(const o of n.elements)if(o instanceof sc&&o.connectionModel===e)return o;return null}},f_=class extends or{constructor(e){if(super(e),this.type=J.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Ei(e),this.ids=Ft(e),this.wasShadow=e.isShadow(),this.oldJson=Zn(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=ms(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new f_),t.oldXml=i.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const n=this.ids[e],o=t.getBlockById(n);o?o.dispose(!1):n===this.blockId&&console.warn("Can't delete non-existent block: "+n)}else fi(this.oldJson,t)}};u(pe.EVENT,J.BLOCK_DELETE,f_);var Ut=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const t=Be.INPUT_VALUE,n=this.getSourceBlock();var o=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let c;if(this.isConnected()){const S=this.stashShadowState(),w=this.targetBlock();w.isShadow()?w.dispose(!1):(this.disconnectInternal(),c=w),this.applyShadowState(S)}let g;it()&&(g=new(ee(J.BLOCK_MOVE))(o),g.setReason(["connect"])),Gt(this,e),o.setParent(n),g&&(g.recordNew(),Oe(g)),c&&(e=this.type===t?c.outputConnection:c.previousConnection)&&((o=Ut.getConnectionForOrphanedConnection(o,e))?e.connect(o):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Be.INPUT_VALUE||this.type===Be.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),i.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:n}=this.getParentAndChildConnections();if(!t||!n)throw Error("Source connection not connected.");const o=i.getGroup$$module$build$src$core$events$utils();o||i.setGroup$$module$build$src$core$events$utils(!0);let c;it()&&(c=new(ee(J.BLOCK_MOVE))(n.getSourceBlock()),c.setReason(["disconnect"]));const g=this.targetConnection;g&&(g.targetConnection=null),this.targetConnection=null,e&&n.getSourceBlock().setParent(null),c&&(c.recordNew(),Oe(c)),n.getSourceBlock().isShadow()||t.respawnShadow_(),i.setGroup$$module$build$src$core$events$utils(o)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var n;return t=(n=e.getInput(t))==null?void 0:n.connection,n=this.targetBlock(),n&&n!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?ni(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Zn(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let n=0;n<t.length;n++)if(t[n].connection===this){e=t[n];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let n=0,o;o=e.inputList[n];n++)if(o.connection===this){t=o;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const n=this.getShadowState(),o=this.getShadowDom();if(t.isDeadOrDying()||!n&&!o)return null;if(n)return t=Wn(n,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(o){if(t=Ii(o,t.workspace),e)if(this.type===Be.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Be.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=ni(e),this.shadowState=Zn(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Be.OUTPUT_VALUE)return pt(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const n=t.getConnectionChecker();return e&&n.canConnect(t,e,!1)?e:null}};Ut.CAN_CONNECT=0,Ut.REASON_SELF_CONNECTION=1,Ut.REASON_WRONG_TYPE=2,Ut.REASON_TARGET_NULL=3,Ut.REASON_CHECKS_FAILED=4,Ut.REASON_DIFFERENT_WORKSPACES=5,Ut.REASON_SHADOW_PARENT=6,Ut.REASON_DRAG_CHECKS_FAILED=7,Ut.REASON_PREVIOUS_AND_OUTPUT=8;var au=class{constructor(e,t,n){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=n&&!e.getBlockById(n)?n:re(),e.setBlockById(this.id,this),this.xy=new Ie(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,n=Xs[t],!n||typeof n!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,n)}e.addTopBlock(this),e.addTypedBlock(this),new.target===au&&this.doInit_()}doInit_(){const e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);const t=ot();try{typeof this.init=="function"&&(i.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),i.setRecordUndo$$module$build$src$core$events$utils(t)),it()&&Oe(new(ee(J.BLOCK_CREATE))(this))}finally{i.setGroup$$module$build$src$core$events$utils(e),i.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),it()&&Oe(new(ee(J.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let t=null,n;(n=this.outputConnection)!=null&&n.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e==null||e.onFailedConnect(t))}getOnlyValueConnection(){let e=null;for(let t=0;t<this.inputList.length;t++){const n=this.inputList[t].connection;if(n&&n.type===Be.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e}unplugFromStack(e){let t=null;var n;if((n=this.previousConnection)!=null&&n.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),n=this.getNextBlock(),e&&n&&!n.isShadow()){let o,c;e=(c=(o=this.nextConnection)==null?void 0:o.targetConnection)!=null?c:null,e==null||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,n;n=this.inputList[t];t++)n.connection&&e.push(n.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const n=t.targetBlock();if(!n||e&&n.isShadow())return t;t=n.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,n;n=this.inputList[t];t++)if(n.connection&&n.connection.targetBlock()===e)return n;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let n=0,o;o=this.inputList[n];n++)if(o.connection){var t=o.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),n=!!t;if(n&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!n&&e)throw Error("Block not connected to new parent.");if(n&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?nn(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],n=this.getChildren(e);for(let o,c=0;o=n[c];c++)t.push(...o.getDescendants(e));return t}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(_n(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(let t=0,n;n=this.inputList[t];t++)for(let o=0,c;c=n.fieldRow[o];o++)c.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,t){const n=this.getConnections_(!0);if(e=e.getConnections_(!0),n.length!==e.length)throw Error("Connection lists did not match in length.");for(let o=0;o<e.length;o++)if(e[o]===t)return n[o];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return Po(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=Il(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let t=0,n;n=this.inputList[t];t++)for(let o=0,c;c=n.fieldRow[o];o++)if(c.name===e)return c;return null}getVars(){const e=[];for(let t=0,n;n=this.inputList[t];t++)for(let o=0,c;c=n.fieldRow[o];o++)c.referencesVariables()&&e.push(c.getValue());return e}getVarModels(){const e=[];for(let t=0,n;n=this.inputList[t];t++)for(let o=0,c;c=n.fieldRow[o];o++)if(c.referencesVariables()){const g=this.workspace.getVariableById(c.getValue());g&&e.push(g)}return e}updateVarName(e){for(let t=0,n;n=this.inputList[t];t++)for(let o=0,c;c=n.fieldRow[o];o++)c.referencesVariables()&&e.getId()===c.getValue()&&c.refreshVariableName()}renameVarById(e,t){for(let n=0,o;o=this.inputList[n];n++)for(let c=0,g;g=o.fieldRow[c];c++)g.referencesVariables()&&e===g.getValue()&&g.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Be.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Be.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Be.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(Oe(new(ee(J.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof Yl&&this.inputList[e]instanceof Yl)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof i.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof Yl)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof ic)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return Y("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(Is)}set disabled(e){Y("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,Is)}setEnabled(e){Y("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,Is)}setDisabledReason(e,t){e||this.workspace.options.disable||!this.hasDisabledReason(Is)||t==Is||this.setDisabledReason(!1,Is),this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(ee(J.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(t),Oe(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(Oe(new(ee(J.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let o=2;o<t.length;o++)t[o-2]==="("&&t[o]===")"&&(t[o-2]=t[o-1],t.splice(o-1,2));let n="";return t=t.reduce((o,c)=>(o=o+(n==="("||c===")"?"":" ")+c,n=c[c.length-1],o),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const o of this.inputList)if(o.name!=wi){for(const c of o.fieldRow)t.push(c.getText());if(o.connection){const c=o.connection.targetBlock();if(c){var n=o.connection;let g=n.getCheck();!g&&n.targetConnection&&(g=n.targetConnection.getCheck()),(n=!!g&&(g.includes("Boolean")||g.includes("Number")))&&t.push("("),t.push(...c.toTokens(e)),n&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new i.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Ur(e,this))}appendDummyInput(e=""){return this.appendInput(new Yl(e,this))}appendEndRowInput(e=""){return this.appendInput(new ic(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=L(pe.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var n=0;e["args"+n];){if(e["message"+n]===void 0)throw Error(t+`args${n} must have a corresponding message (message${n}).`);n++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,t):this.jsonInitColour(e,t),n=0;e["message"+n]!==void 0;)this.interpolate(e["message"+n],e["args"+n]||[],e["implicitAlign"+n]||e["lastDummyAlign"+n],t),n++;if(e.inputsInline!==void 0&&(i.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),i.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(n=Nt(e.tooltip),this.setTooltip(n)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(n=Nt(e.helpUrl),this.setHelpUrl(n)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Ht(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)Ht(e[t],this,!1)}jsonInitColour(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const n in e)this[n]!==void 0&&t.push(n);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate(e,t,n,o){e=Ji(e),this.validateTokens(e,t.length),t=this.interpolateArguments(e,t,n),n=[];for(let c=0,g;g=t[c];c++)if(this.isInputKeyword(g.type)){if(e=this.inputFromJson(g,o)){for(let S=0,w;w=n[S];S++)e.appendField(w[0],w[1]);n.length=0}}else(e=this.fieldFromJson(g))&&n.push([e,g.name])}validateTokens(e,t){const n=[];let o=0;for(let c=0;c<e.length;c++){const g=e[c];if(typeof g=="number"){if(1>g||g>t)throw Error('Block "'+this.type+'": Message index %'+g+" out of range.");if(n[g])throw Error('Block "'+this.type+'": Message index %'+g+" duplicated.");n[g]=!0,o++}}if(o!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments(e,t,n){const o=[];for(let g=0;g<e.length;g++){var c=e[g];if(typeof c=="number"&&(c=t[c-1]),typeof c=="string"){if(c===`
`)c={type:"input_end_row"},n&&(c.align=n);else if(c=this.stringToFieldJson(c),!c)continue}o.push(c)}return(e=o.length)&&!this.isInputKeyword(o[e-1].type)&&(e={type:"input_dummy"},n&&(e.align=n),o.push(e)),o}fieldFromJson(e){const t=i.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):t}inputFromJson(e,t){var n={LEFT:i.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:i.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:i.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:i.Align$$module$build$src$core$inputs$align.CENTRE};let o;switch(e.type){case"input_value":o=this.appendValueInput(e.name);break;case"input_statement":o=this.appendStatementInput(e.name);break;case"input_dummy":o=this.appendDummyInput(e.name);break;case"input_end_row":o=this.appendEndRowInput(e.name);break;default:o=this.appendInputFromRegistry(e.type,e.name)}return o?(e.check&&o.setCheck(e.check),e.align&&(n=n[e.align.toUpperCase()],n===void 0?console.warn(t+"Illegal align value: ",e.align):o.setAlign(n)),o):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||A(pe.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var n=-1,o=t?-1:this.inputList.length;for(let c=0,g;g=this.inputList[c];c++)if(g.name===e){if(n=c,o!==-1)break}else if(t&&g.name===t&&(o=c,n!==-1))break;if(n===-1)throw Error('Named input "'+e+'" not found.');if(o===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(n,o)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)}removeInput(e,t){for(let n=0,o;o=this.inputList[n];n++)if(o.name===e)return o instanceof Ur&&this.statementInputCount--,o.dispose(),this.inputList.splice(n,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,n;n=this.inputList[t];t++)if(n.name===e)return n;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(Kn.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let n;const o=(n=(t=this.getIcon(Kn.COMMENT))==null?void 0:t.getText())!=null?n:null;if(o!==e){if(e!==null){if(t=this.getIcon(Kn.COMMENT),!t){if(t=L(pe.ICON,Kn.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!ut(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}i.disable$$module$build$src$core$events$utils(),t.setText(e),i.enable$$module$build$src$core$events$utils()}else this.removeIcon(Kn.COMMENT);Oe(new(ee(J.BLOCK_CHANGE))(this,"comment",null,o,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new nm(e);return this.icons.push(e),this.icons.sort((t,n)=>t.getWeight()-n.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(n=>!n.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof Kn?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,t,n){if(this.parentBlock_)throw Error("Block has parent");const o=new(ee(J.BLOCK_MOVE))(this);n&&o.setReason(n),this.xy.translate(e,t),o.recordNew(),Oe(o)}makeConnection_(e){return new Ut(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let n=0,o;o=this.inputList[n];n++)if(o.connection){var t=o.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};au.COLLAPSED_INPUT_NAME=wi,au.COLLAPSED_FIELD_NAME=Wa;var Io=class{constructor(e,t,n,o){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=o,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=n.text,this.position=new Ie(0,0),this.callbackKey=n.callbackKey||n.callbackkey,this.cssClass=n["web-class"]||null,this.info=n}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=q(V.G,{class:e},this.workspace.getCanvas());let t;this.isFlyoutLabel||(t=q(V.RECT,{class:"blocklyFlyoutButtonShadow",rx:Io.BORDER_RADIUS,ry:Io.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=q(V.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Io.BORDER_RADIUS,ry:Io.BORDER_RADIUS},this.svgGroup);const n=q(V.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var o=Nt(this.text);this.workspace.RTL&&(o+="‏"),n.textContent=o,this.isFlyoutLabel&&(this.svgText=n,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const c=we(n,"fontSize"),g=we(n,"fontWeight"),S=we(n,"fontFamily");if(this.width=T(n,c,g,S),o=v(o,c,g,S),this.height=o.height,!this.isFlyoutLabel){this.width+=2*Io.TEXT_MARGIN_X,this.height+=2*Io.TEXT_MARGIN_Y;let w;(w=t)==null||w.setAttribute("width",String(this.width));let ie;(ie=t)==null||ie.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),n.setAttribute("x",String(this.width/2)),n.setAttribute("y",String(this.height/2-o.height/2+o.baseline)),this.updateTransform(),this.onMouseUpWrapper=He(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&Rt(this.onMouseUpWrapper),this.svgGroup&&G(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Io.TEXT_MARGIN_X=5,Io.TEXT_MARGIN_Y=2,Io.BORDER_RADIUS=4,yt(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var le=class{constructor(e,t,n){if(this.wsCoordinate=null,!t)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=le.isConnectionType(e),this.location=t,this.processParams(n||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const n=t.inputList[e],o=n.fieldRow;for(let c=0;c<o.length;c++){const g=o[c];if(g.isClickable()||le.NAVIGATE_ALL_FIELDS)return le.createFieldNode(g)}if(n.connection)return le.createInputNode(n)}return null}findNextForField(){var e=this.location,t=e.getParentInput();const n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var o=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;o<n.inputList.length;o++){t=n.inputList[o];const c=t.fieldRow;for(;e<c.length;){if(c[e].isClickable()||le.NAVIGATE_ALL_FIELDS)return le.createFieldNode(c[e]);e++}if(e=0,t.connection)return le.createInputNode(t)}return null}findPrevForInput(){const e=this.location.getParentInput(),t=e.getSourceBlock();for(var n=t.inputList.indexOf(e);0<=n;n--){var o=t.inputList[n];if(o.connection&&o!==e)return le.createInputNode(o);o=o.fieldRow;for(let c=o.length-1;0<=c;c--){const g=o[c];if(g.isClickable()||le.NAVIGATE_ALL_FIELDS)return le.createFieldNode(g)}}return null}findPrevForField(){var e=this.location;const t=e.getParentInput(),n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var o=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=o;o--){var c=n.inputList[o];if(c.connection&&c!==t)return le.createInputNode(c);for(c=c.fieldRow;-1<e;){if(c[e].isClickable()||le.NAVIGATE_ALL_FIELDS)return le.createFieldNode(c[e]);e--}0<=o-1&&(e=n.inputList[o-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var t=this.getLocation();if(t.getSourceBlock){var n=t.getSourceBlock();n&&(t=n)}if(!t||t.isDeadOrDying())return null;if(t.workspace.isFlyout)return this.navigateFlyoutContents(e);n=t.getRootBlock(),t=n.workspace.getTopBlocks(!0);for(let o=0;o<t.length;o++)if(n.id===t[o].id)return e=o+(e?1:-1),e===-1||e===t.length?null:le.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let t;switch(this.getType()){case le.types.STACK:t=this.getLocation();var n=t.workspace.targetWorkspace;break;case le.types.BUTTON:t=this.getLocation(),n=t.getTargetWorkspace();break;default:return null}return n=n.getFlyout(),n&&(e=this.findNextLocationInFlyout(n.getContents(),t,e))?e.type==="button"&&e.button?le.createButtonNode(e.button):e.type==="block"&&e.block?le.createStackNode(e.block):null:null}findNextLocationInFlyout(e,t,n){const o=e.findIndex(c=>t instanceof au&&c.block===t||t instanceof Io&&c.button===t);return 0>o?null:(n=n?o+1:o-1,n===-1||n===e.length?null:e[n])}findTopASTNodeForBlock(e){const t=gt(e);return t?le.createConnectionNode(t):le.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const t=gt(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?le.createInputNode(t.targetConnection.getParentInput()):le.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let t=0;t<e.length;t++){const n=e[t],o=n.fieldRow;for(let c=0;c<o.length;c++){const g=o[c];if(g.isClickable()||le.NAVIGATE_ALL_FIELDS)return le.createFieldNode(g)}if(n.connection)return le.createInputNode(n)}return null}getSourceBlock(){return this.getType()===le.types.BLOCK?this.getLocation():this.getType()===le.types.STACK?this.getLocation():this.getType()===le.types.WORKSPACE||this.getType()===le.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case le.types.STACK:return this.navigateBetweenStacks(!0);case le.types.OUTPUT:return le.createBlockNode(this.location.getSourceBlock());case le.types.FIELD:return this.findNextForField();case le.types.INPUT:return this.findNextForInput();case le.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return le.createConnectionNode(e);case le.types.PREVIOUS:return le.createBlockNode(this.location.getSourceBlock());case le.types.NEXT:return le.createConnectionNode(this.location.targetConnection);case le.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case le.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return le.createStackNode(e[0]);break;case le.types.STACK:return this.findTopASTNodeForBlock(this.location);case le.types.BLOCK:return this.findFirstFieldOrInput(this.location);case le.types.INPUT:return le.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case le.types.STACK:return this.navigateBetweenStacks(!1);case le.types.FIELD:return this.findPrevForField();case le.types.INPUT:return this.findPrevForInput();case le.types.BLOCK:var e=gt(this.location);if(!e)break;return le.createConnectionNode(e);case le.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return le.createConnectionNode(e);break;case le.types.NEXT:return le.createBlockNode(this.location.getSourceBlock());case le.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case le.types.STACK:var e=this.location,t=e.getRelativeToSurfaceXY();return t=new Ie(t.x,t.y+le.DEFAULT_OFFSET_Y),le.createWorkspaceNode(e.workspace,t);case le.types.OUTPUT:return e=this.location,(t=e.targetConnection)?le.createConnectionNode(t):le.createStackNode(e.getSourceBlock());case le.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return le.createBlockNode(e);case le.types.INPUT:return le.createBlockNode(this.location.getSourceBlock());case le.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case le.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case le.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case le.types.PREVIOUS:case le.types.NEXT:case le.types.INPUT:case le.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new le(le.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===Be.INPUT_VALUE||t===Be.NEXT_STATEMENT&&e.getParentInput()?le.createInputNode(e.getParentInput()):t===Be.NEXT_STATEMENT?new le(le.types.NEXT,e):t===Be.OUTPUT_VALUE?new le(le.types.OUTPUT,e):t===Be.PREVIOUS_STATEMENT?new le(le.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new le(le.types.INPUT,e.connection):null}static createBlockNode(e){return e?new le(le.types.BLOCK,e):null}static createStackNode(e){return e?new le(le.types.STACK,e):null}static createButtonNode(e){return e?new le(le.types.BUTTON,e):null}static createWorkspaceNode(e,t){return t&&e?new le(le.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=gt(e);return t?le.createConnectionNode(t):le.createBlockNode(e)}};le.NAVIGATE_ALL_FIELDS=!1,le.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"}(le||(le={}));var m_=class extends ir{constructor(e,t,n,o){let c=e?e.workspace.id:void 0;o&&o.getType()===le.types.WORKSPACE&&(c=o.getLocation().id),super(c),this.type=J.MARKER_MOVE,this.blockId=e==null?void 0:e.id,this.oldNode=n||void 0,this.newNode=o,this.isCursor=t}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new m_),t.isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};u(pe.EVENT,J.MARKER_MOVE,m_);var zE="blocklyCursor",XE="blocklyMarker",jE=.75,$_=class{constructor(e,t,n){this.workspace=e,this.marker=n,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?zE:XE;return this.svgGroup_=q(V.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||n,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent(e,t),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===le.types.BLOCK?this.showWithBlock_(e):e.getType()===le.types.OUTPUT?this.showWithOutput_(e):t===Be.INPUT_VALUE?this.showWithInput_(e):t===Be.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===le.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===le.types.FIELD?this.showWithField_(e):e.getType()===le.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===le.types.STACK?this.showWithStack_(e):e.getType()===le.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const t=e.width;var n=e.height,o=n*jE;const c=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(n=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,c,o,n)):e.outputConnection?(o=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,n,o)):this.positionBlock_(t,c,o),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const t=e.getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const t=e.getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let n=0;t=t.getOffsetInBlock().y;const o=e.getHeightWidth().width;this.workspace.RTL&&(n=-o),this.positionLine_(n,t,o),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var t=e.getHeightWidth();const n=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const o=-this.constants_.CURSOR_STACK_PADDING/2,c=-this.constants_.CURSOR_STACK_PADDING/2;let g=o;this.workspace.RTL&&(g=-(n+o)),this.positionRect_(g,c,n,t),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const t=e.width+this.constants_.CURSOR_STACK_PADDING,n=e.height+this.constants_.CURSOR_STACK_PADDING,o=-this.constants_.CURSOR_STACK_PADDING/2,c=-this.constants_.CURSOR_STACK_PADDING/2;let g=o;this.workspace.RTL&&(g=-(t+o)),this.positionRect_(g,c,t,n),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,n){if(e=Mt(-t,n)+Ce("V",-t)+Ce("H",e+2*t)+Ce("V",n),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,n=e.getOffsetInBlock().y;e=hn(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+n+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,n){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${n}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,n){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=Mt(e,0)+Ce("h",-(e-n.width))+Ce("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+Ce("V",t)+Ce("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,n,o){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=Mt(-t,n)+Ce("V",-t)+Ce("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+Ce("H",e+2*t)+Ce("V",n),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,n,o){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${n}`),this.markerSvgRect_.setAttribute("height",`${o}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,t){const n=t.getSourceBlock();e=new(ee(J.MARKER_MOVE))(n,this.isCursor(),e,t),Oe(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=q(V.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=q(V.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=q(V.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=q(V.PATH,{transform:""},this.markerSvg_),this.markerBlock_=q(V.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();q(V.ANIMATE,e,this.markerSvgLine_),q(V.ANIMATE,e,this.markerInput_),q(V.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&G(this.svgGroup_)}},gg=class{constructor(e,t,n){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=n,this.style=t,this.svgRoot=e,this.svgPath=q(V.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?ve(this.svgRoot,e):R(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,n,o){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,t,n))return;this.removeConnectionHighlight(e)}t=q(V.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:`translate(${n.x}, ${n.y})`+(o?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,t)}currentHighlightMatchesNew(e,t,n){let o;const c=(o=this.connectionHighlights.get(e))==null?void 0:o.getAttribute("d");return e=this.highlightOffsets.get(e),c===t&&Ie.equals(e,n)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(G(t),this.connectionHighlights.delete(e))}},bo=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,i.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){i.disable$$module$build$src$core$events$utils(),this.hidePreview(),i.enable$$module$build$src$core$events$utils();var{local:e,closest:t}=this.activeCandidate;e.connect(t);var n=e.isSuperior()?t:e,o=this.topBlock.getRootBlock();Kt().then(()=>{ii(n.getSourceBlock()),setTimeout(()=>{o.bringToFront()},0)})}}update(e,t){const n=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!n,t))||this.shouldUpdatePreviews(n,e))&&(i.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(n),this.maybeShowPreview(n),i.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){i.disable$$module$build$src$core$events$utils();let t;try{const n=Zn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!n)throw Error(`Failed to serialize source block. ${e.toDevString()}`);t=fi(n,this.workspace);for(const o of t.getDescendants(!1))o.setInsertionMarker(!0);t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden")}finally{i.enable$$module$build$src$core$events$utils()}return t}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);return t&&t!==this.topBlock.nextConnection&&(e.push(t),this.lastOnStack=t),e}shouldUpdatePreviews(e,t){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:n,closest:o}=this.activeCandidate;if(o===e.closest&&n===e.local)return!1;const c=n.x+t.x-o.x;return t=n.y+t.y-o.y,e.radius<Math.sqrt(c*c+t*t)-i.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),n=null;for(let o=0;o<this.availableConnections.length;o++){const c=this.availableConnections[o],g=c.closest(t,e);g.connection&&(n={closest:g.connection,local:c,radius:g.radius},t=g.radius)}return n}getStartRadius(){return this.activeCandidate?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return t&&this.workspace.getComponentManager().hasCapability(t.id,rn.Capability.DELETE_AREA)?t.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t=e.closest,n;t===((n=this.activeCandidate)==null?void 0:n.closest)||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case bo.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case bo.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case bo.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=(e=this.activeCandidate)==null?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:n}=e;let o=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");let c;try{c=o.getMatchingConnection(t.getSourceBlock(),t)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),o=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),o=this.firstMarker=this.createMarkerBlock(this.topBlock)),!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");c=o.getMatchingConnection(t.getSourceBlock(),t)}if(!c)throw Error("Cannot show the insertion marker because there is no associated connection");if(c===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.queueRender(),Vn(),c.connect(n);const g={x:n.x-c.x,y:n.y-c.y},S=c.getOffsetInBlock().clone(),w=c;Kt().then(()=>{let ie;(ie=o)==null||ie.positionNearConnection(w,g,S);let De;(De=o)==null||De.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=c}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,t=e.getSourceBlock(),n=t.outputConnection,o;if((o=t.previousConnection)!=null&&o.targetConnection||n!=null&&n.targetConnection)t.unplug(!0);else{let c;(c=e.targetBlock())==null||c.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){i.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{i.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(bo||(bo={})),bo.PREVIEW_TYPE;var _g=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new dg}makeRenderInfo_(e){return new Tp(this,e)}makeDrawer_(e,t){return new pg(e,t)}makeMarkerDrawer(e,t){return new $_(e,this.getConstants(),t)}makePathObject(e,t){return new gg(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,n){return!!Ut.getConnectionForOrphanedConnection(e,n===Be.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,n){return Y("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Be.OUTPUT_VALUE||t.type===Be.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(n,e.targetBlock(),t.type)?bo.PREVIEW_TYPE.INSERTION_MARKER:bo.PREVIEW_TYPE.REPLACEMENT_FADE:bo.PREVIEW_TYPE.INSERTION_MARKER}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},Yt={};Yt.BottomRow=u_,Yt.Connection=sc,Yt.ConstantProvider=dg,Yt.Drawer=pg,Yt.ExternalValueInput=hg,Yt.Field=hd,Yt.Hat=h_,Yt.Icon=om,Yt.InRowSpacer=Br,Yt.InlineInput=d_,Yt.InputConnection=lu,Yt.InputRow=p_,Yt.JaggedEdge=lm,Yt.MarkerSvg=$_,Yt.Measurable=jl,Yt.NextConnection=am,Yt.OutputConnection=cm,Yt.PathObject=gg,Yt.PreviousConnection=um,Yt.RenderInfo=Tp,Yt.Renderer=_g,Yt.RoundCorner=mp,Yt.Row=_p,Yt.SpacerRow=g_,Yt.SquareCorner=$p,Yt.StatementInput=fp,Yt.TopRow=__,Yt.Types=B,Yt.init=xt,Yt.register=mt,Yt.unregister=Pt;var dm=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&R(e,t),(t=this.theme.getClassName())&&ve(e,t));for(let n=0,o;o=this.subscribedWorkspaces[n];n++)o.refreshTheme();for(const[n,o]of this.componentDB)for(const c of o){e=c.element,t=c.propertyName;const g=this.theme&&this.theme.getComponentStyle(n);e.style.setProperty(t,g||"")}for(const n of this.subscribedWorkspaces)n.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!nn(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,n){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:n}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(n,t||"")}unsubscribe(e){if(e)for(const[t,n]of this.componentDB){for(let o=n.length-1;0<=o;o--)n[o].element===e&&n.splice(o,1);n.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},T_="VARIABLE_DYNAMIC",Rh={CATEGORY_NAME:T_};Rh.flyoutCategory=Bn,Rh.flyoutCategoryBlocks=Un,Rh.onCreateVariableButtonClick_Colour=As,Rh.onCreateVariableButtonClick_Number=zn,Rh.onCreateVariableButtonClick_String=qt;var pm=30,yh=[];yh[Be.INPUT_VALUE]=Be.OUTPUT_VALUE,yh[Be.OUTPUT_VALUE]=Be.INPUT_VALUE,yh[Be.NEXT_STATEMENT]=Be.PREVIOUS_STATEMENT,yh[Be.PREVIOUS_STATEMENT]=Be.NEXT_STATEMENT;var E_="RENAME_VARIABLE_ID",I_="DELETE_VARIABLE_ID",gm=class{canConnect(e,t,n,o){return this.canConnectWithReason(e,t,n,o)===Ut.CAN_CONNECT}canConnectWithReason(e,t,n,o){const c=this.doSafetyChecks(e,t);return c!==Ut.CAN_CONNECT?c:this.doTypeChecks(e,t)?n&&!this.doDragChecks(e,t,o||0)?Ut.REASON_DRAG_CHECKS_FAILED:Ut.CAN_CONNECT:Ut.REASON_CHECKS_FAILED}getErrorMessage(e,t,n){switch(e){case Ut.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Ut.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Ut.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Ut.REASON_TARGET_NULL:return"Target connection is null.";case Ut.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+n.getCheck());case Ut.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Ut.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Ut.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return Ut.REASON_TARGET_NULL;let n,o,c;return e.isSuperior()?(n=e.getSourceBlock(),o=t.getSourceBlock(),c=t):(o=e.getSourceBlock(),n=t.getSourceBlock(),c=e,e=t),n===o?Ut.REASON_SELF_CONNECTION:c.type!==yh[e.type]?Ut.REASON_WRONG_TYPE:n.workspace!==o.workspace?Ut.REASON_DIFFERENT_WORKSPACES:n.isShadow()&&!o.isShadow()?Ut.REASON_SHADOW_PARENT:c.type===Be.OUTPUT_VALUE&&o.previousConnection&&o.previousConnection.isConnected()||c.type===Be.PREVIOUS_STATEMENT&&o.outputConnection&&o.outputConnection.isConnected()?Ut.REASON_PREVIOUS_AND_OUTPUT:Ut.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let n=0;n<e.length;n++)if(t.includes(e[n]))return!0;return!1}doDragChecks(e,t,n){if(e.distanceFrom(t)>n||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Be.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Be.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Be.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Be.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!js.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||js.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};u(pe.CONNECTION_CHECKER,vi,gm);var b_=class extends _h{constructor(e){super(e),this.type=J.VAR_DELETE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new b_),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};u(pe.EVENT,J.VAR_DELETE,b_);var S_=class extends _h{constructor(e,t){super(e),this.type=J.VAR_RENAME,e&&(this.oldName=e.name,this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new S_),t.oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};u(pe.EVENT,J.VAR_RENAME,S_);var O_=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.name!==t){var n=this.getVariable(t,e.type),o=this.workspace.getAllBlocks(!1),c=i.getGroup$$module$build$src$core$events$utils();c||i.setGroup$$module$build$src$core$events$utils(!0);try{n&&n.getId()!==e.getId()?this.renameVariableWithConflict(e,t,n,o):this.renameVariableAndUses(e,t,o)}finally{i.setGroup$$module$build$src$core$events$utils(c)}}}renameVariableById(e,t){const n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)}renameVariableAndUses(e,t,n){for(Oe(new(ee(J.VAR_RENAME))(e,t)),e.name=t,t=0;t<n.length;t++)n[t].updateVarName(e)}renameVariableWithConflict(e,t,n,o){const c=e.type;for(t!==n.name&&this.renameVariableAndUses(n,t,o),t=0;t<o.length;t++)o[t].renameVarById(e.getId(),n.getId());Oe(new(ee(J.VAR_DELETE))(e)),nn(this.variableMap.get(c),e)}createVariable(e,t,n){var o=this.getVariable(e,t);if(o){if(n&&o.getId()!==n)throw Error('Variable "'+e+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+n+'".');return o}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return o=n||re(),t=t||"",o=new tu(this.workspace,e,t,o),e=this.variableMap.get(t)||[],e.push(o),this.variableMap.delete(t),this.variableMap.set(t,e),Oe(new(ee(J.VAR_CREATE))(o)),o}deleteVariable(e){const t=e.getId(),n=this.variableMap.get(e.type);if(n){for(let o=0;o<n.length;o++)if(n[o].getId()===t){n.splice(o,1),Oe(new(ee(J.VAR_DELETE))(e)),n.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var n=t.name;const o=this.getVariableUsesById(e);for(let c=0,g;g=o[c];c++)if(g.type==="procedures_defnoreturn"||g.type==="procedures_defreturn"){e=String(g.getFieldValue("NAME")),n=i.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",n).replace("%2",e),Wi(n);return}1<o.length?(n=i.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(o.length)).replace("%2",n),vt(n,c=>{c&&t&&this.deleteVariableInternal(t,o)})):this.deleteVariableInternal(t,o)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const n=i.getGroup$$module$build$src$core$events$utils();n||i.setGroup$$module$build$src$core$events$utils(!0);try{for(let o=0;o<t.length;o++)t[o].dispose(!0);this.deleteVariable(e)}finally{i.setGroup$$module$build$src$core$events$utils(n)}}getVariable(e,t){if(t=this.variableMap.get(t||"")){for(let n=0,o;o=t[n];n++)if(i.Names$$module$build$src$core$names.equals(o.name,e))return o}return null}getVariableById(e){for(const t of this.variableMap.values())for(const n of t)if(n.getId()===e)return n;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const n of e.getPotentialVariableMap().variableMap.keys())t.add(n);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const t=[],n=this.workspace.getAllBlocks(!1);for(let o=0;o<n.length;o++){const c=n[o].getVarModels();if(c)for(let g=0;g<c.length;g++)c[g].getId()===e&&t.push(n[o])}return t}},pd=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new rm,this.potentialVariableMap=null,this.id=re(),_e(this),this.options=e||new Eo({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(se(pe.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new O_(this)}dispose(){this.listeners.length=0,this.clear(),rt(this)}sortObjects(e,t){const n=Math.sin(Jr(pd.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+n*e.x-(t.y+n*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!nn(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){nn(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&e.sort(this.sortObjects.bind(this)),e.filter(n=>!n.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!nn(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&1<t.length&&t.sort(this.sortObjects.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let n=0;n<t.length;n++)e.push(...t[n].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(n=>!n.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=i.getGroup$$module$build$src$core$events$utils();for(e||i.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();i.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,n){return this.variableMap.createVariable(e,t,n)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const n in e){if(e[n]>this.remainingCapacityOfType(n))return!1;t+=e[n]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_;const o=t.pop();if(o){for(var c=[o];t.length&&o.group&&o.group===t[t.length-1].group;){const g=t.pop();g&&c.push(g)}for(t=0;t<c.length;t++)n.push(c[t]);i.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(n=0;n<c.length;n++)c[n].run(e)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,ln()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){nn(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let n=0;n<t.length;n++)if(!t[n].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new O_(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return j(e)}static getAll(){return z()}};pd.SCAN_ANGLE=3;var YE=100,_m=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var n=new globalThis.Audio}catch{return}for(let c=0;c<e.length;c++){const g=e[c],S=g.match(/\.(\w+)$/);if(S&&n.canPlayType("audio/"+S[1])){var o=new globalThis.Audio(g);break}}o&&this.sounds.set(t,o)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),ih||Qd)break}}play(e,t){if(!this.muted){var n=this.sounds.get(e);n?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<YE||(this.lastSound=e,n=ih||sh?n:n.cloneNode(),n.volume=t===void 0?1:t,n.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},KE=20,So=class extends pd{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(se(pe.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||So.setTopLevelWorkspaceMetrics,this.componentManager=new rn,this.connectionDBList=cd.init(this.connectionChecker),this.audioManager=new _m(e.parentWorkspace),this.grid=this.options.gridPattern?new o_(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Ja(this),Rn&&zr&&this.registerToolboxCategoryCallback(fh,zr),Rh&&Bn&&this.registerToolboxCategoryCallback(T_,Bn),Mi&&Se&&(this.registerToolboxCategoryCallback(ug,Se),this.addChangeListener(Fe)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new dm(this,this.options.theme||rg),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=xt(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new Ee(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=rg),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(t=>!!t.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(ee(J.THEME_CHANGE))(this.getTheme().name,this.id);Oe(e)}updateBlockStyles(e){for(let t=0,n;n=e[t];t++){const o=n.getStyleName();o&&n.setStyle(o)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let t=0,n=0,o=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(o=this.scale);do{const c=ta(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(o=1),t+=c.x*o,n+=c.y*o,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new Ie(t,n)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Ee(e.width,e.height)}getOriginOffsetInPixels(){return Ui(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=q(V.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=q(V.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new FE(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(He(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),He(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(se(pe.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=se(pe.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&G(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&G(e.parentNode)}this.resizeHandlerWrapper&&(Rt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=So.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new Zp(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new Eo({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(se(pe.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(se(pe.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(rn.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),n=[];for(let o=0,c;c=e[o];o++){c.position(t,n);const g=c.getBoundingRectangle();g&&n.push(g)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=dr();Ie.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const n=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,n.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,n.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(it()){var e=this.scale,t=-this.scrollY,n=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(n-this.oldLeft))){var o=new(ee(J.VIEWPORT_CHANGE))(t,n,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=n,Oe(o)}}}translate(e,t){let n;(n=this.layerManager)==null||n.translateLayers(new Ie(e,t),this.scale);let o;(o=this.grid)==null||o.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;0<=t;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender()),Kt().then(()=>void this.markerManager.updateMarkers())}highlightBlock(e,t){if(t===void 0){for(let n=0,o;o=this.highlightedBlocks[n];n++)o.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):nn(this.highlightedBlocks,e),e.setHighlighted(t))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,n){return e=super.createVariable(e,t,n),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(rn.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,n;n=e[t];t++){const o=n.getClientRect();o&&this.dragTargetAreas.push({component:n,clientRect:o})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,n;n=this.dragTargetAreas[t];t++)if(n.clientRect.contains(e.clientX,e.clientY))return n.component;return null}onMouseDown(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){Uo(this,e,t)}moveDrag(e){return oo(this,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(Qa.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||n){var o=Ks(e);if(rh)var c=e.metaKey;t&&(e.ctrlKey||c||!n)?(o=-o.y/50,t=M(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)):(t=this.scrollX-o.x,n=this.scrollY-o.y,e.shiftKey&&!o.x&&(t=this.scrollX-o.y,n=this.scrollY),this.scroll(t,n)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new jt(0,0,0,0);const t=e[0].getBoundingRectangle();for(let o=1;o<e.length;o++){var n=e[o];n.isInsertionMarker&&n.isInsertionMarker()||(n=n.getBoundingRectangle(),n.top<t.top&&(t.top=n.top),n.bottom>t.bottom&&(t.bottom=n.bottom),n.left<t.left&&(t.left=n.left),n.right>t.right&&(t.right=n.right))}return t}cleanUp(){this.setResizesEnabled(!1),i.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),t=e.filter(g=>g.isMovable());const n=e.filter(g=>!g.isMovable()).map(g=>g.getBoundingRectangle());e=function(g){for(const S of n)if(g.intersects(S))return S;return null};var o=0;const c=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const g of t){for(t=g.getBoundingRectangle(),g.moveBy(-t.left,o-t.top,["cleanup"]),g.snapToGrid(),t=g.getBoundingRectangle(),o=e(t);o!=null;)o=o.top+o.getHeight()+c,g.moveBy(0,o-t.top,["cleanup"]),g.snapToGrid(),t=g.getBoundingRectangle(),o=e(t);o=g.getRelativeToSurfaceXY().y+g.getHeightWidth().height+c}i.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=x.registry.getContextMenuOptions(x.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),Ol(e,t,this.RTL,this)}}updateToolbox(e){if(e=Dn(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Pn(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(lt(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);const o=this.scale*n;if(this.scale!==o){o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),g=this.getParentSvg().createSVGPoint();g.x=e,g.y=t,g=g.matrixTransform(c.inverse()),e=g.x,t=g.y,c=c.translate(e*(1-n),t*(1-n)).scale(n),this.scrollX=c.e,this.scrollY=c.f,this.setScale(o)}}zoomCenter(e){var t=this.getMetrics();let n;this.flyout?(n=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(n=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(n,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var n=this.getBlocksBoundingBox(),o=2*KE,c=n.right-n.left+o;if(n=n.bottom-n.top+o,c){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),n+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),c+=this.flyout.getWidth()/this.scale)),t/=c,e/=n,i.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{i.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ve(this.getCanvas(),"blocklyCanvasTransitioning"),ve(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){R(this.getCanvas(),"blocklyCanvasTransitioning"),R(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,n=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,n=-n-e.scrollTop,this.scroll(t,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var n=e?this.getBlockById(e):null;if(n){e=n.getRelativeToSurfaceXY(),n=t?{height:n.height,width:n.width}:n.getHeightWidth();var o=this.scale;t=(e.x+(this.RTL?-1:1)*n.width/2)*o,e=(e.y+n.height/2)*o,n=this.getMetrics(),this.scroll(-(t-n.viewWidth/2),-(e-n.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const n=this.getMetrics();e=Math.min(e,-n.scrollLeft),t=Math.min(t,-n.scrollTop);const o=n.scrollTop+Math.max(0,n.scrollHeight-n.viewHeight);e=Math.max(e,-(n.scrollLeft+Math.max(0,n.scrollWidth-n.viewWidth))),t=Math.max(t,-o),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+n.scrollLeft),-(t+n.scrollTop),!1),e+=n.absoluteLeft,t+=n.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){nn(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t=e.type==="pointerdown",n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:t?this.currentGesture_=new Qa(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Ki(),$i(this),ji(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(rn.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},R_=class extends ir{constructor(e,t,n){super(n),this.type=J.SELECTED,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new R_),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};u(pe.EVENT,J.SELECTED,R_);var Ep=class{paste(e,t,n){if(!t.isCapacityAvailable(e.typeCounts))return null;n&&(e.blockState.x=n.x,e.blockState.y=n.y),n=n||new Ie(e.blockState.x||0,e.blockState.y||0),i.disable$$module$build$src$core$events$utils();let o;try{o=fi(e.blockState,t),ks(o,n)}finally{i.enable$$module$build$src$core$events$utils()}return o&&(it()&&!o.isShadow()&&Oe(new(ee(J.BLOCK_CREATE))(o)),i.setSelected$$module$build$src$core$common(o),o)}};Ep.TYPE="block",Rs(Ep.TYPE,new Ep);var fg={};fg.bumpIntoBounds=vn,fg.bumpIntoBoundsHandler=Zi,fg.bumpTopObjectsIntoBounds=Lt;var fm=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Ie(0,0),this.inGroup=!1,this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,(this.inGroup=!!i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(se(pe.CONNECTION_PREVIEWER,this.workspace.options))(this.block),Gn(),this.workspace.setResizesEnabled(!1),Ll(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Ie.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,n,o;if(this.startParentConn=(o=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?o:(n=this.block.previousConnection)==null?void 0:n.targetConnection,e){let c;this.startChildConn=(c=this.block.nextConnection)==null?void 0:c.targetConnection}this.block.unplug(e),Ia(this.block)}fireDragStartEvent(){const e=new(ee(J.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));Oe(e)}fireDragEndEvent(){const e=new(ee(J.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));Oe(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(ee(J.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),Oe(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(Ie.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,Ie.difference(e,this.startLoc))}updateConnectionPreview(e,t){var n=this.connectionCandidate;const o=this.getConnectionCandidate(e,t);if(o){this.connectionCandidate=t=n&&this.currCandidateIsBetter(n,t,o)?n:o;var{local:c,neighbour:g}=t;t=c.type===Be.OUTPUT_VALUE||c.type===Be.PREVIOUS_STATEMENT,n=g.isConnected()&&!g.targetBlock().isInsertionMarker(),t&&n&&!this.orphanCanConnectAtEnd(e,g.targetBlock(),c.type)?this.connectionPreviewer.previewReplacement(c,g,g.targetBlock()):this.connectionPreviewer.previewConnection(c,g)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,t,n){return!!Ut.getConnectionForOrphanedConnection(e,n===Be.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,n){const{local:o,neighbour:c}=e;e=new Ie(o.x,o.y);const g=new Ie(c.x,c.y);return t=Ie.distance(Ie.sum(e,t),g),n.distance>t-i.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let n=this.connectionCandidate?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius,o=null;for(const c of e){const{connection:g,radius:S}=c.closest(n,t);g&&(o={local:c,neighbour:g,distance:S},n=S)}return o}getLocalConnections(e){const t=e.getConnections_(!1),n=e.lastConnectionInStack(!0);return n&&n!==e.nextConnection&&t.push(n),t}endDrag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),Bs(),Ll(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,H),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||i.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(e){const{local:t,neighbour:n}=e;t.connect(n);const o=t.isSuperior()?n:t,c=this.block.getRootBlock();Kt().then(()=>{ii(o.getSourceBlock()),setTimeout(()=>{c.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Be.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Be.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let t;(t=this.workspace.getLayerManager())==null||t.moveOffDragLayer(this.block,H),vn(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},mm=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const t=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(t,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},y_=class extends mm{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===le.types.NEXT||e.getType()===le.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===le.types.PREVIOUS||e.getType()===le.types.OUTPUT)&&(e=e.next());let t,n;return(e=(n=(t=e)==null?void 0:t.in())!=null?n:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===le.types.NEXT||e.getType()===le.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===le.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};u(pe.CURSOR,vi,y_);var Ip=class extends y_{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const n=e.in()||e.next();return t(n)?n:n?this.getNextNode_(n,t):(e=this.findSiblingOrParent(e.out()),t(e)?e:e?this.getNextNode_(e,t):null)}getPreviousNode_(e,t){if(!e)return null;let n=e.prev();return n=n?this.getRightMostChild(n):e.out(),t(n)?n:n?this.getPreviousNode_(n,t):null}validNode_(e){let t=!1;return e=e&&e.getType(),(e===le.types.OUTPUT||e===le.types.INPUT||e===le.types.FIELD||e===le.types.NEXT||e===le.types.PREVIOUS||e===le.types.WORKSPACE)&&(t=!0),t}findSiblingOrParent(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};Ip.registrationName="basicCursor",u(pe.CURSOR,Ip.registrationName,Ip);var $m=class extends Ip{validNode_(e){let t=!1;const n=e&&e.getType();return e&&(e=e.getLocation(),n===le.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},Tm=10,Di=class extends Ut{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[yh[t]],this.offsetInBlock=new Ie(0,0),this.trackedState=Di.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Di.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e,t=!1){if(!this.sourceBlock_.workspace.isDragging()){var n=i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Tm),o=i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Tm),c=e.sourceBlock_.getRootBlock(),g=this.sourceBlock_.getRootBlock();if(!c.isInFlyout&&!g.isInFlyout){var S=!0;if(g.isMovable())c.isMovable()&&t&&(o=-o);else if(c.isMovable())S=!1,n=-n,o=-o;else return;t=S?e:this,e=S?this:e,c=S?g:c,(g=ze()===c)||c.addSelect(),c.RTL&&(n=-n),c.moveBy(t.x+n-e.x,t.y+o-e.y,["bump"]),g||c.removeSelect()}}}moveTo(e,t){let n=!1;return this.trackedState===Di.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=Di.TrackedState.TRACKED,n=!0):this.trackedState===Di.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),n=!0),this.x=e,this.y=t,n}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=Ie.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Di.TrackedState.TRACKED||!e&&this.trackedState===Di.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Di.TrackedState.TRACKED):(this.trackedState===Di.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Di.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const n=e[t],o=n.getConnections_(!0);for(let c=0;c<o.length;c++)o[c].setTracking(!1);for(const c of n.getIcons())mi(c)&&c.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Be.INPUT_VALUE&&this.type!==Be.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let n;t.isCollapsed()?(n=[],t.outputConnection&&n.push(t.outputConnection),t.nextConnection&&n.push(t.nextConnection),t.previousConnection&&n.push(t.previousConnection)):n=t.getConnections_(!0);for(let o=0;o<n.length;o++)e.push(...n[o].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(ot()){const n=i.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(i.setGroup$$module$build$src$core$events$utils(n),this.bumpAwayFrom(e),i.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),i.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:n}=this.getParentAndChildConnections();if(t&&n){var o=i.getGroup$$module$build$src$core$events$utils();o||i.setGroup$$module$build$src$core$events$utils(!0);var c=t.getSourceBlock(),g=n.getSourceBlock();super.disconnectInternal(e),c.queueRender(),g.updateDisabled(),g.queueRender(),g.getSvgRoot().style.display="block",i.setGroup$$module$build$src$core$events$utils(o)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender(),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Di||(Di={})),Di.TrackedState;var Oo=class extends au{constructor(e,t,n){if(super(e,t,n),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Ie(0,0),this.dragStrategy=new fm(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=q(V.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,El(e),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&He(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const t=this.parentBlock_;if(e!==t){Gn(),super.setParent(e),Bs();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var o=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(n):t&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(n,e):this.workspace.getCanvas().appendChild(n),this.translate(o.x,o.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,n=0,o=this.getSvgRoot();if(o)do{const c=ta(o);t+=c.x,n+=c.y,o=o.parentNode}while(o&&!e.hasLayer(o));return new Ie(t,n)}moveBy(e,t,n){if(this.parentBlock_)throw Error("Block has parent");const o=it();let c=null;o&&(c=new(ee(J.BLOCK_MOVE))(this),n&&c.setReason(n)),e=new Ie(e,t),t=this.getRelativeToSurfaceXY(),e=Ie.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),o&&c&&(c.recordNew(),Oe(c)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new Ie(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const n=this.getRelativeToSurfaceXY();this.moveBy(e.x-n.x,e.y-n.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const t=this.getRelativeToSurfaceXY();let n,o;return this.RTL?(n=t.x-e.width,o=t.x):(n=t.x,o=t.x+e.width),new jt(t.y,t.y+e.height,n,o)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}updateCollapsed(){var e=this.isCollapsed();const t=wi,n=Wa;for(let c=0,g;g=this.inputList[c];c++)g.name!==t&&g.setVisible(!e);for(var o of this.getIcons())o.updateCollapsed();e?(e=this.toString(pm),(o=this.getField(n))?o.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new Oh(e),n)):(this.updateDisabled(),this.removeInput(t))}tab(e,t){const n=new $m;n.setCurNode(le.createFieldNode(e)),e=n.getCurNode(),t?n.next():n.prev(),(t=n.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=x.registry.getContextMenuOptions(x.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(Ol(e,t,this.RTL,this.workspace),fa(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(Ie.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const n of t.fieldRow)n.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",js.push(...this.getConnections_(!0)),ve(this.svgGroup,"blocklyDragging")):(js.length=0,R(this.svgGroup,"blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,t){if(this.disposing=!0,Yi(),ma(),t&&(this.unplug(e),zs(this)),t=ze(),t instanceof au){let n=t;for(;n!==null;)n===this&&t.unselect(),n=n.getParent()}super.dispose(!!e),G(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),ze()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(i.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),i.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Ep.TYPE,blockState:Zn(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:_n(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t=0,n;n=this.inputList[t];t++)for(let o=0,c;c=n.fieldRow[o];o++)c.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var n of this.warningTextDb.values())clearTimeout(n);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),n=this.getIcon(nc.TYPE),e){let o=this.getSurroundParent(),c=null;for(;o;)o.isCollapsed()&&(c=o),o=o.getSurroundParent();c&&c.setWarningText(i.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Oo.COLLAPSED_WARNING_ID),n?n.addMessage(e,t):this.addIcon(new nc(this).addMessage(e,t))}else n&&(t?(n.addMessage("",t),n.getText()||this.removeIcon(nc.TYPE)):this.removeIcon(nc.TYPE))}setMutator(e){this.removeIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof i.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setEnabled(e){Y("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const t=this.isEnabled();super.setEnabled(e),this.isEnabled()===t||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,t){const n=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===n||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,t)this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour();else throw Error("Invalid style name: "+e)}bringToFront(e=!1){let t=this;if(!t.isDeadOrDying())do{const n=t.getSvgRoot(),o=n.parentNode,c=o.childNodes;if(c[c.length-1]!==n&&o.appendChild(n),e)break;t=t.getParent()}while(t)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.setTracking(e),(n=n.targetBlock())&&n.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let n=0,o;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new Di(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let n;(n=t.targetBlock())==null||n.bumpNeighbours()}for(const n of t.neighbours(i.config$$module$build$src$core$config.snapRadius))n.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&n.isConnected()||(t.isSuperior()?n.bumpAwayFrom(t,!1):t.bumpAwayFrom(n,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,n){if(e.type===Be.NEXT_STATEMENT||e.type===Be.INPUT_VALUE){let o=t.x;t=t.y,o+=n.x-e.getOffsetInBlock().x,t+=n.y-e.getOffsetInBlock().y,this.moveBy(o,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return _s(this)}render(){this.queueRender(),Vn()}renderEfficiently(){Gn(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),Bs(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Ja.LOCAL_MARKER).draw();for(const e of this.inputList)for(const t of e.fieldRow)t.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var n=this.getNextBlock();if(n){n=n.getHeightWidth();const o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=n.height-o,t=Math.max(t,n.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},Zn(this)),t=new Set(["id","height","width","pinned","enabled"]),n=function(o){for(const c in o)t.has(c)?delete o[c]:typeof o[c]=="object"&&n(o[c])};return n(e),[e]}};Oo.INLINE=-1,Oo.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Em=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},mg=class extends Em{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof Oo?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(Xt(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},v_=class extends ir{constructor(e,t){super(t),this.type=J.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new v_),t.isOpen=e.isOpen,t}};u(pe.EVENT,J.TRASHCAN_OPEN,v_);var Im=class extends mg{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new Eo({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===Ze.TOP?Ze.BOTTOM:Ze.TOP,this.flyout=new(se(pe.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===Ze.RIGHT?Ze.LEFT:Ze.RIGHT,this.flyout=new(se(pe.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=q(V.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=q(V.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),q(V.RECT,{width:gd,height:$g,y:_d},e);const n=q(V.IMAGE,{width:Ms.width,x:-0,height:Ms.height,y:-32,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return n.setAttributeNS(li,"xlink:href",this.workspace.options.pathToMedia+Ms.url),e=q(V.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),q(V.RECT,{width:gd,height:_d},e),this.svgLid=q(V.IMAGE,{width:Ms.width,x:-0,height:Ms.height,y:-32,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(li,"xlink:href",this.workspace.options.pathToMedia+Ms.url),It(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),It(this.svgGroup,"pointerup",this,this.click),It(n,"pointerover",this,this.mouseOver),It(n,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(me(this.flyout.createDom(V.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:rn.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[rn.Capability.AUTOHIDEABLE,rn.Capability.DELETE_AREA,rn.Capability.DRAG_TARGET,rn.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&G(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(n){return JSON.parse(n)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let n;(n=this.flyout)==null||n.show(e),t.cursor="";let o;(o=this.workspace.scrollbar)==null||o.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var n=vo(this.workspace,e);e=_r(n,new Ee(gd,$g+_d),JE,bm,e,this.workspace),t=Co(e,bm,n.vertical===Yo.TOP?Ko.DOWN:Ko.UP,t),this.top=t.top,this.left=t.left;var o;(o=this.svgGroup)==null||o.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new jt(this.top,this.top+$g+_d,this.left,this.left+gd)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+QE-Tg;return e=e.left+qE-Tg,new jt(t,t+_d+$g+2*Tg,e,e+gd+2*Tg)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=tI;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Om),t=Sm+this.lidOpen*(nI-Sm),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),eI/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===Ze.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let n;(n=this.svgLid)==null||n.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:gd-4)+","+(_d-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*Om)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(ee(J.TRASHCAN_OPEN))(e,this.workspace.id),Oe(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||!oe(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(ZE)}}}cleanBlockJson(e){function t(n){if(n){if(delete n.id,delete n.x,delete n.y,delete n.enabled,delete n.disabledReasons,n.icons&&n.icons.comment){var o=n.icons.comment;delete o.height,delete o.width,delete o.pinned}o=n.inputs;for(var c in o){var g=o[c];const S=g.block;g=g.shadow,S&&t(S),g&&t(g)}n.next&&(c=n.next,n=c.block,c=c.shadow,n&&t(n),c&&t(c))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},gd=47,$g=44,_d=16,bm=20,JE=20,Tg=10,qE=0,QE=32,ZE=.1,eI=80,tI=4,Sm=.4,nI=.8,Om=45,Wt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),t=e.keyCodes,t!=null&&t.length)for(const n of t)this.addKeyMapping(n,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,n){e=`${e}`;const o=this.keyMap.get(e);if(o&&!n)throw Error(`Shortcut named "${t}" collides with shortcuts "${o}"`);o&&n?o.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,n){const o=this.keyMap.get(e);if(!o)return n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const c=o.indexOf(t);return-1<c?(o.splice(c,1),o.length===0&&this.keyMap.delete(e),!0):(n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,n]of this.keyMap)e[t]=n;return e}getRegistry(){const e=Object.create(null);for(const[t,n]of this.shortcuts)e[t]=n;return $s(Object.create(null),e)}onKeyDown(e,t){var n=this.serializeKeyEvent(t);if(n=this.getShortcutNamesByKeyCode(n),!n)return!1;for(const o of n){if(n=this.shortcuts.get(o),!n||n.preconditionFn&&!n.preconditionFn(e))continue;let c,g;if((g=(c=n).callback)!=null&&g.call(c,e,t,n))return!0}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[n,o]of this.keyMap)-1<o.indexOf(e)&&t.push(n);return t}serializeKeyEvent(e){let t="";for(const n in Wt.modifierKeys)e.getModifierState(n)&&(t!==""&&(t+="+"),t+=n);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers(e){for(const t of e)if(!(t in Wt.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let n="";if(t){this.checkModifiers(t);for(const o in Wt.modifierKeys)t.includes(Wt.modifierKeys[o])&&(n!==""&&(n+="+"),n+=o)}return n!==""&&e?n+="+"+e:e&&(n=`${e}`),n}};Wt.registry=new Wt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(Wt||(Wt={}));var C_=null,L_=null,sI={duplicateInternal:Ra,copyInternal:Xn},bp={};bp.BlockPaster=Ep,bp.TEST_ONLY=sI,bp.paste=en,bp.registry=Ul;var Kl;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(Kl||(Kl={}));var cu=null,uu=null,fd=null;va();var Jl={};Jl.names=Kl,Jl.registerCopy=ya,Jl.registerCut=kl,Jl.registerDefaultShortcuts=va,Jl.registerDelete=er,Jl.registerEscape=Ns,Jl.registerPaste=Ri,Jl.registerRedo=wl,Jl.registerUndo=yi;var iI=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=td}save(e){return e=e.getProcedureMap().getProcedures().map(t=>Go(t)),e.length?e:null}load(e,t){const n=t.getProcedureMap();for(const o of e)n.add(Kc(this.procedureModelClass,this.parameterModelClass,o,t))}clear(e){e.getProcedureMap().clear()}},Eg={};Eg.ProcedureSerializer=iI,Eg.loadProcedure=Kc,Eg.saveProcedure=Go;var Rm=class{constructor(){this.priority=uh}save(e){const t=[];for(const n of e.getAllVariables())e={name:n.name,id:n.getId()},n.type&&(e.type=n.type),t.push(e);return t.length?t:null}load(e,t){for(const n of e)t.createVariable(n.name,n.type,n.id)}clear(e){e.getVariableMap().clear()}};Hi("variables",new Rm);var ym={};ym.VariableSerializer=Rm;var A_={};A_.load=ss,A_.save=Nl;var rI={blocks:Dr,exceptions:Vl,priorities:cs,procedures:Eg,registry:Cn,variables:ym,workspaceComments:Ds,workspaces:A_},k_=class{constructor(e,t,n,o,c){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,n=n===void 0?!0:n;const g=t&&n;t&&(this.hScroll=new Tn(e,!0,g,o,c)),n&&(this.vScroll=new Tn(e,!1,g,o,c)),g&&(this.corner_=q(V.RECT,{height:Tn.scrollbarThickness,width:Tn.scrollbarThickness,class:"blocklyScrollbarBackground"}),me(this.corner_,e.getBubbleCanvas()))}dispose(){G(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,n=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(n=!0)):n=t=!0,t||n){try{i.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&n&&this.vScroll.resize(e)}finally{i.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let o;(o=this.corner_)==null||o.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let o;(o=this.corner_)==null||o.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,n){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(n||n===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},w_=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),new Ee(t,n)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),c=!!this.workspace_.getToolbox();var g;const S=!((g=this.workspace_.getFlyout())!=null&&g.autoClose);g=c?n.position:o.position;const w=g===Ze.TOP;return g===Ze.LEFT&&(c&&(e+=n.width),S&&(e+=o.width)),w&&(c&&(t+=n.height),S&&(t+=o.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),c=!!this.workspace_.getToolbox();var g;const S=!((g=this.workspace_.getFlyout())!=null&&g.autoClose);g=c?n.position:o.position;const w=g===Ze.LEFT||g===Ze.RIGHT;return(g===Ze.TOP||g===Ze.BOTTOM)&&(c&&(t.height-=n.height),S&&(t.height-=o.height)),w&&(c&&(t.width-=n.width),S&&(t.width-=o.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),n=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const o={};return n||(o.top=e.top,o.bottom=e.top+e.height),t||(o.left=e.left,o.right=e.left+e.width),o}getPaddedContent_(e,t){const n=t.top+t.height,o=t.left+t.width,c=e.width;e=e.height;const g=c/2,S=e/2;return{top:Math.min(t.top-S,n-e),bottom:Math.max(n+S,t.top+e),left:Math.min(t.left-g,o-c),right:Math.max(o+g,t.left+c)}}getScrollMetrics(e,t,n){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var o=n||this.getContentMetrics();n=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,o),o=n.top!==void 0?n.top:t.top;const c=n.left!==void 0?n.left:t.left;return{top:o/e,left:c/e,width:((n.right!==void 0?n.right:t.right)-c)/e,height:((n.bottom!==void 0?n.bottom:t.bottom)-o)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),n=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),c=this.getViewMetrics(),g=this.getContentMetrics(),S=this.getScrollMetrics(!1,c,g);return{contentHeight:g.height,contentWidth:g.width,contentTop:g.top,contentLeft:g.left,scrollHeight:S.height,scrollWidth:S.width,scrollTop:S.top,scrollLeft:S.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};u(pe.METRICS_MANAGER,vi,w_),"Blockly"in globalThis||(globalThis.Blockly={Msg:sd});var vm=class extends dg{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&G(this.selectedGlowFilter),this.replacementGlowFilter&&G(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,n=$n("c",[Ge(25,-e),Ge(71,-e),Ge(t,0)]);return{height:e,width:t,path:n}}makeHexagonal(){function e(n,o,c){var g=n/2;return g=g>t?t:g,c=c?-1:1,n=(o?-1:1)*n/2,Ls(-c*g,n)+Ls(c*g,n)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(n){return n/=2,n>t?t:n},height(n){return n},connectionOffsetY(n){return n/2},connectionOffsetX(n){return-n},pathDown(n){return e(n,!1,!1)},pathUp(n){return e(n,!0,!1)},pathRightDown(n){return e(n,!1,!0)},pathRightUp(n){return e(n,!1,!0)}}}makeRounded(){function e(o,c,g){const S=o>n?o-n:0;o=(o>n?n:o)/2;const w=g===c?"0":"1";return Dt("a","0 0,"+w,o,Ge((g?1:-1)*o,(c?-1:1)*o))+Ce("v",(c?-1:1)*S)+Dt("a","0 0,"+w,o,Ge((g?-1:1)*o,(c?-1:1)*o))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width(o){return o/=2,o>t?t:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeSquared(){function e(n,o,c){n-=2*t;const g=c===o?"0":"1";return Dt("a","0 0,"+g,t,Ge((c?1:-1)*t,(o?-1:1)*t))+Ce("v",(o?-1:1)*n)+Dt("a","0 0,"+g,t,Ge((c?-1:1)*t,(o?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(n){return t},height(n){return n},connectionOffsetY(n){return n/2},connectionOffsetX(n){return-n},pathDown(n){return e(n,!1,!1)},pathUp(n){return e(n,!0,!1)},pathRightDown(n){return e(n,!1,!0)},pathRightUp(n){return e(n,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Be.INPUT_VALUE:case Be.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case Be.PREVIOUS_STATEMENT:case Be.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(De){return $n("c",[Ge(De*c/2,0),Ge(De*c*3/4,S/2),Ge(De*c,S)])+Al([Ge(De*c,g)])+$n("c",[Ge(De*c/4,S/2),Ge(De*c/2,S),Ge(De*c,S)])+Ce("h",De*o)+$n("c",[Ge(De*c/2,0),Ge(De*c*3/4,-(S/2)),Ge(De*c,-S)])+Al([Ge(De*c,-g)])+$n("c",[Ge(De*c/4,-(S/2)),Ge(De*c/2,-S),Ge(De*c,-S)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=t/3,c=o/3,g=n/2,S=g/2,w=e(1),ie=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:w,pathRight:ie}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Dt("a","0 0,0",e,Ge(-e,e)),n=Dt("a","0 0,1",e,Ge(-e,e)),o=Dt("a","0 0,0",e,Ge(e,e)),c=Dt("a","0 0,1",e,Ge(e,e));return{width:e,height:e,pathTop:t,pathBottom:o,rightWidth:e,rightHeight:e,pathTopRight:n,pathBottomRight:c}}generateSecondaryColour_(e){return Ws("#000",e,.15)||e}generateTertiaryColour_(e){return Ws("#000",e,.25)||e}createDom(e,t,n){super.createDom(e,t,n),e=q(V.DEFS,{},e),t=q(V.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),q(V.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),n=q(V.FECOMPONENTTRANSFER,{result:"outBlur"},t),q(V.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),q(V.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),q(V.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=q(V.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),q(V.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=q(V.FECOMPONENTTRANSFER,{result:"outBlur"},e),q(V.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),q(V.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),q(V.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),q(V.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Cm=class extends pg{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(B.isSpacer(e)){const o=e.precedesStatement;var t=e.followsStatement;if(o||t){const c=this.constants_.INSIDE_CORNERS;var n=c.rightHeight;n=e.height-(o?n:0),t=t?c.pathBottomRight:"",e=0<n?Ce("V",e.yPos+n):"",this.outlinePath_+=t+e+(o?c.pathTopRight:"");return}}this.outlinePath_+=Ce("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Mt(e.xPos,this.info_.startY),this.outlinePath_+=Ce("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Ce("V",e.baseline),this.outlinePath_+=Ce("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=hn(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-2*e.connectionWidth,n=e.height;return Ce("h",t)+e.shape.pathRightDown(n)+Ce("h",-t)+e.shape.pathUp(n)+"z"}drawStatementInput_(e){var t=e.getLastInput();const n=t.xPos+t.notchOffset+t.shape.width,o=this.constants_.INSIDE_CORNERS,c=t.shape.pathRight+Ce("h",-(t.notchOffset-o.width))+o.pathTop,g=e.height-2*o.height;t=o.pathBottom+Ce("h",t.notchOffset-o.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=Ce("H",n)+c+Ce("v",g)+t+Ce("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===Be.NEXT_STATEMENT||t.type===Be.PREVIOUS_STATEMENT||t.type===Be.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=t.type===Be.INPUT_VALUE?hn(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):hn(e.width,-e.height/2)+e.shape.pathDown(e.height);var n=t.getSourceBlock(),o,c;(c=(o=n.pathObject).addConnectionHighlight)==null||c.call(o,t,e,t.getOffsetInBlock(),n.RTL)}}},vh=class extends d{constructor(e,t,n,o,c,g,S){if(super(d.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",n=Number(Nt(n)),t=Number(Nt(t)),isNaN(n)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=n||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Ee(t,n+vh.Y_PADDING),this.imageHeight=n,typeof c=="function"&&(this.clickHandler=c),e!==d.SKIP_SETUP&&(S?this.configure_(S):(this.flipRtl=!!g,this.altText=Nt(o)||""),this.setValue(Nt(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Nt(e.alt))}initView(){this.imageElement=q(V.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(li,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(li,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};vh.Y_PADDING=1,rs("field_image",vh),vh.prototype.DEFAULT_VALUE="";var Ig=class extends d{constructor(e,t,n){super(d.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==d.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new _;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new _;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&it()&&this.value_!==e&&t&&Oe(new(ee(J.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new _;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.style.colourTertiary)):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(R(e,"blocklyInvalidInput"),xn(e,On.INVALID,!1)):(ve(e,"blocklyInvalidInput"),xn(e,On.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new _;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(Jh||sh||ih)?this.showPromptEditor():this.showInlineEditor(t)}showPromptEditor(){Lo(i.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e){const t=this.getSourceBlock();if(!t)throw new _;Sr(this,t.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new _;i.setGroup$$module$build$src$core$events$utils(!0);const t=so();var n=this.getClickTarget_();if(!n)throw Error("A click target has not been set.");ve(n,"editing"),n=document.createElement("input"),n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);const o=this.workspace_.getScale();var c=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";return t.style.fontSize=c,n.style.fontSize=c,c=Ig.BORDERRADIUS*o+"px",this.isFullBlockField()&&(c=this.getScaledBBox(),c=(c.bottom-c.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,n.style.border=1*o+"px solid "+e,t.style.borderRadius=c,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*o+"px")),n.style.borderRadius=c,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(n),n}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&it()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(Oe(new(ee(J.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),i.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=so().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");R(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=He(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=He(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(Rt(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(Rt(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(qi(this),ji()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),qi(this),ji()):e.key==="Tab"&&(qi(this),ji(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&it()&&this.value_!==e&&Oe(new(ee(J.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){Kt().then(()=>{const e=this.getSourceBlock();if(!e)throw new _;const t=so(),n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px";const o=n.top;t.style.left=`${e.RTL?n.right-t.offsetWidth:n.left}px`,t.style.top=`${o}px`})}repositionForWindowResize(){let e;const t=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return t instanceof Oo?(vn(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};Ig.BORDERRADIUS=4;var bg=class extends Ig{constructor(e,t,n){super(e,t,n)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(Nt(e.text),void 0,e)}};rs("field_input",bg),bg.prototype.DEFAULT_VALUE="";var Lm=class extends u_{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Sg=class extends fp{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},Am=class extends jl{constructor(e){super(e),this.width=this.height=0,this.type|=B.getType("RIGHT_CONNECTION")}},km=class extends __{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},wm=class extends Tp{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new km(this.constants_),this.bottomRow=new Lm(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new Am(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof ic||e instanceof Ur||t instanceof Ur?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Yl||e instanceof ic?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&B.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&B.isLeftRoundedCorner(e)&&t&&(B.isPreviousConnection(t)||B.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&B.isLeftSquareCorner(e)&&t&&B.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(B.isTopRow(e)&&B.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const n=B.isInputRow(e)&&e.hasStatement,o=B.isInputRow(t)&&t.hasStatement;return o||n?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&n?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):B.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):B.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const n=this.width-this.startX;return B.isInputRow(e)&&e.hasStatement||B.isInputRow(t)&&t.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n}getElemCenterline_(e,t){if(e.hasStatement&&!B.isSpacer(t)&&!B.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(B.isInlineInput(t)&&t instanceof lu){const n=t.connectedBlock;if(n&&n.outputConnection&&n.nextConnection)return e.yPos+n.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof Yl||e instanceof ic)&&t.hasDummyInput&&t.align===i.Align$$module$build$src$core$inputs$align.LEFT&&e.align===i.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof Ur){t.elements.push(new Sg(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let n;for(let o=0;o<e.elements.length;o++){const c=e.elements[o];if(B.isSpacer(c)&&(n=c),B.isField(c)&&c instanceof hd&&c.parentInput===this.rightAlignedDummyInputs.get(e))break}if(n){n.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let c=2;c<this.rows.length-1;c+=2){var n=this.rows[c-1];const g=this.rows[c];var o=this.rows[c+1];if(n=c===2?!!this.topRow.hasPreviousConnection:!!n.followsStatement,o=c+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement,B.isInputRow(g)&&g.hasStatement){g.measure();let S,w;t=g.width-((w=(S=g.getLastInput())==null?void 0:S.width)!=null?w:0)+e}else if(n&&(c===2||o)&&B.isInputRow(g)&&!g.hasStatement){o=g.xPos,n=null;for(let S=0;S<g.elements.length;S++){const w=g.elements[S];B.isSpacer(w)&&(n=w),n&&(B.isField(w)||B.isInput(w))&&o<t&&!(B.isField(w)&&w instanceof hd&&(w.field instanceof Oh||w.field instanceof vh))&&(n.width+=t-o),o+=w.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,n=0;n<this.rows.length;n++){const o=this.rows[n];o.yPos=t,t+=o.height}this.height=t,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(n),n=e.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(n),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=n,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=n,this.width+=n+e,this.widthWithChildren+=n+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var n=this.rows[t];if(!B.isInputRow(n))continue;e=n.elements[n.elements.length-2];let o=this.getNegativeSpacing_(n.elements[1]),c=this.getNegativeSpacing_(e);e=o+c;const g=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<g&&(e=this.width-g,o=e/2,c=e/2),n.elements.unshift(new Br(this.constants_,-o)),n.elements.push(new Br(this.constants_,-c))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)n=this.rows[t],B.isTopOrBottomRow(n)&&(n.elements[1].width-=e),n.width-=e,n.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var n=this.outputConnection.shape.type;const o=this.constants_;if(1<this.inputRows.length)switch(n){case o.SHAPES.ROUND:return n=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=this.height/2>n?n:this.height/2,t-n*(1-Math.sin(Math.acos((n-this.constants_.SMALL_PADDING)/n)));default:return 0}if(B.isInlineInput(e)&&e instanceof lu){const c=e.connectedBlock;return e=c?c.pathObject.outputShapeType:e.shape.type,e==null||c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||n===o.SHAPES.HEXAGONAL&&n!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][e]}return B.isField(e)&&e instanceof hd?n===o.SHAPES.ROUND&&e.field instanceof bg?t-2.75*o.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][0]:B.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let o=2;o<this.rows.length-1;o+=2){const c=this.rows[o-1],g=this.rows[o],S=this.rows[o+1];var e=o===2,t=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!S.precedesStatement;if(e?this.topRow.hasPreviousConnection:c.followsStatement){var n=g.elements[1];if(n=g.elements.length===3&&n instanceof hd&&(n.field instanceof Oh||n.field instanceof vh),!e&&n)c.height-=this.constants_.SMALL_PADDING,S.height-=this.constants_.SMALL_PADDING,g.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)c.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<g.elements.length;t++)if(n=g.elements[t],n instanceof lu&&B.isInlineInput(n)&&n.connectedBlock&&!n.connectedBlock.isShadow()&&40<=n.connectedBlock.getHeightWidth().height){e=!0;break}e&&(c.height-=this.constants_.SMALL_PADDING,S.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},Nm=class extends $_{constructor(e,t,n){super(e,t,n),this.markerCircle=null}showWithInputOutput(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const t=e.getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,t){let n;(n=this.markerCircle)==null||n.setAttribute("cx",`${e}`);let o;(o=this.markerCircle)==null||o.setAttribute("cy",`${t}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=q(V.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();q(V.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let t;(t=this.markerCircle)==null||t.setAttribute("fill",this.colour_);let n;if((n=this.markerCircle)==null||n.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let o;(o=this.markerCircle)==null||o.firstElementChild.setAttribute("values",e)}}},Mm=class extends gg{constructor(e,t,n){super(e,t,n),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=n}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const n of this.outlines.values())n.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,q(V.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,n;(t=this.outlines.get(e))==null||(n=t.parentNode)==null||n.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},N_=class extends _g{constructor(e){super(e)}makeConstants_(){return new vm}makeRenderInfo_(e){return new wm(this,e)}makeDrawer_(e,t){return new Cm(e,t)}makeMarkerDrawer(e,t){return new Nm(e,this.getConstants(),t)}makePathObject(e,t){return new Mm(e,t,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,t,n){return Y("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Be.OUTPUT_VALUE?e.isConnected()?bo.PREVIEW_TYPE.REPLACEMENT_FADE:bo.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,n)}};mt("zelos",N_);var Dm=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,n){i.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=n,n.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{i.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){i.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{i.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===Be.PREVIOUS_STATEMENT||t.type===Be.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof N_)}previewMarker(e,t){const n=e.getSourceBlock(),o=this.createInsertionMarker(n),c=this.getMatchingConnection(n,o,e);if(!c)return null;o.queueRender(),Vn(),c.connect(t);const g={x:t.x-c.x,y:t.y-c.y},S=c.getOffsetInBlock().clone();return Kt().then(()=>{if(!o.isDeadOrDying()){i.disable$$module$build$src$core$events$utils();try{o==null||o.positionNearConnection(c,g,S),o==null||o.getSvgRoot().setAttribute("visibility","visible")}finally{i.enable$$module$build$src$core$events$utils()}}}),c}createInsertionMarker(e){const t=Zn(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=fi(t,this.workspace);for(const n of e.getDescendants(!1))n.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,n){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let o=0;o<e.length;o++)if(e[o]===n)return t[o];return null}hidePreview(){i.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{i.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),n=t.outputConnection;let o;if((o=t.previousConnection)!=null&&o.targetConnection||n!=null&&n.targetConnection)t.unplug(!0);else{let c;(c=e.targetBlock())==null||c.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};u(pe.CONNECTION_PREVIEWER,vi,Dm);var hu={};hu.Align=i.Align$$module$build$src$core$inputs$align,hu.DummyInput=Yl,hu.EndRowInput=ic,hu.Input=dd,hu.StatementInput=Ur,hu.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input,hu.inputTypes=i.inputTypes$$module$build$src$core$inputs$input_types;var Pm=!1,xm;i.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=je());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let n=0,o;o=e[n];n++){let c=this.blockToCode(o);Array.isArray(c)&&(c=c[0]),c&&(o.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,o)+c),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,o))),t.push(c))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let n=0;n<e.length;n++){const o=e[n].getCommentText();o&&t.push(o)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var n=this.forBlock[e.type];if(typeof n!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(n=n.call(e,e,this),Array.isArray(n)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,n[0],t),n[1]]}if(typeof n=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(n===null)return"";throw SyntaxError("Invalid code generated: "+n)}valueToCode(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);var o=e.getInputTargetBlock(t);if(!o&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!o||(t=this.blockToCode(o),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${o.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+o.type);if(!e)return"";o=!1;var c=Math.floor(n);const g=Math.floor(t);if(c<=g&&(c!==g||c!==0&&c!==99)){for(o=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]===n&&this.ORDER_OVERRIDES[c][1]===t){o=!1;break}}return o&&(e="("+e+")"),e}statementToCode(e,t){const n=e.getInputTargetBlock(t);if(!n&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(n),typeof e!="string")throw TypeError("Expecting code from statement block: "+(n&&n.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const n=this.nameDB_.getDistinctName(e,i.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=n,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,n);let o;for(;o!==t;)o=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,i.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,i.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,n){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},xm={},xm.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator;var Bm=class extends w_{constructor(e,t){super(e),this.flyout_=t}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,n){return t=n||this.getContentMetrics(),n=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*n)/e,width:(t.width+t.left+n)/e,top:0,left:0}}},md;(function(e){e.BLOCK="block",e.BUTTON="button"})(md||(md={}));var oI="WORKSPACE_AT_BLOCK_CAPACITY",Og=class extends mg{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new So(e),this.workspace_.setMetricsManager(new Bm(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=re(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=q(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=q(V.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new k_(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(He(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(He(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:rn.ComponentWeight.FLYOUT_WEIGHT,capabilities:[rn.Capability.AUTOHIDEABLE,rn.Capability.DELETE_AREA,rn.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)Rt(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&G(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const t=e!==this.isVisible();this.visible=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,n,o){let c;(c=this.svgGroup_)==null||c.setAttribute("width",`${e}`);let g;(g=this.svgGroup_)==null||g.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&wt(this.svgGroup_,"translate("+n+"px,"+o+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(n,o),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)Rt(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Qn(e),e=this.createFlyoutInfo(e),Vn(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const t=[],n=[];this.permanentlyDisabled.length=0;const o=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const c of e){if("custom"in c){e=this.getDynamicCategoryContents(c.custom),e=Qn(e);const{contents:g,gaps:S}=this.createFlyoutInfo(e);t.push(...g),n.push(...S)}switch(c.kind.toUpperCase()){case"BLOCK":e=c;const g=this.createFlyoutBlock(e);t.push({type:md.BLOCK,block:g}),this.addBlockGap(e,n,o);break;case"SEP":this.addSeparatorGap(c,n,o);break;case"LABEL":e=this.createButton(c,!0),t.push({type:md.BUTTON,button:e}),n.push(o);break;case"BUTTON":e=this.createButton(c,!1),t.push({type:md.BUTTON,button:e}),n.push(o)}}return{contents:t,gaps:n}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,t){return new Io(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock(e){let t;return e.blockxml?(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(t=this.getRecycledBlock(e.getAttribute("type")))||(t=Ii(e,this.workspace_))):(t=this.getRecycledBlock(e.type),t||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[Is]),t=Wn(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled.push(t),t}getRecycledBlock(e){let t=-1;for(let n=0;n<this.recycledBlocks.length;n++)if(this.recycledBlocks[n].type===e){t=n;break}return t===-1?void 0:this.recycledBlocks.splice(t,1)[0]}addBlockGap(e,t,n){let o;e.gap?o=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,o=parseInt(e.getAttribute("gap"))),t.push(!o||isNaN(o)?n:o)}addSeparatorGap(e,t,n){e=parseInt(String(e.gap)),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(n)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let n=0,o;o=e[n];n++)this.blockIsRecyclable_(o)?this.recycleBlock(o):o.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const n=this.mats[e];n&&(Nc(n),G(n))}this.mats.length=0;for(let n=0,o;o=this.buttons_[n];n++)o.dispose();this.buttons_.length=0;let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks.push(e)}addBlockListeners_(e,t,n){this.listeners.push(He(e,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(He(n,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(It(e,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(It(e,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()})),this.listeners.push(It(n,"pointerenter",t,()=>{this.targetWorkspace.isDragging()||t.addSelect()})),this.listeners.push(It(n,"pointerleave",t,()=>{this.targetWorkspace.isDragging()||t.removeSelect()}))}blockMouseDown(e){return t=>{const n=this.targetWorkspace.getGesture(t);n&&(n.setStartBlock(e),n.handleFlyoutStart(t,this))}}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;i.disable$$module$build$src$core$events$utils();var n=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{i.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=jr(this.targetWorkspace,n),it()){for(i.setGroup$$module$build$src$core$events$utils(!0),n=0;n<e.length;n++){const o=e[n];Oe(new(ee(J.VAR_CREATE))(o))}Oe(new(ee(J.BLOCK_CREATE))(t))}return this.autoClose?this.hide():this.filterForCapacity(),t}initFlyoutButton_(e,t,n){const o=e.createDom();e.moveTo(t,n),e.show(),this.listeners.push(He(o,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,t,n,o,c){return t=q(V.RECT,{"fill-opacity":0,x:t,y:n,height:o.height,width:o.width}),t.tooltip=e,El(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats[c]=t}moveRectToBlock_(e,t){const n=t.getHeightWidth();e.setAttribute("width",String(n.width)),e.setAttribute("height",String(n.height)),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",String(t.y)),e.setAttribute("x",String(this.RTL?t.x-n.width:t.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let t=0,n;n=e[t];t++)if(!this.permanentlyDisabled.includes(n)){const o=this.targetWorkspace.isCapacityAvailable(_n(n));for(;n;)n.setDisabledReason(!o,oI),n=n.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const n=this.serializeBlock(e);return t.setResizesEnabled(!1),t=fi(n,t),this.positionNewBlock(e,t),t}serializeBlock(e){return Zn(e)}positionNewBlock(e,t){const n=this.targetWorkspace;var o=n.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),c=Ie.sum(c,e),o=Ie.difference(c,o),o.scale(1/n.scale),t.moveTo(new Ie(o.x,o.y))}};Og.FlyoutItemType=md;var M_=class extends Og{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(n.top+(n.height-o.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Ze.LEFT?e.width:n.width-this.width_:this.toolboxPosition_===Ze.LEFT?0:n.width:this.toolboxPosition_===Ze.LEFT?0:n.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const n=this.toolboxPosition_===Ze.RIGHT;var o=e+this.CORNER_RADIUS;o=["M "+(n?o:0)+",0"],o.push("h",n?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,t)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",n?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=Ks(e);if(t.y){const n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics();t=n.getViewMetrics().top-o.top+t.y;let c;(c=this.workspace_.scrollbar)==null||c.setY(t),$i(this.workspace_),ji()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN;const o=this.RTL?n:n+this.tabWidth_;for(let w=0,ie;ie=e[w];w++)if(ie.type==="block"){var c=ie.block;if(!c)continue;var g=c.getDescendants(!1);for(let pn=0,un;un=g[pn];pn++)un.isInFlyout=!0;g=c.getSvgRoot();const De=c.getHeightWidth();var S=c.outputConnection?o-this.tabWidth_:o;c.moveBy(S,n),S=this.createRect_(c,this.RTL?S-De.width:S,n,De,w),this.addBlockListeners_(g,c,S),n+=De.height+t[w]}else ie.type==="button"&&(c=ie.button,this.initFlyoutButton_(c,o,n),n+=c.height+t[w])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===Ze.LEFT?new jt(-1e9,1e9,-1e9,t+e.width):new jt(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let o=0,c;c=t[o];o++){var n=c.getHeightWidth().width;c.outputConnection&&(n-=this.tabWidth_),e=Math.max(e,n)}for(let o=0,c;c=this.buttons_[o];o++)e=Math.max(e,c.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=Tn.scrollbarThickness,this.width_!==e){for(let o=0,c;c=t[o];o++){if(this.RTL){n=c.getRelativeToSurfaceXY().x;let g=e/this.workspace_.scale-this.MARGIN;c.outputConnection||(g-=this.tabWidth_),c.moveBy(g-n,0)}this.rectMap_.has(c)&&this.moveRectToBlock_(this.rectMap_.get(c),c)}if(this.RTL)for(let o=0,c;c=this.buttons_[o];o++)t=c.getPosition().y,c.moveTo(e/this.workspace_.scale-c.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Ze.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};M_.registryName="verticalFlyout",u(pe.FLYOUTS_VERTICAL_TOOLBOX,vi,M_);var Um=class extends Og{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(n.left+(n.width-o.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();e=e.getToolboxMetrics();const o=this.toolboxPosition_===Ze.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?o?e.height:n.height-this.height_:o?0:n.height:o?0:n.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const n=this.toolboxPosition_===Ze.TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=Ks(e);if(t=t.x||t.y){const n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics();t=n.getViewMetrics().left-o.left+t;let c;(c=this.workspace_.scrollbar)==null||c.setX(t),$i(this.workspace_),ji()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const n=this.MARGIN;let o=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(let w=0,ie;ie=e[w];w++)if(ie.type==="block"){var c=ie.block;if(c==null)continue;var g=c.getDescendants(!1);for(let pn=0,un;un=g[pn];pn++)un.isInFlyout=!0;g=c.getSvgRoot();const De=c.getHeightWidth();var S=c.outputConnection?this.tabWidth_:0;S=this.RTL?o+De.width:o-S,c.moveBy(S,n),S=this.createRect_(c,S,n,De,w),o+=De.width+t[w],this.addBlockListeners_(g,c,S)}else ie.type==="button"&&(c=ie.button,this.initFlyoutButton_(c,o,n),o+=c.width+t[w])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===Ze.TOP?new jt(-1e9,t+e.height,-1e9,1e9):new jt(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let o=0,c;c=t[o];o++)e=Math.max(e,c.getHeightWidth().height);const n=this.buttons_;for(let o=0,c;c=n[o];o++)e=Math.max(e,c.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=Tn.scrollbarThickness,this.height_!==e){for(let o=0,c;c=t[o];o++)this.rectMap_.has(c)&&this.moveRectToBlock_(this.rectMap_.get(c),c);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Ze.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};u(pe.FLYOUTS_HORIZONTAL_TOOLBOX,vi,Um);var Sp=class extends lr{constructor(e,t,n,o,c){super(d.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Sp.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new Ee(0,0),e!==d.SKIP_SETUP&&(c?this.configure_(c):this.setTypes(n,o),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new _;this.variable||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new _;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new _;const n=e.getAttribute("id"),o=e.textContent,c=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,n,o,c),c!==null&&c!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+ms(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var t=this.saveLegacyState(Sp);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.name,t.type=this.variable.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new _;this.loadLegacyState(Sp,e)||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new _;return t=i.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.type,this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new _;this.variable=i.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let n=0;n<t.length;n++)if(e===t[n])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,t=""){if(Array.isArray(e)){let n=!1;for(let o=0;o<e.length;o++)e[o]===t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===E_){i.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===I_){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Nt(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var n=this.getVariableTypes(),o=0;o<n.length;o++){const c=this.sourceBlock_.workspace.getVariablesOfType(n[o]);t=t.concat(c)}for(t.sort(tu.compareByName),n=[],o=0;o<t.length;o++)n[o]=[t[o].name,t[o].getId()];return n.push([i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,E_]),i.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&n.push([i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),I_]),n}};rs("field_variable",Sp);var D_=class extends Ig{constructor(e,t,n,o,c,g){super(d.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==d.SKIP_SETUP&&(g?this.configure_(g):this.setConstraints(t,n,o),this.setValue(e),c&&this.setValidator(c))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,n){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(n),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const n=t.indexOf(".");this.decimalPlaces=n===-1?e?0:null:t.length-n-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,xn(e,On.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,xn(e,On.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};rs("field_number",D_),D_.prototype.DEFAULT_VALUE=0;var Fm=class extends Oh{constructor(e,t,n){super(String(e??""),t,n),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Nt(e.text),void 0,e)}};rs("field_label_serializable",Fm);var Ch=class extends d{constructor(e,t,n){super(d.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Ch.CHECK_CHAR,e!==d.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Ch);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();ve(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Ch.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Ch.CHECK_CHAR="✓",rs("field_checkbox",Ch),Ch.prototype.DEFAULT_VALUE=!1;var Hm=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),Xt(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let n;(n=this.dragTarget)==null||n.onDragExit(t),e==null||e.onDragEnter(t)}e==null||e.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=Ie.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,rn.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=i.getGroup$$module$build$src$core$events$utils();var n=this.workspace.getDragTarget(e);const o=this.getRoot(this.draggable);if(n){let c;(c=this.dragTarget)==null||c.onDrop(o)}this.shouldReturnToStart(e,o)&&this.draggable.revertDrag(),(n=Xt(o)&&this.wouldDeleteDraggable(e,o))&&this.draggable instanceof Oo&&zs(this.draggable.getRootBlock()),this.draggable.endDrag(e),n&&Xt(o)&&(e=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(t),o.dispose(),i.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof Oo?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new Ie(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};u(pe.BLOCK_DRAGGER,vi,Hm);var Op={};Op.BlockDragStrategy=fm,Op.BubbleDragStrategy=Qf,Op.CommentDragStrategy=Ye,Op.Dragger=Hm;var P_=class extends ir{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=J.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=t,this.blocks=n)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new P_),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};u(pe.EVENT,J.BLOCK_DRAG,P_);var x_=class extends or{constructor(e,t,n,o){super(e),this.type=J.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=t,this.oldValue=n,this.newValue=o)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new x_),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};u(pe.EVENT,J.BLOCK_FIELD_INTERMEDIATE_CHANGE,x_);var B_=class extends or{constructor(e){super(e),this.type=J.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new B_),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(n=e.oldCoordinate.split(","),t.oldCoordinate=new Ie(Number(n[0]),Number(n[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(n=e.newCoordinate.split(","),t.newCoordinate=new Ie(Number(n[0]),Number(n[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const n=t.getParent();return n?(e.parentId=n.id,(t=n.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Ie.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=t.getBlockById(this.blockId);if(n){var o=e?this.newParentId:this.oldParentId,c=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,o){var g=t.getBlockById(o);if(!g){console.warn("Can't connect to non-existent block: "+o);return}}if(n.getParent()&&n.unplug(),e)c=n.getRelativeToSurfaceXY(),n.moveBy(e.x-c.x,e.y-c.y,this.reason);else{t=n.outputConnection,(!t||n.previousConnection&&n.previousConnection.isConnected())&&(t=n.previousConnection);let S,w;n=(w=t)==null?void 0:w.type,c?(n=g.getInput(c))&&(S=n.connection):n===Be.PREVIOUS_STATEMENT&&(S=g.nextConnection),S&&t?t.connect(S):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)}};u(pe.EVENT,J.BLOCK_MOVE,B_);var U_=class extends ir{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=J.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=n)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new U_),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},F_;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(F_||(F_={})),u(pe.EVENT,J.BUBBLE_OPEN,U_);var ql=class extends Da{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ot())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new ql),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const n=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");fr(e.json,n)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=n.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},H_=class extends ql{constructor(e,t,n){super(e),this.type=J.COMMENT_CHANGE,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof n>"u"?"":n)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new H_),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var n=e?this.newContents_:this.oldContents_;if(n===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(n)}else console.warn("Can't change non-existent comment: "+this.commentId)}};u(pe.EVENT,J.COMMENT_CHANGE,H_);var G_=class extends ql{constructor(e,t){super(e),this.newCollapsed=t,this.type=J.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new G_),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};u(pe.EVENT,J.COMMENT_COLLAPSE,G_);var V_=class extends ql{constructor(e){super(e),this.type=J.COMMENT_CREATE,e&&(this.xml=lo(e),this.json=Hr(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=ms(this.xml),e.json=this.json,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new V_),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){ql.CommentCreateDeleteHelper(this,e)}};u(pe.EVENT,J.COMMENT_CREATE,V_);var W_=class extends ql{constructor(e){super(e),this.type=J.COMMENT_DELETE,e&&(this.xml=lo(e),this.json=Hr(e,{addCoordinates:!0}))}run(e){ql.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=ms(this.xml),e.json=this.json,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new W_),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};u(pe.EVENT,J.COMMENT_DELETE,W_);var z_=class extends ir{constructor(e,t){super(e?e.workspace.id:void 0),this.type=J.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=t)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new z_),t.isStart=e.isStart,t.commentId=e.commentId,t}};u(pe.EVENT,J.COMMENT_DRAG,z_);var X_=class extends ql{constructor(e){super(e),this.type=J.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new X_),n=e.oldCoordinate.split(","),t.oldCoordinate_=new Ie(Number(n[0]),Number(n[1])),n=e.newCoordinate.split(","),t.newCoordinate_=new Ie(Number(n[0]),Number(n[1])),t}isNull(){return Ie.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};u(pe.EVENT,J.COMMENT_MOVE,X_);var j_=class extends ql{constructor(e){super(e),this.type=J.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new j_),t.oldSize=new Ee(e.oldWidth,e.oldHeight),t.newSize=new Ee(e.newWidth,e.newHeight),t}isNull(){return Ee.equals(this.oldSize,this.newSize)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");t.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};u(pe.EVENT,J.COMMENT_RESIZE,j_);var Y_=class extends ir{constructor(e,t,n){super(n),this.type=J.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,n){return t=super.fromJson(e,t,n??new Y_),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};u(pe.EVENT,J.TOOLBOX_ITEM_SELECT,Y_);var Gm=class extends Da{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=J.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};u(pe.EVENT,J.FINISHED_LOADING,Gm);var Vm,Wm,zm,Xm,jm,Ym,Km,Jm,qm,Qm,Zm,e$,t$,n$,s$,i$,r$,o$,l$,a$,c$,u$,h$,d$,p$,Me;i.BLOCK_CHANGE$$module$build$src$core$events$events=J.BLOCK_CHANGE,i.BLOCK_CREATE$$module$build$src$core$events$events=J.BLOCK_CREATE,i.BLOCK_DELETE$$module$build$src$core$events$events=J.BLOCK_DELETE,Vm=J.BLOCK_DRAG,i.BLOCK_MOVE$$module$build$src$core$events$events=J.BLOCK_MOVE,Wm=J.BLOCK_FIELD_INTERMEDIATE_CHANGE,zm=J.BUBBLE_OPEN,Xm=J.BLOCK_CHANGE,jm=J.CLICK,Ym=J.COMMENT_CHANGE,Km=J.COMMENT_CREATE,Jm=J.COMMENT_DELETE,qm=J.COMMENT_MOVE,Qm=J.COMMENT_RESIZE,Zm=J.COMMENT_DRAG,e$=J.BLOCK_CREATE,t$=J.BLOCK_DELETE,n$=J.FINISHED_LOADING,s$=J.MARKER_MOVE,i$=J.BLOCK_MOVE,r$=J.SELECTED,o$=J.THEME_CHANGE,l$=J.TOOLBOX_ITEM_SELECT,a$=J.TRASHCAN_OPEN,c$=J.UI,u$=J.VAR_CREATE,h$=J.VAR_DELETE,d$=J.VAR_RENAME,p$=J.VIEWPORT_CHANGE,Me={},Me.Abstract=Da,Me.BLOCK_CHANGE=i.BLOCK_CHANGE$$module$build$src$core$events$events,Me.BLOCK_CREATE=i.BLOCK_CREATE$$module$build$src$core$events$events,Me.BLOCK_DELETE=i.BLOCK_DELETE$$module$build$src$core$events$events,Me.BLOCK_DRAG=Vm,Me.BLOCK_FIELD_INTERMEDIATE_CHANGE=Wm,Me.BLOCK_MOVE=i.BLOCK_MOVE$$module$build$src$core$events$events,Me.BUBBLE_OPEN=zm,Me.BUMP_EVENTS=Bd,Me.BlockBase=or,Me.BlockChange=Wl,Me.BlockCreate=To,Me.BlockDelete=f_,Me.BlockDrag=P_,Me.BlockFieldIntermediateChange=x_,Me.BlockMove=B_,Me.BubbleOpen=U_,Me.BubbleType=F_,Me.CHANGE=Xm,Me.CLICK=jm,Me.COMMENT_CHANGE=Ym,Me.COMMENT_CREATE=Km,Me.COMMENT_DELETE=Jm,Me.COMMENT_DRAG=Zm,Me.COMMENT_MOVE=qm,Me.COMMENT_RESIZE=Qm,Me.CREATE=e$,Me.Click=zh,Me.ClickTarget=th,Me.CommentBase=ql,Me.CommentChange=H_,Me.CommentCollapse=G_,Me.CommentCreate=V_,Me.CommentDelete=W_,Me.CommentDrag=z_,Me.CommentMove=X_,Me.CommentResize=j_,Me.DELETE=t$,Me.FINISHED_LOADING=n$,Me.FinishedLoading=Gm,Me.MARKER_MOVE=s$,Me.MOVE=i$,Me.MarkerMove=m_,Me.SELECTED=r$,Me.Selected=R_,Me.THEME_CHANGE=o$,Me.TOOLBOX_ITEM_SELECT=l$,Me.TRASHCAN_OPEN=a$,Me.ThemeChange=i_,Me.ToolboxItemSelect=Y_,Me.TrashcanOpen=v_,Me.UI=c$,Me.UiBase=ir,Me.VAR_CREATE=u$,Me.VAR_DELETE=h$,Me.VAR_RENAME=d$,Me.VIEWPORT_CHANGE=p$,Me.VarBase=_h,Me.VarCreate=mo,Me.VarDelete=b_,Me.VarRename=S_,Me.ViewportChange=r_,Me.clearPendingUndo=ln,Me.disable=i.disable$$module$build$src$core$events$utils,Me.disableOrphans=Je,Me.enable=i.enable$$module$build$src$core$events$utils,Me.filter=En,Me.fire=Oe,Me.fromJson=kt,Me.get=ee,Me.getDescendantIds=Ft,Me.getGroup=i.getGroup$$module$build$src$core$events$utils,Me.getRecordUndo=ot,Me.isEnabled=it,Me.setGroup=i.setGroup$$module$build$src$core$events$utils,Me.setRecordUndo=i.setRecordUndo$$module$build$src$core$events$utils;var nl={};nl.BottomRow=Lm,nl.ConstantProvider=vm,nl.Drawer=Cm,nl.MarkerSvg=Nm,nl.PathObject=Mm,nl.RenderInfo=wm,nl.Renderer=N_,nl.RightConnectionShape=Am,nl.StatementInput=Sg,nl.TopRow=km,Hh();var Os={};Os.registerCleanup=La,Os.registerCollapse=zo,Os.registerCollapseExpandBlock=os,Os.registerComment=ka,Os.registerCommentCreate=wa,Os.registerCommentDelete=nr,Os.registerCommentDuplicate=oi,Os.registerCommentOptions=wd,Os.registerDefaultOptions=Hh,Os.registerDelete=Qu,Os.registerDeleteAll=jn,Os.registerDisable=qu,Os.registerDuplicate=Aa,Os.registerExpand=Ku,Os.registerHelp=Zu,Os.registerInline=kd,Os.registerRedo=Dl,Os.registerUndo=tn;var Rg={};Rg.CommentView=tt,Rg.RenderedWorkspaceComment=Hn,Rg.WorkspaceComment=st;var Rp={};Rp.Bubble=Qt,Rp.MiniWorkspaceBubble=Za,Rp.TextBubble=im,Rp.TextInputBubble=Zf;var g$=class extends dg{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},_$=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Mt(e.xPos,this.info_.startY);for(let t=0,n;n=e.elements[t];t++)B.isLeftSquareCorner(n)?this.steps_+=this.highlightConstants_.START_POINT:B.isLeftRoundedCorner(n)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):B.isPreviousConnection(n)?this.steps_+=this.notchPaths_.pathLeft:B.isHat(n)?this.steps_+=this.startPaths_.path(this.RTL_):B.isSpacer(n)&&n.width!==0&&(this.steps_+=Ce("H",n.xPos+n.width-this.highlightOffset));this.steps_+=Ce("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Ce("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const n=e.height-t.connectionHeight;this.steps_+=hn(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Ce("v",n)}else this.steps_+=hn(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const n=e.height-2*this.insideCornerPaths_.height;this.steps_+=hn(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Ce("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ls(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=hn(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ls(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof g_&&e.followsStatement&&(this.steps_+=Ce("H",t)),this.RTL_&&(this.steps_+=Ce("H",t),e.height>this.highlightOffset&&(this.steps_+=Ce("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=Ce("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];B.isLeftSquareCorner(t)?this.steps_+=hn(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):B.isLeftRoundedCorner(t)&&(this.steps_+=hn(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=hn(this.info_.startX,e):(this.steps_+=hn(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=Ce("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,B.isLeftRoundedCorner(e.elements[0])?this.steps_+=Ce("V",this.outsideCornerPaths_.height):this.steps_+=Ce("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,n=e.xPos+e.connectionWidth;var o=e.centerline-e.height/2;const c=e.width-e.connectionWidth,g=o+t;this.RTL_?(o=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=hn(n-t,g)+Ce("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+Ce("v",e)+Ce("h",c)):this.inlineSteps_+=hn(e.xPos+e.width+t,g)+Ce("v",e.height)+Ce("h",-c)+hn(n,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},f$=class extends pg{constructor(e,t){super(e,t),this.highlighter_=new _$(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Ce("H",e.xPos+e.width)+Ce("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(n,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},m$=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Mt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e+t)-t,o=Mt(n,n)+Dt("a","0 0,0",e,Ge(-n-t,e-n)),c=Dt("a","0 0,0",e+t,Ge(e+t,e+t)),g=Mt(n,-n)+Dt("a","0 0,0",e+t,Ge(e-n,n+t));return{width:e+t,height:e,pathTop(S){return S?o:""},pathBottom(S){return S?c:g}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e-t)+t,o=Mt(n,n)+Dt("a","0 0,1",e-t,Ge(e-n,-n+t)),c=Mt(t,e)+Dt("a","0 0,1",e-t,Ge(e,-e+t)),g=-n,S=Mt(n,g)+Dt("a","0 0,1",e-t,Ge(-n+t,-g-e));return{height:e,topLeft(w){return w?o:c},bottomLeft(){return S}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,n=Mt(-2,-t+3.4)+Ls(-.45*e,-2.1),o=Ce("v",2.5)+Mt(.97*-e,2.5)+$n("q",[Ge(.05*-e,10),Ge(.3*e,9.5)])+Mt(.67*e,-1.9)+Ce("v",2.5),c=Ce("v",-1.5)+Mt(-.92*e,-.5)+$n("q",[Ge(-.19*e,-5.5),Ge(0,-11)])+Mt(.92*e,1),g=Mt(-5,t-.7)+Ls(.46*e,-2.1);return{width:e,height:t,pathUp(S){return S?n:c},pathDown(S){return S?o:g}}}makeNotch(){return{pathLeft:Ce("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Ls(5.1,2.6)+Mt(-10.2,6.8)+Ls(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=Mt(25,-8.7)+$n("c",[Ge(29.7,-6.2),Ge(57.2,-.5),Ge(75,8.7)]),n=$n("c",[Ge(17.8,-9.2),Ge(45.3,-14.9),Ge(75,-8.7)])+hn(100.5,e+.5);return{path(o){return o?t:n}}}},$$=class extends d_{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},T$=class extends fp{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},E$=class extends Tp{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Ur||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new $$(this.constants_,e)),t.hasInlineInput=!0):e instanceof Ur?(t.elements.push(new T$(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new hg(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Yl||e instanceof ic)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let n=0,o;o=this.rows[n];n++)o.hasExternalInput&&(e=!0);for(let n=0,o;o=this.rows[n];n++){var t=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Br(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let c=0;c<t.length-1;c++){o.elements.push(t[c]);const g=this.getInRowSpacing_(t[c],t[c+1]);o.elements.push(new Br(this.constants_,g))}o.elements.push(t[t.length-1]),o.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&o.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),o.elements.push(new Br(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&B.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&B.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&B.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!B.isInput(e)&&(!t||B.isStatementInput(t)))return B.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:B.isIcon(e)?2*this.constants_.LARGE_PADDING+1:B.isHat(e)?this.constants_.NO_PADDING:B.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:B.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:B.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(B.isInput(e)&&!t){if(B.isExternalInput(e))return this.constants_.NO_PADDING;if(B.isInlineInput(e))return this.constants_.LARGE_PADDING;if(B.isStatementInput(e))return this.constants_.NO_PADDING}if(!B.isInput(e)&&t&&B.isInput(t)){if(B.isField(e)&&e.isEditable){if(B.isInlineInput(t)||B.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(B.isInlineInput(t)||B.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(B.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(B.isIcon(e)&&t&&!B.isInput(t))return this.constants_.LARGE_PADDING;if(B.isInlineInput(e)&&t&&B.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(B.isLeftSquareCorner(e)&&t){if(B.isHat(t))return this.constants_.NO_PADDING;if(B.isPreviousConnection(t))return t.notchOffset;if(B.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(B.isLeftRoundedCorner(e)&&t){if(B.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(B.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return B.isField(e)&&t&&B.isField(t)&&e.isEditable===t.isEditable||t&&B.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return B.isTopRow(e)&&B.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:B.isTopRow(e)||B.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(B.isSpacer(t))return e.yPos+t.height/2;if(B.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,B.isNextConnection(t)?e+t.height/2:e-t.height/2;if(B.isTopRow(e))return B.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return B.isField(t)||B.isIcon(t)?(n+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=B.isInlineInput(t)?n+t.height/2:n+e.height/2,n}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,n=null;for(let o=this.rows.length-1,c;c=this.rows[o];o--)t.set(c,e),B.isInputRow(c)&&(c.hasStatement&&this.alignStatementRow_(c),n&&n.hasStatement&&c.width<n.width?t.set(c,n.width):e=c.hasStatement?c.width:Math.max(e,c.width),n=c);e=0;for(let o=0,c;c=this.rows[o];o++)c.hasStatement?e=this.getDesiredRowWidth_(c):B.isSpacer(c)?c.width=Math.max(e,t.get(c)):(n=c.width,e=Math.max(e,t.get(c))-n,0<e&&this.addAlignmentPadding_(c,e),e=c.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let o=0,c;c=this.rows[o];o++){c.yPos=t,c.xPos=this.startX,t+=c.height,e=Math.max(e,c.widthWithConnectedBlocks);var n=t-this.topRow.ascenderHeight;c===this.bottomRow&&n<this.constants_.MIN_BLOCK_HEIGHT&&(n=this.constants_.MIN_BLOCK_HEIGHT-n,this.bottomRow.height+=n,t+=n),this.recordElemPositions_(c)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},I$=class extends gg{constructor(e,t,n){super(e,t,n),this.constants=n,this.colourDark="#000000",this.svgPathDark=q(V.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=q(V.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=Ws("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},b$=class extends _g{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new g$}makeRenderInfo_(e){return new E$(this,e)}makeDrawer_(e,t){return new f$(e,t)}makePathObject(e,t){return new I$(e,t,this.getConstants())}makeHighlightConstants_(){return new m$(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};mt("geras",b$);var Ql={};Ql.ConstantProvider=g$,Ql.Drawer=f$,Ql.HighlightConstantProvider=m$,Ql.Highlighter=_$,Ql.InlineInput=$$,Ql.PathObject=I$,Ql.RenderInfo=E$,Ql.Renderer=b$,Ql.StatementInput=T$;var S$=class extends Tp{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const o=this.rows[t];var n=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Br(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let c=0;c<n.length-1;c++){o.elements.push(n[c]);const g=this.getInRowSpacing_(n[c],n[c+1]);o.elements.push(new Br(this.constants_,g))}o.elements.push(n[n.length-1]),o.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&o.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),o.elements.push(new Br(this.constants_,n)))}}}getInRowSpacing_(e,t){if(!e)return t&&B.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&B.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&B.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!B.isInput(e)&&!t)return B.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:B.isIcon(e)?2*this.constants_.LARGE_PADDING+1:B.isHat(e)?this.constants_.NO_PADDING:B.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:B.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:B.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(B.isInput(e)&&!t){if(B.isExternalInput(e))return this.constants_.NO_PADDING;if(B.isInlineInput(e))return this.constants_.LARGE_PADDING;if(B.isStatementInput(e))return this.constants_.NO_PADDING}if(!B.isInput(e)&&t&&B.isInput(t)){if(B.isField(e)&&e.isEditable){if(B.isInlineInput(t)||B.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(B.isInlineInput(t)||B.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(B.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(B.isIcon(e)&&t&&!B.isInput(t))return this.constants_.LARGE_PADDING;if(B.isInlineInput(e)&&t&&B.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(B.isLeftSquareCorner(e)&&t){if(B.isHat(t))return this.constants_.NO_PADDING;if(B.isPreviousConnection(t)||B.isNextConnection(t))return t.notchOffset}return B.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:B.isField(e)&&t&&B.isField(t)&&e.isEditable===t.isEditable||t&&B.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return B.isTopRow(e)&&B.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:B.isTopRow(e)||B.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(B.isSpacer(t))return e.yPos+t.height/2;if(B.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,B.isNextConnection(t)?e+t.height/2:e-t.height/2;if(B.isTopRow(e))return B.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return n=B.isField(t)&&e.hasStatement?n+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):n+e.height/2}finalize_(){let e=0,t=0;for(var n=0;n<this.rows.length;n++){const c=this.rows[n];c.yPos=t,c.xPos=this.startX,t+=c.height,e=Math.max(e,c.widthWithConnectedBlocks);var o=t-this.topRow.ascenderHeight;c===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,t+=o),this.recordElemPositions_(c)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},O$=class extends _g{constructor(e){super(e)}makeRenderInfo_(e){return new S$(this,e)}};mt("thrasos",O$);var K_={};K_.RenderInfo=S$,K_.Renderer=O$;var lI={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},aI={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},cI=new Sh("zelos",lI,aI),uI={Classic:rg,Zelos:cI},J_=class{constructor(e,t,n){this.id_=e.toolboxitemid||fe(),this.level_=(this.parent_=n||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},sl=class extends J_{constructor(e,t,n){super(e,t,n),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(n)}}parseCategoryDef_(e){this.name_="name"in e?Nt(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),mr(this.htmlDiv_,ki.TREEITEM),xn(this.htmlDiv_,On.SELECTED,!1),xn(this.htmlDiv_,On.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),mr(this.iconDom_,ki.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&xn(this.htmlDiv_,On.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ve(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&ve(e,t),t=`${sl.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&ve(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ve(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&ve(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=sl.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle(t);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=Nt(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=xo(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Uc(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&E(e,t),(t=this.cssConfig_.openicon)&&ve(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&E(e,t),(t=this.cssConfig_.closedicon)&&ve(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const n=this.parseColour(sl.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t&&ve(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&R(this.rowDiv_,t);xn(this.htmlDiv_,On.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Qn(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){G(this.htmlDiv_)}};sl.registrationName="category",sl.nestedPadding=19,sl.borderWidth=8,sl.defaultBackgroundColour="#57e",yt(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),u(pe.TOOLBOX_ITEM,sl.registrationName,sl);var yp=class extends J_{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ve(e,t),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){G(this.htmlDiv)}};yp.registrationName="sep",yt(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),u(pe.TOOLBOX_ITEM,yp.registrationName,yp);var $d=class extends sl{constructor(e,t,n){super(e,t,n),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let n=0;n<t.length;n++){const o=t[n];!A(pe.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()===yp.registrationName&&e?(this.flyoutItems_.push(o),e=!0):(this.createToolboxItem(o),e=!1)}}}}createToolboxItem(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&Fi(e)&&(t=$d.registrationName),e=new(L(pe.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),mr(this.subcategoriesDiv_,ki.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),xn(this.htmlDiv_,On.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ve(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var n=this.cssConfig_.contents;for(n&&ve(t,n),n=0;n<e.length;n++){const o=e[n];o.init();const c=o.getDiv();if(t.appendChild(c),o.getClickTarget){let g;(g=o.getClickTarget())==null||g.setAttribute("id",o.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}xn(this.htmlDiv_,On.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let n=0;n<t.length;n++)t[n].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};$d.registrationName="collapsibleCategory",u(pe.TOOLBOX_ITEM,$d.registrationName,$d);var R$=class extends mg{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),me(this.flyout.createDom("svg"),t),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:rn.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[rn.Capability.AUTOHIDEABLE,rn.Capability.DELETE_AREA,rn.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,mr(this.contentsDiv_,ki.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),ve(e,"blocklyToolboxDiv"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return ve(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=He(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=He(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(Mn(e)||e.target===this.HtmlDiv)je().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),je().hideChaff(!0)}fn()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext();break;case"ArrowUp":t=this.selectPrevious();break;case"ArrowLeft":t=this.selectParent();break;case"ArrowRight":t=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new Eo({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?se(pe.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):se(pe.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const n=this.contents_[t];n&&n.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let n=0;n<e.length;n++)this.createToolboxItem(e[n],t);this.contentsDiv_.appendChild(t)}createToolboxItem(e,t){var n=e.kind;n.toUpperCase()==="CATEGORY"&&Fi(e)&&(n=$d.registrationName),(n=L(pe.TOOLBOX_ITEM,n.toLowerCase()))&&(e=new n(e,this),e.init(),this.addToolboxItem_(e),(n=e.getDiv())&&t.appendChild(n),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&ve(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&R(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,n=t+e.height,o=e.left;return e=o+e.width,this.toolboxPosition===Ze.TOP?new jt(-1e7,n,-1e7,1e7):this.toolboxPosition===Ze.BOTTOM?new jt(t,1e7,-1e7,1e7):this.toolboxPosition===Ze.LEFT?new jt(-1e7,1e7,-1e7,e):new jt(-1e7,1e7,o,1e7)}wouldDelete(e){return e instanceof Oo?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(Xt(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===Ze.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===Ze.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===Ze.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===Ze.TOP?e.scrollY+t.height:e.scrollY),ft(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!Pd(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),xn(this.contentsDiv_,On.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),xn(this.contentsDiv_,On.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout.show(t.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,t){const n=e&&e.getName();let o=t&&t.getName();e===t&&(o=null),e=new(ee(J.TOOLBOX_ITEM_SELECT))(n,o,this.workspace_.id),Oe(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)Rt(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),G(this.HtmlDiv))}};yt(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),u(pe.TOOLBOX,vi,R$);var hI="11.2.1",dI=Be.INPUT_VALUE,pI=Be.OUTPUT_VALUE,gI=Be.NEXT_STATEMENT,_I=Be.PREVIOUS_STATEMENT,fI=Ze.TOP,mI=Ze.BOTTOM,$I=Ze.LEFT,TI=Ze.RIGHT;pd.prototype.newBlock=function(e,t){return new au(this,e,t)},So.prototype.newBlock=function(e,t){return new Oo(this,e,t)},pd.prototype.newComment=function(e){return new st(this,e)},So.prototype.newComment=function(e){return new Hn(this,e)},So.newTrashcan=function(e){return new Im(e)},Za.prototype.newWorkspaceSvg=function(e){return new So(e)},i.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=U(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],i.Names$$module$build$src$core$names.NameType.PROCEDURE)};var ne={};return ne.ASTNode=le,ne.BasicCursor=Ip,ne.Block=au,ne.BlockSvg=Oo,ne.Blocks=Xs,ne.COLLAPSED_FIELD_NAME=Wa,ne.COLLAPSED_INPUT_NAME=wi,ne.COLLAPSE_CHARS=pm,ne.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator,ne.CollapsibleToolboxCategory=$d,ne.ComponentManager=rn,ne.Connection=Ut,ne.ConnectionChecker=gm,ne.ConnectionDB=cd,ne.ConnectionType=Be,ne.ContextMenu=on,ne.ContextMenuItems=Os,ne.ContextMenuRegistry=x,ne.Css=ep,ne.Cursor=y_,ne.DELETE_VARIABLE_ID=I_,ne.DeleteArea=mg,ne.DragTarget=Em,ne.DropDownDiv=xs,ne.Events=Me,ne.Extensions=tl,ne.Field=d,ne.FieldCheckbox=Ch,ne.FieldDropdown=lr,ne.FieldImage=vh,ne.FieldLabel=Oh,ne.FieldLabelSerializable=Fm,ne.FieldNumber=D_,ne.FieldTextInput=bg,ne.FieldVariable=Sp,ne.Flyout=Og,ne.FlyoutButton=Io,ne.FlyoutMetricsManager=Bm,ne.Generator=i.CodeGenerator$$module$build$src$core$generator,ne.Gesture=Qa,ne.Grid=o_,ne.HorizontalFlyout=Um,ne.INPUT_VALUE=dI,ne.Input=dd,ne.InsertionMarkerManager=bo,ne.InsertionMarkerPreviewer=Dm,ne.Marker=mm,ne.MarkerManager=Ja,ne.Menu=hh,ne.MenuItem=Fl,ne.MetricsManager=w_,ne.Msg=i.Msg$$module$build$src$core$msg,ne.NEXT_STATEMENT=gI,ne.Names=i.Names$$module$build$src$core$names,ne.OPPOSITE_TYPE=yh,ne.OUTPUT_VALUE=pI,ne.Options=Eo,ne.PREVIOUS_STATEMENT=_I,ne.PROCEDURE_CATEGORY_NAME=ug,ne.Procedures=Mi,ne.RENAME_VARIABLE_ID=E_,ne.RenderedConnection=Di,ne.Scrollbar=Tn,ne.ScrollbarPair=k_,ne.ShortcutItems=Jl,ne.ShortcutRegistry=Wt,ne.TOOLBOX_AT_BOTTOM=mI,ne.TOOLBOX_AT_LEFT=$I,ne.TOOLBOX_AT_RIGHT=TI,ne.TOOLBOX_AT_TOP=fI,ne.TabNavigateCursor=$m,ne.Theme=Sh,ne.ThemeManager=dm,ne.Themes=uI,ne.Toolbox=R$,ne.ToolboxCategory=sl,ne.ToolboxItem=J_,ne.ToolboxSeparator=yp,ne.Tooltip=Ss,ne.Touch=xl,ne.Trashcan=Im,ne.UnattachedFieldError=_,ne.VARIABLE_CATEGORY_NAME=fh,ne.VARIABLE_DYNAMIC_CATEGORY_NAME=T_,ne.VERSION=hI,ne.VariableMap=O_,ne.VariableModel=tu,ne.Variables=Rn,ne.VariablesDynamic=Rh,ne.VerticalFlyout=M_,ne.WidgetDiv=ge,ne.Workspace=pd,ne.WorkspaceAudio=_m,ne.WorkspaceDragger=Kf,ne.WorkspaceSvg=So,ne.Xml=ct,ne.ZoomControls=Zp,ne.blockAnimations=gp,ne.blockRendering=Yt,ne.browserEvents=jo,ne.bubbles=Rp,ne.bumpObjects=fg,ne.clipboard=bp,ne.comments=Rg,ne.common=Yn,ne.config=i.config$$module$build$src$core$config,ne.constants=Hl,ne.defineBlocksWithJsonArray=Fr,ne.dialog=Gl,ne.dragging=Op,ne.fieldRegistry=og,ne.geras=Ql,ne.getMainWorkspace=je,ne.getSelected=ze,ne.hasBubble=mi,ne.hideChaff=xd,ne.icons=ou,ne.inject=Cr,ne.inputs=hu,ne.isCopyable=Ho,ne.isDeletable=Xt,ne.isDraggable=Cs,ne.isIcon=bt,ne.isObservable=y,ne.isPaster=Nd,ne.isRenderedElement=Md,ne.isSelectable=Dd,ne.isSerializable=$r,ne.isVariableBackedParameterModel=Wr,ne.layers=ye,ne.procedures=Mi,ne.registry=Ar,ne.renderManagement=Xa,ne.serialization=rI,ne.setLocale=gh,ne.setParentContainer=Re,ne.svgResize=ft,ne.thrasos=K_,ne.uiPosition=Bl,ne.utils=An,ne.zelos=nl,ne.__namespace__=i,ne})}(Pg)),Pg.exports}var zy=n_();const Xy=Nh(zy),{ASTNode:fD,BasicCursor:mD,Block:$D,BlockSvg:TD,Blocks:ED,COLLAPSED_FIELD_NAME:ID,COLLAPSED_INPUT_NAME:bD,COLLAPSE_CHARS:SD,CodeGenerator:OD,CollapsibleToolboxCategory:RD,ComponentManager:yD,Connection:vD,ConnectionChecker:CD,ConnectionDB:LD,ConnectionType:AD,ContextMenu:kD,ContextMenuItems:wD,ContextMenuRegistry:ND,Css:MD,Cursor:DD,DELETE_VARIABLE_ID:PD,DeleteArea:xD,DragTarget:BD,DropDownDiv:UD,Events:FD,Extensions:HD,Field:GD,FieldCheckbox:VD,FieldDropdown:WD,FieldImage:zD,FieldLabel:XD,FieldLabelSerializable:jD,FieldNumber:YD,FieldTextInput:KD,FieldVariable:JD,Flyout:qD,FlyoutButton:QD,FlyoutMetricsManager:ZD,Generator:eP,Gesture:tP,Grid:nP,HorizontalFlyout:sP,INPUT_VALUE:iP,Input:rP,InsertionMarkerManager:oP,InsertionMarkerPreviewer:lP,Marker:aP,MarkerManager:cP,Menu:uP,MenuItem:hP,MetricsManager:dP,Msg:pP,NEXT_STATEMENT:gP,Names:_P,OPPOSITE_TYPE:fP,OUTPUT_VALUE:mP,Options:$P,PREVIOUS_STATEMENT:TP,PROCEDURE_CATEGORY_NAME:EP,Procedures:IP,RENAME_VARIABLE_ID:bP,RenderedConnection:SP,Scrollbar:OP,ScrollbarPair:RP,ShortcutItems:yP,ShortcutRegistry:vP,TOOLBOX_AT_BOTTOM:CP,TOOLBOX_AT_LEFT:LP,TOOLBOX_AT_RIGHT:AP,TOOLBOX_AT_TOP:kP,TabNavigateCursor:wP,Theme:NP,ThemeManager:MP,Themes:DP,Toolbox:PP,ToolboxCategory:xP,ToolboxItem:BP,ToolboxSeparator:UP,Tooltip:FP,Touch:HP,Trashcan:GP,UnattachedFieldError:VP,VARIABLE_CATEGORY_NAME:WP,VARIABLE_DYNAMIC_CATEGORY_NAME:zP,VERSION:XP,VariableMap:jP,VariableModel:YP,Variables:KP,VariablesDynamic:JP,VerticalFlyout:qP,WidgetDiv:QP,Workspace:ZP,WorkspaceAudio:ex,WorkspaceDragger:tx,WorkspaceSvg:nx,Xml:kp,ZoomControls:sx,blockAnimations:ix,blockRendering:rx,browserEvents:ox,bubbles:lx,bumpObjects:ax,clipboard:cx,comments:ux,common:hx,config:dx,constants:px,defineBlocksWithJsonArray:gx,dialog:_x,dragging:fx,fieldRegistry:mx,geras:$x,getMainWorkspace:Tx,getSelected:Ex,hasBubble:Ix,hideChaff:bx,icons:Sx,inject:jy,inputs:Ox,isCopyable:Rx,isDeletable:yx,isDraggable:vx,isIcon:Cx,isObservable:Lx,isPaster:Ax,isRenderedElement:kx,isSelectable:wx,isSerializable:Nx,isVariableBackedParameterModel:Mx,layers:Dx,procedures:Px,registry:xx,renderManagement:Bx,serialization:NE,setLocale:ME,setParentContainer:Ux,svgResize:Fx,thrasos:Hx,uiPosition:Gx,utils:Yy,zelos:Vx}=Xy;function Ky(h,l){var i=null,u=null,f=function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];u=function(){i=null,h.apply(void 0,C)},i!=null&&clearTimeout(i),i=window.setTimeout(u,l)},I=function(){i!=null&&(clearTimeout(i),u&&u())};return[f,I]}var Jg=function(){return Jg=Object.assign||function(h){for(var l,i=1,u=arguments.length;i<u;i++){l=arguments[i];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(h[f]=l[f])}return h},Jg.apply(this,arguments)};function Jy(h,l,i){try{return l.getAllBlocks(!1).length>0?void 0:(kp.domToWorkspace(Yy.xml.textToDom(h),l),!0)}catch(u){return i&&i(u),!1}}function qy(h,l,i){try{return NE.workspaces.load(h,l),!0}catch(u){return i&&i(u),!1}}var Qy=function(h){var l=h.ref,i=h.initialXml,u=h.initialJson,f=h.toolboxConfiguration,I=h.workspaceConfiguration,C=h.onWorkspaceChange,A=h.onImportXmlError,L=h.onImportError,D=h.onInject,te=h.onDispose;L=L??A;var se=yn.useState(null),Y=se[0],fe=se[1],re=yn.useState(i||null),be=re[0],oe=re[1],de=yn.useState(u||null),Le=de[0],ke=de[1],nt=yn.useState(!1),_t=nt[0],$t=nt[1],ot=yn.useState(!1),Oe=ot[0],ht=ot[1],Ct=yn.useRef(I);yn.useEffect(function(){Ct.current=I},[I]);var wn=yn.useRef(f);yn.useEffect(function(){wn.current=f,f&&Y&&!(I!=null&&I.readOnly)&&Y.updateToolbox(f)},[f,Y,I]);var En=yn.useRef(D),ln=yn.useRef(te);yn.useEffect(function(){En.current=D},[D]),yn.useEffect(function(){ln.current=te},[te]);var it=yn.useCallback(function(Ot){C&&C(Ot)},[C]);return yn.useEffect(function(){if(l.current){var Ot=jy(l.current,Jg(Jg({},Ct.current),{toolbox:wn.current}));fe(Ot),$t(!1),ht(!1),En.current&&En.current(Ot);var Ft=ln.current;return function(){Ot.dispose(),Ft&&Ft(Ot)}}},[l]),yn.useEffect(function(){Y&&!Oe&&it(Y)},[it,Oe,Y]),yn.useEffect(function(){if(Y!=null){var Ot=function(){it(Y)};return Y.addChangeListener(Ot),function(){Y.removeChangeListener(Ot)}}},[Y,it]),yn.useEffect(function(){if(Y!=null){var Ot=Ky(function(){var ee=kp.domToText(kp.workspaceToDom(Y));if(ee!==be){var Je=NE.workspaces.save(Y);ke(Je),oe(ee)}},200),Ft=Ot[0],kt=Ot[1];return Y.addChangeListener(Ft),function(){Y.removeChangeListener(Ft),kt()}}},[Y,be]),yn.useEffect(function(){if(be&&Y&&!_t){var Ot=Jy(be,Y,L);Ot||oe(null),$t(!0)}else if(Le&&Y&&!_t){var Ot=qy(Le,Y,L);Ot||ke(null);var Ft=kp.domToText(kp.workspaceToDom(Y));oe(Ft),$t(!0)}},[Le,be,Y,_t,L]),{workspace:Y,xml:be,json:Le}},pf={exports:{}},gf,IT;function Zy(){if(IT)return gf;IT=1;var h="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gf=h,gf}var _f,bT;function ev(){if(bT)return _f;bT=1;var h=Zy();function l(){}function i(){}return i.resetWarningCache=l,_f=function(){function u(C,A,L,D,te,se){if(se!==h){var Y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Y.name="Invariant Violation",Y}}u.isRequired=u;function f(){return u}var I={array:u,bigint:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:f,element:u,elementType:u,instanceOf:f,node:u,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:i,resetWarningCache:l};return I.PropTypes=I,I},_f}var ST;function tv(){return ST||(ST=1,pf.exports=ev()()),pf.exports}var nv=tv();const Ro=Nh(nv);var sv={initialXml:Ro.string,initialJson:Ro.object,toolboxConfiguration:Ro.object,workspaceConfiguration:Ro.object,className:Ro.string,onWorkspaceChange:Ro.func,onImportXmlError:Ro.func,onImportError:Ro.func,onXmlChange:Ro.func,onJsonChange:Ro.func,onInject:Ro.func,onDispose:Ro.func};function Yf(h){var l=h.initialXml,i=h.initialJson,u=h.toolboxConfiguration,f=h.workspaceConfiguration,I=h.className,C=h.onWorkspaceChange,A=h.onXmlChange,L=h.onJsonChange,D=h.onImportXmlError,te=h.onImportError,se=h.onInject,Y=h.onDispose,fe=yn.useRef(null),re=Qy({ref:fe,initialXml:l,initialJson:i,toolboxConfiguration:u,workspaceConfiguration:f,onWorkspaceChange:C,onImportXmlError:D,onImportError:te,onInject:se,onDispose:Y}),be=re.xml,oe=re.json,de=yn.useRef(A);yn.useEffect(function(){de.current=A},[A]);var Le=yn.useRef(L);return yn.useEffect(function(){Le.current=L},[L]),yn.useEffect(function(){de.current&&be&&de.current(be),Le.current&&oe&&Le.current(oe)},[be,oe]),Ae.jsx("div",{className:I,ref:fe})}Yf.propTypes=sv;var xg={exports:{}},Bg={exports:{}},iv=Bg.exports,OT;function rv(){return OT||(OT=1,function(h,l){(function(i,u){h.exports=u()})(iv,function(){var i=i||{Msg:Object.create(null)};return i.Msg.ADD_COMMENT="Add Comment",i.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",i.Msg.CHANGE_VALUE_TITLE="Change value:",i.Msg.CLEAN_UP="Clean up Blocks",i.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",i.Msg.COLLAPSE_ALL="Collapse Blocks",i.Msg.COLLAPSE_BLOCK="Collapse Block",i.Msg.COLOUR_BLEND_COLOUR1="colour 1",i.Msg.COLOUR_BLEND_COLOUR2="colour 2",i.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",i.Msg.COLOUR_BLEND_RATIO="ratio",i.Msg.COLOUR_BLEND_TITLE="blend",i.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",i.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",i.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",i.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",i.Msg.COLOUR_RANDOM_TITLE="random colour",i.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",i.Msg.COLOUR_RGB_BLUE="blue",i.Msg.COLOUR_RGB_GREEN="green",i.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",i.Msg.COLOUR_RGB_RED="red",i.Msg.COLOUR_RGB_TITLE="colour with",i.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",i.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",i.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",i.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",i.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",i.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",i.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",i.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",i.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",i.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",i.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",i.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",i.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",i.Msg.CONTROLS_IF_MSG_ELSE="else",i.Msg.CONTROLS_IF_MSG_ELSEIF="else if",i.Msg.CONTROLS_IF_MSG_IF="if",i.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",i.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",i.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",i.Msg.CONTROLS_REPEAT_INPUT_DO="do",i.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",i.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",i.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",i.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",i.Msg.DELETE_BLOCK="Delete Block",i.Msg.DELETE_VARIABLE="Delete the '%1' variable",i.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",i.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",i.Msg.DIALOG_CANCEL="Cancel",i.Msg.DIALOG_OK="OK",i.Msg.DISABLE_BLOCK="Disable Block",i.Msg.DUPLICATE_BLOCK="Duplicate",i.Msg.DUPLICATE_COMMENT="Duplicate Comment",i.Msg.ENABLE_BLOCK="Enable Block",i.Msg.EXPAND_ALL="Expand Blocks",i.Msg.EXPAND_BLOCK="Expand Block",i.Msg.EXTERNAL_INPUTS="External Inputs",i.Msg.HELP="Help",i.Msg.INLINE_INPUTS="Inline Inputs",i.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",i.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",i.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",i.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",i.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",i.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",i.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",i.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",i.Msg.LISTS_GET_INDEX_FIRST="first",i.Msg.LISTS_GET_INDEX_FROM_END="# from end",i.Msg.LISTS_GET_INDEX_FROM_START="#",i.Msg.LISTS_GET_INDEX_GET="get",i.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",i.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",i.Msg.LISTS_GET_INDEX_LAST="last",i.Msg.LISTS_GET_INDEX_RANDOM="random",i.Msg.LISTS_GET_INDEX_REMOVE="remove",i.Msg.LISTS_GET_INDEX_TAIL="",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",i.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",i.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",i.Msg.LISTS_GET_SUBLIST_END_LAST="to last",i.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",i.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",i.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",i.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",i.Msg.LISTS_GET_SUBLIST_TAIL="",i.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",i.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",i.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",i.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",i.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",i.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",i.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",i.Msg.LISTS_INLIST="in list",i.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",i.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",i.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",i.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",i.Msg.LISTS_LENGTH_TITLE="length of %1",i.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",i.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",i.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",i.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",i.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",i.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",i.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",i.Msg.LISTS_SET_INDEX_INPUT_TO="as",i.Msg.LISTS_SET_INDEX_INSERT="insert at",i.Msg.LISTS_SET_INDEX_SET="set",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",i.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",i.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",i.Msg.LISTS_SORT_ORDER_DESCENDING="descending",i.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",i.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",i.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",i.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",i.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",i.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",i.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",i.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",i.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",i.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",i.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",i.Msg.LOGIC_BOOLEAN_FALSE="false",i.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",i.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",i.Msg.LOGIC_BOOLEAN_TRUE="true",i.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",i.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",i.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",i.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",i.Msg.LOGIC_NEGATE_TITLE="not %1",i.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",i.Msg.LOGIC_NULL="null",i.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",i.Msg.LOGIC_NULL_TOOLTIP="Returns null.",i.Msg.LOGIC_OPERATION_AND="and",i.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",i.Msg.LOGIC_OPERATION_OR="or",i.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",i.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",i.Msg.LOGIC_TERNARY_CONDITION="test",i.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",i.Msg.LOGIC_TERNARY_IF_FALSE="if false",i.Msg.LOGIC_TERNARY_IF_TRUE="if true",i.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",i.Msg.MATH_ADDITION_SYMBOL="+",i.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",i.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",i.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",i.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",i.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",i.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",i.Msg.MATH_CHANGE_TITLE="change %1 by %2",i.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",i.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",i.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",i.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",i.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",i.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",i.Msg.MATH_DIVISION_SYMBOL="÷",i.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",i.Msg.MATH_IS_EVEN="is even",i.Msg.MATH_IS_NEGATIVE="is negative",i.Msg.MATH_IS_ODD="is odd",i.Msg.MATH_IS_POSITIVE="is positive",i.Msg.MATH_IS_PRIME="is prime",i.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",i.Msg.MATH_IS_WHOLE="is whole",i.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",i.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",i.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",i.Msg.MATH_MULTIPLICATION_SYMBOL="×",i.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",i.Msg.MATH_NUMBER_TOOLTIP="A number.",i.Msg.MATH_ONLIST_HELPURL="",i.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",i.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",i.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",i.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",i.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",i.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",i.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",i.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",i.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",i.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",i.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",i.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",i.Msg.MATH_POWER_SYMBOL="^",i.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",i.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",i.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",i.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",i.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",i.Msg.MATH_ROUND_OPERATOR_ROUND="round",i.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",i.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",i.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",i.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",i.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",i.Msg.MATH_SINGLE_OP_ROOT="square root",i.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",i.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",i.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",i.Msg.MATH_SUBTRACTION_SYMBOL="-",i.Msg.MATH_TRIG_ACOS="acos",i.Msg.MATH_TRIG_ASIN="asin",i.Msg.MATH_TRIG_ATAN="atan",i.Msg.MATH_TRIG_COS="cos",i.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",i.Msg.MATH_TRIG_SIN="sin",i.Msg.MATH_TRIG_TAN="tan",i.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",i.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",i.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",i.Msg.NEW_NUMBER_VARIABLE="Create number variable...",i.Msg.NEW_STRING_VARIABLE="Create string variable...",i.Msg.NEW_VARIABLE="Create variable...",i.Msg.NEW_VARIABLE_TITLE="New variable name:",i.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",i.Msg.ORDINAL_NUMBER_SUFFIX="",i.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",i.Msg.PROCEDURES_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",i.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",i.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",i.Msg.PROCEDURES_CREATE_DO="Create '%1'",i.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",i.Msg.PROCEDURES_DEFNORETURN_DO="",i.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",i.Msg.PROCEDURES_DEFNORETURN_TITLE="to",i.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",i.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFRETURN_RETURN="return",i.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",i.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",i.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",i.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",i.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",i.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",i.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",i.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",i.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",i.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",i.Msg.REDO="Redo",i.Msg.REMOVE_COMMENT="Remove Comment",i.Msg.RENAME_VARIABLE="Rename variable...",i.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",i.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_APPEND_TITLE="to %1 append text %2",i.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",i.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",i.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",i.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",i.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",i.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",i.Msg.TEXT_CHARAT_FIRST="get first letter",i.Msg.TEXT_CHARAT_FROM_END="get letter # from end",i.Msg.TEXT_CHARAT_FROM_START="get letter #",i.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",i.Msg.TEXT_CHARAT_LAST="get last letter",i.Msg.TEXT_CHARAT_RANDOM="get random letter",i.Msg.TEXT_CHARAT_TAIL="",i.Msg.TEXT_CHARAT_TITLE="in text %1 %2",i.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",i.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",i.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",i.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",i.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",i.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",i.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",i.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",i.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",i.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",i.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",i.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",i.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",i.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",i.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",i.Msg.TEXT_GET_SUBSTRING_TAIL="",i.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",i.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",i.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",i.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",i.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",i.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",i.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",i.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",i.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",i.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",i.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",i.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",i.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_LENGTH_TITLE="length of %1",i.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",i.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",i.Msg.TEXT_PRINT_TITLE="print %1",i.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",i.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",i.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",i.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",i.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",i.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",i.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",i.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",i.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",i.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",i.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",i.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",i.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",i.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",i.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",i.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",i.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",i.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",i.Msg.TODAY="Today",i.Msg.UNDO="Undo",i.Msg.UNNAMED_KEY="unnamed",i.Msg.VARIABLES_DEFAULT_NAME="item",i.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",i.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",i.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",i.Msg.VARIABLES_SET="set %1 to %2",i.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",i.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",i.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",i.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",i.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",i.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",i.Msg.CONTROLS_FOREACH_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_FOR_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=i.Msg.CONTROLS_IF_MSG_ELSEIF,i.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=i.Msg.CONTROLS_IF_MSG_ELSE,i.Msg.CONTROLS_IF_IF_TITLE_IF=i.Msg.CONTROLS_IF_MSG_IF,i.Msg.CONTROLS_IF_MSG_THEN=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.LISTS_CREATE_WITH_ITEM_TITLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.MATH_CHANGE_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.PROCEDURES_DEFRETURN_COMMENT=i.Msg.PROCEDURES_DEFNORETURN_COMMENT,i.Msg.PROCEDURES_DEFRETURN_DO=i.Msg.PROCEDURES_DEFNORETURN_DO,i.Msg.PROCEDURES_DEFRETURN_PROCEDURE=i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,i.Msg.PROCEDURES_DEFRETURN_TITLE=i.Msg.PROCEDURES_DEFNORETURN_TITLE,i.Msg.TEXT_APPEND_VARIABLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.COLOUR_HUE="20",i.Msg.LISTS_HUE="260",i.Msg.LOGIC_HUE="210",i.Msg.LOOPS_HUE="120",i.Msg.MATH_HUE="230",i.Msg.PROCEDURES_HUE="290",i.Msg.TEXTS_HUE="160",i.Msg.VARIABLES_DYNAMIC_HUE="310",i.Msg.VARIABLES_HUE="330",i.Msg})}(Bg)),Bg.exports}var Ug={exports:{}},ov=Ug.exports,RT;function DE(){return RT||(RT=1,function(h,l){(function(i,u){h.exports=u(n_())})(ov,function(i){var u=i.__namespace__,f=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),I={customContextMenu:function(E){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(F={text:u.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:C(this)},G=this.getField("VAR").getText(),G={text:u.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",G),enabled:!0,callback:A(this)},E.unshift(F),E.unshift(G));else{if(this.type==="variables_get_dynamic")var R="variables_set_dynamic",F=u.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else R="variables_get_dynamic",F=u.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var G=this.getField("VAR");R={type:R,fields:{VAR:G.saveState(!0)}},E.push({enabled:0<this.workspace.remainingCapacity(),text:F.replace("%1",G.getText()),callback:u.callbackFactory$$module$build$src$core$contextmenu(this,R)})}},onchange:function(E){E=this.getFieldValue("VAR"),E=u.getVariable$$module$build$src$core$variables(this.workspace,E),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(E.type):this.getInput("VALUE").connection.setCheck(E.type)}},C=function(E){return function(){const R=E.workspace,F=E.getField("VAR").getVariable();u.renameVariable$$module$build$src$core$variables(R,F)}},A=function(E){return function(){const R=E.workspace,F=E.getField("VAR").getVariable();R.deleteVariableById(F.getId()),R.refreshToolboxSelection()}};u.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",I),u.defineBlocks$$module$build$src$core$common(f);var L={blocks:f},D=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),te={customContextMenu:function(E){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(F={text:u.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:se(this)},G=this.getField("VAR").getText(),G={text:u.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",G),enabled:!0,callback:Y(this)},E.unshift(F),E.unshift(G));else{if(this.type==="variables_get")var R="variables_set",F=u.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else R="variables_get",F=u.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var G=this.getField("VAR");R={type:R,fields:{VAR:G.saveState(!0)}},E.push({enabled:0<this.workspace.remainingCapacity(),text:F.replace("%1",G.getText()),callback:u.callbackFactory$$module$build$src$core$contextmenu(this,R)})}}},se=function(E){return function(){const R=E.workspace,F=E.getField("VAR").getVariable();u.renameVariable$$module$build$src$core$variables(R,F)}},Y=function(E){return function(){const R=E.workspace,F=E.getField("VAR").getVariable();R.deleteVariableById(F.getId()),R.refreshToolboxSelection()}};u.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",te),u.defineBlocks$$module$build$src$core$common(D);var fe={blocks:D},re=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),be={init:function(){this.WHERE_OPTIONS_1=[[u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const E=R=>{const F=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+R]});return F.setValidator(function(G){const me=this.getValue();G=G==="FROM_START"||G==="FROM_END",G!==(me==="FROM_START"||me==="FROM_END")&&this.getSourceBlock().updateAt_(R,G)}),F};this.appendDummyInput("WHERE1_INPUT").appendField(E(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(E(2),"WHERE2"),this.appendDummyInput("AT2"),u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");var R=this.getInput("AT1")instanceof u.ValueInput$$module$build$src$core$inputs$value_input;return E.setAttribute("at1",`${R}`),R=this.getInput("AT2")instanceof u.ValueInput$$module$build$src$core$inputs$value_input,E.setAttribute("at2",`${R}`),E},domToMutation:function(E){const R=E.getAttribute("at1")==="true";E=E.getAttribute("at2")==="true",this.updateAt_(1,R),this.updateAt_(2,E)},updateAt_:function(E,R){this.removeInput("AT"+E),this.removeInput("ORDINAL"+E,!0),R?(this.appendValueInput("AT"+E).setCheck("Number"),u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+E).appendField(u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+E),E===2&&u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(u.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),E===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};re.text_getSubstring=be,re.text_changeCase={init:function(){const E=[[u.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[u.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[u.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(u.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:E}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(u.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},re.text_trim={init:function(){const E=[[u.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[u.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[u.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(u.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:E}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(u.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},re.text_print={init:function(){this.jsonInit({message0:u.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:u.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:u.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var oe={updateType_:function(E){this.outputConnection.setCheck(E==="NUMBER"?"Number":"String")},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");return E.setAttribute("type",this.getFieldValue("TYPE")),E},domToMutation:function(E){this.updateType_(E.getAttribute("type"))}};re.text_prompt_ext=Object.assign({},oe,{init:function(){var E=[[u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(u.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:E}),E.setValidator(R=>{this.updateType_(R)}),this.appendValueInput("TEXT").appendField(E,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),re.text_prompt=Object.assign({},oe,{init:function(){this.mixin(de);var E=[[u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(u.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:E}),E.setValidator(R=>{this.updateType_(R)}),this.appendDummyInput().appendField(E,"TYPE").appendField(this.newQuote_(!0)).appendField(u.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:u.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),re.text_count={init:function(){this.jsonInit({message0:u.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:u.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:u.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},re.text_replace={init:function(){this.jsonInit({message0:u.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:u.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:u.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},re.text_reverse={init:function(){this.jsonInit({message0:u.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:u.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:u.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var de={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(E){for(let R=0,F;F=this.inputList[R];R++)for(let G=0,me;me=F.fieldRow[G];G++)if(E===me.name){F.insertFieldAt(G,this.newQuote_(!0)),F.insertFieldAt(G+2,this.newQuote_(!1));return}console.warn('field named "'+E+'" not found in '+this.toDevString())},newQuote_:function(E){return E=this.RTL?!E:E,u.fromJson$$module$build$src$core$field_registry({type:"field_image",src:E?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:E?"“":"”"})}},Le=function(){this.mixin(de),this.quoteField_("TEXT")},ke={itemCount_:0,mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");return E.setAttribute("items",`${this.itemCount_}`),E},domToMutation:function(E){this.itemCount_=parseInt(E.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(E){this.itemCount_=E.itemCount,this.updateShape_()},decompose:function(E){const R=E.newBlock("text_create_join_container");R.initSvg();let F=R.getInput("STACK").connection;for(let G=0;G<this.itemCount_;G++){const me=E.newBlock("text_create_join_item");me.initSvg(),F.connect(me.previousConnection),F=me.nextConnection}return R},compose:function(E){var R=E.getInputTargetBlock("STACK");for(E=[];R;)R.isInsertionMarker()||E.push(R.valueConnection_),R=R.getNextBlock();for(R=0;R<this.itemCount_;R++){const F=this.getInput("ADD"+R).connection.targetConnection;F&&!E.includes(F)&&F.disconnect()}for(this.itemCount_=E.length,this.updateShape_(),R=0;R<this.itemCount_;R++){let F;(F=E[R])==null||F.reconnect(this,"ADD"+R)}},saveConnections:function(E){E=E.getInputTargetBlock("STACK");let R=0;for(;E;){if(E.isInsertionMarker()){E=E.getNextBlock();continue}const F=this.getInput("ADD"+R);E.valueConnection_=F&&F.connection.targetConnection,E=E.getNextBlock(),R++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var E=0;E<this.itemCount_;E++)if(!this.getInput("ADD"+E)){const R=this.appendValueInput("ADD"+E).setAlign(u.Align$$module$build$src$core$inputs$align.RIGHT);E===0&&R.appendField(u.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(E=this.itemCount_;this.getInput("ADD"+E);E++)this.removeInput("ADD"+E)}},nt=function(){this.mixin(de),this.itemCount_=2,this.updateShape_(),this.setMutator(new u.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};u.register$$module$build$src$core$extensions("text_append_tooltip",u.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var _t=function(){this.setTooltip(()=>u.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},$t={isAt_:!1,mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");return E.setAttribute("at",`${this.isAt_}`),E},domToMutation:function(E){E=E.getAttribute("at")!=="false",this.updateAt_(E)},updateAt_:function(E){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),E&&(this.appendValueInput("AT").setCheck("Number"),u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),u.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(u.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=E}},ot=function(){this.getField("WHERE").setValidator(function(E){E=E==="FROM_START"||E==="FROM_END";const R=this.getSourceBlock();E!==R.isAt_&&R.updateAt_(E)}),this.updateAt_(!0),this.setTooltip(()=>{var E=this.getFieldValue("WHERE");let R=u.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(E==="FROM_START"||E==="FROM_END")&&(E=E==="FROM_START"?u.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:u.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(R+="  "+E.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),R})};u.register$$module$build$src$core$extensions("text_indexOf_tooltip",_t),u.register$$module$build$src$core$extensions("text_quotes",Le),u.registerMixin$$module$build$src$core$extensions("quote_image_mixin",de),u.registerMutator$$module$build$src$core$extensions("text_join_mutator",ke,nt),u.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",$t,ot),u.defineBlocks$$module$build$src$core$common(re);var Oe={blocks:re},ht={},Ct={setStatements_:function(E){this.hasStatements_!==E&&(E?(this.appendStatementInput("STACK").appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=E)},updateParams_:function(){let E="";this.arguments_.length&&(E=u.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),u.disable$$module$build$src$core$events$utils();try{this.setFieldValue(E,"PARAMS")}finally{u.enable$$module$build$src$core$events$utils()}},mutationToDom:function(E){const R=u.createElement$$module$build$src$core$utils$xml("mutation");E&&R.setAttribute("name",this.getFieldValue("NAME"));for(let F=0;F<this.argumentVarModels_.length;F++){const G=u.createElement$$module$build$src$core$utils$xml("arg"),me=this.argumentVarModels_[F];G.setAttribute("name",me.name),G.setAttribute("varid",me.getId()),E&&this.paramIds_&&G.setAttribute("paramId",this.paramIds_[F]),R.appendChild(G)}return this.hasStatements_||R.setAttribute("statements","false"),R},domToMutation:function(E){this.arguments_=[],this.argumentVarModels_=[];for(let F=0,G;G=E.childNodes[F];F++)if(G.nodeName.toLowerCase()==="arg"){var R=G;const me=R.getAttribute("name");R=R.getAttribute("varid")||R.getAttribute("varId"),this.arguments_.push(me),R=u.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,R,me,""),R!==null?this.argumentVarModels_.push(R):console.log(`Failed to create a variable named "${me}", ignoring.`)}this.updateParams_(),u.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(E.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const E=Object.create(null);if(this.argumentVarModels_.length){E.params=[];for(let R=0;R<this.argumentVarModels_.length;R++)E.params.push({name:this.argumentVarModels_[R].name,id:this.argumentVarModels_[R].getId()})}return this.hasStatements_||(E.hasStatements=!1),E},loadExtraState:function(E){if(this.arguments_=[],this.argumentVarModels_=[],E.params)for(let F=0;F<E.params.length;F++){var R=E.params[F];R=u.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,R.id,R.name,""),this.arguments_.push(R.name),this.argumentVarModels_.push(R)}this.updateParams_(),u.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(E.hasStatements!==!1)},decompose:function(E){const R=u.createElement$$module$build$src$core$utils$xml("block");R.setAttribute("type","procedures_mutatorcontainer");var F=u.createElement$$module$build$src$core$utils$xml("statement");F.setAttribute("name","STACK"),R.appendChild(F);for(let me=0;me<this.arguments_.length;me++){const wt=u.createElement$$module$build$src$core$utils$xml("block");wt.setAttribute("type","procedures_mutatorarg");var G=u.createElement$$module$build$src$core$utils$xml("field");G.setAttribute("name","NAME");const Gn=u.createTextNode$$module$build$src$core$utils$xml(this.arguments_[me]);G.appendChild(Gn),wt.appendChild(G),G=u.createElement$$module$build$src$core$utils$xml("next"),wt.appendChild(G),F.appendChild(wt),F=G}return E=u.domToBlock$$module$build$src$core$xml(R,E),this.type==="procedures_defreturn"?E.setFieldValue(this.hasStatements_,"STATEMENTS"):E.removeInput("STATEMENT_INPUT"),u.mutateCallers$$module$build$src$core$procedures(this),E},compose:function(E){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let R=E.getInputTargetBlock("STACK");for(;R&&!R.isInsertionMarker();){var F=R.getFieldValue("NAME");this.arguments_.push(F),F=this.workspace.getVariable(F,""),this.argumentVarModels_.push(F),this.paramIds_.push(R.id),R=R.nextConnection&&R.nextConnection.targetBlock()}if(this.updateParams_(),u.mutateCallers$$module$build$src$core$procedures(this),E=E.getFieldValue("STATEMENTS"),E!==null&&(E=E==="TRUE",this.hasStatements_!==E))if(E){this.setStatements_(!0);var G;(G=this.statementConnection_)==null||G.reconnect(this,"STACK"),this.statementConnection_=null}else G=this.getInput("STACK").connection,(this.statementConnection_=G.targetConnection)&&(G=G.targetBlock(),G.unplug(),G.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(E,R){var F=this.workspace.getVariableById(E);if(F.type===""){F=F.name,R=this.workspace.getVariableById(R);var G=!1;for(let me=0;me<this.argumentVarModels_.length;me++)this.argumentVarModels_[me].getId()===E&&(this.arguments_[me]=R.name,this.argumentVarModels_[me]=R,G=!0);G&&(this.displayRenamedVar_(F,R.name),u.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(E){const R=E.name;let F=!1,G;for(let me=0;me<this.argumentVarModels_.length;me++)this.argumentVarModels_[me].getId()===E.getId()&&(G=this.arguments_[me],this.arguments_[me]=R,F=!0);F&&(this.displayRenamedVar_(G,R),u.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(E,R){this.updateParams_();var F=this.getIcon(u.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(F&&F.bubbleIsVisible()){F=F.getWorkspace().getAllBlocks(!1);for(let G=0,me;me=F[G];G++)me.type==="procedures_mutatorarg"&&u.Names$$module$build$src$core$names.equals(E,me.getFieldValue("NAME"))&&me.setFieldValue(R,"NAME")}},customContextMenu:function(E){if(!this.isInFlyout){var R=this.getFieldValue("NAME"),F={type:this.callType_,extraState:{name:R,params:this.arguments_}};if(E.push({enabled:!0,text:u.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",R),callback:u.callbackFactory$$module$build$src$core$contextmenu(this,F)}),!this.isCollapsed())for(R=0;R<this.argumentVarModels_.length;R++){F=this.argumentVarModels_[R];const G={type:"variables_get",fields:{VAR:{name:F.name,id:F.getId(),type:F.type}}};E.push({enabled:!0,text:u.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",F.name),callback:u.callbackFactory$$module$build$src$core$contextmenu(this,G)})}}}};ht.procedures_defnoreturn=Object.assign({},Ct,{init:function(){var E=u.findLegalName$$module$build$src$core$procedures("",this);E=u.fromJson$$module$build$src$core$field_registry({type:"field_input",text:E}),E.setValidator(u.rename$$module$build$src$core$procedures),E.setSpellcheck(!1),this.appendDummyInput().appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(E,"NAME").appendField("","PARAMS"),this.setMutator(new u.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ht.procedures_defreturn=Object.assign({},Ct,{init:function(){var E=u.findLegalName$$module$build$src$core$procedures("",this);E=u.fromJson$$module$build$src$core$field_registry({type:"field_input",text:E}),E.setValidator(u.rename$$module$build$src$core$procedures),E.setSpellcheck(!1),this.appendDummyInput().appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(E,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(u.Align$$module$build$src$core$inputs$align.RIGHT).appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new u.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var wn={init:function(){this.appendDummyInput().appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(u.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(u.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ht.procedures_mutatorcontainer=wn;var En={init:function(){const E=u.fromJson$$module$build$src$core$field_registry({type:"field_input",text:u.DEFAULT_ARG$$module$build$src$core$procedures});E.setValidator(this.validator_),E.oldShowEditorFn_=E.showEditor_,E.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(E,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(u.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,E.onFinishEditing_=this.deleteIntermediateVars_,E.createdVariables_=[],E.onFinishEditing_("x")},validator_:function(E){var R=this.getSourceBlock();const F=R.workspace.getRootWorkspace();if(E=E.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!E)return null;const G=(R.workspace.targetWorkspace||R.workspace).getAllBlocks(!1),me=E.toLowerCase();for(let wt=0;wt<G.length;wt++){if(G[wt].id===this.getSourceBlock().id)continue;const Gn=G[wt].getFieldValue("NAME");if(Gn&&Gn.toLowerCase()===me)return null}return R.isInFlyout||((R=F.getVariable(E,""))&&R.name!==E&&F.renameVariableById(R.getId(),E),R||(R=F.createVariable(E,""))&&this.createdVariables_&&this.createdVariables_.push(R)),E},deleteIntermediateVars_:function(E){const R=this.getSourceBlock().workspace.getRootWorkspace();if(R)for(let F=0;F<this.createdVariables_.length;F++){const G=this.createdVariables_[F];G.name!==E&&R.deleteVariableById(G.getId())}}};ht.procedures_mutatorarg=En;var ln="DISABLED_PROCEDURE_DEFINITION",it={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(E,R){u.Names$$module$build$src$core$names.equals(E,this.getProcedureCall())&&(this.setFieldValue(R,"NAME"),this.setTooltip((this.outputConnection?u.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:u.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",R)))},setProcedureParameters_:function(E,R){var F=u.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((F=(F=F&&F.getIcon(u.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&F.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),E.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=R;else{if(R.length!==E.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let me=0;me<this.arguments_.length;me++){var G=this.getInput("ARG"+me);G&&(G=G.connection.targetConnection,this.quarkConnections_[this.quarkIds_[me]]=G,F&&G&&!R.includes(this.quarkIds_[me])&&(G.disconnect(),G.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(E),this.argumentVarModels_=[],E=0;E<this.arguments_.length;E++)F=u.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[E],""),this.argumentVarModels_.push(F);if(this.updateShape_(),this.quarkIds_=R){for(R=0;R<this.arguments_.length;R++)if(E=this.quarkIds_[R],E in this.quarkConnections_){let me;(me=this.quarkConnections_[E])!=null&&me.reconnect(this,"ARG"+R)||delete this.quarkConnections_[E]}}}},updateShape_:function(){for(var E=0;E<this.arguments_.length;E++){var R=this.getField("ARGNAME"+E);if(R){u.disable$$module$build$src$core$events$utils();try{R.setValue(this.arguments_[E])}finally{u.enable$$module$build$src$core$events$utils()}}else R=u.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[E]}),this.appendValueInput("ARG"+E).setAlign(u.Align$$module$build$src$core$inputs$align.RIGHT).appendField(R,"ARGNAME"+E)}for(E=this.arguments_.length;this.getInput("ARG"+E);E++)this.removeInput("ARG"+E);(E=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||E.appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&E.removeField("WITH"))},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");E.setAttribute("name",this.getProcedureCall());for(let R=0;R<this.arguments_.length;R++){const F=u.createElement$$module$build$src$core$utils$xml("arg");F.setAttribute("name",this.arguments_[R]),E.appendChild(F)}return E},domToMutation:function(E){var R=E.getAttribute("name");this.renameProcedure(this.getProcedureCall(),R),R=[];const F=[];for(let G=0,me;me=E.childNodes[G];G++)me.nodeName.toLowerCase()==="arg"&&(R.push(me.getAttribute("name")),F.push(me.getAttribute("paramId")));this.setProcedureParameters_(R,F)},saveExtraState:function(){const E=Object.create(null);return E.name=this.getProcedureCall(),this.arguments_.length&&(E.params=this.arguments_),E},loadExtraState:function(E){if(this.renameProcedure(this.getProcedureCall(),E.name),E=E.params){const R=[];R.length=E.length,R.fill(null),this.setProcedureParameters_(E,R)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(E){if(this.workspace&&!this.workspace.isFlyout&&E.recordUndo)if(E.type===u.BLOCK_CREATE$$module$build$src$core$events$events&&E.ids.includes(this.id)){var R=this.getProcedureCall(),F=u.getDefinition$$module$build$src$core$procedures(R,this.workspace);if(!F||F.type===this.defType_&&JSON.stringify(F.getVars())===JSON.stringify(this.arguments_)||(F=null),F)F.isEnabled()||(this.setDisabledReason(!0,ln),this.setWarningText(u.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",R)));else{u.setGroup$$module$build$src$core$events$utils(E.group),E=u.createElement$$module$build$src$core$utils$xml("xml"),R=u.createElement$$module$build$src$core$utils$xml("block"),R.setAttribute("type",this.defType_),F=this.getRelativeToSurfaceXY();var G=F.y+2*u.config$$module$build$src$core$config.snapRadius;R.setAttribute("x",`${F.x+u.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),R.setAttribute("y",`${G}`),F=this.mutationToDom(),R.appendChild(F),F=u.createElement$$module$build$src$core$utils$xml("field"),F.setAttribute("name","NAME"),G=this.getProcedureCall();const me=u.findLegalName$$module$build$src$core$procedures(G,this);G!==me&&this.renameProcedure(G,me),F.appendChild(u.createTextNode$$module$build$src$core$utils$xml(G)),R.appendChild(F),E.appendChild(R),u.domToWorkspace$$module$build$src$core$xml(E,this.workspace),u.setGroup$$module$build$src$core$events$utils(!1)}}else E.type===u.BLOCK_DELETE$$module$build$src$core$events$events?(R=this.getProcedureCall(),u.getDefinition$$module$build$src$core$procedures(R,this.workspace)||(u.setGroup$$module$build$src$core$events$utils(E.group),this.dispose(!0),u.setGroup$$module$build$src$core$events$utils(!1))):E.type===u.BLOCK_CHANGE$$module$build$src$core$events$events&&E.element==="disabled"&&(R=this.getProcedureCall(),(G=u.getDefinition$$module$build$src$core$procedures(R,this.workspace))&&G.id===E.blockId&&((F=u.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),u.setGroup$$module$build$src$core$events$utils(E.group),E=G.isEnabled(),this.setDisabledReason(!E,ln),this.setWarningText(E?null:u.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",R)),u.setGroup$$module$build$src$core$events$utils(F)))},customContextMenu:function(E){if(this.workspace.isMovable()){var R=this.getProcedureCall(),F=this.workspace;E.push({enabled:!0,text:u.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const G=u.getDefinition$$module$build$src$core$procedures(R,F);G&&(F.centerOnBlock(G.id),u.setSelected$$module$build$src$core$common(G))}})}}};ht.procedures_callnoreturn=Object.assign({},it,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(u.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),ht.procedures_callreturn=Object.assign({},it,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(u.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var Ot="UNPARENTED_IFRETURN",Ft={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(u.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(u.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(u.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");return E.setAttribute("value",String(Number(this.hasReturnValue_))),E},domToMutation:function(E){this.hasReturnValue_=E.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(E){if(!(this.workspace.isDragging&&this.workspace.isDragging()||E.type!==u.BLOCK_MOVE$$module$build$src$core$events$events&&E.type!==u.BLOCK_CREATE$$module$build$src$core$events$events)){E=!1;var R=this;do{if(this.FUNCTION_TYPES.includes(R.type)){E=!0;break}R=R.getSurroundParent()}while(R);if(E?(R.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):R.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(u.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{u.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!E,Ot)}finally{u.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ht.procedures_ifreturn=Ft,u.defineBlocks$$module$build$src$core$common(ht);var kt={blocks:ht},ee=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),Je={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};u.register$$module$build$src$core$extensions("math_op_tooltip",u.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Je));var j={mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation"),R=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return E.setAttribute("divisor_input",String(R)),E},domToMutation:function(E){E=E.getAttribute("divisor_input")==="true",this.updateShape_(E)},updateShape_:function(E){const R=this.getInput("DIVISOR");E?R||this.appendValueInput("DIVISOR").setCheck("Number"):R&&this.removeInput("DIVISOR")}},z=function(){this.getField("PROPERTY").setValidator(function(E){E=E==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(E)})};u.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",j,z),u.register$$module$build$src$core$extensions("math_change_tooltip",u.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var _e={updateType_:function(E){E==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");return E.setAttribute("op",this.getFieldValue("OP")),E},domToMutation:function(E){if(E=E.getAttribute("op"),E===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(E)}},rt=function(){this.getField("OP").setValidator((function(E){this.updateType_(E)}).bind(this))};u.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",_e,rt),u.defineBlocks$$module$build$src$core$common(ee);var je={blocks:ee},lt=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),ze={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};u.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",u.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",ze));var Et={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};u.register$$module$build$src$core$extensions("controls_flow_tooltip",u.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Et));var Re={customContextMenu:function(E){if(!this.isInFlyout){var R=this.getField("VAR"),F=R.getVariable().name;this.isCollapsed()||F===null||(R={type:"variables_get",fields:{VAR:R.saveState(!0)}},E.push({enabled:!0,text:u.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",F),callback:u.callbackFactory$$module$build$src$core$contextmenu(this,R)}))}}};u.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Re),u.register$$module$build$src$core$extensions("controls_for_tooltip",u.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),u.register$$module$build$src$core$extensions("controls_forEach_tooltip",u.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var ft=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),_n="CONTROL_FLOW_NOT_IN_LOOP",hr={getSurroundLoop:function(){let E=this;do{if(ft.has(E.type))return E;E=E.getSurroundParent()}while(E);return null},onchange:function(E){const R=this.workspace;if(R.isDragging&&!R.isDragging()&&(E.type===u.BLOCK_MOVE$$module$build$src$core$events$events||E.type===u.BLOCK_CREATE$$module$build$src$core$events$events)&&(E=!!this.getSurroundLoop(),this.setWarningText(E?null:u.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{u.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!E,_n)}finally{u.setRecordUndo$$module$build$src$core$events$utils(!0)}}};u.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",hr),u.defineBlocks$$module$build$src$core$common(lt);var Fr={blocks:lt,loopTypes:ft},ds=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),xi={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};u.register$$module$build$src$core$extensions("logic_op_tooltip",u.buildTooltipForDropdown$$module$build$src$core$extensions("OP",xi));var Nn={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const E=u.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&E.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&E.setAttribute("else","1"),E},domToMutation:function(E){this.elseifCount_=parseInt(E.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(E.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const E=Object.create(null);return this.elseifCount_&&(E.elseIfCount=this.elseifCount_),this.elseCount_&&(E.hasElse=!0),E},loadExtraState:function(E){this.elseifCount_=E.elseIfCount||0,this.elseCount_=E.hasElse?1:0,this.updateShape_()},decompose:function(E){const R=E.newBlock("controls_if_if");R.initSvg();let F=R.nextConnection;for(let G=1;G<=this.elseifCount_;G++){const me=E.newBlock("controls_if_elseif");me.initSvg(),F.connect(me.previousConnection),F=me.nextConnection}return this.elseCount_&&(E=E.newBlock("controls_if_else"),E.initSvg(),F.connect(E.previousConnection)),R},compose:function(E){E=E.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const R=[null],F=[null];let G=null;for(;E;){if(!E.isInsertionMarker())switch(E.type){case"controls_if_elseif":this.elseifCount_++,R.push(E.valueConnection_),F.push(E.statementConnection_);break;case"controls_if_else":this.elseCount_++,G=E.statementConnection_;break;default:throw TypeError("Unknown block type: "+E.type)}E=E.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(R,F,G)},saveConnections:function(E){E=E.nextConnection.targetBlock();let R=1;for(;E;){if(!E.isInsertionMarker())switch(E.type){case"controls_if_elseif":var F=this.getInput("IF"+R);const G=this.getInput("DO"+R);E.valueConnection_=F&&F.connection.targetConnection,E.statementConnection_=G&&G.connection.targetConnection,R++;break;case"controls_if_else":F=this.getInput("ELSE"),E.statementConnection_=F&&F.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+E.type)}E=E.getNextBlock()}},rebuildShape_:function(){const E=[null],R=[null];let F=null;this.getInput("ELSE")&&(F=this.getInput("ELSE").connection.targetConnection);for(let G=1;this.getInput("IF"+G);G++){const me=this.getInput("IF"+G),wt=this.getInput("DO"+G);E.push(me.connection.targetConnection),R.push(wt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(E,R,F)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var E=1;this.getInput("IF"+E);E++)this.removeInput("IF"+E),this.removeInput("DO"+E);for(E=1;E<=this.elseifCount_;E++)this.appendValueInput("IF"+E).setCheck("Boolean").appendField(u.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+E).appendField(u.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(u.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(E,R,F){for(let G=1;G<=this.elseifCount_;G++){let me;(me=E[G])==null||me.reconnect(this,"IF"+G);let wt;(wt=R[G])==null||wt.reconnect(this,"DO"+G)}F==null||F.reconnect(this,"ELSE")}};u.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Nn,null,["controls_if_elseif","controls_if_else"]);var fn=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return u.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return u.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return u.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return u.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};u.register$$module$build$src$core$extensions("controls_if_tooltip",fn);var ci={onchange:function(E){this.prevBlocks_||(this.prevBlocks_=[null,null]);var R=this.getInputTargetBlock("A");const F=this.getInputTargetBlock("B");R&&F&&!this.workspace.connectionChecker.doTypeChecks(R.outputConnection,F.outputConnection)&&(u.setGroup$$module$build$src$core$events$utils(E.group),E=this.prevBlocks_[0],E!==R&&(R.unplug(),!E||E.isDisposed()||E.isShadow()||this.getInput("A").connection.connect(E.outputConnection)),R=this.prevBlocks_[1],R!==F&&(F.unplug(),!R||R.isDisposed()||R.isShadow()||this.getInput("B").connection.connect(R.outputConnection)),this.bumpNeighbours(),u.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ui=function(){this.mixin(ci)};u.register$$module$build$src$core$extensions("logic_compare",ui);var Bi={prevParentConnection_:null,onchange:function(E){const R=this.getInputTargetBlock("THEN"),F=this.getInputTargetBlock("ELSE"),G=this.outputConnection.targetConnection;if((R||F)&&G)for(let me=0;2>me;me++){const wt=me===1?R:F;wt&&!wt.workspace.connectionChecker.doTypeChecks(wt.outputConnection,G)&&(u.setGroup$$module$build$src$core$events$utils(E.group),G===this.prevParentConnection_?(this.unplug(),G.getSourceBlock().bumpNeighbours()):(wt.unplug(),wt.bumpNeighbours()),u.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=G}};u.registerMixin$$module$build$src$core$extensions("logic_ternary",Bi),u.defineBlocks$$module$build$src$core$common(ds);var He={blocks:ds},It=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Rt={init:function(){this.setHelpUrl(u.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new u.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(u.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");return E.setAttribute("items",String(this.itemCount_)),E},domToMutation:function(E){if(E=E.getAttribute("items"),!E)throw new TypeError("element did not have items");this.itemCount_=parseInt(E,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(E){this.itemCount_=E.itemCount,this.updateShape_()},decompose:function(E){const R=E.newBlock("lists_create_with_container");R.initSvg();let F=R.getInput("STACK").connection;for(let G=0;G<this.itemCount_;G++){const me=E.newBlock("lists_create_with_item");if(me.initSvg(),!me.previousConnection)throw Error("itemBlock has no previousConnection");F.connect(me.previousConnection),F=me.nextConnection}return R},compose:function(E){var R=E.getInputTargetBlock("STACK");for(E=[];R;)R.isInsertionMarker()||E.push(R.valueConnection_),R=R.getNextBlock();for(R=0;R<this.itemCount_;R++){const F=this.getInput("ADD"+R).connection.targetConnection;F&&!E.includes(F)&&F.disconnect()}for(this.itemCount_=E.length,this.updateShape_(),R=0;R<this.itemCount_;R++){let F;(F=E[R])==null||F.reconnect(this,"ADD"+R)}},saveConnections:function(E){E=E.getInputTargetBlock("STACK");let R=0;for(;E;){if(E.isInsertionMarker()){E=E.getNextBlock();continue}const F=this.getInput("ADD"+R);let G;E.valueConnection_=(G=F)==null?void 0:G.connection.targetConnection,E=E.getNextBlock(),R++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(u.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var E=0;E<this.itemCount_;E++)if(!this.getInput("ADD"+E)){const R=this.appendValueInput("ADD"+E).setAlign(u.Align$$module$build$src$core$inputs$align.RIGHT);E===0&&R.appendField(u.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(E=this.itemCount_;this.getInput("ADD"+E);E++)this.removeInput("ADD"+E)}};It.lists_create_with=Rt;var hi={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(u.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(u.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};It.lists_create_with_container=hi;var Mn={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(u.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(u.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};It.lists_create_with_item=Mn;var M={init:function(){var E=[[u.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[u.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(u.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(u.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:E}),!E)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(E,"END"),this.setInputsInline(!0),this.setTooltip(()=>u.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};It.lists_indexOf=M;var Ks={init:function(){var E=[[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:E}),E.setValidator(function(R){R=R==="REMOVE",this.getSourceBlock().updateStatement_(R)}),this.appendValueInput("VALUE").setCheck("Array").appendField(u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(E,"MODE").appendField("","SPACE"),E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),E.setValidator(function(R){const F=this.getValue();R=R==="FROM_START"||R==="FROM_END",R!==(F==="FROM_START"||F==="FROM_END")&&this.getSourceBlock().updateAt_(R)}),this.appendDummyInput().appendField(E,"WHERE"),this.appendDummyInput("AT"),u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const R=this.getFieldValue("MODE"),F=this.getFieldValue("WHERE");let G="";switch(R+" "+F){case"GET FROM_START":case"GET FROM_END":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":G=u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(F==="FROM_START"||F==="FROM_END")&&(G+="  "+(F==="FROM_START"?u.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:u.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),G})},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");E.setAttribute("statement",String(!this.outputConnection));const R=this.getInput("AT")instanceof u.ValueInput$$module$build$src$core$inputs$value_input;return E.setAttribute("at",String(R)),E},domToMutation:function(E){const R=E.getAttribute("statement")==="true";this.updateStatement_(R),E=E.getAttribute("at")!=="false",this.updateAt_(E)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(E){E.isStatement?this.updateStatement_(!0):typeof E=="string"&&this.domToMutation(u.textToDom$$module$build$src$core$utils$xml(E))},updateStatement_:function(E){E!==!this.outputConnection&&(this.unplug(!0,!0),E?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(E){this.removeInput("AT"),this.removeInput("ORDINAL",!0),E?(this.appendValueInput("AT").setCheck("Number"),u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};It.lists_getIndex=Ks;var nn={init:function(){var E=[[u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[u.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:E}),this.appendDummyInput().appendField(E,"MODE").appendField("","SPACE"),E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),E.setValidator(function(R){const F=this.getValue();R=R==="FROM_START"||R==="FROM_END",R!==(F==="FROM_START"||F==="FROM_END")&&this.getSourceBlock().updateAt_(R)}),this.appendDummyInput().appendField(E,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const R=this.getFieldValue("MODE"),F=this.getFieldValue("WHERE");let G="";switch(R+" "+F){case"SET FROM_START":case"SET FROM_END":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":G=u.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(F==="FROM_START"||F==="FROM_END")&&(G+="  "+u.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),G})},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation"),R=this.getInput("AT")instanceof u.ValueInput$$module$build$src$core$inputs$value_input;return E.setAttribute("at",String(R)),E},domToMutation:function(E){E=E.getAttribute("at")!=="false",this.updateAt_(E)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(E){this.removeInput("AT"),this.removeInput("ORDINAL",!0),E?(this.appendValueInput("AT").setCheck("Number"),u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};It.lists_setIndex=nn;var yt={init:function(){this.WHERE_OPTIONS_1=[[u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const E=R=>{const F=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+R]});return F.setValidator(function(G){const me=this.getValue();G=G==="FROM_START"||G==="FROM_END",G!==(me==="FROM_START"||me==="FROM_END")&&this.getSourceBlock().updateAt_(R,G)}),F};this.appendDummyInput("WHERE1_INPUT").appendField(E(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(E(2),"WHERE2"),this.appendDummyInput("AT2"),u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");var R=this.getInput("AT1")instanceof u.ValueInput$$module$build$src$core$inputs$value_input;return E.setAttribute("at1",String(R)),R=this.getInput("AT2")instanceof u.ValueInput$$module$build$src$core$inputs$value_input,E.setAttribute("at2",String(R)),E},domToMutation:function(E){const R=E.getAttribute("at1")==="true";E=E.getAttribute("at2")==="true",this.updateAt_(1,R),this.updateAt_(2,E)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(E,R){this.removeInput("AT"+E),this.removeInput("ORDINAL"+E,!0),R?(this.appendValueInput("AT"+E).setCheck("Number"),u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+E).appendField(u.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+E),E===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),u.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};It.lists_getSublist=yt,It.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},It.lists_split={init:function(){const E=u.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[u.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[u.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!E)throw Error("field_dropdown not found");E.setValidator(R=>{this.updateType_(R)}),this.setHelpUrl(u.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(E,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(u.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const R=this.getFieldValue("MODE");if(R==="SPLIT")return u.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(R==="JOIN")return u.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+R)})},updateType_:function(E){if(this.getFieldValue("MODE")!==E){const R=this.getInput("INPUT").connection;R.setShadowDom(null);const F=R.targetBlock();F&&(R.disconnect(),F.isShadow()?F.dispose(!1):this.bumpNeighbours())}E==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const E=u.createElement$$module$build$src$core$utils$xml("mutation");return E.setAttribute("mode",this.getFieldValue("MODE")),E},domToMutation:function(E){this.updateType_(E.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},u.defineBlocks$$module$build$src$core$common(It);var In={blocks:It},q=Object.assign({},It,ds,lt,ee,ht,re,D,f),ve={blocks:q,lists:In,logic:He,loops:Fr,math:je,procedures:kt,texts:Oe,variables:fe,variablesDynamic:L};return ve.__namespace__=u,ve})}(Ug)),Ug.exports}var lv=xg.exports,yT;function av(){return yT||(yT=1,function(h,l){(function(i,u){h.exports=u(n_(),rv(),DE())})(lv,function(i,u,f){return i.setLocale(u),i})}(xg)),xg.exports}var cv=av();const uv=Nh(cv),{ASTNode:Wx,BasicCursor:zx,Block:Xx,BlockSvg:jx,Blocks:Yx,COLLAPSED_FIELD_NAME:Kx,COLLAPSED_INPUT_NAME:Jx,COLLAPSE_CHARS:qx,CodeGenerator:Qx,CollapsibleToolboxCategory:Zx,ComponentManager:eB,Connection:tB,ConnectionChecker:nB,ConnectionDB:sB,ConnectionType:iB,ContextMenu:rB,ContextMenuItems:oB,ContextMenuRegistry:lB,Css:aB,Cursor:cB,DELETE_VARIABLE_ID:uB,DeleteArea:hB,DragTarget:dB,DropDownDiv:pB,Events:gB,Extensions:_B,Field:fB,FieldCheckbox:mB,FieldDropdown:$B,FieldImage:TB,FieldLabel:EB,FieldLabelSerializable:IB,FieldNumber:bB,FieldTextInput:SB,FieldVariable:OB,Flyout:RB,FlyoutButton:yB,FlyoutMetricsManager:vB,Generator:CB,Gesture:LB,Grid:AB,HorizontalFlyout:kB,INPUT_VALUE:wB,Input:NB,InsertionMarkerManager:MB,InsertionMarkerPreviewer:DB,Marker:PB,MarkerManager:xB,Menu:BB,MenuItem:UB,MetricsManager:FB,Msg:HB,NEXT_STATEMENT:GB,Names:VB,OPPOSITE_TYPE:WB,OUTPUT_VALUE:zB,Options:XB,PREVIOUS_STATEMENT:jB,PROCEDURE_CATEGORY_NAME:YB,Procedures:KB,RENAME_VARIABLE_ID:JB,RenderedConnection:qB,Scrollbar:QB,ScrollbarPair:ZB,ShortcutItems:e0,ShortcutRegistry:t0,TOOLBOX_AT_BOTTOM:n0,TOOLBOX_AT_LEFT:s0,TOOLBOX_AT_RIGHT:i0,TOOLBOX_AT_TOP:r0,TabNavigateCursor:o0,Theme:l0,ThemeManager:a0,Themes:c0,Toolbox:u0,ToolboxCategory:h0,ToolboxItem:d0,ToolboxSeparator:p0,Tooltip:g0,Touch:_0,Trashcan:f0,UnattachedFieldError:m0,VARIABLE_CATEGORY_NAME:$0,VARIABLE_DYNAMIC_CATEGORY_NAME:T0,VERSION:E0,VariableMap:I0,VariableModel:b0,Variables:S0,VariablesDynamic:O0,VerticalFlyout:R0,WidgetDiv:y0,Workspace:v0,WorkspaceAudio:C0,WorkspaceDragger:L0,WorkspaceSvg:A0,Xml:k0,ZoomControls:w0,blockAnimations:N0,blockRendering:M0,browserEvents:D0,bubbles:P0,bumpObjects:x0,clipboard:B0,comments:U0,common:F0,config:H0,constants:G0,defineBlocksWithJsonArray:V0,dialog:W0,dragging:z0,fieldRegistry:X0,geras:j0,getMainWorkspace:Y0,getSelected:K0,hasBubble:J0,hideChaff:q0,icons:Q0,inject:Z0,inputs:eU,isCopyable:tU,isDeletable:nU,isDraggable:sU,isIcon:iU,isObservable:rU,isPaster:oU,isRenderedElement:lU,isSelectable:aU,isSerializable:cU,isVariableBackedParameterModel:uU,layers:hU,procedures:dU,registry:pU,renderManagement:gU,serialization:_U,setLocale:fU,setParentContainer:mU,svgResize:$U,thrasos:TU,uiPosition:EU,utils:IU,zelos:bU}=uv;var hv=DE();const dv=Nh(hv),{blocks:SU,lists:OU,logic:RU,loops:yU,math:vU,procedures:CU,texts:LU,variables:AU,variablesDynamic:kU}=dv;var Fg={exports:{}},pv=Fg.exports,vT;function gv(){return vT||(vT=1,function(h,l){(function(i,u){h.exports=u(n_())})(pv,function(i){var u=i.__namespace__,f=function(T,v){return["[]",M.ATOMIC]},I=function(T,v){const N=Array(T.itemCount_);for(let X=0;X<T.itemCount_;X++)N[X]=v.valueToCode(T,"ADD"+X,M.NONE)||"null";return["["+N.join(", ")+"]",M.ATOMIC]},C=function(T,v){const N=v.provideFunction_("listsRepeat",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),X=v.valueToCode(T,"ITEM",M.NONE)||"null";return T=v.valueToCode(T,"NUM",M.NONE)||"0",[N+"("+X+", "+T+")",M.FUNCTION_CALL]},A=function(T,v){return[(v.valueToCode(T,"VALUE",M.MEMBER)||"[]")+".length",M.MEMBER]},L=function(T,v){return["!"+(v.valueToCode(T,"VALUE",M.MEMBER)||"[]")+".length",M.LOGICAL_NOT]},D=function(T,v){const N=T.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",X=v.valueToCode(T,"FIND",M.NONE)||"''";return v=(v.valueToCode(T,"VALUE",M.MEMBER)||"[]")+"."+N+"("+X+")",T.workspace.options.oneBasedIndex?[v+" + 1",M.ADDITION]:[v,M.FUNCTION_CALL]},te=function(T,v){const N=T.getFieldValue("MODE")||"GET",X=T.getFieldValue("WHERE")||"FROM_START";var ue=v.valueToCode(T,"VALUE",X==="RANDOM"?M.NONE:M.MEMBER)||"[]";switch(X){case"FIRST":if(N==="GET")return[ue+"[0]",M.MEMBER];if(N==="GET_REMOVE")return[ue+".shift()",M.MEMBER];if(N==="REMOVE")return ue+`.shift();
`;break;case"LAST":if(N==="GET")return[ue+".slice(-1)[0]",M.MEMBER];if(N==="GET_REMOVE")return[ue+".pop()",M.MEMBER];if(N==="REMOVE")return ue+`.pop();
`;break;case"FROM_START":if(T=v.getAdjusted(T,"AT"),N==="GET")return[ue+"["+T+"]",M.MEMBER];if(N==="GET_REMOVE")return[ue+".splice("+T+", 1)[0]",M.FUNCTION_CALL];if(N==="REMOVE")return ue+".splice("+T+`, 1);
`;break;case"FROM_END":if(T=v.getAdjusted(T,"AT",1,!0),N==="GET")return[ue+".slice("+T+")[0]",M.FUNCTION_CALL];if(N==="GET_REMOVE")return[ue+".splice("+T+", 1)[0]",M.FUNCTION_CALL];if(N==="REMOVE")return ue+".splice("+T+", 1);";break;case"RANDOM":if(ue=v.provideFunction_("listsGetRandomItem",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+ue+", "+(N!=="GET")+")",N==="GET"||N==="GET_REMOVE")return[ue,M.FUNCTION_CALL];if(N==="REMOVE")return ue+`;
`}throw Error("Unhandled combination (lists_getIndex).")},se=function(T,v){function N(){if(X.match(/^\w+$/))return"";const ps=v.nameDB_.getDistinctName("tmpList",u.NameType$$module$build$src$core$names.VARIABLE),Js="var "+ps+" = "+X+`;
`;return X=ps,Js}let X=v.valueToCode(T,"LIST",M.MEMBER)||"[]";const ue=T.getFieldValue("MODE")||"GET";var we=T.getFieldValue("WHERE")||"FROM_START";const Ke=v.valueToCode(T,"TO",M.ASSIGNMENT)||"null";switch(we){case"FIRST":if(ue==="SET")return X+"[0] = "+Ke+`;
`;if(ue==="INSERT")return X+".unshift("+Ke+`);
`;break;case"LAST":if(ue==="SET")return N()+(X+"["+X+".length - 1] = "+Ke+`;
`);if(ue==="INSERT")return X+".push("+Ke+`);
`;break;case"FROM_START":if(T=v.getAdjusted(T,"AT"),ue==="SET")return X+"["+T+"] = "+Ke+`;
`;if(ue==="INSERT")return X+".splice("+T+", 0, "+Ke+`);
`;break;case"FROM_END":if(T=v.getAdjusted(T,"AT",1,!1,M.SUBTRACTION),we=N(),ue==="SET")return we+(X+"["+X+".length - "+T+"] = "+Ke+`;
`);if(ue==="INSERT")return we+(X+".splice("+X+".length - "+T+", 0, "+Ke+`);
`);break;case"RANDOM":if(T=N(),we=v.nameDB_.getDistinctName("tmpX",u.NameType$$module$build$src$core$names.VARIABLE),T+="var "+we+" = Math.floor(Math.random() * "+X+`.length);
`,ue==="SET")return T+(X+"["+we+"] = "+Ke+`;
`);if(ue==="INSERT")return T+(X+".splice("+we+", 0, "+Ke+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},Y=function(T,v){var N={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},X=v.valueToCode(T,"LIST",M.MEMBER)||"[]";const ue=T.getFieldValue("WHERE1"),we=T.getFieldValue("WHERE2");if(ue==="FIRST"&&we==="LAST")X+=".slice(0)";else if(X.match(/^\w+$/)||ue!=="FROM_END"&&we==="FROM_START"){switch(ue){case"FROM_START":N=v.getAdjusted(T,"AT1");break;case"FROM_END":N=v.getAdjusted(T,"AT1",1,!1,M.SUBTRACTION),N=X+".length - "+N;break;case"FIRST":N="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(we){case"FROM_START":v=v.getAdjusted(T,"AT2",1);break;case"FROM_END":v=v.getAdjusted(T,"AT2",0,!1,M.SUBTRACTION),v=X+".length - "+v;break;case"LAST":v=X+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}X=X+".slice("+N+", "+v+")"}else{const Ke=v.getAdjusted(T,"AT1");T=v.getAdjusted(T,"AT2"),X=v.provideFunction_("subsequence"+N[ue]+N[we],`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(sequence${ue==="FROM_END"||ue==="FROM_START"?", at1":""}${we==="FROM_END"||we==="FROM_START"?", at2":""}) {
  var start = ${nn("sequence",ue,"at1")};
  var end = ${nn("sequence",we,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+X+(ue==="FROM_END"||ue==="FROM_START"?", "+Ke:"")+(we==="FROM_END"||we==="FROM_START"?", "+T:"")+")"}return[X,M.FUNCTION_CALL]},fe=function(T,v){const N=v.valueToCode(T,"LIST",M.FUNCTION_CALL)||"[]",X=T.getFieldValue("DIRECTION")==="1"?1:-1;return T=T.getFieldValue("TYPE"),v=v.provideFunction_("listsGetSortCompare",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[N+".slice().sort("+v+'("'+T+'", '+X+"))",M.FUNCTION_CALL]},re=function(T,v){let N=v.valueToCode(T,"INPUT",M.MEMBER);if(v=v.valueToCode(T,"DELIM",M.NONE)||"''",T=T.getFieldValue("MODE"),T==="SPLIT")N||(N="''"),T="split";else if(T==="JOIN")N||(N="[]"),T="join";else throw Error("Unknown mode: "+T);return[N+"."+T+"("+v+")",M.FUNCTION_CALL]},be=function(T,v){return[(v.valueToCode(T,"LIST",M.FUNCTION_CALL)||"[]")+".slice().reverse()",M.FUNCTION_CALL]},oe=function(T,v){var N=0;let X="";v.STATEMENT_PREFIX&&(X+=v.injectId(v.STATEMENT_PREFIX,T));do{const ue=v.valueToCode(T,"IF"+N,M.NONE)||"false";let we=v.statementToCode(T,"DO"+N);v.STATEMENT_SUFFIX&&(we=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,T),v.INDENT)+we),X+=(0<N?" else ":"")+"if ("+ue+`) {
`+we+"}",N++}while(T.getInput("IF"+N));return(T.getInput("ELSE")||v.STATEMENT_SUFFIX)&&(N=v.statementToCode(T,"ELSE"),v.STATEMENT_SUFFIX&&(N=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,T),v.INDENT)+N),X+=` else {
`+N+"}"),X+`
`},de=function(T,v){const N={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[T.getFieldValue("OP")],X=N==="=="||N==="!="?M.EQUALITY:M.RELATIONAL,ue=v.valueToCode(T,"A",X)||"0";return T=v.valueToCode(T,"B",X)||"0",[ue+" "+N+" "+T,X]},Le=function(T,v){const N=T.getFieldValue("OP")==="AND"?"&&":"||",X=N==="&&"?M.LOGICAL_AND:M.LOGICAL_OR;let ue=v.valueToCode(T,"A",X);return T=v.valueToCode(T,"B",X),ue||T?(v=N==="&&"?"true":"false",ue||(ue=v),T||(T=v)):T=ue="false",[ue+" "+N+" "+T,X]},ke=function(T,v){const N=M.LOGICAL_NOT;return["!"+(v.valueToCode(T,"BOOL",N)||"true"),N]},nt=function(T,v){return[T.getFieldValue("BOOL")==="TRUE"?"true":"false",M.ATOMIC]},_t=function(T,v){return["null",M.ATOMIC]},$t=function(T,v){const N=v.valueToCode(T,"IF",M.CONDITIONAL)||"false",X=v.valueToCode(T,"THEN",M.CONDITIONAL)||"null";return T=v.valueToCode(T,"ELSE",M.CONDITIONAL)||"null",[N+" ? "+X+" : "+T,M.CONDITIONAL]},ot=function(T,v){let N;N=T.getField("TIMES")?String(Number(T.getFieldValue("TIMES"))):v.valueToCode(T,"TIMES",M.ASSIGNMENT)||"0";let X=v.statementToCode(T,"DO");X=v.addLoopTrap(X,T),T="";const ue=v.nameDB_.getDistinctName("count",u.NameType$$module$build$src$core$names.VARIABLE);let we=N;return N.match(/^\w+$/)||u.isNumber$$module$build$src$core$utils$string(N)||(we=v.nameDB_.getDistinctName("repeat_end",u.NameType$$module$build$src$core$names.VARIABLE),T+="var "+we+" = "+N+`;
`),T+("for (var "+ue+" = 0; "+ue+" < "+we+"; "+ue+`++) {
`+X+`}
`)},Oe=function(T,v){const N=T.getFieldValue("MODE")==="UNTIL";let X=v.valueToCode(T,"BOOL",N?M.LOGICAL_NOT:M.NONE)||"false",ue=v.statementToCode(T,"DO");return ue=v.addLoopTrap(ue,T),N&&(X="!"+X),"while ("+X+`) {
`+ue+`}
`},ht=function(T,v){var N=v.getVariableName(T.getFieldValue("VAR")),X=v.valueToCode(T,"FROM",M.ASSIGNMENT)||"0",ue=v.valueToCode(T,"TO",M.ASSIGNMENT)||"0";const we=v.valueToCode(T,"BY",M.ASSIGNMENT)||"1";let Ke=v.statementToCode(T,"DO");if(Ke=v.addLoopTrap(Ke,T),u.isNumber$$module$build$src$core$utils$string(X)&&u.isNumber$$module$build$src$core$utils$string(ue)&&u.isNumber$$module$build$src$core$utils$string(we))v=Number(X)<=Number(ue),T="for ("+N+" = "+X+"; "+N+(v?" <= ":" >= ")+ue+"; "+N,N=Math.abs(Number(we)),T=N===1?T+(v?"++":"--"):T+((v?" += ":" -= ")+N),T+=`) {
`+Ke+`}
`;else{T="";let ps=X;X.match(/^\w+$/)||u.isNumber$$module$build$src$core$utils$string(X)||(ps=v.nameDB_.getDistinctName(N+"_start",u.NameType$$module$build$src$core$names.VARIABLE),T+="var "+ps+" = "+X+`;
`),X=ue,ue.match(/^\w+$/)||u.isNumber$$module$build$src$core$utils$string(ue)||(X=v.nameDB_.getDistinctName(N+"_end",u.NameType$$module$build$src$core$names.VARIABLE),T+="var "+X+" = "+ue+`;
`),ue=v.nameDB_.getDistinctName(N+"_inc",u.NameType$$module$build$src$core$names.VARIABLE),T+="var "+ue+" = ",T=u.isNumber$$module$build$src$core$utils$string(we)?T+(Math.abs(Number(we))+`;
`):T+("Math.abs("+we+`);
`),T+="if ("+ps+" > "+X+`) {
`,T+=v.INDENT+ue+" = -"+ue+`;
`,T=T+`}
for (`+(N+" = "+ps+"; "+ue+" >= 0 ? "+N+" <= "+X+" : "+N+" >= "+X+"; "+N+" += "+ue+`) {
`+Ke+`}
`)}return T},Ct=function(T,v){const N=v.getVariableName(T.getFieldValue("VAR"));var X=v.valueToCode(T,"LIST",M.ASSIGNMENT)||"[]";let ue=v.statementToCode(T,"DO");ue=v.addLoopTrap(ue,T),T="";let we=X;return X.match(/^\w+$/)||(we=v.nameDB_.getDistinctName(N+"_list",u.NameType$$module$build$src$core$names.VARIABLE),T+="var "+we+" = "+X+`;
`),X=v.nameDB_.getDistinctName(N+"_index",u.NameType$$module$build$src$core$names.VARIABLE),ue=v.INDENT+N+" = "+we+"["+X+`];
`+ue,T+("for (var "+X+" in "+we+`) {
`+ue+`}
`)},wn=function(T,v){let N="";if(v.STATEMENT_PREFIX&&(N+=v.injectId(v.STATEMENT_PREFIX,T)),v.STATEMENT_SUFFIX&&(N+=v.injectId(v.STATEMENT_SUFFIX,T)),v.STATEMENT_PREFIX){const X=T.getSurroundLoop();X&&!X.suppressPrefixSuffix&&(N+=v.injectId(v.STATEMENT_PREFIX,X))}switch(T.getFieldValue("FLOW")){case"BREAK":return N+`break;
`;case"CONTINUE":return N+`continue;
`}throw Error("Unknown flow statement.")},En=function(T,v){return T=Number(T.getFieldValue("NUM")),[String(T),0<=T?M.ATOMIC:M.UNARY_NEGATION]},ln=function(T,v){var N={ADD:[" + ",M.ADDITION],MINUS:[" - ",M.SUBTRACTION],MULTIPLY:[" * ",M.MULTIPLICATION],DIVIDE:[" / ",M.DIVISION],POWER:[null,M.NONE]}[T.getFieldValue("OP")];const X=N[0];N=N[1];const ue=v.valueToCode(T,"A",N)||"0";return T=v.valueToCode(T,"B",N)||"0",X?[ue+X+T,N]:["Math.pow("+ue+", "+T+")",M.FUNCTION_CALL]},it=function(T,v){const N=T.getFieldValue("OP");let X;if(N==="NEG")return T=v.valueToCode(T,"NUM",M.UNARY_NEGATION)||"0",T[0]==="-"&&(T=" "+T),["-"+T,M.UNARY_NEGATION];switch(T=N==="SIN"||N==="COS"||N==="TAN"?v.valueToCode(T,"NUM",M.DIVISION)||"0":v.valueToCode(T,"NUM",M.NONE)||"0",N){case"ABS":X="Math.abs("+T+")";break;case"ROOT":X="Math.sqrt("+T+")";break;case"LN":X="Math.log("+T+")";break;case"EXP":X="Math.exp("+T+")";break;case"POW10":X="Math.pow(10,"+T+")";break;case"ROUND":X="Math.round("+T+")";break;case"ROUNDUP":X="Math.ceil("+T+")";break;case"ROUNDDOWN":X="Math.floor("+T+")";break;case"SIN":X="Math.sin("+T+" / 180 * Math.PI)";break;case"COS":X="Math.cos("+T+" / 180 * Math.PI)";break;case"TAN":X="Math.tan("+T+" / 180 * Math.PI)"}if(X)return[X,M.FUNCTION_CALL];switch(N){case"LOG10":X="Math.log("+T+") / Math.log(10)";break;case"ASIN":X="Math.asin("+T+") / Math.PI * 180";break;case"ACOS":X="Math.acos("+T+") / Math.PI * 180";break;case"ATAN":X="Math.atan("+T+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+N)}return[X,M.DIVISION]},Ot=function(T,v){return{PI:["Math.PI",M.MEMBER],E:["Math.E",M.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",M.DIVISION],SQRT2:["Math.SQRT2",M.MEMBER],SQRT1_2:["Math.SQRT1_2",M.MEMBER],INFINITY:["Infinity",M.ATOMIC]}[T.getFieldValue("CONSTANT")]},Ft=function(T,v){var N={EVEN:[" % 2 === 0",M.MODULUS,M.EQUALITY],ODD:[" % 2 === 1",M.MODULUS,M.EQUALITY],WHOLE:[" % 1 === 0",M.MODULUS,M.EQUALITY],POSITIVE:[" > 0",M.RELATIONAL,M.RELATIONAL],NEGATIVE:[" < 0",M.RELATIONAL,M.RELATIONAL],DIVISIBLE_BY:[null,M.MODULUS,M.EQUALITY],PRIME:[null,M.NONE,M.FUNCTION_CALL]};const X=T.getFieldValue("PROPERTY"),[ue,we,Ke]=N[X];return N=v.valueToCode(T,"NUMBER_TO_CHECK",we)||"0",X==="PRIME"?T=v.provideFunction_("mathIsPrime",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+N+")":X==="DIVISIBLE_BY"?(T=v.valueToCode(T,"DIVISOR",M.MODULUS)||"0",T=N+" % "+T+" === 0"):T=N+ue,[T,Ke]},kt=function(T,v){const N=v.valueToCode(T,"DELTA",M.ADDITION)||"0";return T=v.getVariableName(T.getFieldValue("VAR")),T+" = (typeof "+T+" === 'number' ? "+T+" : 0) + "+N+`;
`},ee=function(T,v){var N=T.getFieldValue("OP");switch(N){case"SUM":T=v.valueToCode(T,"LIST",M.MEMBER)||"[]",T+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":T=v.valueToCode(T,"LIST",M.NONE)||"[]",T="Math.min.apply(null, "+T+")";break;case"MAX":T=v.valueToCode(T,"LIST",M.NONE)||"[]",T="Math.max.apply(null, "+T+")";break;case"AVERAGE":N=v.provideFunction_("mathMean",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),T=v.valueToCode(T,"LIST",M.NONE)||"[]",T=N+"("+T+")";break;case"MEDIAN":N=v.provideFunction_("mathMedian",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),T=v.valueToCode(T,"LIST",M.NONE)||"[]",T=N+"("+T+")";break;case"MODE":N=v.provideFunction_("mathModes",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),T=v.valueToCode(T,"LIST",M.NONE)||"[]",T=N+"("+T+")";break;case"STD_DEV":N=v.provideFunction_("mathStandardDeviation",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),T=v.valueToCode(T,"LIST",M.NONE)||"[]",T=N+"("+T+")";break;case"RANDOM":N=v.provideFunction_("mathRandomList",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),T=v.valueToCode(T,"LIST",M.NONE)||"[]",T=N+"("+T+")";break;default:throw Error("Unknown operator: "+N)}return[T,M.FUNCTION_CALL]},Je=function(T,v){const N=v.valueToCode(T,"DIVIDEND",M.MODULUS)||"0";return T=v.valueToCode(T,"DIVISOR",M.MODULUS)||"0",[N+" % "+T,M.MODULUS]},j=function(T,v){const N=v.valueToCode(T,"VALUE",M.NONE)||"0",X=v.valueToCode(T,"LOW",M.NONE)||"0";return T=v.valueToCode(T,"HIGH",M.NONE)||"Infinity",["Math.min(Math.max("+N+", "+X+"), "+T+")",M.FUNCTION_CALL]},z=function(T,v){const N=v.valueToCode(T,"FROM",M.NONE)||"0";return T=v.valueToCode(T,"TO",M.NONE)||"0",[v.provideFunction_("mathRandomInt",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+N+", "+T+")",M.FUNCTION_CALL]},_e=function(T,v){return["Math.random()",M.FUNCTION_CALL]},rt=function(T,v){const N=v.valueToCode(T,"X",M.NONE)||"0";return["Math.atan2("+(v.valueToCode(T,"Y",M.NONE)||"0")+", "+N+") / Math.PI * 180",M.DIVISION]},je=function(T,v){const N=v.getProcedureName(T.getFieldValue("NAME"));var X="";v.STATEMENT_PREFIX&&(X+=v.injectId(v.STATEMENT_PREFIX,T)),v.STATEMENT_SUFFIX&&(X+=v.injectId(v.STATEMENT_SUFFIX,T)),X&&(X=v.prefixLines(X,v.INDENT));let ue="";v.INFINITE_LOOP_TRAP&&(ue=v.prefixLines(v.injectId(v.INFINITE_LOOP_TRAP,T),v.INDENT));let we="";T.getInput("STACK")&&(we=v.statementToCode(T,"STACK"));let Ke="";T.getInput("RETURN")&&(Ke=v.valueToCode(T,"RETURN",M.NONE)||"");let ps="";we&&Ke&&(ps=X),Ke&&(Ke=v.INDENT+"return "+Ke+`;
`);const Js=[],yo=T.getVars();for(let qs=0;qs<yo.length;qs++)Js[qs]=v.getVariableName(yo[qs]);return X="function "+N+"("+Js.join(", ")+`) {
`+X+ue+we+ps+Ke+"}",X=v.scrub_(T,X),v.definitions_["%"+N]=X,null},lt=function(T,v){const N=v.getProcedureName(T.getFieldValue("NAME")),X=[],ue=T.getVars();for(let we=0;we<ue.length;we++)X[we]=v.valueToCode(T,"ARG"+we,M.NONE)||"null";return[N+"("+X.join(", ")+")",M.FUNCTION_CALL]},ze=function(T,v){return v.forBlock.procedures_callreturn(T,v)[0]+`;
`},Et=function(T,v){let N="if ("+(v.valueToCode(T,"CONDITION",M.NONE)||"false")+`) {
`;return v.STATEMENT_SUFFIX&&(N+=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,T),v.INDENT)),T.hasReturnValue_?(T=v.valueToCode(T,"VALUE",M.NONE)||"null",N+=v.INDENT+"return "+T+`;
`):N+=v.INDENT+`return;
`,N+`}
`},Re=function(T,v){return[v.quote_(T.getFieldValue("TEXT")),M.ATOMIC]},ft=function(T,v){switch(T.itemCount_){case 0:return["''",M.ATOMIC];case 1:return T=v.valueToCode(T,"ADD0",M.NONE)||"''",F(T);case 2:var N=v.valueToCode(T,"ADD0",M.NONE)||"''";return T=v.valueToCode(T,"ADD1",M.NONE)||"''",[F(N)[0]+" + "+F(T)[0],M.ADDITION];default:N=Array(T.itemCount_);for(let X=0;X<T.itemCount_;X++)N[X]=v.valueToCode(T,"ADD"+X,M.NONE)||"''";return["["+N.join(",")+"].join('')",M.FUNCTION_CALL]}},_n=function(T,v){const N=v.getVariableName(T.getFieldValue("VAR"));return T=v.valueToCode(T,"TEXT",M.NONE)||"''",N+" += "+F(T)[0]+`;
`},hr=function(T,v){return[(v.valueToCode(T,"VALUE",M.MEMBER)||"''")+".length",M.MEMBER]},Fr=function(T,v){return["!"+(v.valueToCode(T,"VALUE",M.MEMBER)||"''")+".length",M.LOGICAL_NOT]},ds=function(T,v){const N=T.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",X=v.valueToCode(T,"FIND",M.NONE)||"''";return v=(v.valueToCode(T,"VALUE",M.MEMBER)||"''")+"."+N+"("+X+")",T.workspace.options.oneBasedIndex?[v+" + 1",M.ADDITION]:[v,M.FUNCTION_CALL]},xi=function(T,v){const N=T.getFieldValue("WHERE")||"FROM_START",X=v.valueToCode(T,"VALUE",N==="RANDOM"?M.NONE:M.MEMBER)||"''";switch(N){case"FIRST":return[X+".charAt(0)",M.FUNCTION_CALL];case"LAST":return[X+".slice(-1)",M.FUNCTION_CALL];case"FROM_START":return T=v.getAdjusted(T,"AT"),[X+".charAt("+T+")",M.FUNCTION_CALL];case"FROM_END":return T=v.getAdjusted(T,"AT",1,!0),[X+".slice("+T+").charAt(0)",M.FUNCTION_CALL];case"RANDOM":return[v.provideFunction_("textRandomLetter",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+X+")",M.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Nn=function(T,v){var N={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const X=T.getFieldValue("WHERE1"),ue=T.getFieldValue("WHERE2");var we=X!=="FROM_END"&&X!=="LAST"&&ue!=="FROM_END"&&ue!=="LAST",Ke=v.valueToCode(T,"STRING",we?M.MEMBER:M.NONE)||"''";if(X==="FIRST"&&ue==="LAST")return[Ke,M.NONE];if(Ke.match(/^'?\w+'?$/)||we){switch(X){case"FROM_START":N=v.getAdjusted(T,"AT1");break;case"FROM_END":N=v.getAdjusted(T,"AT1",1,!1,M.SUBTRACTION),N=Ke+".length - "+N;break;case"FIRST":N="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(ue){case"FROM_START":v=v.getAdjusted(T,"AT2",1);break;case"FROM_END":v=v.getAdjusted(T,"AT2",0,!1,M.SUBTRACTION),v=Ke+".length - "+v;break;case"LAST":v=Ke+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Ke=Ke+".slice("+N+", "+v+")"}else we=v.getAdjusted(T,"AT1"),T=v.getAdjusted(T,"AT2"),Ke=v.provideFunction_("subsequence"+N[X]+N[ue],`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(sequence${X==="FROM_END"||X==="FROM_START"?", at1":""}${ue==="FROM_END"||ue==="FROM_START"?", at2":""}) {
  var start = ${G("sequence",X,"at1")};
  var end = ${G("sequence",ue,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Ke+(X==="FROM_END"||X==="FROM_START"?", "+we:"")+(ue==="FROM_END"||ue==="FROM_START"?", "+T:"")+")";return[Ke,M.FUNCTION_CALL]},fn=function(T,v){const N={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[T.getFieldValue("CASE")];return T=v.valueToCode(T,"TEXT",N?M.MEMBER:M.NONE)||"''",[N?T+N:v.provideFunction_("textToTitleCase",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+T+")",M.FUNCTION_CALL]},ci=function(T,v){const N={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[T.getFieldValue("MODE")];return[(v.valueToCode(T,"TEXT",M.MEMBER)||"''")+N,M.FUNCTION_CALL]},ui=function(T,v){return"window.alert("+(v.valueToCode(T,"TEXT",M.NONE)||"''")+`);
`},Bi=function(T,v){return v="window.prompt("+(T.getField("TEXT")?v.quote_(T.getFieldValue("TEXT")):v.valueToCode(T,"TEXT",M.NONE)||"''")+")",T.getFieldValue("TYPE")==="NUMBER"&&(v="Number("+v+")"),[v,M.FUNCTION_CALL]},He=function(T,v){const N=v.valueToCode(T,"TEXT",M.NONE)||"''";return T=v.valueToCode(T,"SUB",M.NONE)||"''",[v.provideFunction_("textCount",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+N+", "+T+")",M.FUNCTION_CALL]},It=function(T,v){const N=v.valueToCode(T,"TEXT",M.NONE)||"''",X=v.valueToCode(T,"FROM",M.NONE)||"''";return T=v.valueToCode(T,"TO",M.NONE)||"''",[v.provideFunction_("textReplace",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+N+", "+X+", "+T+")",M.FUNCTION_CALL]},Rt=function(T,v){return[(v.valueToCode(T,"TEXT",M.MEMBER)||"''")+".split('').reverse().join('')",M.FUNCTION_CALL]},hi=function(T,v){return[v.getVariableName(T.getFieldValue("VAR")),M.ATOMIC]},Mn=function(T,v){const N=v.valueToCode(T,"VALUE",M.ASSIGNMENT)||"0";return v.getVariableName(T.getFieldValue("VAR"))+" = "+N+`;
`},M;(function(T){T[T.ATOMIC=0]="ATOMIC",T[T.NEW=1.1]="NEW",T[T.MEMBER=1.2]="MEMBER",T[T.FUNCTION_CALL=2]="FUNCTION_CALL",T[T.INCREMENT=3]="INCREMENT",T[T.DECREMENT=3]="DECREMENT",T[T.BITWISE_NOT=4.1]="BITWISE_NOT",T[T.UNARY_PLUS=4.2]="UNARY_PLUS",T[T.UNARY_NEGATION=4.3]="UNARY_NEGATION",T[T.LOGICAL_NOT=4.4]="LOGICAL_NOT",T[T.TYPEOF=4.5]="TYPEOF",T[T.VOID=4.6]="VOID",T[T.DELETE=4.7]="DELETE",T[T.AWAIT=4.8]="AWAIT",T[T.EXPONENTIATION=5]="EXPONENTIATION",T[T.MULTIPLICATION=5.1]="MULTIPLICATION",T[T.DIVISION=5.2]="DIVISION",T[T.MODULUS=5.3]="MODULUS",T[T.SUBTRACTION=6.1]="SUBTRACTION",T[T.ADDITION=6.2]="ADDITION",T[T.BITWISE_SHIFT=7]="BITWISE_SHIFT",T[T.RELATIONAL=8]="RELATIONAL",T[T.IN=8]="IN",T[T.INSTANCEOF=8]="INSTANCEOF",T[T.EQUALITY=9]="EQUALITY",T[T.BITWISE_AND=10]="BITWISE_AND",T[T.BITWISE_XOR=11]="BITWISE_XOR",T[T.BITWISE_OR=12]="BITWISE_OR",T[T.LOGICAL_AND=13]="LOGICAL_AND",T[T.LOGICAL_OR=14]="LOGICAL_OR",T[T.CONDITIONAL=15]="CONDITIONAL",T[T.ASSIGNMENT=16]="ASSIGNMENT",T[T.YIELD=17]="YIELD",T[T.COMMA=18]="COMMA",T[T.NONE=99]="NONE"})(M||(M={}));var Ks=class extends u.CodeGenerator$$module$build$src$core$generator{constructor(T="JavaScript"){super(T),this.ORDER_OVERRIDES=[[M.FUNCTION_CALL,M.MEMBER],[M.FUNCTION_CALL,M.FUNCTION_CALL],[M.MEMBER,M.MEMBER],[M.MEMBER,M.FUNCTION_CALL],[M.LOGICAL_NOT,M.LOGICAL_NOT],[M.MULTIPLICATION,M.MULTIPLICATION],[M.ADDITION,M.ADDITION],[M.LOGICAL_AND,M.LOGICAL_AND],[M.LOGICAL_OR,M.LOGICAL_OR]],this.isInitialized=!1;for(const v in M)T=M[v],typeof T!="string"&&(this["ORDER_"+v]=T);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(T){super.init(T),this.nameDB_?this.nameDB_.reset():this.nameDB_=new u.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(T.getVariableMap()),this.nameDB_.populateVariables(T),this.nameDB_.populateProcedures(T);const v=[];var N=u.allDeveloperVariables$$module$build$src$core$variables(T);for(let X=0;X<N.length;X++)v.push(this.nameDB_.getName(N[X],u.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(T=u.allUsedVarModels$$module$build$src$core$variables(T),N=0;N<T.length;N++)v.push(this.nameDB_.getName(T[N].getId(),u.NameType$$module$build$src$core$names.VARIABLE));v.length&&(this.definitions_.variables="var "+v.join(", ")+";"),this.isInitialized=!0}finish(T){const v=Object.values(this.definitions_);return super.finish(T),this.isInitialized=!1,this.nameDB_.reset(),v.join(`

`)+`


`+T}scrubNakedValue(T){return T+`;
`}quote_(T){return T=T.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+T+"'"}multiline_quote_(T){return T.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(T,v,N=!1){let X="";if(!T.outputConnection||!T.outputConnection.targetConnection){var ue=T.getCommentText();ue&&(ue=u.wrap$$module$build$src$core$utils$string(ue,this.COMMENT_WRAP-3),X+=this.prefixLines(ue+`
`,"// "));for(let we=0;we<T.inputList.length;we++)T.inputList[we].type===u.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(ue=T.inputList[we].connection.targetBlock())&&(ue=this.allNestedComments(ue))&&(X+=this.prefixLines(ue,"// "))}return T=T.nextConnection&&T.nextConnection.targetBlock(),N=N?"":this.blockToCode(T),X+v+N}getAdjusted(T,v,N=0,X=!1,ue=M.NONE){T.workspace.options.oneBasedIndex&&N--;const we=T.workspace.options.oneBasedIndex?"1":"0";let Ke=ue;return 0<N?Ke=M.ADDITION:0>N?Ke=M.SUBTRACTION:X&&(Ke=M.UNARY_NEGATION),T=this.valueToCode(T,v,Ke)||we,N===0&&!X?T:u.isNumber$$module$build$src$core$utils$string(T)?(T=String(Number(T)+N),X&&(T=String(-Number(T))),T):(0<N?T=`${T} + ${N}`:0>N&&(T=`${T} - ${-N}`),X&&(T=N?`-(${T})`:`-${T}`),Math.floor(ue)>=Math.floor(Ke)&&(T=`(${T})`),T)}},nn=function(T,v,N){return v==="FIRST"?"0":v==="FROM_END"?T+".length - 1 - "+N:v==="LAST"?T+".length - 1":N},yt={};yt.lists_create_empty=f,yt.lists_create_with=I,yt.lists_getIndex=te,yt.lists_getSublist=Y,yt.lists_indexOf=D,yt.lists_isEmpty=L,yt.lists_length=A,yt.lists_repeat=C,yt.lists_reverse=be,yt.lists_setIndex=se,yt.lists_sort=fe,yt.lists_split=re;var In={};In.controls_if=oe,In.controls_ifelse=oe,In.logic_boolean=nt,In.logic_compare=de,In.logic_negate=ke,In.logic_null=_t,In.logic_operation=Le,In.logic_ternary=$t;var q={};q.controls_flow_statements=wn,q.controls_for=ht,q.controls_forEach=Ct,q.controls_repeat=ot,q.controls_repeat_ext=ot,q.controls_whileUntil=Oe;var ve={};ve.math_arithmetic=ln,ve.math_atan2=rt,ve.math_change=kt,ve.math_constant=Ot,ve.math_constrain=j,ve.math_modulo=Je,ve.math_number=En,ve.math_number_property=Ft,ve.math_on_list=ee,ve.math_random_float=_e,ve.math_random_int=z,ve.math_round=it,ve.math_single=it,ve.math_trig=it;var E={};E.procedures_callnoreturn=ze,E.procedures_callreturn=lt,E.procedures_defnoreturn=je,E.procedures_defreturn=je,E.procedures_ifreturn=Et;var R=/^\s*'([^']|\\')*'\s*$/,F=function(T){return R.test(T)?[T,M.ATOMIC]:["String("+T+")",M.FUNCTION_CALL]},G=function(T,v,N){return v==="FIRST"?"0":v==="FROM_END"?T+".length - 1 - "+N:v==="LAST"?T+".length - 1":N},me={};me.text=Re,me.text_append=_n,me.text_changeCase=fn,me.text_charAt=xi,me.text_count=He,me.text_getSubstring=Nn,me.text_indexOf=ds,me.text_isEmpty=Fr,me.text_join=ft,me.text_length=hr,me.text_print=ui,me.text_prompt=Bi,me.text_prompt_ext=Bi,me.text_replace=It,me.text_reverse=Rt,me.text_trim=ci;var wt={};wt.variables_get=hi,wt.variables_set=Mn;var Gn={};Gn.variables_get_dynamic=hi,Gn.variables_set_dynamic=Mn;var Bs=new Ks,di=Object.assign({},yt,In,q,ve,E,me,wt,Gn);for(const T in di)Bs.forBlock[T]=di[T];var qn={};return qn.JavascriptGenerator=Ks,qn.Order=M,qn.javascriptGenerator=Bs,qn.__namespace__=u,qn})}(Fg)),Fg.exports}var _v=gv();const fv=Nh(_v),{JavascriptGenerator:wU,Order:NU,javascriptGenerator:MU}=fv;var Hg={exports:{}},mv=Hg.exports,CT;function $v(){return CT||(CT=1,function(h,l){(function(i,u){h.exports=u()})(mv,function(){var i=i||{Msg:Object.create(null)};return i.Msg.ADD_COMMENT="添加評論",i.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="無法刪除變數「%1」，因為這是功能「%2」定義的一部份內容",i.Msg.CHANGE_VALUE_TITLE="修改值：",i.Msg.CLEAN_UP="清理區塊",i.Msg.COLLAPSED_WARNINGS_WARNING="收合含有警告的區塊。",i.Msg.COLLAPSE_ALL="收合區塊",i.Msg.COLLAPSE_BLOCK="收合區塊",i.Msg.COLOUR_BLEND_COLOUR1="顏色 1",i.Msg.COLOUR_BLEND_COLOUR2="顏色 2",i.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",i.Msg.COLOUR_BLEND_RATIO="比例",i.Msg.COLOUR_BLEND_TITLE="混合",i.Msg.COLOUR_BLEND_TOOLTIP="用一個給定的比率（0.0-1.0）混合兩種顏色。",i.Msg.COLOUR_PICKER_HELPURL="https://zh.wikipedia.org/wiki/顏色",i.Msg.COLOUR_PICKER_TOOLTIP="從調色板中選擇一種顏色。",i.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",i.Msg.COLOUR_RANDOM_TITLE="隨機顏色",i.Msg.COLOUR_RANDOM_TOOLTIP="隨機選擇一種顏色。",i.Msg.COLOUR_RGB_BLUE="藍",i.Msg.COLOUR_RGB_GREEN="綠",i.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",i.Msg.COLOUR_RGB_RED="紅",i.Msg.COLOUR_RGB_TITLE="顏色",i.Msg.COLOUR_RGB_TOOLTIP="透過指定紅、綠、 藍色的值來建立一種顏色。所有的值必須介於 0 和 100 之間。",i.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="中斷循環",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="繼續下一個循環",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="中斷當前的循環。",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="跳過這個循環的其餘步驟，並繼續下一次的循環。",i.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="警告：此區塊僅可用於循環內。",i.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",i.Msg.CONTROLS_FOREACH_TITLE="為列表 %2 裡的每一項 %1",i.Msg.CONTROLS_FOREACH_TOOLTIP="遍歷每個清單中的項目，將變數「%1」設定到該項目中，然後執行某些陳述式。",i.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",i.Msg.CONTROLS_FOR_TITLE="循環計數 %1 從 %2 到 %3 每次增加 %4",i.Msg.CONTROLS_FOR_TOOLTIP="從起始數到結尾數中取出變數「%1」的值，按指定的時間間隔，執行指定的區塊。",i.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="添加條件到「如果」區塊。",i.Msg.CONTROLS_IF_ELSE_TOOLTIP="添加一個最終、所有條件都執行的部份到「如果」區塊中。",i.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",i.Msg.CONTROLS_IF_IF_TOOLTIP="添加、刪除或重新排列各部份以重新配置這個「如果」區塊。",i.Msg.CONTROLS_IF_MSG_ELSE="否則",i.Msg.CONTROLS_IF_MSG_ELSEIF="否則，如果",i.Msg.CONTROLS_IF_MSG_IF="如果",i.Msg.CONTROLS_IF_TOOLTIP_1="當值為 true 時，執行一些陳述式。",i.Msg.CONTROLS_IF_TOOLTIP_2="如果值為 true 就執行第一塊陳述式，否則執行第二塊。",i.Msg.CONTROLS_IF_TOOLTIP_3="如果第一個值為 true，則執行第一塊陳述式。否則，當第二個值為 true 時，則執行第二塊陳述式。",i.Msg.CONTROLS_IF_TOOLTIP_4="如果第一個值為 true，則執行第一塊陳述式。否則當第二個值為 true 時，則執行第二塊陳述式。如果前幾個敘述都不為 true，則執行最後一塊陳述式。",i.Msg.CONTROLS_REPEAT_HELPURL="https://zh.wikipedia.org/wiki/For迴圈",i.Msg.CONTROLS_REPEAT_INPUT_DO="執行",i.Msg.CONTROLS_REPEAT_TITLE="重複%1次",i.Msg.CONTROLS_REPEAT_TOOLTIP="重複執行某些陳述式多次。",i.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="重複直到",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="重複，當",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="當值為 false 時，執行一些陳述式。",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="當值為 true 時，執行一些陳述式。",i.Msg.DELETE_ALL_BLOCKS="刪除全部 %1 個區塊？",i.Msg.DELETE_BLOCK="刪除區塊",i.Msg.DELETE_VARIABLE="刪除變數「%1」",i.Msg.DELETE_VARIABLE_CONFIRMATION="刪除使用%1次的「%2」變數？",i.Msg.DELETE_X_BLOCKS="刪除%1個區塊",i.Msg.DIALOG_CANCEL="取消",i.Msg.DIALOG_OK="確定",i.Msg.DISABLE_BLOCK="停用區塊",i.Msg.DUPLICATE_BLOCK="再製",i.Msg.DUPLICATE_COMMENT="複製註解",i.Msg.ENABLE_BLOCK="啟用區塊",i.Msg.EXPAND_ALL="展開區塊",i.Msg.EXPAND_BLOCK="展開區塊",i.Msg.EXTERNAL_INPUTS="外部輸入",i.Msg.HELP="說明",i.Msg.INLINE_INPUTS="單行輸入",i.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",i.Msg.LISTS_CREATE_EMPTY_TITLE="建立空的清單",i.Msg.LISTS_CREATE_EMPTY_TOOLTIP="返回一個長度（項目數量）為 0 的清單，不包含任何資料記錄",i.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="清單",i.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="添加、刪除或重新排列各部份以重新配置這個清單區塊。",i.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_CREATE_WITH_INPUT_WITH="使用這些值建立清單",i.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="添加一個項目到清單裡。",i.Msg.LISTS_CREATE_WITH_TOOLTIP="建立一個具備任意數量項目的清單。",i.Msg.LISTS_GET_INDEX_FIRST="第一筆",i.Msg.LISTS_GET_INDEX_FROM_END="倒數第 # 筆",i.Msg.LISTS_GET_INDEX_FROM_START="#",i.Msg.LISTS_GET_INDEX_GET="取得",i.Msg.LISTS_GET_INDEX_GET_REMOVE="取得並移除",i.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",i.Msg.LISTS_GET_INDEX_LAST="最後一筆",i.Msg.LISTS_GET_INDEX_RANDOM="隨機",i.Msg.LISTS_GET_INDEX_REMOVE="移除",i.Msg.LISTS_GET_INDEX_TAIL="",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="返回清單中的第一個項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="返回在清單中指定位置的項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="返回清單中的最後一個項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="返回清單中隨機一個項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="移除並返回清單中的第一個項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="移除並返回清單中的指定位置的項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="移除並返回清單中的最後一個項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="移除並返回清單中的隨機項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="移除清單中的第一個項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="移除在清單中指定位置的項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="移除清單中的最後一個項目。",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="移除清單中隨機一個項目。",i.Msg.LISTS_GET_SUBLIST_END_FROM_END="到倒數 #",i.Msg.LISTS_GET_SUBLIST_END_FROM_START="到 #",i.Msg.LISTS_GET_SUBLIST_END_LAST="到 最後面",i.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",i.Msg.LISTS_GET_SUBLIST_START_FIRST="從最前面取得子清單",i.Msg.LISTS_GET_SUBLIST_START_FROM_END="從倒數# 取得子清單",i.Msg.LISTS_GET_SUBLIST_START_FROM_START="從 #取得子清單",i.Msg.LISTS_GET_SUBLIST_TAIL="",i.Msg.LISTS_GET_SUBLIST_TOOLTIP="複製清單中指定的部分。",i.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 是最後一個項目。",i.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 是第一個項目。",i.Msg.LISTS_INDEX_OF_FIRST="從 最前面 索引項目",i.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",i.Msg.LISTS_INDEX_OF_LAST="從 最後面 索引項目",i.Msg.LISTS_INDEX_OF_TOOLTIP="在清單中檢索是否有包含項目，如果有，返回從頭/倒數算起的索引值。如果沒有則返回 %1。",i.Msg.LISTS_INLIST="自清單",i.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",i.Msg.LISTS_ISEMPTY_TITLE="%1 值為空",i.Msg.LISTS_ISEMPTY_TOOLTIP="如果該清單為空，則返回 true。",i.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",i.Msg.LISTS_LENGTH_TITLE="長度 %1",i.Msg.LISTS_LENGTH_TOOLTIP="返回清單的長度（項目數）。",i.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_REPEAT_TITLE="使用項目 %1 重複 %2 次建立清單",i.Msg.LISTS_REPEAT_TOOLTIP="建立一個清單，項目中包含指定重複次數的值。",i.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",i.Msg.LISTS_REVERSE_MESSAGE0="反轉%1",i.Msg.LISTS_REVERSE_TOOLTIP="反轉清單的複製內容。",i.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",i.Msg.LISTS_SET_INDEX_INPUT_TO="為",i.Msg.LISTS_SET_INDEX_INSERT="添加",i.Msg.LISTS_SET_INDEX_SET="設定",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="添加一個項目到清單中的第一個位置。",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="添加一個項目到清單中的指定位置。",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="添加一個項目到清單中的最後一個位置。",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="添加一個項目到清單中的隨機位置。",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="設定清單中的第一個項目。",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="設定清單中指定位置的項目。",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="設定清單中的最後一個項目。",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="設定清單中隨機一個項目。",i.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",i.Msg.LISTS_SORT_ORDER_ASCENDING="升序",i.Msg.LISTS_SORT_ORDER_DESCENDING="降序",i.Msg.LISTS_SORT_TITLE="排列 %1 %2 %3",i.Msg.LISTS_SORT_TOOLTIP="排序清單的複製內容。",i.Msg.LISTS_SORT_TYPE_IGNORECASE="依字母排序，忽略大小寫",i.Msg.LISTS_SORT_TYPE_NUMERIC="依數字",i.Msg.LISTS_SORT_TYPE_TEXT="依字母",i.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",i.Msg.LISTS_SPLIT_LIST_FROM_TEXT="從文本製作清單",i.Msg.LISTS_SPLIT_TEXT_FROM_LIST="從清單拆出文本",i.Msg.LISTS_SPLIT_TOOLTIP_JOIN="串起清單項目成一個文本，並用分隔符號分開。",i.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="將文本變成清單項目，按分隔符號拆分。",i.Msg.LISTS_SPLIT_WITH_DELIMITER="用分隔符",i.Msg.LOGIC_BOOLEAN_FALSE="假",i.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",i.Msg.LOGIC_BOOLEAN_TOOLTIP="返回真或假。",i.Msg.LOGIC_BOOLEAN_TRUE="真",i.Msg.LOGIC_COMPARE_HELPURL="https://zh.wikipedia.org/wiki/不等",i.Msg.LOGIC_COMPARE_TOOLTIP_EQ="如果兩個輸入的結果相等，返回 true。",i.Msg.LOGIC_COMPARE_TOOLTIP_GT="如果第一個輸入結果大於第二個，返回 true。",i.Msg.LOGIC_COMPARE_TOOLTIP_GTE="如果第一個輸入結果大於或等於第二個，返回 true。",i.Msg.LOGIC_COMPARE_TOOLTIP_LT="如果第一個輸入結果比第二個小，返回 true。",i.Msg.LOGIC_COMPARE_TOOLTIP_LTE="如果第一個輸入結果小於或等於第二個，返回 true。",i.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="如果兩個輸入的結果不相等，返回 true。",i.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",i.Msg.LOGIC_NEGATE_TITLE="%1 不成立",i.Msg.LOGIC_NEGATE_TOOLTIP="如果輸入結果是 false，則返回 true；如果輸入結果是 true，則返回 false。",i.Msg.LOGIC_NULL="空",i.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",i.Msg.LOGIC_NULL_TOOLTIP="返回空值。",i.Msg.LOGIC_OPERATION_AND="且",i.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",i.Msg.LOGIC_OPERATION_OR="或",i.Msg.LOGIC_OPERATION_TOOLTIP_AND="如果兩個輸入結果都為 true，則返回 true。",i.Msg.LOGIC_OPERATION_TOOLTIP_OR="如果至少一個輸入結果為 true，返回 true。",i.Msg.LOGIC_TERNARY_CONDITION="測試",i.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",i.Msg.LOGIC_TERNARY_IF_FALSE="如果為假",i.Msg.LOGIC_TERNARY_IF_TRUE="如果為真",i.Msg.LOGIC_TERNARY_TOOLTIP="檢查「測試」中的條件。如果條件為真，將返回「如果為真」的值；否則，返回「如果為假」的值。",i.Msg.MATH_ADDITION_SYMBOL="+",i.Msg.MATH_ARITHMETIC_HELPURL="https://zh.wikipedia.org/wiki/算術",i.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="返回兩個數字的總和。",i.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="傳回兩數之商。",i.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="傳回兩數之差。",i.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="返回兩個數字的乘積。",i.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="返回以第一個數值為底數，以第二個數值為冪的結果。",i.Msg.MATH_ATAN2_HELPURL="https://zh.wikipedia.org/wiki/Atan2",i.Msg.MATH_ATAN2_TITLE="X:%1 Y:%2 的 Atan2",i.Msg.MATH_ATAN2_TOOLTIP="回傳點（X，Y）從 -180 至 180 度的反正切值。",i.Msg.MATH_CHANGE_HELPURL="https://zh.wikipedia.org/wiki/加法",i.Msg.MATH_CHANGE_TITLE="修改 %1 自 %2",i.Msg.MATH_CHANGE_TOOLTIP="將數字加到變數「%1」。",i.Msg.MATH_CONSTANT_HELPURL="https://zh.wikipedia.org/wiki/數學常數",i.Msg.MATH_CONSTANT_TOOLTIP="返回一個的常見常量： π (3.141......)，e (2.718...)、 φ (1.618...)、 開方(2) (1.414......)、 開方(½) (0.707......) 或 ∞ （無窮大）。",i.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",i.Msg.MATH_CONSTRAIN_TITLE="限制數字 %1 介於（低）%2 到（高）%3",i.Msg.MATH_CONSTRAIN_TOOLTIP="限制數字介於兩個指定的數字之間（包含）。",i.Msg.MATH_DIVISION_SYMBOL="÷",i.Msg.MATH_IS_DIVISIBLE_BY="可被整除",i.Msg.MATH_IS_EVEN="是偶數",i.Msg.MATH_IS_NEGATIVE="是負數",i.Msg.MATH_IS_ODD="是奇數",i.Msg.MATH_IS_POSITIVE="是正值",i.Msg.MATH_IS_PRIME="是質數",i.Msg.MATH_IS_TOOLTIP="如果數字是偶數，奇數，非負整數，正數、 負數，或如果它是可被某數字整除，則返回 true 或 false。",i.Msg.MATH_IS_WHOLE="是整數",i.Msg.MATH_MODULO_HELPURL="https://zh.wikipedia.org/wiki/模除",i.Msg.MATH_MODULO_TITLE="%1 除以 %2 的餘數",i.Msg.MATH_MODULO_TOOLTIP="返回兩個數字相除的餘數。",i.Msg.MATH_MULTIPLICATION_SYMBOL="×",i.Msg.MATH_NUMBER_HELPURL="https://zh.wikipedia.org/wiki/數",i.Msg.MATH_NUMBER_TOOLTIP="數字",i.Msg.MATH_ONLIST_HELPURL="",i.Msg.MATH_ONLIST_OPERATOR_AVERAGE="清單的平均數",i.Msg.MATH_ONLIST_OPERATOR_MAX="清單的最大數字",i.Msg.MATH_ONLIST_OPERATOR_MEDIAN="清單的中位數",i.Msg.MATH_ONLIST_OPERATOR_MIN="清單的最小數字",i.Msg.MATH_ONLIST_OPERATOR_MODE="清單中的眾數",i.Msg.MATH_ONLIST_OPERATOR_RANDOM="清單中的隨機一項",i.Msg.MATH_ONLIST_OPERATOR_STD_DEV="清單的標準差",i.Msg.MATH_ONLIST_OPERATOR_SUM="清單中數值的和",i.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="返回清單中數值的平均值（算術平均值）。",i.Msg.MATH_ONLIST_TOOLTIP_MAX="返回清單中最大的數字。",i.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="返回清單中數值的中位數。",i.Msg.MATH_ONLIST_TOOLTIP_MIN="返回清單中最小的數字。",i.Msg.MATH_ONLIST_TOOLTIP_MODE="返回一個清單中的最常見的項目列表。",i.Msg.MATH_ONLIST_TOOLTIP_RANDOM="從清單中返回一個隨機的項目。",i.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="返回清單中數字的標準差。",i.Msg.MATH_ONLIST_TOOLTIP_SUM="返回清單中的所有數字的總和。",i.Msg.MATH_POWER_SYMBOL="^",i.Msg.MATH_RANDOM_FLOAT_HELPURL="https://zh.wikipedia.org/wiki/隨機數生成器",i.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="隨機取分數",i.Msg.MATH_RANDOM_FLOAT_TOOLTIP="在 0.0（包含）和 1.0（不包含）之間隨機取一個分數。",i.Msg.MATH_RANDOM_INT_HELPURL="https://zh.wikipedia.org/wiki/隨機數生成器",i.Msg.MATH_RANDOM_INT_TITLE="隨機取整數 %1 到 %2",i.Msg.MATH_RANDOM_INT_TOOLTIP="在指定二個數之間隨機取一個整數（包含）。",i.Msg.MATH_ROUND_HELPURL="https://zh.wikipedia.org/wiki/數值簡化",i.Msg.MATH_ROUND_OPERATOR_ROUND="四捨五入",i.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="無條件捨去",i.Msg.MATH_ROUND_OPERATOR_ROUNDUP="無條件進位",i.Msg.MATH_ROUND_TOOLTIP="上捨入或下捨入數字",i.Msg.MATH_SINGLE_HELPURL="https://zh.wikipedia.org/wiki/平方根",i.Msg.MATH_SINGLE_OP_ABSOLUTE="絕對值",i.Msg.MATH_SINGLE_OP_ROOT="開根號",i.Msg.MATH_SINGLE_TOOLTIP_ABS="返回指定數字的絕對值。",i.Msg.MATH_SINGLE_TOOLTIP_EXP="返回e的指定數字次冪。",i.Msg.MATH_SINGLE_TOOLTIP_LN="返回指定數字的自然對數。",i.Msg.MATH_SINGLE_TOOLTIP_LOG10="返回指定數字的對數。",i.Msg.MATH_SINGLE_TOOLTIP_NEG="返回指定數字的相反數。",i.Msg.MATH_SINGLE_TOOLTIP_POW10="返回10的指定數字次冪。",i.Msg.MATH_SINGLE_TOOLTIP_ROOT="返回指定數字的平方根。",i.Msg.MATH_SUBTRACTION_SYMBOL="-",i.Msg.MATH_TRIG_ACOS="反餘弦",i.Msg.MATH_TRIG_ASIN="反正弦",i.Msg.MATH_TRIG_ATAN="反正切",i.Msg.MATH_TRIG_COS="餘弦",i.Msg.MATH_TRIG_HELPURL="https://zh.wikipedia.org/wiki/三角函數",i.Msg.MATH_TRIG_SIN="正弦",i.Msg.MATH_TRIG_TAN="正切",i.Msg.MATH_TRIG_TOOLTIP_ACOS="返回指定數字的反餘弦值。",i.Msg.MATH_TRIG_TOOLTIP_ASIN="返回指定角度的反正弦值(非弧度）。",i.Msg.MATH_TRIG_TOOLTIP_ATAN="返回指定數字的反正切值。",i.Msg.MATH_TRIG_TOOLTIP_COS="返回指定角度的餘弦值(非弧度）。",i.Msg.MATH_TRIG_TOOLTIP_SIN="返回指定角度的正弦值(非弧度）。",i.Msg.MATH_TRIG_TOOLTIP_TAN="返回指定角度的正切值(非弧度）。",i.Msg.NEW_COLOUR_VARIABLE="建立顏色變數…",i.Msg.NEW_NUMBER_VARIABLE="建立數值變數……",i.Msg.NEW_STRING_VARIABLE="建立字串變數……",i.Msg.NEW_VARIABLE="建立變數…",i.Msg.NEW_VARIABLE_TITLE="新變數名稱：",i.Msg.NEW_VARIABLE_TYPE_TITLE="新變數類型：",i.Msg.ORDINAL_NUMBER_SUFFIX="",i.Msg.PROCEDURES_ALLOW_STATEMENTS="允許陳述式",i.Msg.PROCEDURES_BEFORE_PARAMS="與：",i.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://zh.wikipedia.org/wiki/子程式",i.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="執行使用者定義的函式「%1」。",i.Msg.PROCEDURES_CALLRETURN_HELPURL="https://zh.wikipedia.org/wiki/%E5%AD%90%E7%A8%8B%E5%BA%8F",i.Msg.PROCEDURES_CALLRETURN_TOOLTIP="執行使用者定義的函式「%1」，並使用它的回傳值。",i.Msg.PROCEDURES_CALL_BEFORE_PARAMS="與：",i.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="無法執行使用者定義的函式「%1」，因為定義區塊已停用。",i.Msg.PROCEDURES_CREATE_DO="建立「%1」",i.Msg.PROCEDURES_DEFNORETURN_COMMENT="描述此函式...",i.Msg.PROCEDURES_DEFNORETURN_DO="",i.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://zh.wikipedia.org/wiki/子程式",i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="做些什麼",i.Msg.PROCEDURES_DEFNORETURN_TITLE="到",i.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="創建一個無回傳值的函式。",i.Msg.PROCEDURES_DEFRETURN_HELPURL="https://zh.wikipedia.org/wiki/子程式",i.Msg.PROCEDURES_DEFRETURN_RETURN="返回",i.Msg.PROCEDURES_DEFRETURN_TOOLTIP="創建一個有回傳值的的函式。",i.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="警告: 此函式中有重複的參數。",i.Msg.PROCEDURES_HIGHLIGHT_DEF="反白顯示函式定義",i.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",i.Msg.PROCEDURES_IFRETURN_TOOLTIP="如果值為 true，則返回第二個值。",i.Msg.PROCEDURES_IFRETURN_WARNING="警告：這個區塊只可以在定義函式時使用。",i.Msg.PROCEDURES_MUTATORARG_TITLE="輸入名稱：",i.Msg.PROCEDURES_MUTATORARG_TOOLTIP="添加一個輸入區塊到函式。",i.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="輸入",i.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="添加、刪除或重新排列此函式的輸入。",i.Msg.REDO="重做",i.Msg.REMOVE_COMMENT="移除註解",i.Msg.RENAME_VARIABLE="重新命名變數...",i.Msg.RENAME_VARIABLE_TITLE="將所有「%1」變數重新命名為：",i.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_APPEND_TITLE="至 %1 套用文字 %2",i.Msg.TEXT_APPEND_TOOLTIP="添加一些文字到變數「%1」之後。",i.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",i.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="轉成英文小寫",i.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="轉成英文首字大寫",i.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="轉成英文大寫",i.Msg.TEXT_CHANGECASE_TOOLTIP="使用不同的大小寫複製這段文字。",i.Msg.TEXT_CHARAT_FIRST="取得第一個字母",i.Msg.TEXT_CHARAT_FROM_END="取得倒數第 # 個字母",i.Msg.TEXT_CHARAT_FROM_START="取得第 # 個字母",i.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",i.Msg.TEXT_CHARAT_LAST="取得最後一個字母",i.Msg.TEXT_CHARAT_RANDOM="取得隨機字母",i.Msg.TEXT_CHARAT_TAIL="",i.Msg.TEXT_CHARAT_TITLE="在文字 %1 %2",i.Msg.TEXT_CHARAT_TOOLTIP="回傳位於指定位置的字母。",i.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",i.Msg.TEXT_COUNT_MESSAGE0="計算%1在%2裡出現的次數",i.Msg.TEXT_COUNT_TOOLTIP="計算在一段文本中，某個部分文本重複出現了多少次。",i.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="添加一個項目到字串中。",i.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="串連",i.Msg.TEXT_CREATE_JOIN_TOOLTIP="添加、刪除或重新排列各部份以重新配置這個文字區塊。",i.Msg.TEXT_GET_SUBSTRING_END_FROM_END="到倒數第 # 個字母",i.Msg.TEXT_GET_SUBSTRING_END_FROM_START="到第 # 個字母",i.Msg.TEXT_GET_SUBSTRING_END_LAST="到最後一個字母",i.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",i.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="在字串",i.Msg.TEXT_GET_SUBSTRING_START_FIRST="取得子字串從第一個字母",i.Msg.TEXT_GET_SUBSTRING_START_FROM_END="取得子字串從倒數第 # 個字母",i.Msg.TEXT_GET_SUBSTRING_START_FROM_START="取得子字串從第 # 個字母",i.Msg.TEXT_GET_SUBSTRING_TAIL="",i.Msg.TEXT_GET_SUBSTRING_TOOLTIP="返回指定的部分文字。",i.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",i.Msg.TEXT_INDEXOF_OPERATOR_FIRST="從 最前面 索引字串",i.Msg.TEXT_INDEXOF_OPERATOR_LAST="從 最後面 索引字串",i.Msg.TEXT_INDEXOF_TITLE="在文字 %1 %2 %3",i.Msg.TEXT_INDEXOF_TOOLTIP="在字串1中檢索是否有包含字串2，如果有，返回從頭/倒數算起的索引值。如果沒有則返回 %1。",i.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",i.Msg.TEXT_ISEMPTY_TITLE="%1 為空",i.Msg.TEXT_ISEMPTY_TOOLTIP="如果提供的字串為空，則返回 true。",i.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",i.Msg.TEXT_JOIN_TITLE_CREATEWITH="字串組合",i.Msg.TEXT_JOIN_TOOLTIP="通過連接任意數量的項目來建立一串文字。",i.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_LENGTH_TITLE="%1的長度",i.Msg.TEXT_LENGTH_TOOLTIP="返回這串文字的字母數（包含空格）。",i.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",i.Msg.TEXT_PRINT_TITLE="輸出 %1",i.Msg.TEXT_PRINT_TOOLTIP="輸出指定的文字、 數字或其他值。",i.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="要求用戶輸入數字",i.Msg.TEXT_PROMPT_TOOLTIP_TEXT="要求用戶輸入文字",i.Msg.TEXT_PROMPT_TYPE_NUMBER="要求輸入數字，並顯示提示訊息",i.Msg.TEXT_PROMPT_TYPE_TEXT="要求輸入文字，並顯示提示訊息",i.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",i.Msg.TEXT_REPLACE_MESSAGE0="在%3以%2取代%1",i.Msg.TEXT_REPLACE_TOOLTIP="取代在內容裡的全部某些文字。",i.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",i.Msg.TEXT_REVERSE_MESSAGE0="反轉%1",i.Msg.TEXT_REVERSE_TOOLTIP="反轉排序在文字裡的字元。",i.Msg.TEXT_TEXT_HELPURL="https://zh.wikipedia.org/wiki/字串",i.Msg.TEXT_TEXT_TOOLTIP="一個字母、一個字詞或一行字",i.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",i.Msg.TEXT_TRIM_OPERATOR_BOTH="消除兩側空格",i.Msg.TEXT_TRIM_OPERATOR_LEFT="消除左側空格",i.Msg.TEXT_TRIM_OPERATOR_RIGHT="消除右側空格",i.Msg.TEXT_TRIM_TOOLTIP="複製這段文字，同時刪除兩端多餘的空格。",i.Msg.TODAY="今天",i.Msg.UNDO="還原",i.Msg.UNNAMED_KEY="未命名",i.Msg.VARIABLES_DEFAULT_NAME="項目",i.Msg.VARIABLES_GET_CREATE_SET="建立「賦值 %1」",i.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",i.Msg.VARIABLES_GET_TOOLTIP="返回此變數的值。",i.Msg.VARIABLES_SET="賦值 %1 成 %2",i.Msg.VARIABLES_SET_CREATE_GET="建立「取得 %1」",i.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",i.Msg.VARIABLES_SET_TOOLTIP="設定此變數，好和輸入結果相等。",i.Msg.VARIABLE_ALREADY_EXISTS="已存在變數「%1」。",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="已存在名為「%1」，且用於其它類型「%2」的變數。",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="已存在名為「%1」的變數，該變數作為程序「%2」的參數使用。",i.Msg.WORKSPACE_ARIA_LABEL="Blockly工作區",i.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="來說些事情...",i.Msg.CONTROLS_FOREACH_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_FOR_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=i.Msg.CONTROLS_IF_MSG_ELSEIF,i.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=i.Msg.CONTROLS_IF_MSG_ELSE,i.Msg.CONTROLS_IF_IF_TITLE_IF=i.Msg.CONTROLS_IF_MSG_IF,i.Msg.CONTROLS_IF_MSG_THEN=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.LISTS_CREATE_WITH_ITEM_TITLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.MATH_CHANGE_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.PROCEDURES_DEFRETURN_COMMENT=i.Msg.PROCEDURES_DEFNORETURN_COMMENT,i.Msg.PROCEDURES_DEFRETURN_DO=i.Msg.PROCEDURES_DEFNORETURN_DO,i.Msg.PROCEDURES_DEFRETURN_PROCEDURE=i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,i.Msg.PROCEDURES_DEFRETURN_TITLE=i.Msg.PROCEDURES_DEFNORETURN_TITLE,i.Msg.TEXT_APPEND_VARIABLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.COLOUR_HUE="20",i.Msg.LISTS_HUE="260",i.Msg.LOGIC_HUE="210",i.Msg.LOOPS_HUE="120",i.Msg.MATH_HUE="230",i.Msg.PROCEDURES_HUE="290",i.Msg.TEXTS_HUE="160",i.Msg.VARIABLES_DYNAMIC_HUE="310",i.Msg.VARIABLES_HUE="330",i.Msg})}(Hg)),Hg.exports}var Tv=$v();const Ev=Nh(Tv),{LOGIC_HUE:Iv,LOOPS_HUE:bv,MATH_HUE:Sv,TEXTS_HUE:Ov,LISTS_HUE:Rv,COLOUR_HUE:yv,VARIABLES_HUE:vv,VARIABLES_DYNAMIC_HUE:Cv,PROCEDURES_HUE:Lv,VARIABLES_DEFAULT_NAME:Av,UNNAMED_KEY:kv,TODAY:wv,DUPLICATE_BLOCK:Nv,ADD_COMMENT:Mv,REMOVE_COMMENT:Dv,DUPLICATE_COMMENT:Pv,EXTERNAL_INPUTS:xv,INLINE_INPUTS:Bv,DELETE_BLOCK:Uv,DELETE_X_BLOCKS:Fv,DELETE_ALL_BLOCKS:Hv,CLEAN_UP:Gv,COLLAPSE_BLOCK:Vv,COLLAPSE_ALL:Wv,EXPAND_BLOCK:zv,EXPAND_ALL:Xv,DISABLE_BLOCK:jv,ENABLE_BLOCK:Yv,HELP:Kv,UNDO:Jv,REDO:qv,CHANGE_VALUE_TITLE:Qv,RENAME_VARIABLE:Zv,RENAME_VARIABLE_TITLE:eC,NEW_VARIABLE:tC,NEW_STRING_VARIABLE:nC,NEW_NUMBER_VARIABLE:sC,NEW_COLOUR_VARIABLE:iC,NEW_VARIABLE_TYPE_TITLE:rC,NEW_VARIABLE_TITLE:oC,VARIABLE_ALREADY_EXISTS:lC,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:aC,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:cC,DELETE_VARIABLE_CONFIRMATION:uC,CANNOT_DELETE_VARIABLE_PROCEDURE:hC,DELETE_VARIABLE:dC,COLOUR_PICKER_HELPURL:pC,COLOUR_PICKER_TOOLTIP:gC,COLOUR_RANDOM_HELPURL:_C,COLOUR_RANDOM_TITLE:fC,COLOUR_RANDOM_TOOLTIP:mC,COLOUR_RGB_HELPURL:$C,COLOUR_RGB_TITLE:TC,COLOUR_RGB_RED:EC,COLOUR_RGB_GREEN:IC,COLOUR_RGB_BLUE:bC,COLOUR_RGB_TOOLTIP:SC,COLOUR_BLEND_HELPURL:OC,COLOUR_BLEND_TITLE:RC,COLOUR_BLEND_COLOUR1:yC,COLOUR_BLEND_COLOUR2:vC,COLOUR_BLEND_RATIO:CC,COLOUR_BLEND_TOOLTIP:LC,CONTROLS_REPEAT_HELPURL:AC,CONTROLS_REPEAT_TITLE:kC,CONTROLS_REPEAT_INPUT_DO:wC,CONTROLS_REPEAT_TOOLTIP:NC,CONTROLS_WHILEUNTIL_HELPURL:MC,CONTROLS_WHILEUNTIL_INPUT_DO:DC,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:PC,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:xC,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:BC,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:UC,CONTROLS_FOR_HELPURL:FC,CONTROLS_FOR_TOOLTIP:HC,CONTROLS_FOR_TITLE:GC,CONTROLS_FOR_INPUT_DO:VC,CONTROLS_FOREACH_HELPURL:WC,CONTROLS_FOREACH_TITLE:zC,CONTROLS_FOREACH_INPUT_DO:XC,CONTROLS_FOREACH_TOOLTIP:jC,CONTROLS_FLOW_STATEMENTS_HELPURL:YC,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:KC,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:JC,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:qC,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:QC,CONTROLS_FLOW_STATEMENTS_WARNING:ZC,CONTROLS_IF_HELPURL:eL,CONTROLS_IF_TOOLTIP_1:tL,CONTROLS_IF_TOOLTIP_2:nL,CONTROLS_IF_TOOLTIP_3:sL,CONTROLS_IF_TOOLTIP_4:iL,CONTROLS_IF_MSG_IF:rL,CONTROLS_IF_MSG_ELSEIF:oL,CONTROLS_IF_MSG_ELSE:lL,CONTROLS_IF_MSG_THEN:aL,CONTROLS_IF_IF_TITLE_IF:cL,CONTROLS_IF_IF_TOOLTIP:uL,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:hL,CONTROLS_IF_ELSEIF_TOOLTIP:dL,CONTROLS_IF_ELSE_TITLE_ELSE:pL,CONTROLS_IF_ELSE_TOOLTIP:gL,LOGIC_COMPARE_HELPURL:_L,LOGIC_COMPARE_TOOLTIP_EQ:fL,LOGIC_COMPARE_TOOLTIP_NEQ:mL,LOGIC_COMPARE_TOOLTIP_LT:$L,LOGIC_COMPARE_TOOLTIP_LTE:TL,LOGIC_COMPARE_TOOLTIP_GT:EL,LOGIC_COMPARE_TOOLTIP_GTE:IL,LOGIC_OPERATION_HELPURL:bL,LOGIC_OPERATION_TOOLTIP_AND:SL,LOGIC_OPERATION_AND:OL,LOGIC_OPERATION_TOOLTIP_OR:RL,LOGIC_OPERATION_OR:yL,LOGIC_NEGATE_HELPURL:vL,LOGIC_NEGATE_TITLE:CL,LOGIC_NEGATE_TOOLTIP:LL,LOGIC_BOOLEAN_HELPURL:AL,LOGIC_BOOLEAN_TRUE:kL,LOGIC_BOOLEAN_FALSE:wL,LOGIC_BOOLEAN_TOOLTIP:NL,LOGIC_NULL_HELPURL:ML,LOGIC_NULL:DL,LOGIC_NULL_TOOLTIP:PL,LOGIC_TERNARY_HELPURL:xL,LOGIC_TERNARY_CONDITION:BL,LOGIC_TERNARY_IF_TRUE:UL,LOGIC_TERNARY_IF_FALSE:FL,LOGIC_TERNARY_TOOLTIP:HL,MATH_NUMBER_HELPURL:GL,MATH_NUMBER_TOOLTIP:VL,MATH_ADDITION_SYMBOL:WL,MATH_SUBTRACTION_SYMBOL:zL,MATH_DIVISION_SYMBOL:XL,MATH_MULTIPLICATION_SYMBOL:jL,MATH_POWER_SYMBOL:YL,MATH_TRIG_SIN:KL,MATH_TRIG_COS:JL,MATH_TRIG_TAN:qL,MATH_TRIG_ASIN:QL,MATH_TRIG_ACOS:ZL,MATH_TRIG_ATAN:eA,MATH_ARITHMETIC_HELPURL:tA,MATH_ARITHMETIC_TOOLTIP_ADD:nA,MATH_ARITHMETIC_TOOLTIP_MINUS:sA,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:iA,MATH_ARITHMETIC_TOOLTIP_DIVIDE:rA,MATH_ARITHMETIC_TOOLTIP_POWER:oA,MATH_SINGLE_HELPURL:lA,MATH_SINGLE_OP_ROOT:aA,MATH_SINGLE_TOOLTIP_ROOT:cA,MATH_SINGLE_OP_ABSOLUTE:uA,MATH_SINGLE_TOOLTIP_ABS:hA,MATH_SINGLE_TOOLTIP_NEG:dA,MATH_SINGLE_TOOLTIP_LN:pA,MATH_SINGLE_TOOLTIP_LOG10:gA,MATH_SINGLE_TOOLTIP_EXP:_A,MATH_SINGLE_TOOLTIP_POW10:fA,MATH_TRIG_HELPURL:mA,MATH_TRIG_TOOLTIP_SIN:$A,MATH_TRIG_TOOLTIP_COS:TA,MATH_TRIG_TOOLTIP_TAN:EA,MATH_TRIG_TOOLTIP_ASIN:IA,MATH_TRIG_TOOLTIP_ACOS:bA,MATH_TRIG_TOOLTIP_ATAN:SA,MATH_CONSTANT_HELPURL:OA,MATH_CONSTANT_TOOLTIP:RA,MATH_IS_EVEN:yA,MATH_IS_ODD:vA,MATH_IS_PRIME:CA,MATH_IS_WHOLE:LA,MATH_IS_POSITIVE:AA,MATH_IS_NEGATIVE:kA,MATH_IS_DIVISIBLE_BY:wA,MATH_IS_TOOLTIP:NA,MATH_CHANGE_HELPURL:MA,MATH_CHANGE_TITLE:DA,MATH_CHANGE_TITLE_ITEM:PA,MATH_CHANGE_TOOLTIP:xA,MATH_ROUND_HELPURL:BA,MATH_ROUND_TOOLTIP:UA,MATH_ROUND_OPERATOR_ROUND:FA,MATH_ROUND_OPERATOR_ROUNDUP:HA,MATH_ROUND_OPERATOR_ROUNDDOWN:GA,MATH_ONLIST_HELPURL:VA,MATH_ONLIST_OPERATOR_SUM:WA,MATH_ONLIST_TOOLTIP_SUM:zA,MATH_ONLIST_OPERATOR_MIN:XA,MATH_ONLIST_TOOLTIP_MIN:jA,MATH_ONLIST_OPERATOR_MAX:YA,MATH_ONLIST_TOOLTIP_MAX:KA,MATH_ONLIST_OPERATOR_AVERAGE:JA,MATH_ONLIST_TOOLTIP_AVERAGE:qA,MATH_ONLIST_OPERATOR_MEDIAN:QA,MATH_ONLIST_TOOLTIP_MEDIAN:ZA,MATH_ONLIST_OPERATOR_MODE:ek,MATH_ONLIST_TOOLTIP_MODE:tk,MATH_ONLIST_OPERATOR_STD_DEV:nk,MATH_ONLIST_TOOLTIP_STD_DEV:sk,MATH_ONLIST_OPERATOR_RANDOM:ik,MATH_ONLIST_TOOLTIP_RANDOM:rk,MATH_MODULO_HELPURL:ok,MATH_MODULO_TITLE:lk,MATH_MODULO_TOOLTIP:ak,MATH_CONSTRAIN_HELPURL:ck,MATH_CONSTRAIN_TITLE:uk,MATH_CONSTRAIN_TOOLTIP:hk,MATH_RANDOM_INT_HELPURL:dk,MATH_RANDOM_INT_TITLE:pk,MATH_RANDOM_INT_TOOLTIP:gk,MATH_RANDOM_FLOAT_HELPURL:_k,MATH_RANDOM_FLOAT_TITLE_RANDOM:fk,MATH_RANDOM_FLOAT_TOOLTIP:mk,MATH_ATAN2_HELPURL:$k,MATH_ATAN2_TITLE:Tk,MATH_ATAN2_TOOLTIP:Ek,TEXT_TEXT_HELPURL:Ik,TEXT_TEXT_TOOLTIP:bk,TEXT_JOIN_HELPURL:Sk,TEXT_JOIN_TITLE_CREATEWITH:Ok,TEXT_JOIN_TOOLTIP:Rk,TEXT_CREATE_JOIN_TITLE_JOIN:yk,TEXT_CREATE_JOIN_TOOLTIP:vk,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:Ck,TEXT_CREATE_JOIN_ITEM_TOOLTIP:Lk,TEXT_APPEND_HELPURL:Ak,TEXT_APPEND_TITLE:kk,TEXT_APPEND_VARIABLE:wk,TEXT_APPEND_TOOLTIP:Nk,TEXT_LENGTH_HELPURL:Mk,TEXT_LENGTH_TITLE:Dk,TEXT_LENGTH_TOOLTIP:Pk,TEXT_ISEMPTY_HELPURL:xk,TEXT_ISEMPTY_TITLE:Bk,TEXT_ISEMPTY_TOOLTIP:Uk,TEXT_INDEXOF_HELPURL:Fk,TEXT_INDEXOF_TOOLTIP:Hk,TEXT_INDEXOF_TITLE:Gk,TEXT_INDEXOF_OPERATOR_FIRST:Vk,TEXT_INDEXOF_OPERATOR_LAST:Wk,TEXT_CHARAT_HELPURL:zk,TEXT_CHARAT_TITLE:Xk,TEXT_CHARAT_FROM_START:jk,TEXT_CHARAT_FROM_END:Yk,TEXT_CHARAT_FIRST:Kk,TEXT_CHARAT_LAST:Jk,TEXT_CHARAT_RANDOM:qk,TEXT_CHARAT_TAIL:Qk,TEXT_CHARAT_TOOLTIP:Zk,TEXT_GET_SUBSTRING_TOOLTIP:ew,TEXT_GET_SUBSTRING_HELPURL:tw,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:nw,TEXT_GET_SUBSTRING_START_FROM_START:sw,TEXT_GET_SUBSTRING_START_FROM_END:iw,TEXT_GET_SUBSTRING_START_FIRST:rw,TEXT_GET_SUBSTRING_END_FROM_START:ow,TEXT_GET_SUBSTRING_END_FROM_END:lw,TEXT_GET_SUBSTRING_END_LAST:aw,TEXT_GET_SUBSTRING_TAIL:cw,TEXT_CHANGECASE_HELPURL:uw,TEXT_CHANGECASE_TOOLTIP:hw,TEXT_CHANGECASE_OPERATOR_UPPERCASE:dw,TEXT_CHANGECASE_OPERATOR_LOWERCASE:pw,TEXT_CHANGECASE_OPERATOR_TITLECASE:gw,TEXT_TRIM_HELPURL:_w,TEXT_TRIM_TOOLTIP:fw,TEXT_TRIM_OPERATOR_BOTH:mw,TEXT_TRIM_OPERATOR_LEFT:$w,TEXT_TRIM_OPERATOR_RIGHT:Tw,TEXT_PRINT_HELPURL:Ew,TEXT_PRINT_TITLE:Iw,TEXT_PRINT_TOOLTIP:bw,TEXT_PROMPT_HELPURL:Sw,TEXT_PROMPT_TYPE_TEXT:Ow,TEXT_PROMPT_TYPE_NUMBER:Rw,TEXT_PROMPT_TOOLTIP_NUMBER:yw,TEXT_PROMPT_TOOLTIP_TEXT:vw,TEXT_COUNT_MESSAGE0:Cw,TEXT_COUNT_HELPURL:Lw,TEXT_COUNT_TOOLTIP:Aw,TEXT_REPLACE_MESSAGE0:kw,TEXT_REPLACE_HELPURL:ww,TEXT_REPLACE_TOOLTIP:Nw,TEXT_REVERSE_MESSAGE0:Mw,TEXT_REVERSE_HELPURL:Dw,TEXT_REVERSE_TOOLTIP:Pw,LISTS_CREATE_EMPTY_HELPURL:xw,LISTS_CREATE_EMPTY_TITLE:Bw,LISTS_CREATE_EMPTY_TOOLTIP:Uw,LISTS_CREATE_WITH_HELPURL:Fw,LISTS_CREATE_WITH_TOOLTIP:Hw,LISTS_CREATE_WITH_INPUT_WITH:Gw,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:Vw,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:Ww,LISTS_CREATE_WITH_ITEM_TITLE:zw,LISTS_CREATE_WITH_ITEM_TOOLTIP:Xw,LISTS_REPEAT_HELPURL:jw,LISTS_REPEAT_TOOLTIP:Yw,LISTS_REPEAT_TITLE:Kw,LISTS_LENGTH_HELPURL:Jw,LISTS_LENGTH_TITLE:qw,LISTS_LENGTH_TOOLTIP:Qw,LISTS_ISEMPTY_HELPURL:Zw,LISTS_ISEMPTY_TITLE:eN,LISTS_ISEMPTY_TOOLTIP:tN,LISTS_INLIST:nN,LISTS_INDEX_OF_HELPURL:sN,LISTS_INDEX_OF_INPUT_IN_LIST:iN,LISTS_INDEX_OF_FIRST:rN,LISTS_INDEX_OF_LAST:oN,LISTS_INDEX_OF_TOOLTIP:lN,LISTS_GET_INDEX_HELPURL:aN,LISTS_GET_INDEX_GET:cN,LISTS_GET_INDEX_GET_REMOVE:uN,LISTS_GET_INDEX_REMOVE:hN,LISTS_GET_INDEX_FROM_START:dN,LISTS_GET_INDEX_FROM_END:pN,LISTS_GET_INDEX_FIRST:gN,LISTS_GET_INDEX_LAST:_N,LISTS_GET_INDEX_RANDOM:fN,LISTS_GET_INDEX_TAIL:mN,LISTS_GET_INDEX_INPUT_IN_LIST:$N,LISTS_INDEX_FROM_START_TOOLTIP:TN,LISTS_INDEX_FROM_END_TOOLTIP:EN,LISTS_GET_INDEX_TOOLTIP_GET_FROM:IN,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:bN,LISTS_GET_INDEX_TOOLTIP_GET_LAST:SN,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:ON,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:RN,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:yN,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:vN,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:CN,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:LN,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:AN,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:kN,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:wN,LISTS_SET_INDEX_HELPURL:NN,LISTS_SET_INDEX_INPUT_IN_LIST:MN,LISTS_SET_INDEX_SET:DN,LISTS_SET_INDEX_INSERT:PN,LISTS_SET_INDEX_INPUT_TO:xN,LISTS_SET_INDEX_TOOLTIP_SET_FROM:BN,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:UN,LISTS_SET_INDEX_TOOLTIP_SET_LAST:FN,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:HN,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:GN,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:VN,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:WN,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:zN,LISTS_GET_SUBLIST_HELPURL:XN,LISTS_GET_SUBLIST_INPUT_IN_LIST:jN,LISTS_GET_SUBLIST_START_FROM_START:YN,LISTS_GET_SUBLIST_START_FROM_END:KN,LISTS_GET_SUBLIST_START_FIRST:JN,LISTS_GET_SUBLIST_END_FROM_START:qN,LISTS_GET_SUBLIST_END_FROM_END:QN,LISTS_GET_SUBLIST_END_LAST:ZN,LISTS_GET_SUBLIST_TAIL:eM,LISTS_GET_SUBLIST_TOOLTIP:tM,LISTS_SORT_HELPURL:nM,LISTS_SORT_TITLE:sM,LISTS_SORT_TOOLTIP:iM,LISTS_SORT_ORDER_ASCENDING:rM,LISTS_SORT_ORDER_DESCENDING:oM,LISTS_SORT_TYPE_NUMERIC:lM,LISTS_SORT_TYPE_TEXT:aM,LISTS_SORT_TYPE_IGNORECASE:cM,LISTS_SPLIT_HELPURL:uM,LISTS_SPLIT_LIST_FROM_TEXT:hM,LISTS_SPLIT_TEXT_FROM_LIST:dM,LISTS_SPLIT_WITH_DELIMITER:pM,LISTS_SPLIT_TOOLTIP_SPLIT:gM,LISTS_SPLIT_TOOLTIP_JOIN:_M,LISTS_REVERSE_HELPURL:fM,LISTS_REVERSE_MESSAGE0:mM,LISTS_REVERSE_TOOLTIP:$M,ORDINAL_NUMBER_SUFFIX:TM,VARIABLES_GET_HELPURL:EM,VARIABLES_GET_TOOLTIP:IM,VARIABLES_GET_CREATE_SET:bM,VARIABLES_SET_HELPURL:SM,VARIABLES_SET:OM,VARIABLES_SET_TOOLTIP:RM,VARIABLES_SET_CREATE_GET:yM,PROCEDURES_DEFNORETURN_HELPURL:vM,PROCEDURES_DEFNORETURN_TITLE:CM,PROCEDURES_DEFNORETURN_PROCEDURE:LM,PROCEDURES_BEFORE_PARAMS:AM,PROCEDURES_CALL_BEFORE_PARAMS:kM,PROCEDURES_CALL_DISABLED_DEF_WARNING:wM,PROCEDURES_DEFNORETURN_DO:NM,PROCEDURES_DEFNORETURN_TOOLTIP:MM,PROCEDURES_DEFNORETURN_COMMENT:DM,PROCEDURES_DEFRETURN_HELPURL:PM,PROCEDURES_DEFRETURN_TITLE:xM,PROCEDURES_DEFRETURN_PROCEDURE:BM,PROCEDURES_DEFRETURN_DO:UM,PROCEDURES_DEFRETURN_COMMENT:FM,PROCEDURES_DEFRETURN_RETURN:HM,PROCEDURES_DEFRETURN_TOOLTIP:GM,PROCEDURES_ALLOW_STATEMENTS:VM,PROCEDURES_DEF_DUPLICATE_WARNING:WM,PROCEDURES_CALLNORETURN_HELPURL:zM,PROCEDURES_CALLNORETURN_TOOLTIP:XM,PROCEDURES_CALLRETURN_HELPURL:jM,PROCEDURES_CALLRETURN_TOOLTIP:YM,PROCEDURES_MUTATORCONTAINER_TITLE:KM,PROCEDURES_MUTATORCONTAINER_TOOLTIP:JM,PROCEDURES_MUTATORARG_TITLE:qM,PROCEDURES_MUTATORARG_TOOLTIP:QM,PROCEDURES_HIGHLIGHT_DEF:ZM,PROCEDURES_CREATE_DO:eD,PROCEDURES_IFRETURN_TOOLTIP:tD,PROCEDURES_IFRETURN_HELPURL:nD,PROCEDURES_IFRETURN_WARNING:sD,WORKSPACE_COMMENT_DEFAULT_TEXT:iD,WORKSPACE_ARIA_LABEL:rD,COLLAPSED_WARNINGS_WARNING:oD,DIALOG_OK:lD,DIALOG_CANCEL:aD}=Ev,PE=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:Mv,CANNOT_DELETE_VARIABLE_PROCEDURE:hC,CHANGE_VALUE_TITLE:Qv,CLEAN_UP:Gv,COLLAPSED_WARNINGS_WARNING:oD,COLLAPSE_ALL:Wv,COLLAPSE_BLOCK:Vv,COLOUR_BLEND_COLOUR1:yC,COLOUR_BLEND_COLOUR2:vC,COLOUR_BLEND_HELPURL:OC,COLOUR_BLEND_RATIO:CC,COLOUR_BLEND_TITLE:RC,COLOUR_BLEND_TOOLTIP:LC,COLOUR_HUE:yv,COLOUR_PICKER_HELPURL:pC,COLOUR_PICKER_TOOLTIP:gC,COLOUR_RANDOM_HELPURL:_C,COLOUR_RANDOM_TITLE:fC,COLOUR_RANDOM_TOOLTIP:mC,COLOUR_RGB_BLUE:bC,COLOUR_RGB_GREEN:IC,COLOUR_RGB_HELPURL:$C,COLOUR_RGB_RED:EC,COLOUR_RGB_TITLE:TC,COLOUR_RGB_TOOLTIP:SC,CONTROLS_FLOW_STATEMENTS_HELPURL:YC,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:KC,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:JC,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:qC,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:QC,CONTROLS_FLOW_STATEMENTS_WARNING:ZC,CONTROLS_FOREACH_HELPURL:WC,CONTROLS_FOREACH_INPUT_DO:XC,CONTROLS_FOREACH_TITLE:zC,CONTROLS_FOREACH_TOOLTIP:jC,CONTROLS_FOR_HELPURL:FC,CONTROLS_FOR_INPUT_DO:VC,CONTROLS_FOR_TITLE:GC,CONTROLS_FOR_TOOLTIP:HC,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:hL,CONTROLS_IF_ELSEIF_TOOLTIP:dL,CONTROLS_IF_ELSE_TITLE_ELSE:pL,CONTROLS_IF_ELSE_TOOLTIP:gL,CONTROLS_IF_HELPURL:eL,CONTROLS_IF_IF_TITLE_IF:cL,CONTROLS_IF_IF_TOOLTIP:uL,CONTROLS_IF_MSG_ELSE:lL,CONTROLS_IF_MSG_ELSEIF:oL,CONTROLS_IF_MSG_IF:rL,CONTROLS_IF_MSG_THEN:aL,CONTROLS_IF_TOOLTIP_1:tL,CONTROLS_IF_TOOLTIP_2:nL,CONTROLS_IF_TOOLTIP_3:sL,CONTROLS_IF_TOOLTIP_4:iL,CONTROLS_REPEAT_HELPURL:AC,CONTROLS_REPEAT_INPUT_DO:wC,CONTROLS_REPEAT_TITLE:kC,CONTROLS_REPEAT_TOOLTIP:NC,CONTROLS_WHILEUNTIL_HELPURL:MC,CONTROLS_WHILEUNTIL_INPUT_DO:DC,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:xC,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:PC,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:UC,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:BC,DELETE_ALL_BLOCKS:Hv,DELETE_BLOCK:Uv,DELETE_VARIABLE:dC,DELETE_VARIABLE_CONFIRMATION:uC,DELETE_X_BLOCKS:Fv,DIALOG_CANCEL:aD,DIALOG_OK:lD,DISABLE_BLOCK:jv,DUPLICATE_BLOCK:Nv,DUPLICATE_COMMENT:Pv,ENABLE_BLOCK:Yv,EXPAND_ALL:Xv,EXPAND_BLOCK:zv,EXTERNAL_INPUTS:xv,HELP:Kv,INLINE_INPUTS:Bv,LISTS_CREATE_EMPTY_HELPURL:xw,LISTS_CREATE_EMPTY_TITLE:Bw,LISTS_CREATE_EMPTY_TOOLTIP:Uw,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:Vw,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:Ww,LISTS_CREATE_WITH_HELPURL:Fw,LISTS_CREATE_WITH_INPUT_WITH:Gw,LISTS_CREATE_WITH_ITEM_TITLE:zw,LISTS_CREATE_WITH_ITEM_TOOLTIP:Xw,LISTS_CREATE_WITH_TOOLTIP:Hw,LISTS_GET_INDEX_FIRST:gN,LISTS_GET_INDEX_FROM_END:pN,LISTS_GET_INDEX_FROM_START:dN,LISTS_GET_INDEX_GET:cN,LISTS_GET_INDEX_GET_REMOVE:uN,LISTS_GET_INDEX_HELPURL:aN,LISTS_GET_INDEX_INPUT_IN_LIST:$N,LISTS_GET_INDEX_LAST:_N,LISTS_GET_INDEX_RANDOM:fN,LISTS_GET_INDEX_REMOVE:hN,LISTS_GET_INDEX_TAIL:mN,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:bN,LISTS_GET_INDEX_TOOLTIP_GET_FROM:IN,LISTS_GET_INDEX_TOOLTIP_GET_LAST:SN,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:ON,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:yN,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:RN,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:vN,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:CN,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:AN,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:LN,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:kN,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:wN,LISTS_GET_SUBLIST_END_FROM_END:QN,LISTS_GET_SUBLIST_END_FROM_START:qN,LISTS_GET_SUBLIST_END_LAST:ZN,LISTS_GET_SUBLIST_HELPURL:XN,LISTS_GET_SUBLIST_INPUT_IN_LIST:jN,LISTS_GET_SUBLIST_START_FIRST:JN,LISTS_GET_SUBLIST_START_FROM_END:KN,LISTS_GET_SUBLIST_START_FROM_START:YN,LISTS_GET_SUBLIST_TAIL:eM,LISTS_GET_SUBLIST_TOOLTIP:tM,LISTS_HUE:Rv,LISTS_INDEX_FROM_END_TOOLTIP:EN,LISTS_INDEX_FROM_START_TOOLTIP:TN,LISTS_INDEX_OF_FIRST:rN,LISTS_INDEX_OF_HELPURL:sN,LISTS_INDEX_OF_INPUT_IN_LIST:iN,LISTS_INDEX_OF_LAST:oN,LISTS_INDEX_OF_TOOLTIP:lN,LISTS_INLIST:nN,LISTS_ISEMPTY_HELPURL:Zw,LISTS_ISEMPTY_TITLE:eN,LISTS_ISEMPTY_TOOLTIP:tN,LISTS_LENGTH_HELPURL:Jw,LISTS_LENGTH_TITLE:qw,LISTS_LENGTH_TOOLTIP:Qw,LISTS_REPEAT_HELPURL:jw,LISTS_REPEAT_TITLE:Kw,LISTS_REPEAT_TOOLTIP:Yw,LISTS_REVERSE_HELPURL:fM,LISTS_REVERSE_MESSAGE0:mM,LISTS_REVERSE_TOOLTIP:$M,LISTS_SET_INDEX_HELPURL:NN,LISTS_SET_INDEX_INPUT_IN_LIST:MN,LISTS_SET_INDEX_INPUT_TO:xN,LISTS_SET_INDEX_INSERT:PN,LISTS_SET_INDEX_SET:DN,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:VN,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:GN,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:WN,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:zN,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:UN,LISTS_SET_INDEX_TOOLTIP_SET_FROM:BN,LISTS_SET_INDEX_TOOLTIP_SET_LAST:FN,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:HN,LISTS_SORT_HELPURL:nM,LISTS_SORT_ORDER_ASCENDING:rM,LISTS_SORT_ORDER_DESCENDING:oM,LISTS_SORT_TITLE:sM,LISTS_SORT_TOOLTIP:iM,LISTS_SORT_TYPE_IGNORECASE:cM,LISTS_SORT_TYPE_NUMERIC:lM,LISTS_SORT_TYPE_TEXT:aM,LISTS_SPLIT_HELPURL:uM,LISTS_SPLIT_LIST_FROM_TEXT:hM,LISTS_SPLIT_TEXT_FROM_LIST:dM,LISTS_SPLIT_TOOLTIP_JOIN:_M,LISTS_SPLIT_TOOLTIP_SPLIT:gM,LISTS_SPLIT_WITH_DELIMITER:pM,LOGIC_BOOLEAN_FALSE:wL,LOGIC_BOOLEAN_HELPURL:AL,LOGIC_BOOLEAN_TOOLTIP:NL,LOGIC_BOOLEAN_TRUE:kL,LOGIC_COMPARE_HELPURL:_L,LOGIC_COMPARE_TOOLTIP_EQ:fL,LOGIC_COMPARE_TOOLTIP_GT:EL,LOGIC_COMPARE_TOOLTIP_GTE:IL,LOGIC_COMPARE_TOOLTIP_LT:$L,LOGIC_COMPARE_TOOLTIP_LTE:TL,LOGIC_COMPARE_TOOLTIP_NEQ:mL,LOGIC_HUE:Iv,LOGIC_NEGATE_HELPURL:vL,LOGIC_NEGATE_TITLE:CL,LOGIC_NEGATE_TOOLTIP:LL,LOGIC_NULL:DL,LOGIC_NULL_HELPURL:ML,LOGIC_NULL_TOOLTIP:PL,LOGIC_OPERATION_AND:OL,LOGIC_OPERATION_HELPURL:bL,LOGIC_OPERATION_OR:yL,LOGIC_OPERATION_TOOLTIP_AND:SL,LOGIC_OPERATION_TOOLTIP_OR:RL,LOGIC_TERNARY_CONDITION:BL,LOGIC_TERNARY_HELPURL:xL,LOGIC_TERNARY_IF_FALSE:FL,LOGIC_TERNARY_IF_TRUE:UL,LOGIC_TERNARY_TOOLTIP:HL,LOOPS_HUE:bv,MATH_ADDITION_SYMBOL:WL,MATH_ARITHMETIC_HELPURL:tA,MATH_ARITHMETIC_TOOLTIP_ADD:nA,MATH_ARITHMETIC_TOOLTIP_DIVIDE:rA,MATH_ARITHMETIC_TOOLTIP_MINUS:sA,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:iA,MATH_ARITHMETIC_TOOLTIP_POWER:oA,MATH_ATAN2_HELPURL:$k,MATH_ATAN2_TITLE:Tk,MATH_ATAN2_TOOLTIP:Ek,MATH_CHANGE_HELPURL:MA,MATH_CHANGE_TITLE:DA,MATH_CHANGE_TITLE_ITEM:PA,MATH_CHANGE_TOOLTIP:xA,MATH_CONSTANT_HELPURL:OA,MATH_CONSTANT_TOOLTIP:RA,MATH_CONSTRAIN_HELPURL:ck,MATH_CONSTRAIN_TITLE:uk,MATH_CONSTRAIN_TOOLTIP:hk,MATH_DIVISION_SYMBOL:XL,MATH_HUE:Sv,MATH_IS_DIVISIBLE_BY:wA,MATH_IS_EVEN:yA,MATH_IS_NEGATIVE:kA,MATH_IS_ODD:vA,MATH_IS_POSITIVE:AA,MATH_IS_PRIME:CA,MATH_IS_TOOLTIP:NA,MATH_IS_WHOLE:LA,MATH_MODULO_HELPURL:ok,MATH_MODULO_TITLE:lk,MATH_MODULO_TOOLTIP:ak,MATH_MULTIPLICATION_SYMBOL:jL,MATH_NUMBER_HELPURL:GL,MATH_NUMBER_TOOLTIP:VL,MATH_ONLIST_HELPURL:VA,MATH_ONLIST_OPERATOR_AVERAGE:JA,MATH_ONLIST_OPERATOR_MAX:YA,MATH_ONLIST_OPERATOR_MEDIAN:QA,MATH_ONLIST_OPERATOR_MIN:XA,MATH_ONLIST_OPERATOR_MODE:ek,MATH_ONLIST_OPERATOR_RANDOM:ik,MATH_ONLIST_OPERATOR_STD_DEV:nk,MATH_ONLIST_OPERATOR_SUM:WA,MATH_ONLIST_TOOLTIP_AVERAGE:qA,MATH_ONLIST_TOOLTIP_MAX:KA,MATH_ONLIST_TOOLTIP_MEDIAN:ZA,MATH_ONLIST_TOOLTIP_MIN:jA,MATH_ONLIST_TOOLTIP_MODE:tk,MATH_ONLIST_TOOLTIP_RANDOM:rk,MATH_ONLIST_TOOLTIP_STD_DEV:sk,MATH_ONLIST_TOOLTIP_SUM:zA,MATH_POWER_SYMBOL:YL,MATH_RANDOM_FLOAT_HELPURL:_k,MATH_RANDOM_FLOAT_TITLE_RANDOM:fk,MATH_RANDOM_FLOAT_TOOLTIP:mk,MATH_RANDOM_INT_HELPURL:dk,MATH_RANDOM_INT_TITLE:pk,MATH_RANDOM_INT_TOOLTIP:gk,MATH_ROUND_HELPURL:BA,MATH_ROUND_OPERATOR_ROUND:FA,MATH_ROUND_OPERATOR_ROUNDDOWN:GA,MATH_ROUND_OPERATOR_ROUNDUP:HA,MATH_ROUND_TOOLTIP:UA,MATH_SINGLE_HELPURL:lA,MATH_SINGLE_OP_ABSOLUTE:uA,MATH_SINGLE_OP_ROOT:aA,MATH_SINGLE_TOOLTIP_ABS:hA,MATH_SINGLE_TOOLTIP_EXP:_A,MATH_SINGLE_TOOLTIP_LN:pA,MATH_SINGLE_TOOLTIP_LOG10:gA,MATH_SINGLE_TOOLTIP_NEG:dA,MATH_SINGLE_TOOLTIP_POW10:fA,MATH_SINGLE_TOOLTIP_ROOT:cA,MATH_SUBTRACTION_SYMBOL:zL,MATH_TRIG_ACOS:ZL,MATH_TRIG_ASIN:QL,MATH_TRIG_ATAN:eA,MATH_TRIG_COS:JL,MATH_TRIG_HELPURL:mA,MATH_TRIG_SIN:KL,MATH_TRIG_TAN:qL,MATH_TRIG_TOOLTIP_ACOS:bA,MATH_TRIG_TOOLTIP_ASIN:IA,MATH_TRIG_TOOLTIP_ATAN:SA,MATH_TRIG_TOOLTIP_COS:TA,MATH_TRIG_TOOLTIP_SIN:$A,MATH_TRIG_TOOLTIP_TAN:EA,NEW_COLOUR_VARIABLE:iC,NEW_NUMBER_VARIABLE:sC,NEW_STRING_VARIABLE:nC,NEW_VARIABLE:tC,NEW_VARIABLE_TITLE:oC,NEW_VARIABLE_TYPE_TITLE:rC,ORDINAL_NUMBER_SUFFIX:TM,PROCEDURES_ALLOW_STATEMENTS:VM,PROCEDURES_BEFORE_PARAMS:AM,PROCEDURES_CALLNORETURN_HELPURL:zM,PROCEDURES_CALLNORETURN_TOOLTIP:XM,PROCEDURES_CALLRETURN_HELPURL:jM,PROCEDURES_CALLRETURN_TOOLTIP:YM,PROCEDURES_CALL_BEFORE_PARAMS:kM,PROCEDURES_CALL_DISABLED_DEF_WARNING:wM,PROCEDURES_CREATE_DO:eD,PROCEDURES_DEFNORETURN_COMMENT:DM,PROCEDURES_DEFNORETURN_DO:NM,PROCEDURES_DEFNORETURN_HELPURL:vM,PROCEDURES_DEFNORETURN_PROCEDURE:LM,PROCEDURES_DEFNORETURN_TITLE:CM,PROCEDURES_DEFNORETURN_TOOLTIP:MM,PROCEDURES_DEFRETURN_COMMENT:FM,PROCEDURES_DEFRETURN_DO:UM,PROCEDURES_DEFRETURN_HELPURL:PM,PROCEDURES_DEFRETURN_PROCEDURE:BM,PROCEDURES_DEFRETURN_RETURN:HM,PROCEDURES_DEFRETURN_TITLE:xM,PROCEDURES_DEFRETURN_TOOLTIP:GM,PROCEDURES_DEF_DUPLICATE_WARNING:WM,PROCEDURES_HIGHLIGHT_DEF:ZM,PROCEDURES_HUE:Lv,PROCEDURES_IFRETURN_HELPURL:nD,PROCEDURES_IFRETURN_TOOLTIP:tD,PROCEDURES_IFRETURN_WARNING:sD,PROCEDURES_MUTATORARG_TITLE:qM,PROCEDURES_MUTATORARG_TOOLTIP:QM,PROCEDURES_MUTATORCONTAINER_TITLE:KM,PROCEDURES_MUTATORCONTAINER_TOOLTIP:JM,REDO:qv,REMOVE_COMMENT:Dv,RENAME_VARIABLE:Zv,RENAME_VARIABLE_TITLE:eC,TEXTS_HUE:Ov,TEXT_APPEND_HELPURL:Ak,TEXT_APPEND_TITLE:kk,TEXT_APPEND_TOOLTIP:Nk,TEXT_APPEND_VARIABLE:wk,TEXT_CHANGECASE_HELPURL:uw,TEXT_CHANGECASE_OPERATOR_LOWERCASE:pw,TEXT_CHANGECASE_OPERATOR_TITLECASE:gw,TEXT_CHANGECASE_OPERATOR_UPPERCASE:dw,TEXT_CHANGECASE_TOOLTIP:hw,TEXT_CHARAT_FIRST:Kk,TEXT_CHARAT_FROM_END:Yk,TEXT_CHARAT_FROM_START:jk,TEXT_CHARAT_HELPURL:zk,TEXT_CHARAT_LAST:Jk,TEXT_CHARAT_RANDOM:qk,TEXT_CHARAT_TAIL:Qk,TEXT_CHARAT_TITLE:Xk,TEXT_CHARAT_TOOLTIP:Zk,TEXT_COUNT_HELPURL:Lw,TEXT_COUNT_MESSAGE0:Cw,TEXT_COUNT_TOOLTIP:Aw,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:Ck,TEXT_CREATE_JOIN_ITEM_TOOLTIP:Lk,TEXT_CREATE_JOIN_TITLE_JOIN:yk,TEXT_CREATE_JOIN_TOOLTIP:vk,TEXT_GET_SUBSTRING_END_FROM_END:lw,TEXT_GET_SUBSTRING_END_FROM_START:ow,TEXT_GET_SUBSTRING_END_LAST:aw,TEXT_GET_SUBSTRING_HELPURL:tw,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:nw,TEXT_GET_SUBSTRING_START_FIRST:rw,TEXT_GET_SUBSTRING_START_FROM_END:iw,TEXT_GET_SUBSTRING_START_FROM_START:sw,TEXT_GET_SUBSTRING_TAIL:cw,TEXT_GET_SUBSTRING_TOOLTIP:ew,TEXT_INDEXOF_HELPURL:Fk,TEXT_INDEXOF_OPERATOR_FIRST:Vk,TEXT_INDEXOF_OPERATOR_LAST:Wk,TEXT_INDEXOF_TITLE:Gk,TEXT_INDEXOF_TOOLTIP:Hk,TEXT_ISEMPTY_HELPURL:xk,TEXT_ISEMPTY_TITLE:Bk,TEXT_ISEMPTY_TOOLTIP:Uk,TEXT_JOIN_HELPURL:Sk,TEXT_JOIN_TITLE_CREATEWITH:Ok,TEXT_JOIN_TOOLTIP:Rk,TEXT_LENGTH_HELPURL:Mk,TEXT_LENGTH_TITLE:Dk,TEXT_LENGTH_TOOLTIP:Pk,TEXT_PRINT_HELPURL:Ew,TEXT_PRINT_TITLE:Iw,TEXT_PRINT_TOOLTIP:bw,TEXT_PROMPT_HELPURL:Sw,TEXT_PROMPT_TOOLTIP_NUMBER:yw,TEXT_PROMPT_TOOLTIP_TEXT:vw,TEXT_PROMPT_TYPE_NUMBER:Rw,TEXT_PROMPT_TYPE_TEXT:Ow,TEXT_REPLACE_HELPURL:ww,TEXT_REPLACE_MESSAGE0:kw,TEXT_REPLACE_TOOLTIP:Nw,TEXT_REVERSE_HELPURL:Dw,TEXT_REVERSE_MESSAGE0:Mw,TEXT_REVERSE_TOOLTIP:Pw,TEXT_TEXT_HELPURL:Ik,TEXT_TEXT_TOOLTIP:bk,TEXT_TRIM_HELPURL:_w,TEXT_TRIM_OPERATOR_BOTH:mw,TEXT_TRIM_OPERATOR_LEFT:$w,TEXT_TRIM_OPERATOR_RIGHT:Tw,TEXT_TRIM_TOOLTIP:fw,TODAY:wv,UNDO:Jv,UNNAMED_KEY:kv,VARIABLES_DEFAULT_NAME:Av,VARIABLES_DYNAMIC_HUE:Cv,VARIABLES_GET_CREATE_SET:bM,VARIABLES_GET_HELPURL:EM,VARIABLES_GET_TOOLTIP:IM,VARIABLES_HUE:vv,VARIABLES_SET:OM,VARIABLES_SET_CREATE_GET:yM,VARIABLES_SET_HELPURL:SM,VARIABLES_SET_TOOLTIP:RM,VARIABLE_ALREADY_EXISTS:lC,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:aC,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:cC,WORKSPACE_ARIA_LABEL:rD,WORKSPACE_COMMENT_DEFAULT_TEXT:iD},Symbol.toStringTag,{value:"Module"})),xE={kind:"categoryToolbox",contents:[{kind:"category",name:"邏輯",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"迴圈",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext"},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for"},{kind:"block",type:"controls_forEach"},{kind:"block",type:"controls_flow_statements"}]},{kind:"category",name:"數學",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",gap:"32"},{kind:"block",type:"math_arithmetic"},{kind:"block",type:"math_single"},{kind:"block",type:"math_trig"},{kind:"block",type:"math_atan2"},{kind:"block",type:"math_constant"},{kind:"block",type:"math_number_property"},{kind:"block",type:"math_round"},{kind:"block",type:"math_on_list"},{kind:"block",type:"math_modulo"},{kind:"block",type:"math_constrain"},{kind:"block",type:"math_random_int"},{kind:"block",type:"math_random_float"}]},{kind:"category",name:"文字",categorystyle:"text_category",contents:[{kind:"block",type:"text"},{kind:"block",type:"text_join"},{kind:"block",type:"text_append"},{kind:"block",type:"text_length"},{kind:"block",type:"text_isEmpty"},{kind:"block",type:"text_indexOf"},{kind:"block",type:"text_charAt"},{kind:"block",type:"text_getSubstring"},{kind:"block",type:"text_changeCase"},{kind:"block",type:"text_trim"},{kind:"block",type:"text_count"},{kind:"block",type:"text_replace"},{kind:"block",type:"text_reverse"},{kind:"block",type:"text_print"},{kind:"block",type:"text_prompt_ext"}]},{kind:"category",name:"列表",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_create_with"},{kind:"block",type:"lists_repeat"},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_indexOf"},{kind:"block",type:"lists_getIndex"},{kind:"block",type:"lists_setIndex"},{kind:"block",type:"lists_getSublist"},{kind:"block",type:"lists_split"},{kind:"block",type:"lists_sort"},{kind:"block",type:"lists_reverse"}]},{kind:"category",name:"變數",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"函數",categorystyle:"procedure_category",custom:"PROCEDURE"}]};ME(PE);function cD(){const[h,l]=he.useState("");return Ae.jsx("div",{className:"container mt-4",children:Ae.jsxs("div",{className:"card bg-dark text-white",children:[Ae.jsx("div",{className:"card-header",children:"Blockly Workspace"}),Ae.jsx("div",{className:"card-body",style:{height:"500px",width:"100%"},children:Ae.jsx(Yf,{toolboxConfiguration:xE,initialXml:h,onXmlChange:i=>l(i),className:"blockly-workspace"})})]})})}ME(PE);function uD(){const[h,l]=he.useState("");return Ae.jsx("div",{className:"container mt-4",children:Ae.jsxs("div",{className:"card bg-dark text-white",children:[Ae.jsx("div",{className:"card-header",children:"Blockly Workspace"}),Ae.jsx("div",{className:"card-body",style:{height:"500px",width:"100%"},children:Ae.jsx(Yf,{toolboxConfiguration:xE,initialXml:h,onXmlChange:i=>l(i),className:"blockly-workspace"})})]})})}const hD="data:image/svg+xml,%3csvg%20viewBox='0%200%20192%20192'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20定義遮罩，使背景區域具有圓角%20--%3e%3cmask%20id='rounded-mask'%3e%3crect%20x='0'%20y='0'%20width='192'%20height='192'%20rx='50'%20ry='50'%20fill='white'/%3e%3c/mask%3e%3c!--%20應用遮罩，使白色區域變透明%20--%3e%3cg%20mask='url(%23rounded-mask)'%3e%3crect%20x='0'%20y='0'%20width='192'%20height='192'%20fill='white'/%3e%3c!--%20背景填充白色%20--%3e%3cg%20transform='translate(23.500002%20-7.912111)'%3e%3c!--%20獨立的藍色形狀%20--%3e%3cg%20id='blue_shape'%3e%3cpath%20d='m20.140625%2032c-6.707027-.005532-12.1461566%205.433598-12.140625%2012.140625v104.718755c-.00553%206.70703%205.433598%2012.14615%2012.140625%2012.14062h4.726563c2.330826%208.74182%2010.245751%2014.82585%2019.292968%2014.83008%209.041406-.0113%2016.94802-6.09387%2019.277344-14.83008h4.841797%2015.726562c4.418278%200%208-3.58172%208-8v-113l-8-8z'%20fill='%23346C99'%20/%3e%3c/g%3e%3c!--%20獨立的黃色形狀%20--%3e%3cg%20id='yellow_shape'%3e%3cpath%20d='m80.007812%2031.994141c-.010665%2017.702746-.007812%2035.402384-.007812%2053.115234l-16.630859-9.398437c-2.397357-1.352749-5.36425.37623-5.369141%203.128906v40.621096c.0049%202.75267%202.971786%204.48165%205.369141%203.1289l16.630859-9.40039v37.5918%202.21875%208h8%201.425781%2036.054689c6.36195-.00026%2011.51927-5.15758%2011.51953-11.51953v-106.000001c-.02178-6.346694-5.1728-11.480247-11.51953-11.480469z'%20fill='%23FFCE3D'%20/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c!--%20旋轉135度後延伸10px的位置，繪製白色圓點%20--%3e%3ccircle%20cx='45'%20cy='38'%20r='7'%20fill='white'/%3e%3crect%20x='30'%20y='50'%20width='50'%20height='5'%20fill='white'/%3e%3ccircle%20cx='147'%20cy='139'%20r='7'%20fill='white'/%3e%3crect%20x='112'%20y='122'%20width='50'%20height='5'%20fill='white'/%3e%3c/svg%3e",dD=()=>Ae.jsx("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark",children:Ae.jsxs("div",{className:"container-fluid",children:[Ae.jsxs(pu,{className:"navbar-brand",to:"/",children:[Ae.jsx("img",{src:hD,style:{width:"40px",marginRight:"10px"}}),Ae.jsx("span",{className:"navbar-title",children:"PyBlocks 積木式編程"})]}),Ae.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Ae.jsx("span",{className:"navbar-toggler-icon"})}),Ae.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Ae.jsxs("div",{className:"navbar-nav",children:[Ae.jsx("div",{className:"nav-item-left",children:Ae.jsx(pu,{className:"nav-link",to:"/",children:"首頁"})}),Ae.jsx("div",{className:"nav-item-left",children:Ae.jsx(pu,{className:"nav-link",to:"/course",children:"課程"})}),Ae.jsx("div",{className:"nav-item-left",children:Ae.jsx(pu,{className:"nav-link",to:"/support",children:"申請"})})]}),Ae.jsxs("div",{className:"navbar-nav",children:[Ae.jsx("div",{className:"nav-item-right",children:Ae.jsx(pu,{className:"nav-link",to:"/login",children:"登入"})}),Ae.jsx("div",{className:"nav-item-right",children:Ae.jsx(pu,{className:"nav-link",to:"/signup",children:"註冊"})})]})]})]})}),pD=()=>(console.log(ur),Ae.jsxs("div",{className:"container mt-5",children:[Ae.jsx("h1",{children:"用戶頁面"}),Ae.jsx("h2",{children:"這是用戶的個人頁面。"}),Ae.jsx("h3",{children:"使用者資訊："}),Ae.jsx("h4",{children:ur==null?void 0:ur.currentUser.displayName}),Ae.jsx("h4",{children:ur==null?void 0:ur.currentUser.email}),Ae.jsx("img",{src:ur==null?void 0:ur.currentUser.photoURL,alt:""})]})),gD=()=>{var h;return(h=ur==null?void 0:ur.currentUser)!=null&&h.displayName?Ae.jsx(Sb,{}):Ae.jsx(BT,{to:"/"})};function _D(){return Ae.jsxs("div",{className:"App",children:[Ae.jsx(dD,{}),Ae.jsxs(Rb,{children:[Ae.jsx(il,{path:"/",element:Ae.jsx(rS,{})}),Ae.jsx(il,{path:"/course",element:Ae.jsx(oS,{})}),Ae.jsx(il,{path:"/support",element:Ae.jsx(lS,{})}),Ae.jsx(il,{path:"/login",element:Ae.jsx(Gy,{})}),Ae.jsx(il,{path:"/signup",element:Ae.jsx(Vy,{})}),Ae.jsx(il,{path:"/student",element:Ae.jsx(cD,{})}),Ae.jsx(il,{path:"/teacher",element:Ae.jsx(uD,{})}),Ae.jsx(il,{element:Ae.jsx(gD,{}),children:Ae.jsx(il,{path:"/user",element:Ae.jsx(pD,{})})}),Ae.jsx(il,{path:"/*",element:Ae.jsx(BT,{to:"/"})})," "]})]})}wI.createRoot(document.getElementById("root")).render(Ae.jsx(he.StrictMode,{children:Ae.jsx(Kb,{basename:"/Project-41041225-React",children:Ae.jsx(_D,{})})}));
